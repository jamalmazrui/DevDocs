<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>PostgreSQL Notes for Professionals</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Aptos Display";}
@font-face
	{font-family:Aptos;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"DejaVu Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:.2pt;
	margin-left:0in;
	text-indent:.5pt;
	line-height:110%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:.15pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:26.0pt;
	font-family:"Calibri",sans-serif;
	color:#336790;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.65pt;
	margin-left:0in;
	text-indent:.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:18.0pt;
	font-family:"Calibri",sans-serif;
	color:#336790;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:13.25pt;
	margin-left:1.5pt;
	text-indent:-.5pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Calibri",sans-serif;
	color:#336790;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Calibri",sans-serif;
	color:#336790;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri",sans-serif;
	color:black;
	font-weight:bold;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:#65B4B4;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:#FF4B4B;}
.MsoChpDefault
	{font-size:12.0pt;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:23.8pt 41.95pt 51.9pt 28.35pt;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:595.3pt 841.9pt;
	margin:23.8pt 28.5pt 42.5pt 28.35pt;}
div.WordSection2
	{page:WordSection2;}
@page WordSection3
	{size:595.3pt 841.9pt;
	margin:63.75pt 1.0in 34.15pt 1.0in;}
div.WordSection3
	{page:WordSection3;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal style='margin-top:0in;margin-right:553.35pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'><img width=792
height=1120 src="PostgreSQL%20Notes%20for%20Professionals_files/image001.jpg"><br
clear=ALL>
<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.0pt;margin-left:
-.25pt'>Contents</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:4.3pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>About</span></u></b> 
...................................................................................................................................................................................
1</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 1: Getting started with PostgreSQL</span></u></b> 
..................................................................................................
2</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.0pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 1.1: Installing
PostgreSQL on Windows</span></u> 
...........................................................................................................
2</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.35pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 1.2: Install
PostgreSQL from Source on Linux</span></u> 
...............................................................................................
3</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.85pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 1.3: Installation on
GNU+Linux</span></u> 
.........................................................................................................................
4</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.2pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 1.4: How to install
PostgreSQL via MacPorts on OSX</span></u> 
...................................................................................
5</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.35pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 1.5: Install
postgresql with brew on Mac</span></u> 
........................................................................................................
7</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.1pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 1.6: Postgres.app
for Mac OSX</span></u> 
........................................................................................................................
7</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.65pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 2: Data Types</span></u></b> 
...............................................................................................................................................
8</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.15pt;margin-bottom:.2pt;
margin-left:20.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'><u><span style='color:#336790'>Section 2.1: Numeric
Types</span></u> 
...........................................................................................................................................
8 <u><span style='color:#336790'>Section 2.2: Date/ Time Types</span></u> 
....................................................................................................................................
8 <u><span style='color:#336790'>Section 2.3: Geometric Types</span></u> 
.......................................................................................................................................
9</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.5pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 2.4: Network Adress
Types</span></u> 
.............................................................................................................................
9</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.65pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 2.5: Character Types</span></u> 
.......................................................................................................................................
9</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.0pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 2.6: Arrays</span></u> 
.........................................................................................................................................................
9</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.35pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 3: Dates, Timestamps, and Intervals</span></u></b> 
.............................................................................................
11</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:134%'><u><span style='color:#336790'>Section
3.1: SELECT the last day of month</span></u> 
...............................................................................................................
11 <u><span style='color:#336790'>Section 3.2: Cast a timestamp or interval to
a string</span></u> 
..............................................................................................
11</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.0pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 3.3: Count the
number of records per week</span></u> 
...............................................................................................
11</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.55pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 4: Table Creation</span></u></b> 
.....................................................................................................................................
12</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:137%'><u><span style='color:#336790'>Section
4.1: Show table definition</span></u> 
...............................................................................................................................
12 <u><span style='color:#336790'>Section 4.2: Create table from select</span></u> 
........................................................................................................................
12</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:135%'><u><span style='color:#336790'>Section
4.3: Create unlogged table</span></u> 
...........................................................................................................................
12 <u><span style='color:#336790'>Section 4.4: Table creation with Primary Key</span></u> 
..........................................................................................................
12</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.4pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 4.5: Create a table
that references other table</span></u> 
..........................................................................................
13</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.55pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 5: SELECT</span></u></b> 
......................................................................................................................................................
14</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:5.8pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 5.1: SELECT using
WHERE</span></u> 
.............................................................................................................................
14</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 6: Find String Length / Character Length</span></u></b> 
...................................................................................
15</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.25pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 6.1: Example to get
length of a character varying field</span></u> 
.............................................................................
15</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.45pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 7: COALESCE</span></u></b> 
...............................................................................................................................................
16</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.25pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 7.1: Single non null
argument</span></u> 
........................................................................................................................
16</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 7.2: Multiple non
null arguments</span></u> 
..................................................................................................................
16</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.3pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 7.3: All null
arguments</span></u> 
...................................................................................................................................
16</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.5pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 8: INSERT</span></u></b> 
......................................................................................................................................................
17</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:137%'><u><span style='color:#336790'>Section
8.1: Insert data using COPY</span></u> 
...........................................................................................................................
17 <u><span style='color:#336790'>Section 8.2: Inserting multiple rows</span></u> 
...........................................................................................................................
18</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.05in;
margin-left:20.0pt'><u><span style='color:#336790'>Section 8.3: INSERT data and
RETURING values</span></u> 
.....................................................................................................
18</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:137%'><u><span style='color:#336790'>Section
8.4: Basic INSERT</span></u> 
...........................................................................................................................................
18 <u><span style='color:#336790'>Section 8.5: Insert from select</span></u> 
....................................................................................................................................
18</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.5pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 8.6: UPSERT - INSERT
... ON CONFLICT DO UPDATE..</span></u> 
................................................................................
19</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.25pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 8.7: SELECT data
into file</span></u> 
..............................................................................................................................
19</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 9: UPDATE</span></u></b> 
....................................................................................................................................................
21</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.4pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 9.1: Updating a
table based on joining another table</span></u> 
................................................................................
21</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:135%'><u><span style='color:#336790'>Section
9.2: Update all rows in a table</span></u> 
......................................................................................................................
21 <u><span style='color:#336790'>Section 9.3: Update all rows meeting a
condition</span></u> 
...................................................................................................
21</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 9.4: Updating
multiple columns in table</span></u> 
......................................................................................................
21 <b><u><span style='font-size:12.0pt;line-height:110%;color:#336790'>Chapter
10: JSON Support</span></u></b> 
.....................................................................................................................................
22</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.05pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 10.1: Using JSONb
operators</span></u> 
........................................................................................................................
22</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.3pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 10.2: Querying
complex JSON documents</span></u> 
..................................................................................................
26</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.65pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 10.3: Creating a
pure JSON table</span></u> 
.................................................................................................................
27</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 11: Aggregate Functions</span></u></b> 
........................................................................................................................
28</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 11.1: Simple
statistics: min(), max(), avg()</span></u> 
.....................................................................................................
28</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.6pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 11.2: regr_slope(Y, X) : slope of the
least-squares-fit linear equation determined by the (X, Y) pairs</span></u></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:-.75pt;
margin-bottom:3.25pt;margin-left:.5pt;text-align:right;text-indent:-.5pt;
line-height:107%'> ................................................................................................................................................................................
28</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.0pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 11.3:
string_agg(expression, delimiter)</span></u> 
........................................................................................................
29</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 12: Common Table Expressions (WITH)</span></u></b> 
.........................................................................................
31</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.05pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 12.1: Common Table
Expressions in SELECT Queries</span></u> 
.................................................................................
31</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.85pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 12.2: Traversing
tree using WITH RECURSIVE</span></u> 
............................................................................................
31</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 13: Window Functions</span></u></b> 
.............................................................................................................................
32</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.65pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 13.1: generic
example</span></u> 
.....................................................................................................................................
32</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.9pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 13.2: column values
vs dense_rank vs rank vs row_number</span></u> 
................................................................... 33</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.65pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 14: Recursive queries</span></u></b> 
.............................................................................................................................
34</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.2pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 14.1: Sum of
Integers</span></u> 
......................................................................................................................................
34</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.4pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 15: Programming with PL/pgSQL</span></u></b> 
....................................................................................................
35</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:138%'><u><span style='color:#336790'>Section
15.1: Basic PL/pgSQL Function</span></u> 
......................................................................................................................
35 <u><span style='color:#336790'>Section 15.2: custom exceptions</span></u> 
................................................................................................................................
35</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 15.3: PL/pgSQL
Syntax</span></u> 
..................................................................................................................................
36</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:7.05pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 15.4: RETURNS Block</span></u> 
.....................................................................................................................................
36</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.45pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 16: Inheritance</span></u></b> 
............................................................................................................................................
37</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:4.6pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 16.1: Creating
children tables</span></u> 
........................................................................................................................
37</p>

<p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><u><span
style='font-size:12.0pt;line-height:107%;color:#336790'>Chapter 17: Export
PostgreSQL database table header and data to CSV file</span></u></b><sub><span
style='font-size:15.5pt;line-height:107%'>  ........................... 38</span></sub></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 17.1: copy from
query</span></u> 
....................................................................................................................................
38</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.4pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 17.2: Export PostgreSQL table to csv with header
for some column(s)</span></u> 
................................................... 38</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.2pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 17.3: Full table
backup to csv with header</span></u> 
...................................................................................................
38</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 18: Triggers and Trigger Functions</span></u></b> 
.................................................................................................
39</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.1pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 18.1: Type of
triggers</span></u> 
......................................................................................................................................
39</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.95pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 18.2: Basic PL/pgSQL
Trigger Function</span></u> 
.......................................................................................................
40</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 19: Event Triggers</span></u></b> 
....................................................................................................................................
42</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.75pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 19.1: Logging DDL
Command Start Events</span></u> 
..................................................................................................
42</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 20: Role Management</span></u></b> 
...........................................................................................................................
43</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.15pt;margin-bottom:.2pt;
margin-left:20.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'><u><span style='color:#336790'>Section 20.1: Create a
user with a password</span></u> 
............................................................................................................
43 <u><span style='color:#336790'>Section 20.2: Grant and Revoke Privileges</span></u> 
...............................................................................................................
43 <u><span style='color:#336790'>Section 20.3: Create Role and matching
database</span></u> 
.................................................................................................
44</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.35pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 20.4: Alter default
search_path of user</span></u> 
......................................................................................................
44</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.65pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 20.5: Create Read
Only User</span></u> 
........................................................................................................................
45</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.4pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 20.6: Grant access privileges on objects created
in the future</span></u> 
................................................................ 45</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.85pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 21: Postgres cryptographic functions</span></u></b> 
............................................................................................
46</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.3pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 21.1: digest</span></u> 
.......................................................................................................................................................
46</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.5pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 22: Comments in PostgreSQL</span></u></b> 
............................................................................................................
47</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.4pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 22.1: COMMENT on
Table</span></u> 
..............................................................................................................................
47</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.65pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 22.2: Remove Comment</span></u> 
...............................................................................................................................
47</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.4pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 23: Backup and Restore</span></u></b> 
........................................................................................................................
48</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 23.1: Backing up one
database</span></u> 
....................................................................................................................
48</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:137%'><u><span style='color:#336790'>Section
23.2: Restoring backups</span></u> 
................................................................................................................................
48 <u><span style='color:#336790'>Section 23.3: Backing up the whole cluster</span></u> 
..............................................................................................................
48 <u><span style='color:#336790'>Section 23.4: Using psql to export data</span></u> 
....................................................................................................................
49 <u><span style='color:#336790'>Section 23.5: Using Copy to import</span></u> 
...........................................................................................................................
49</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:5.95pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 23.6: Using Copy to
export</span></u> 
...........................................................................................................................
50</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.65pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 24: Backup script for a production DB</span></u></b> 
.........................................................................................
51</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:5.95pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 24.1: saveProdDb.sh</span></u> 
.......................................................................................................................................
51</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 25: Accessing Data Programmatically</span></u></b> 
..........................................................................................
52</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.2pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 25.1: Accessing
PostgreSQL with the C-API</span></u> 
.................................................................................................
52 <u><span style='color:#336790'>Section 25.2: Accessing PostgreSQL from
python using psycopg2</span></u> 
...................................................................... 55</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.4pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 25.3: Accessing PostgreSQL from .NET using the
Npgsql provider</span></u> 
......................................................... 55</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.05pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 25.4: Accessing
PostgreSQL from PHP using Pomm2</span></u> 
...............................................................................
56</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 26: Connect to PostgreSQL from Java</span></u></b> 
.........................................................................................
58</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.15pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 26.1: Connecting
with java.sql.DriverManager</span></u> 
............................................................................................
58 <u><span style='color:#336790'>Section 26.2: Connecting with
java.sql.DriverManager and Properties</span></u> 
................................................................. 58</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.65pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 26.3: Connecting with javax.sql.DataSource using
a connection pool</span></u> 
..................................................... 59</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.4pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 27: PostgreSQL High Availability</span></u></b> 
.....................................................................................................
61</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:5.85pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 27.1: Replication in
PostgreSQL</span></u> 
....................................................................................................................
61</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.65pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 28: EXTENSION dblink and postgres_fdw</span></u></b> 
...................................................................................
64</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.3pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 28.1: Extention FDW</span></u> 
.......................................................................................................................................
64</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 28.2: Foreign Data
Wrapper</span></u> 
........................................................................................................................
64</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:6.45pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 28.3: Extention
dblink</span></u> 
....................................................................................................................................
65</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>Chapter 29: Postgres Tip and Tricks</span></u></b> 
.................................................................................................................
66</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:20.0pt;line-height:135%'><u><span style='color:#336790'>Section
29.1: DATEADD alternative in Postgres</span></u> 
.......................................................................................................
66 <u><span style='color:#336790'>Section 29.2: Comma separated values of a
column</span></u> 
.............................................................................................
66</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:20.0pt'><u><span style='color:#336790'>Section 29.3: Delete
duplicate records from postgres table</span></u> 
..................................................................................
66</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.4pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 29.4: Update query with join between two tables
alternative since Postresql does not support join</span></u></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:-.75pt;
margin-bottom:2.55pt;margin-left:.5pt;text-align:right;text-indent:-.5pt;
line-height:107%'><u><span style='color:#336790'>in update query</span></u> 
...................................................................................................................................................
66</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.65pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 29.5: Di&#57379;erence between two date
timestamps month wise and year wise</span></u> 
.......................................... 66</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.4pt;
margin-left:19.75pt;text-indent:-.5pt;line-height:107%'><u><span
style='color:#336790'>Section 29.6: Query to Copy/Move/Transafer table data
from one database to other database table with</span></u></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt;text-indent:40.0pt;line-height:144%'><u><span
style='color:#336790'>same schema</span></u> 
......................................................................................................................................................
67 <b><u><span style='font-size:12.0pt;line-height:144%;color:#336790'>Credits</span></u></b> 
..............................................................................................................................................................................
68</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><b><u><span style='font-size:12.0pt;line-height:110%;
color:#336790'>You may also like</span></u></b> 
........................................................................................................................................................
70</p>

</div>

<span style='font-size:10.0pt;line-height:110%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection2>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:105.15pt;margin-left:
-.25pt'>About</h1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:116.35pt;
margin-bottom:0in;margin-left:116.5pt;text-align:center;text-indent:0in;
line-height:123%'><span style='font-size:11.0pt;line-height:123%'>Please feel
free to share this PDF with anyone for free, latest version of this book can be
downloaded from:</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:31.9pt;
margin-left:167.3pt;text-indent:0in;line-height:107%'><a
href="https://goalkicker.com/PostgreSQLBook"><span style='font-size:11.0pt;
line-height:107%;color:#336790'>https://goalkicker.com/PostgreSQLBook</span></a></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:87.95pt;
margin-bottom:1.85pt;margin-left:0in;text-align:right;text-indent:0in;
line-height:107%'>This <i>PostgreSQL® Notes for Professionals</i> book is
compiled from <a href="https://archive.org/details/documentation-dump.7z"><span
style='color:#336790'>Stack Overflow</span></a></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:82.2pt;
margin-bottom:1.85pt;margin-left:.5pt;text-align:right;text-indent:-.5pt;
line-height:107%'><a href="https://archive.org/details/documentation-dump.7z"><span
style='color:#336790'>Documentation</span></a>, the content is written by the
beautiful people at Stack Overflow.</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:80.8pt;
margin-bottom:11.2pt;margin-left:81.45pt;text-align:center;text-indent:-.5pt;
line-height:123%'>Text content is released under Creative Commons BY-SA, see
credits at the end of this book whom contributed to the various chapters.
Images may be copyright of their respective owners unless otherwise specified</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:80.8pt;
margin-bottom:11.2pt;margin-left:81.45pt;text-align:center;text-indent:-.5pt;
line-height:123%'><span style='position:relative;z-index:-1895824384'><span
style='left:0px;position:absolute;left:87px;top:-275px;width:545px;height:476px'><img
width=545 height=476
src="PostgreSQL%20Notes%20for%20Professionals_files/image002.gif"></span></span>This
is an unofficial free book created for educational purposes and is not
affiliated with official PostgreSQL® group(s) or company(s) nor Stack Overflow.
All trademarks and registered trademarks are the property of their respective
company owners</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:80.8pt;
margin-bottom:11.2pt;margin-left:81.45pt;text-align:center;text-indent:-.5pt;
line-height:123%'>The information presented in this book is not guaranteed to
be correct nor accurate, use at your own risk</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:131.05pt'>Please send feedback and corrections to <u><span
style='color:#336790'>web@petercv.com</span></u></p>

<h1 style='margin-left:-.25pt'>Chapter 1: Getting started with PostgreSQL</h1>

<h2 style='margin-top:0in;margin-right:106.75pt;margin-bottom:1.1pt;margin-left:
.75pt;text-indent:-.5pt;line-height:110%'><span style='font-size:10.0pt;
line-height:110%;color:black'>Version Release date EOL date</span></h2>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/10/static/release-10.html"><span
style='color:#336790'>10.0</span></a><u><span style='color:#336790'>           </span></u>2017-10-05        2022-10-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.6/static/release-9-6.html"><span
style='color:#336790'>9.6</span></a><u><span style='color:#336790'>              </span></u>2016-09-29        2021-09-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.5/static/release-9-5.html"><span
style='color:#336790'>9.5</span></a><u><span style='color:#336790'>              </span></u>2016-01-07        2021-01-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.4/static/release-9-4.html"><span
style='color:#336790'>9.4</span></a><u><span style='color:#336790'>              </span></u>2014-12-18        2019-12-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.3/static/release-9-3.html"><span
style='color:#336790'>9.3</span></a><u><span style='color:#336790'>              </span></u>2013-09-09        2018-09-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.2/static/release-9-2.html"><span
style='color:#336790'>9.2</span></a><u><span style='color:#336790'>              </span></u>2012-09-10        2017-09-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.1/static/release-9-1.html"><span
style='color:#336790'>9.1</span></a><u><span style='color:#336790'>              </span></u>2011-09-12        2016-09-01</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/9.0/static/release-9-0.html"><span
style='color:#336790'>9.0</span></a><u><span style='color:#336790'>              </span></u>2010-09-20        2015-09-01</p>

<p class=MsoNormal style='margin-bottom:20.8pt;text-indent:0in'><a
href="https://www.postgresql.org/docs/8.4/static/release-8-4.html"><span
style='color:#336790'>8.4</span></a><u><span style='color:#336790'>              </span></u>2009-07-01        2014-07-01</p>

<h2 style='margin-left:-.75pt'>Section 1.1: Installing PostgreSQL on Windows</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>While it's good practice to use a Unix based operating
system (ex. Linux or BSD) as a production server you can easily install
PostgreSQL on Windows (hopefully only as a development server).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Download the Windows installation binaries from
EnterpriseDB: <a
href="http://www.enterprisedb.com/products-services-training/pgdownload"><span
style='color:#336790'>http://www.enterprisedb.com/products-services-training/pgdownload</span></a>
This is a third-party company started by core contributors to the PostgreSQL
project who have optimized the binaries for Windows.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Select the latest stable (non-Beta) version (9.5.3 at the
time of writing). You will most likely want the Win x86-64 package, but if you
are running a 32 bit version of Windows, which is common on older computers,
select Win x86-32 instead.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Note: Switching between Beta and Stable versions will
involve complex tasks like dump and restore. Upgrading within beta or stable
version only needs a service restart.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>You can check if your version of Windows is 32 or 64 bit by
going to Control Panel -&gt; System and Security -&gt; System -&gt; System
type, which will say &quot;##-bit Operating System&quot;. This is the path for
Windows 7, it may be slightly different on other versions of Windows.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>In the installer select the packages you would like to use.
For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:20.9pt'><img width=5 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image003.gif" align=left
hspace=12>pgAdmin ( <a href="https://www.pgadmin.org/"><span style='color:#336790'>https://www.pgadmin.org</span></a>
) is a free GUI for managing your database and I highly recommend it. In</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:20.9pt'>9.6 this will be installed by default .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:20.9pt'>PostGIS ( <a href="http://postgis.net/"><span
style='color:#336790'>http://postgis.net</span></a> ) provides geospatial
analysis features on GPS coordinates, distances etc. very popular among GIS
developers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:20.9pt'>The Language Package provides required libraries for
officially supported procedural language PL/Python, PL/Perl and PL/Tcl.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:20.9pt'>Other packages like pgAgent, pgBouncer and Slony are useful
for larger production servers, only checked as needed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>All those optional packages can be later installed through
&quot;Application Stack Builder&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Note: There are also other non-officially supported language
such as <a
href="http://www.postgresonline.com/journal/archives/360-PLV8-binaries-for-PostgreSQL-9.5-windows-both-32-bit-and-64-bit.html"><span
style='color:#336790'>PL/V8</span></a>, <a href="https://github.com/pllua/pllua"><span
style='color:#336790'>PL/Lua</span></a> PL/Java available.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Open pgAdmin and connect to your server by double clicking
on its name, ex. &quot;PostgreSQL 9.5 (localhost:5432).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>From this point you can follow guides such as the excellent
book PostgreSQL: Up and Running, 2nd Edition ( <a
href="http://shop.oreilly.com/product/0636920032144.do"><span style='color:
#336790'>http://shop.oreilly.com/product/0636920032144.do</span></a> ).</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Optional: Manual Service Startup Type</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>PostgreSQL runs as a service in the background which is
slightly different than most programs. This is common for databases and web
servers. Its default Startup Type is Automatic which means it will always run
without any input from you.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Why would you want to manually control the PostgreSQL
service? If you're using your PC as a development server some of the time and
but also use it to play video games for example, PostegreSQL could slow down
your system a bit while its running.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Why wouldn't you want manual control? Starting and stopping
the service can be a hassle if you do it often.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>If you don't notice any difference in speed and prefer
avoiding the hassle then leave its Startup Type as Automatic and ignore the
rest of this guide. Otherwise...</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Go to Control Panel -&gt; System and Security -&gt;
Administrative Tools.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Select &quot;Services&quot; from the list, right click on
its icon, and select Send To -&gt; Desktop to create a desktop icon for more
convenient access.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Close the Administrative Tools window then launch Services
from the desktop icon you just created.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Scroll down until you see a service with a name like
postgresql-x##-9.# (ex. &quot;postgresql-x64-9.5&quot;).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Right click on the postgres service, select Properties -&gt;
Startup type -&gt; Manual -&gt; Apply -&gt; OK. You can change it back to
automatic just as easily.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>If you see other PostgreSQL related services in the list
such &quot;pgbouncer&quot; or &quot;PostgreSQL Scheduling Agent pgAgent&quot;
you can also change their Startup Type to Manual because they're not much use
if PostgreSQL isn't running. Although this will mean more hassle each time you
start and stop so it's up to you. They don't use as many resources as
PostgreSQL itself and may not have any noticeable impact on your systems
performance.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>If the service is running its Status will say Started,
otherwise it isn't running.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>To start it right click and select Start. A loading prompt
will be displayed and should disappear on its own soon after. If it gives you
an error try a second time. If that doesn't work then there was some problem
with the installation, possibly because you changed some setting in Windows
most people don't change, so finding the problem might require some sleuthing.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>To stop postgres right click on the service and select Stop.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>If you ever get an error while attempting to connect to your
database check Services to make sure its running.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.9pt;margin-bottom:.2pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'>For other very specific details about the EDB
PostgreSQL installation, e.g. the python runtime version in the official
language pack of a specific PostgreSQL version, always refer to <a
href="https://www.enterprisedb.com/docs/en/9.6/instguide/toc.html"><span
style='color:#336790'>the official EBD installation guide</span></a> , change
the version in link to your installer's major version.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.9pt;margin-bottom:.2pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'><b><span style='font-size:18.0pt;line-height:134%;
color:#336790'>Section 1.2: Install PostgreSQL from Source on Linux</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Dependencies:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:352.45pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=65
src="PostgreSQL%20Notes%20for%20Professionals_files/image004.gif" align=left
hspace=12>GNU Make Version &gt; 3.80 an ISO/ ANSI C-Compiler (e.g. gcc) an
extractor like tar or gzip zlib-devel</p>

<p class=MsoNormal style='margin-top:0in;margin-right:332.6pt;margin-bottom:
.2pt;margin-left:.25pt;text-indent:20.9pt;line-height:215%'><span
style='font-size:11.0pt;line-height:215%'><img border=0 width=5 height=5
id="Group 79853"
src="PostgreSQL%20Notes%20for%20Professionals_files/image005.gif"></span> readline-devel
oder libedit-devel Sources: <a
href="https://ftp.postgresql.org/pub/source/v9.6.3/postgresql-9.6.3.tar.gz"><span
style='color:#336790'>Link to the latest source (9.6.3) </span></a>Now you can
extract the source files:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image006.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>There are a large number of different options for the
configuration of PostgreSQL:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:322.5pt;margin-bottom:
.45pt;margin-left:-.25pt;text-indent:-.5pt;line-height:215%'><a
href="https://www.postgresql.org/docs/9.6/static/install-procedure.html"><span
style='color:#336790'>Full Link to the full installation procedure </span></a>Small
list of available options:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.25pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--prefix=PATH</span></i> path for all files</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.15pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--exec-prefix=PATH</span></i> path for
architectur-dependet file</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.2pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--bindir=PATH</span></i> path for executable
programs</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.3pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--sysconfdir=PATH</span></i> path for
configuration files</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.3pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--with-pgport=NUMBER</span></i> specify a port
for your server</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.25pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--with-perl</span></i> add perl support</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.25pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--with-python</span></i> add python support</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.25pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--with-openssl</span></i> add openssl support</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.45pt;
margin-left:30.0pt'><i><span style='font-size:9.0pt;line-height:110%;
color:green;background:#FAFAFA'>--with-ldap</span></i> add ldap support</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.25pt;
margin-left:29.75pt;text-indent:-.5pt'><i><span style='font-size:9.0pt;
line-height:110%;color:green;background:#FAFAFA'>--with-blocksize=BLOCKSIZE</span></i>
set pagesize in KB</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.15pt;
margin-left:60.0pt'><span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>BLOCKSIZE</span> must a power of 2 and between 1 and 32</p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.2pt;margin-bottom:
12.5pt;margin-left:60.0pt;text-indent:-30.0pt'><span style='position:relative;
z-index:-1895821312'><span style='left:0px;position:absolute;left:28px;
top:-217px;width:46px;height:246px'><img width=46 height=246
src="PostgreSQL%20Notes%20for%20Professionals_files/image007.gif"></span></span><i><span
style='font-size:9.0pt;line-height:110%;color:green;background:#FAFAFA'>--with-wal-segsize=SEGSIZE</span></i>
set size of WAL-Segment size in MB <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>SEGSIZE</span> must be a power of 2 between 1 and 64</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Go into the new created folder and run the cofigure script
with the desired options:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.1pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image008.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.1pt;
margin-left:.25pt'>Run <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>make</span> to create the objectfiles</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.35pt;
margin-left:.25pt'>Run <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>make install</span> to install PostgreSQL from the built
files</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.35pt;
margin-left:.25pt'>Run <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>make clean</span> to tidy up</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#7A0874'>cd</span></b><span style='font-size:
  9.0pt;line-height:107%'> contrib</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:108.75pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:146%'>For the extension switch the directory
, run <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>make</span>
and <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>make
install</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.75pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:146%'><b><span style='font-size:18.0pt;
line-height:146%;color:#336790'>Section 1.3: Installation on GNU+Linux</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.7pt;
margin-left:.25pt'>On most GNU+Linux operating systems, PostgreSQL can easily
be installed using the operating system package manager.</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Red Hat family</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.05pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>Respositories can be
found here: <a href="https://yum.postgresql.org/repopackages.php"><span
style='color:#336790'>https://yum.postgresql.org/repopackages.php</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Download the repository to local machine with the command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.2pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895820288'><span style='left:0px;position:absolute;left:0px;top:-9px;
width:718px;height:43px'><img width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image009.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>yum -y install
https://download.postgresql.org/pub/repos/yum/X.X/redhat/rhel-</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>7</span><span
style='font-size:9.0pt;line-height:110%'>-x86_64/pgdgredhatXX-X.X-X.noarch.rpm</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>View available packages:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image010.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Neccesary packages are: postgresqlXX postgresqlXX-server
postgresqlXX-libs postgresqlXX-contrib</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>These are installed with the following command: yum -y
install postgresqlXX postgresqlXX-server postgresqlXX-libs postgresqlXX-contrib</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>Once installed you will need to start the database service
as the service owner (Default is postgres). This is done with the pg_ctl
command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.1pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image011.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.15pt;
margin-left:.25pt'>To access the DB in CLI enter <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>psql</span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Debian family</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>On <a
href="https://www.postgresql.org/download/linux/ubuntu/"><span
style='color:#336790'>Debian and derived</span></a> operating systems, type:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image012.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>This will install the PostgreSQL server package, at the
default version offered by the operating system's package repositories.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>If the version that's installed by default is not the one
that you want, you can use the package manager to search for specific versions
which may simultaneously be offered.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:25.75pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>You can also use the Yum repository
provided by the PostgreSQL project (known as <a
href="http://yum.postgresql.org/repopackages.php"><span style='color:#336790'>PGDG</span></a>)
to get a different version. This may allow versions not yet offered by
operating system package repositories.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:25.75pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'><b><span style='font-size:18.0pt;
line-height:134%;color:#336790'>Section 1.4: How to install PostgreSQL via
MacPorts on OSX</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>In order to install PostgreSQL on OSX, you need to know
which versions are currently supported.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Use this command to see what versions you have available.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image013.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:21.7pt;
margin-left:.25pt'>You should get a list that looks something like the
following:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:95.8pt;margin-bottom:
25.0pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895819264'><span style='left:0px;position:
absolute;left:0px;top:-18px;width:718px;height:221px'><img width=718
height=221 src="PostgreSQL%20Notes%20for%20Professionals_files/image014.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>postgresql80                  
@8.0.26         databases/postgresql80 postgresql81                  
@8.1.23         databases/postgresql81 postgresql82                  
@8.2.23         databases/postgresql82 postgresql83                  
@8.3.23         databases/postgresql83 postgresql84                  
@8.4.22         databases/postgresql84 postgresql90                  
@9.0.23         databases/postgresql90 postgresql91                  
@9.1.22         databases/postgresql91 postgresql92                   @9.2.17        
databases/postgresql92 postgresql93                   @9.3.13        
databases/postgresql93 postgresql94                   @9.4.8         
databases/postgresql94 postgresql95                   @9.5.3         
databases/postgresql95 postgresql96                   @9.6beta2      
databases/postgresql96</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>In this example, the most recent version of PostgreSQL that
is supported in 9.6, so we will install that.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image015.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:21.7pt;
margin-left:.25pt'>You will see an installation log like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Computing dependencies for postgresql96-server</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Dependencies to be installed: postgresql96</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Fetching archive for postgresql96</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:84.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Attempting to fetch postgresql96-9.6beta2_0.darwin_15.x86_64.tbz2 from
https://packages.macports.org/postgresql96 ---&gt;  Attempting to fetch
postgresql96-9.6beta2_0.darwin_15.x86_64.tbz2.rmd160 from
https://packages.macports.org/postgresql96 ---&gt;  Installing postgresql96
@9.6beta2_0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:177.1pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:227%'><span
style='font-size:9.0pt;line-height:227%;font-family:"DejaVu Sans Mono"'>---&gt; 
Activating postgresql96 @9.6beta2_0 To use the postgresql server, install the
postgresql96-server port</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Cleaning postgresql96</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Fetching archive for postgresql96-server</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:47.05pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895818240'><span style='left:0px;position:
absolute;left:0px;top:-241px;width:718px;height:555px'><img width=718
height=555 src="PostgreSQL%20Notes%20for%20Professionals_files/image016.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Attempting to fetch postgresql96-server-9.6beta2_0.darwin_15.x86_64.tbz2 from
https://packages.macports.org/postgresql96-server ---&gt;  Attempting to fetch
postgresql96-server-9.6beta2_0.darwin_15.x86_64.tbz2.rmd160 from
https://packages.macports.org/postgresql96-server ---&gt;  Installing
postgresql96-server @9.6beta2_0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
12.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Activating postgresql96-server @9.6beta2_0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:160.8pt;margin-bottom:
12.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>To
create a database instance, after install do sudo mkdir -p
/opt/local/var/db/postgresql96/defaultdb sudo chown postgres:postgres
/opt/local/var/db/postgresql96/defaultdb sudo su postgres -c
'/opt/local/lib/postgresql96/bin/initdb -D /opt/local/var/db/postgresql96/defaultdb'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Cleaning postgresql96-server</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Computing dependencies for postgresql96</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Cleaning postgresql96</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Updating database of binaries</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:285.45pt;margin-bottom:
25.0pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>---&gt; 
Scanning binaries for linking errors ---&gt;  No broken files found.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>The log provides instructions on the rest of the steps for
installation, so we do that next.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:162.05pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895817216'><span style='left:0px;position:absolute;left:0px;
top:-8px;width:718px;height:76px'><img width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image017.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#C20CB9'>sudo</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#C20CB9'>mkdir</span></b><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#660033'>-p</span><span style='font-size:9.0pt;line-height:110%'> <b>/</b>opt<b>/</b>local<b>/</b>var<b>/</b>db<b>/</b>postgresql96<b>/</b>defaultdb
</span><b><span style='font-size:9.0pt;line-height:110%;color:#C20CB9'>sudo</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#C20CB9'>chown</span></b><span style='font-size:
9.0pt;line-height:110%'> postgres:postgres <b>/</b>opt<b>/</b>local<b>/</b>var<b>/</b>db<b>/</b>postgresql96<b>/</b>defaultdb
</span><b><span style='font-size:9.0pt;line-height:110%;color:#C20CB9'>sudo</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#C20CB9'>su</span></b><span style='font-size:9.0pt;
line-height:110%'> postgres </span><span style='font-size:9.0pt;line-height:
110%;color:#660033'>-c</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'/opt/local/lib/postgresql96/bin/initdb
-D</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:291.9pt;margin-bottom:
.15pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='font-size:9.0pt;line-height:240%;color:red'>/opt/local/var/db/postgresql96/defaultdb'
</span>Now we start the server:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image018.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Verify that we can connect to the server:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image019.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You will see a prompt from postgres:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=68
src="PostgreSQL%20Notes%20for%20Professionals_files/image020.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=31
src="PostgreSQL%20Notes%20for%20Professionals_files/image021.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:156.65pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:247%'><span style='position:absolute;z-index:
-1895816192;left:0px;margin-left:0px;margin-top:30px;width:718px;height:26px'><img
width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image022.gif"></span>Here
you can type a query to see that the server is running. <span style='font-size:
9.0pt;line-height:247%'>postgres</span><span style='font-size:9.0pt;line-height:
247%;color:#999999'>=</span><span style='font-size:9.0pt;line-height:247%'>#SELECT
setting <b>FROM</b> pg_settings <b>WHERE</b> <b>NAME</b></span><span
style='font-size:9.0pt;line-height:247%;color:#999999'>=</span><span
style='font-size:9.0pt;line-height:247%;color:red'>'data_directory'</span><span
style='font-size:9.0pt;line-height:247%'>; </span>And see the response:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=110
src="PostgreSQL%20Notes%20for%20Professionals_files/image023.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Type \q to quit:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image024.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>And you will be back at your shell prompt.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:131.3pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>Congratulations! You now have a
running PostgreSQL instance on OS/X.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:131.3pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'><b><span style='font-size:18.0pt;
line-height:145%;color:#336790'>Section 1.5: Install postgresql with brew on
Mac</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:.25pt'>Homebrew calls itself '<i>the missing package manager for
macOS</i>'. It can be used to build and install applications and libraries.
Once <a href="http://brew.sh/"><span style='color:#336790'>installed</span></a>,
you can use the <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>brew</span>
command to install PostgreSQL and it's dependencies as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image025.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>brew <b>SEARCH</b> postgresql</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.8pt;
margin-left:.25pt'>Homebrew generally installs the latest stable version. If
you need a different one then  will</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.7pt;
margin-left:.25pt'>list the versions available. If you need PostgreSQL built
with particular options then <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>brew info postgresql</span> will list which options are
supported. If you require an unsupported build option, you may have to do the
build yourself, but can still use Homebrew to install the common dependencies.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
0in;margin-left:.75pt;text-indent:-.5pt'><b>Start the server:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image026.gif"></span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:0in;margin-left:
.75pt'>Open the PostgreSQL prompt</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image027.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:76.1pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>If psql complains that there's no
corresponding database for your user, run <b><span style='font-size:9.0pt;
line-height:145%;background:#FAFAFA'>CREATEDB</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:76.1pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'><b><span style='font-size:18.0pt;
line-height:145%;color:#336790'>Section 1.6: Postgres.app for Mac OSX</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:.25pt'>An extremely simple tool for installing PostgreSQL on a Mac
is available by downloading <a href="http://postgresapp.com/"><span
style='color:#336790'>Postgres.app</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can change preferences to have PostgreSQL run in the
background or only when the application is running.</p>

<h1 style='margin-left:-.25pt'>Chapter 2: Data Types</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>PostgreSQL has a rich set of native data types available to
users. Users can add new types to PostgreSQL using the CREATE TYPE command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:18.8pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://www.postgresql.org/docs/9.6/static/datatype.html"><span
style='color:#336790'>https://www.postgresql.org/docs/9.6/static/datatype.html</span></a></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
2.1: Numeric Types</h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=700
 style='width:524.8pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.3pt'>
  <td width=120 valign=top style='width:89.65pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:2.0pt;
  margin-bottom:0in;margin-left:0in;text-align:center;text-indent:0in;
  line-height:107%'><b>Name</b></p>
  </td>
  <td width=83 valign=top style='width:62.15pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b>Storage Size</b></p>
  </td>
  <td width=199 valign=top style='width:149.25pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:2.0pt;
  margin-bottom:0in;margin-left:0in;text-align:center;text-indent:0in;
  line-height:107%'><b>Description</b></p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:11.8pt;text-align:center;text-indent:0in;
  line-height:107%'><b>Range</b></p>
  </td>
 </tr>
 <tr style='height:15.4pt'>
  <td width=120 valign=top style='width:89.65pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>SMALLINT</span></b></p>
  </td>
  <td width=83 valign=top style='width:62.15pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>2
  bytes</p>
  </td>
  <td width=199 valign=top style='width:149.25pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>small-range
  integer</p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>-32768
  to +32767</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=120 valign=top style='width:89.65pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>INTEGER</span></b></p>
  </td>
  <td width=83 valign=top style='width:62.15pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>4
  bytes</p>
  </td>
  <td width=199 valign=top style='width:149.25pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>ypical
  choice for integer</p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>-2147483648
  to +2147483647</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=120 style='width:89.65pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>BIGINT</span></b></p>
  </td>
  <td width=83 style='width:62.15pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>8
  bytes</p>
  </td>
  <td width=199 style='width:149.25pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>large-range
  integer</p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>-9223372036854775808
  to</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>+9223372036854775807</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=120 style='width:89.65pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>DECIMAL</span></b></p>
  </td>
  <td width=83 style='width:62.15pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>variable</p>
  </td>
  <td width=199 style='width:149.25pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>user-specified
  precision, exact</p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>up
  to 131072 digits before the decimal point; up to 16383 digits after the
  decimal point</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=120 style='width:89.65pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>NUMERIC</span></b></p>
  </td>
  <td width=83 style='width:62.15pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>variable</p>
  </td>
  <td width=199 style='width:149.25pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>user-specified
  precision, exact</p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>up
  to 131072 digits before the decimal point; up to 16383 digits after the
  decimal point</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=120 valign=top style='width:89.65pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>REAL</span></b></p>
  </td>
  <td width=83 valign=top style='width:62.15pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>4
  bytes</p>
  </td>
  <td width=199 valign=top style='width:149.25pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>variable-precision,
  inexact</p>
  </td>
  <td width=298 valign=top style='width:223.8pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>6
  decimal digits precision</p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>DOUBLE</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>PRECISION</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:0in'><span style='font-size:11.0pt;
line-height:110%'>                                         </span>8 bytes                 variable-precision,
inexact                    15 decimal digits precision</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=705
 style='width:528.55pt;border-collapse:collapse'>
 <tr style='height:50.25pt'>
  <td width=586 colspan=4 valign=top style='width:439.75pt;padding:.05pt 0in 0in 0in;
  height:50.25pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:56.25pt;margin-bottom:
  0in;margin-left:1.0pt;text-indent:0in;line-height:143%'><span
  style='font-size:9.0pt;line-height:143%;background:#FAFAFA'>smallserial              </span>2
  bytes   small autoincrementing integer 1 to 32767 <span style='font-size:
  9.0pt;line-height:143%;background:#FAFAFA'>serial         </span>4 bytes                autoincrementing
  integer   1 to 2147483647</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>BIGSERIAL                        </span></b>8
  bytes                                large autoincrementing integer 1 to
  9223372036854775807</p>
  </td>
  <td width=118 rowspan=2 valign=top style='width:88.8pt;padding:.05pt 0in 0in 0in;
  height:50.25pt'>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'>&nbsp;</p>
  </td>
 </tr>
 <tr style='height:86.65pt'>
  <td width=362 colspan=2 valign=top style='width:271.75pt;padding:.05pt 0in 0in 0in;
  height:86.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:5.85pt;margin-bottom:
  17.4pt;margin-left:1.0pt;text-indent:0in;line-height:145%'><span
  style='font-size:9.0pt;line-height:145%;background:#FAFAFA'>int4range </span>Range
  of integer <span style='font-size:9.0pt;line-height:145%;background:#FAFAFA'>int8range  </span>Range
  of bigint <span style='font-size:9.0pt;line-height:145%;background:#FAFAFA'>numrange                </span>Range
  of numeric</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:18.0pt;line-height:107%;color:#336790'>Section 2.2: Date/
  Time Types</span></b></p>
  </td>
  <td width=114 valign=top style='width:85.6pt;padding:.05pt 0in 0in 0in;
  height:86.65pt'>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'>&nbsp;</p>
  </td>
  <td width=110 valign=top style='width:82.4pt;padding:.05pt 0in 0in 0in;
  height:86.65pt'>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'>&nbsp;</p>
  </td>
 </tr>
 <tr style='height:30.85pt'>
  <td width=197 valign=bottom style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:30.85pt'>
  <p class=MsoNormal align=right style='margin-top:0in;margin-right:10.0pt;
  margin-bottom:0in;margin-left:0in;text-align:right;text-indent:0in;
  line-height:107%'><b>Storage</b></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:30.5pt;text-indent:0in;line-height:107%'><b>Name</b></p>
  <p class=MsoNormal align=right style='margin-top:0in;margin-right:19.4pt;
  margin-bottom:0in;margin-left:0in;text-align:right;text-indent:0in;
  line-height:107%'><b>Size</b></p>
  </td>
  <td width=165 valign=bottom style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:30.85pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:2.0pt;
  margin-bottom:0in;margin-left:0in;text-align:center;text-indent:0in;
  line-height:107%'><b>Description</b></p>
  </td>
  <td width=114 valign=bottom style='width:85.6pt;padding:.05pt 0in 0in 0in;
  height:30.85pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:2.0pt;
  margin-bottom:0in;margin-left:0in;text-align:center;text-indent:0in;
  line-height:107%'><b>Low Value</b></p>
  </td>
  <td width=110 valign=bottom style='width:82.4pt;padding:.05pt 0in 0in 0in;
  height:30.85pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:2.0pt;
  margin-bottom:0in;margin-left:0in;text-align:center;text-indent:0in;
  line-height:107%'><b>High Value</b></p>
  </td>
  <td width=118 valign=bottom style='width:88.8pt;padding:.05pt 0in 0in 0in;
  height:30.85pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:9.05pt;text-align:center;text-indent:0in;
  line-height:107%'><b>Resolution</b></p>
  </td>
 </tr>
 <tr style='height:38.4pt'>
  <td width=197 valign=top style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:38.4pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.25pt;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>TIMESTAMP</span></b></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'>(without time       8
  bytes zone)</p>
  </td>
  <td width=165 style='width:123.7pt;padding:.05pt 0in 0in 0in;height:38.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>both
  date and time (no time zone)</p>
  </td>
  <td width=114 style='width:85.6pt;padding:.05pt 0in 0in 0in;height:38.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>4713
  BC</p>
  </td>
  <td width=110 style='width:82.4pt;padding:.05pt 0in 0in 0in;height:38.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>294276
  AD</p>
  </td>
  <td width=118 style='width:88.8pt;padding:.05pt 0in 0in 0in;height:38.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>1
  microsecond / 14 digits</p>
  </td>
 </tr>
 <tr style='height:28.9pt'>
  <td width=197 valign=top style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>TIMESTAMP</span></b>
  (with</p>
  <p class=MsoNormal style='margin-top:0in;margin-right:1.8pt;margin-bottom:
  0in;margin-left:1.0pt;text-indent:90.9pt;line-height:107%'>8 bytes time zone)</p>
  </td>
  <td width=165 valign=top style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>both
  date and time, with time zone</p>
  </td>
  <td width=114 style='width:85.6pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>4713
  BC</p>
  </td>
  <td width=110 style='width:82.4pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>294276
  AD</p>
  </td>
  <td width=118 valign=top style='width:88.8pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>1
  microsecond / 14 digits</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=197 valign=top style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>DATE                                  </span></b>4
  bytes</p>
  </td>
  <td width=165 valign=top style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>date
  (no time of day)</p>
  </td>
  <td width=114 valign=top style='width:85.6pt;padding:.05pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>4713
  BC</p>
  </td>
  <td width=110 valign=top style='width:82.4pt;padding:.05pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>5874897
  AD</p>
  </td>
  <td width=118 valign=top style='width:88.8pt;padding:.05pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>1
  day</p>
  </td>
 </tr>
 <tr style='height:28.9pt'>
  <td width=197 valign=top style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>TIME</span></b>
  (without time</p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:90.9pt;line-height:107%'>8 bytes zone)</p>
  </td>
  <td width=165 style='width:123.7pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>time
  of day (no date)</p>
  </td>
  <td width=114 style='width:85.6pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>00:00:00</p>
  </td>
  <td width=110 style='width:82.4pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>24:00:00</p>
  </td>
  <td width=118 valign=top style='width:88.8pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>1
  microsecond / 14 digits</p>
  </td>
 </tr>
 <tr style='height:28.9pt'>
  <td width=197 valign=top style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>TIME</span></b>
  (with time</p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:90.9pt;line-height:107%'>12 bytes zone)</p>
  </td>
  <td width=165 valign=top style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>times
  of day only, with time zone</p>
  </td>
  <td width=114 style='width:85.6pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>00:00:00+1459</p>
  </td>
  <td width=110 style='width:82.4pt;padding:.05pt 0in 0in 0in;height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>24:00:00-1459</p>
  </td>
  <td width=118 valign=top style='width:88.8pt;padding:.05pt 0in 0in 0in;
  height:28.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>1
  microsecond / 14 digits</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=197 style='width:148.05pt;padding:.05pt 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>INTERVAL                          </span></b>16
  bytes</p>
  </td>
  <td width=165 style='width:123.7pt;padding:.05pt 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>time
  interval</p>
  </td>
  <td width=342 colspan=3 valign=top style='width:256.8pt;padding:.05pt 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal align=right style='margin-bottom:0in;text-align:right;
  text-indent:0in;line-height:107%'>1 microsecond / 14</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>-178000000
  years 178000000 years</p>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:104.2pt;text-align:center;text-indent:0in;
  line-height:107%'>digits</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=197 style='width:148.05pt;padding:.05pt 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>tsrange</span></p>
  </td>
  <td width=165 valign=top style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>range
  of timestamp without time zone</p>
  </td>
  <td width=342 colspan=3 valign=top style='width:256.8pt;padding:.05pt 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'>&nbsp;</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=197 style='width:148.05pt;padding:.05pt 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>tstzrange</span></p>
  </td>
  <td width=165 valign=top style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>range
  of timestamp with time zone</p>
  </td>
  <td width=342 colspan=3 valign=top style='width:256.8pt;padding:.05pt 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'>&nbsp;</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=197 valign=top style='width:148.05pt;padding:.05pt 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:1.0pt;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>daterange</span></p>
  </td>
  <td width=165 valign=top style='width:123.7pt;padding:.05pt 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>range
  of date</p>
  </td>
  <td width=342 colspan=3 valign=top style='width:256.8pt;padding:.05pt 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'>&nbsp;</p>
  </td>
 </tr>
</table>

<h2 style='margin-left:-.75pt'>Section 2.3: Geometric Types</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:163.8pt;margin-bottom:
3.55pt;margin-left:.25pt;text-indent:4.6pt'><b>Name   Storage Size          Description           Representation
</b><span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>point </span>16
bytes           Point on a plane      (x,y) <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>line </span>32 bytes Infinite line            {A,B,C}</p>

<p class=MsoNormal style='margin-top:0in;margin-right:195.35pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:142%'><span style='font-size:9.0pt;
line-height:142%;background:#FAFAFA'>lseg </span>32 bytes Finite line segment
((x1,y1),(x2,y2)) <b><span style='font-size:9.0pt;line-height:142%;color:#333399;
background:#FAFAFA'>BOX </span></b>32 bytes Rectangular box ((x1,y1),(x2,y2))</p>

<p class=MsoNormal style='margin-top:0in;margin-right:212.05pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:142%'><span style='font-size:9.0pt;
line-height:142%;background:#FAFAFA'>path </span>16+16n bytes Closed path
(similar to polygon) ((x1,y1),...) <span style='font-size:9.0pt;line-height:
142%;background:#FAFAFA'>path </span>16+16n bytes Open path [(x1,y1),...]</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:4.05pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>polygon </span>40+16n bytes Polygon (similar to closed path)
((x1,y1),...)</p>

<p class=MsoNormal style='margin-bottom:21.1pt;text-indent:0in'><b><span
style='font-size:9.0pt;line-height:110%;color:#333399;background:#FAFAFA'>CIRCLE
</span></b>24 bytes                     Circle                                                            &lt;(x,y),r&gt;
(center point and radius)</p>

<h2 style='margin-left:-.75pt'>Section 2.4: Network Adress Types</h2>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.85pt;margin-left:
0in;text-indent:0in'>Name Storage Size                                      Description</h3>

<p class=MsoNormal style='margin-bottom:4.0pt;text-indent:0in'><b><span
style='font-size:9.0pt;line-height:110%;color:#333399;background:#FAFAFA'>CIDR                </span></b>7
or 19 bytes IPv4 and IPv6 networks</p>

<p class=MsoNormal style='margin-top:0in;margin-right:238.95pt;margin-bottom:
17.4pt;margin-left:.25pt;line-height:142%'><b><span style='font-size:9.0pt;
line-height:142%;color:#333399;background:#FAFAFA'>INET </span></b>7 or 19
bytes IPv4 and IPv6 hosts and networks <span style='font-size:9.0pt;line-height:
142%;background:#FAFAFA'>macaddr </span>6 bytes MAC addresses</p>

<h2 style='margin-left:-.75pt'>Section 2.5: Character Types</h2>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.7pt;margin-left:0in;
text-indent:0in'><span style='font-size:11.0pt;line-height:110%;font-weight:
normal'>                                 </span>Name                                                  Description</h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=201 style='width:150.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.6pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>CHARACTER</span></b><span
  style='font-size:9.0pt;line-height:107%'> varying</span></p>
  </td>
  <td width=28 valign=top style='width:21.25pt;padding:1.6pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>n</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span>,
  </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.6pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>varchar</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.65pt;
margin-left:151.85pt'><span style='font-size:9.0pt;line-height:110%;color:#999999;
background:#FAFAFA'>(</span><span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>n</span><span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>) </span>variable-length with limit</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.6pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>character</span></p>
  </td>
  <td width=28 valign=top style='width:21.25pt;padding:1.6pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>n</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span>,
  </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.6pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>char</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:3.5pt;text-indent:0in'><span
style='font-size:11.0pt;line-height:110%'>                                          </span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>n</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>)                                 </span>fixed-length,
blank padded</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.6in;margin-bottom:.2pt;
margin-left:.25pt;line-height:158%'><b><span style='font-size:9.0pt;line-height:
158%;color:#333399;background:#FAFAFA'>TEXT       </span></b>variable unlimited
length <b><span style='font-size:18.0pt;line-height:158%;color:#336790'>Section
2.6: Arrays</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.15pt;
margin-left:.25pt'>In PostgreSQL you can create Arrays of any built-in,
user-defined or enum type. In default there is no limit to an Array, but you <i>can</i>
specify it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
19.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=124
src="PostgreSQL%20Notes%20for%20Professionals_files/image028.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
19.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=91
src="PostgreSQL%20Notes%20for%20Professionals_files/image029.gif"></span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Accessing an Array</h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=188 style='width:141.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>ARRAY</span></b></p>
  </td>
  <td width=116 valign=top style='width:87.05pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>[</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>1</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>]</span>
  and ends with </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>ARRAY</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.55pt;
margin-left:.25pt'>By default PostgreSQL uses a one-based numbering convention
for arrays, that is, an array of n elements starts with <span style='font-size:
9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>n</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>]</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=35
src="PostgreSQL%20Notes%20for%20Professionals_files/image030.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
19.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=235
src="PostgreSQL%20Notes%20for%20Professionals_files/image031.gif"></span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:0in;margin-left:
.75pt'>Getting information about an array</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
19.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=388
src="PostgreSQL%20Notes%20for%20Professionals_files/image032.gif"></span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:9.8pt;margin-left:
.75pt'>Array functions</h3>

<p class=MsoNormal style='text-indent:0in'><span style='font-size:11.0pt;
line-height:110%'>        <img border=0 width=3 height=51 id="Group 82791"
src="PostgreSQL%20Notes%20for%20Professionals_files/image033.gif"></span>    will
be added</p>

<h1 style='margin-left:-.25pt'>Chapter 3: Dates, Timestamps, and Intervals</h1>

<h2 style='margin-left:-.75pt'>Section 3.1: SELECT the last day of month</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>You can select the last day of month.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.45pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895815168'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image022.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>DATE_TRUNC</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'MONTH'</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>(</span><span style='font-size:9.0pt;line-height:110%;
color:red'>'201608'</span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>||</span><span style='font-size:9.0pt;line-height:110%;
color:red'>'01'</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>::</span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>DATE</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'> + </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>INTERVAL</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:red'>'1 MONTH
- 1 day'</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>::</span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>DATE</span></b><span style='font-size:
9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:91.8pt;margin-bottom:
0in;margin-left:-.75pt;line-height:146%'><span style='font-size:9.0pt;
line-height:146%;color:#666666;background:#FAFAFA'>201608</span> is replaceable
with a variable.</p>

<h2 style='margin-top:0in;margin-right:91.8pt;margin-bottom:0in;margin-left:
-.75pt;line-height:146%'>Section 3.2: Cast a timestamp or interval to a string</h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>TO_CHAR</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.65pt;
margin-left:.25pt'>You can convert a <b><span style='font-size:9.0pt;
line-height:110%;color:#333399;background:#FAFAFA'>TIMESTAMP</span></b> or <b><span
style='font-size:9.0pt;line-height:110%;color:#333399;background:#FAFAFA'>INTERVAL</span></b>
value to a string with the <span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>()</span> function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895814144'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image034.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>TO_CHAR</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'2016-08-12 16:40:32'</span><span style='font-size:
9.0pt;line-height:110%'>::</span><b><span style='font-size:9.0pt;line-height:
110%;color:#333399'>TIMESTAMP</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:red'>'DD Mon YYYY HH:MI:SSPM'</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>This statement will produce the string &quot;12 Aug 2016
04:40:32PM&quot;. The formatting string can be modified in many different ways;
the full list of template patterns can be found <a
href="https://www.postgresql.org/docs/current/static/functions-formatting.html"><span
style='color:#336790'>here</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.1pt;
margin-left:.25pt'>Note that you can also insert plain text into the formatting
string and you can use the template patterns in any order:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt'><b><span style='font-size:9.0pt;
line-height:110%'>SELECT</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><b><span style='font-size:9.0pt;line-height:110%;color:#333399'>TO_CHAR</span></b><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'2016-08-12 16:40:32'</span><span
style='font-size:9.0pt;line-height:110%'>::</span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>TIMESTAMP</span></b><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895813120'><span style='left:0px;position:absolute;left:0px;top:-25px;
width:718px;height:43px'><img width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image009.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>               </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'&quot;Today is
&quot;FMDay&quot;, the &quot;DDth&quot; day of the month of &quot;FMMonth&quot;
of &quot;YYYY'</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:14.15pt;margin-bottom:
10.1pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>This will produce the string &quot;Today is
Saturday, the 12th day of the month of August of 2016&quot;. You should keep in
mind, though, that any template patterns - even the single letter ones like
&quot;I&quot;, &quot;D&quot;, &quot;W&quot; - are converted, unless the plain
text is in double quotes. As a safety measure, you should put all plain text in
double quotes, as done above.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:15.3pt;
margin-left:.25pt'>You can localize the string to your language of choice (day
and month names) by using the TM (translation mode) modifier. This option uses
the localization setting of the server running PostgreSQL or the client
connecting to it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.95pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895812096'><span style='left:0px;position:absolute;left:0px;top:-10px;
width:718px;height:28px'><img width=718 height=28
src="PostgreSQL%20Notes%20for%20Professionals_files/image035.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>TO_CHAR</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'2016-08-12 16:40:32'</span><span style='font-size:
9.0pt;line-height:110%'>::</span><b><span style='font-size:9.0pt;line-height:
110%;color:#333399'>TIMESTAMP</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:red'>'TMDay, DD&quot; de &quot;TMMonth&quot; del a</span><span
style='font-size:9.0pt;line-height:110%;font-family:"Arial",sans-serif;
color:red'>ñ</span><span style='font-size:9.0pt;line-height:110%;color:red'>o
&quot;YYYY'</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:18.55pt;
margin-left:.25pt'>With a Spanish locale setting this produces &quot;S<span
style='font-family:"Arial",sans-serif'>á</span>bado, 12 de Agosto del a<span
style='font-family:"Arial",sans-serif'>ñ</span>o 2016&quot;.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
3.3: Count the number of records per week</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image036.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 4: Table Creation</h1>

<h2 style='margin-left:-.75pt'>Section 4.1: Show table definition</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:.25pt'>Open the <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>psql</span> command line tool connected to the database
where your table is. Then type the following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image037.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>To get extended information type</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image038.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:11.35pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>If you have forgotten the name of the
table, just type \d into psql to obtain a list of tables and views in the
current database. <b><span style='font-size:18.0pt;line-height:134%;color:#336790'>Section
4.2: Create table from select</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Let's say you have a table called person:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image039.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>You can create a new table of people over 30 like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895811072'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image022.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>TABLE</b> people_over_30 <b>AS</b>
<b>SELECT</b> * <b>FROM</b> person <b>WHERE</b> age </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>30</span><span style='font-size:9.0pt;
line-height:110%'>;</span></p>

<h2 style='margin-left:-.75pt'>Section 4.3: Create unlogged table</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.4pt;
margin-left:.25pt'>You can create unlogged tables so that you can make the
tables considerably faster. Unlogged table skips writing <b><span
style='font-size:9.0pt;line-height:110%'>WRITE</span></b><span
style='font-size:9.0pt;line-height:110%'>-ahead</span> log which means it's not
crash-safe and unable to replicate.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image040.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
4.4: Table creation with Primary Key</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=133
src="PostgreSQL%20Notes%20for%20Professionals_files/image041.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=21
src="PostgreSQL%20Notes%20for%20Professionals_files/image042.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>PRIMARY</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>KEY</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Alternatively, you can place the  constraint directly in the
column definition:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image043.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:22.9pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>It is recommended that you use lower case
names for the table and as well as all the columns. If you use upper case names
such as <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>Person</span>
you would have to wrap that name in double quotes (<span style='font-size:9.0pt;
line-height:134%;color:red;background:#FAFAFA'>&quot;Person&quot;</span>) in
each and every query because PostgreSQL enforces case folding. <b><span
style='font-size:18.0pt;line-height:134%;color:#336790'>Section 4.5: Create a
table that references other table</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>In this example, User Table will have a column that
references the Agency table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=720 height=174
src="PostgreSQL%20Notes%20for%20Professionals_files/image044.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 5: SELECT</h1>

<h2 style='margin-left:-.75pt'>Section 5.1: SELECT using WHERE</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>In this topic we will base on this table of users :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=305
src="PostgreSQL%20Notes%20for%20Professionals_files/image045.gif"></span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Syntax</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Select every thing:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image046.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Select some fields :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.5pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895810048'><span style='left:0px;position:absolute;left:0px;top:-9px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image022.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> field1, field2 <b>FROM</b>
schema_name.table_name <b>WHERE</b> </span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>condition</span><span style='font-size:9.0pt;line-height:
110%;color:#999999'>&gt;</span><span style='font-size:9.0pt;line-height:110%'>;</span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:0in;margin-left:
.75pt'>Examples</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=142
src="PostgreSQL%20Notes%20for%20Professionals_files/image047.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 6: Find String Length / Character Length</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt;line-height:145%'>To get length of &quot;character
varying&quot;, &quot;text&quot; fields, Use char_length() or
character_length(). <b><span style='font-size:18.0pt;line-height:145%;
color:#336790'>Section 6.1: Example to get length of a character varying field</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=194 valign=top style='width:145.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>SELECT</span></b><span style='font-size:9.0pt;
  line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:107%;
  color:#333399'>CHAR_LENGTH</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>(</span><span style='font-size:9.0pt;line-height:107%;
  color:red'>'ABCDE'</span><span style='font-size:9.0pt;line-height:107%;
  color:#999999'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:305.4pt;margin-bottom:
12.8pt;margin-left:.25pt'>Example 1, Query: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:9.55pt;
margin-left:.25pt'>Result:</p>

<p class=MsoNormal style='margin-bottom:12.1pt;text-indent:0in'><span
style='font-size:11.0pt;line-height:110%'>        <img border=0 width=3
height=51 id="Group 82504"
src="PostgreSQL%20Notes%20for%20Professionals_files/image033.gif"></span>  5</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=230 valign=top style='width:2.4in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>SELECT</span></b><span style='font-size:9.0pt;
  line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:107%;
  color:#333399'>CHARACTER_LENGTH</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>(</span><span style='font-size:9.0pt;
  line-height:107%;color:red'>'ABCDE'</span><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:278.4pt;margin-bottom:
12.8pt;margin-left:.25pt'>Example 2, Query: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:9.55pt;
margin-left:.25pt'>Result:</p>

<p class=MsoNormal style='text-indent:0in'><span style='font-size:11.0pt;
line-height:110%'>        <img border=0 width=3 height=51 id="Group 82505"
src="PostgreSQL%20Notes%20for%20Professionals_files/image033.gif"></span>  5<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 7: COALESCE</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:18.2pt;
margin-left:.25pt'>Coalesce returns the first none null argument from a set of
arguments. Only the first non null argument is return, all subsequent arguments
are ignored. The function will evaluate to null if all arguments are null.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
7.1: Single non null argument</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="PostgreSQL%20Notes%20for%20Professionals_files/image048.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
7.2: Multiple non null arguments</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=93
src="PostgreSQL%20Notes%20for%20Professionals_files/image049.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
7.3: All null arguments</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image050.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 8: INSERT</h1>

<h2 style='margin-left:-.75pt'>Section 8.1: Insert data using COPY</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.5pt;
margin-left:.25pt'>COPY is PostgreSQL's bulk-insert mechanism. It's a
convenient way to transfer data between files and tables, but it's also far
faster than <b><span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>INSERT</span></b>
when adding more than a few thousand rows at a time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Let's begin by creating sample data file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="PostgreSQL%20Notes%20for%20Professionals_files/image051.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>And we need a two column table into which this data can be
imported into.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image052.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Now the actual copy operation, this will create six records
in the table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.35pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895809024'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image053.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>COPY</span></b><span style='font-size:
9.0pt;line-height:110%'> copy_test <b>FROM</b> </span><span style='font-size:
9.0pt;line-height:110%;color:red'>'/path/to/file/sample_data.csv'</span><span
style='font-size:9.0pt;line-height:110%'> <b>DELIMITER</b> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>','</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
11.9pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=417
src="PostgreSQL%20Notes%20for%20Professionals_files/image054.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image055.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>For more details on COPY you can check <a
href="https://www.postgresql.org/docs/9.2/static/sql-copy.html"><span
style='color:#336790'>here</span></a></p>

<h2 style='margin-left:-.75pt'>Section 8.2: Inserting multiple rows</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can insert multiple rows in the database at the same
time:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image056.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 8.3: INSERT data and RETURING values</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.9pt;
margin-left:.25pt'>If you are inserting data into a table with an auto
increment column and if you want to get the value of the auto increment column.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.1pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=155
src="PostgreSQL%20Notes%20for%20Professionals_files/image057.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.55pt;
margin-left:.25pt'>If you want to insert data into <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>my_table</span> and get the id of that
row:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895808000'><span style='left:0px;position:absolute;left:0px;top:-9px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image058.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> my_table</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><b><span
style='font-size:9.0pt;line-height:110%'>NAME</span></b><span style='font-size:
9.0pt;line-height:110%'>, contact_number</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'> <b>VALUES</b> </span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>'USER'</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>8542621</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'> <b>RETURNING</b> id;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:116.65pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>Above query will return the id of the
row where the new record was inserted. <b><span style='font-size:18.0pt;
line-height:145%;color:#336790'>Section 8.4: Basic INSERT</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Let's say we have a simple table called person:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image059.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>The most basic insert involves inserting all values in the
table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image060.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>If you want to insert only specific columns, you need to
explicitly indicate which columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image061.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.15pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>Note that if any constraints exist on the
table , such as NOT NULL, you will be required to include those columns in
either case. <b><span style='font-size:18.0pt;line-height:134%;color:#336790'>Section
8.5: Insert from select</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can insert data in a table as the result of a select
statement:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image062.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:8.6pt;margin-bottom:.2pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'>Note that the projection of the select must match the
columns required for the insert. In this case, the <span style='font-size:9.0pt;
line-height:134%;background:#FAFAFA'>tmp_person </span>table has the same
columns as <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>person</span>.
<b><span style='font-size:18.0pt;line-height:134%;color:#336790'>Section 8.6:
UPSERT - INSERT ... ON CONFLICT DO UPDATE..</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.95pt;
margin-left:.25pt'>since <a
href="https://www.postgresql.org/docs/9.5/static/sql-insert.html"><span
style='color:#336790'>version 9.5</span></a> postgres offers <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>UPSERT</span>
functionality with <b><span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>INSERT</span></b> statement.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>Say you have a table called my_table, created in several
previous examples. We insert a row, returning PK value of inserted row:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=142
src="PostgreSQL%20Notes%20for%20Professionals_files/image063.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Now if we try to insert row with existing unique key it will
raise an exception:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:156.65pt;margin-bottom:
17.2pt;margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895806976'><span style='left:0px;position:absolute;left:0px;
top:-8px;width:718px;height:59px'><img width=718 height=59
src="PostgreSQL%20Notes%20for%20Professionals_files/image064.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>b</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>=</span><span style='font-size:9.0pt;
line-height:110%'># <b>INSERT</b> <b>INTO</b> my_table <b>VALUES</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>2</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'one'</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>333</span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>)</span><span style='font-size:9.0pt;line-height:110%'>; ERROR: 
duplicate <b>KEY</b> <b>VALUE</b> violates <b>UNIQUE</b> <b>CONSTRAINT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;my_table_pkey&quot; </span><span
style='font-size:9.0pt;line-height:110%'>DETAIL:  <b>KEY</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>id</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>)=(</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>2</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'> already <b>EXISTS</b>.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:21.7pt;
margin-left:.25pt'>Upsert functionality offers ability to insert it anyway,
solving the conflict:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895805952'><span style='left:0px;position:
absolute;left:0px;top:-18px;width:718px;height:173px'><img width=718
height=173 src="PostgreSQL%20Notes%20for%20Professionals_files/image065.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>b=#
INSERT INTO my_table values (2,'one',333) ON CONFLICT (id) DO UPDATE SET name =
my_table.name||' changed to: &quot;two&quot; at '||now() returning *; id
|                       name                             | contact_number
----+---------------------------------------------------------------------------------------------</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>--------------+----------------</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>2 | one
changed to: &quot;two&quot; at 2016-11-23 08:32:17.105179+00 |            333</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
12.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>(1 row)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
30.85pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>INSERT
0 1</span></p>

<h2 style='margin-left:-.75pt'>Section 8.7: SELECT data into file</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can COPY table and paste it into a file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=720 height=233
src="PostgreSQL%20Notes%20for%20Professionals_files/image066.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=127
src="PostgreSQL%20Notes%20for%20Professionals_files/image067.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 9: UPDATE</h1>

<h2 style='margin-left:-.75pt'>Section 9.1: Updating a table based on joining
another table</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can also update data in a table based on data from
another table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.15pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image068.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:9.15pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>Here we are joining the <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>person</span> <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>city</span> column
to the <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>cities</span>
<span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>city</span>
column in order to get the city's state code. This is then used to update the <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>state_code</span>
column in the <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>person</span>
table. <b><span style='font-size:18.0pt;line-height:134%;color:#336790'>Section
9.2: Update all rows in a table</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>column_name </span><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>=</span><span style='font-size:9.0pt;
  line-height:107%'> <b>VALUE</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You update all rows in table by simply providing a :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image069.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
9.3: Update all rows meeting a condition</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image070.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 9.4: Updating multiple columns in table</h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>col</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>=</span><span style='font-size:9.0pt;line-height:107%'>val</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can update multiple columns in a table in the same
statement, separating  pairs with commas:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image071.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 10: JSON Support</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:.25pt'>JSON - Java Script Object Notation , Postgresql support JSON
Data type since 9.2 version. There are some predefined</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=326 style='width:3.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>-</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>&gt;</span></p>
  </td>
  <td width=290 valign=top style='width:217.75pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> operator returns the key
  of JSON column. The </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>-</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>&gt;&gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:4.95pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>function and operators to access the JSON
data. The  operator returns the value of JSON Column. <b><span
style='font-size:18.0pt;line-height:134%;color:#336790'>Section 10.1: Using
JSONb operators</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=209
src="PostgreSQL%20Notes%20for%20Professionals_files/image072.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=193
src="PostgreSQL%20Notes%20for%20Professionals_files/image073.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Lets see everything inside the table books:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image074.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><img border=0
width=718 height=79 id="Picture 4622"
src="PostgreSQL%20Notes%20for%20Professionals_files/image075.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>-</span></b><b><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>&gt;</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:259.6pt;margin-bottom:
0in;margin-left:.75pt;text-indent:-.5pt;line-height:217%'><b> operator returns
values out of JSON columns </b>Selecting 1 column:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image076.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-bottom:14.95pt;text-indent:0in;line-height:
107%'><img border=0 width=312 height=92 id="Picture 4667"
src="PostgreSQL%20Notes%20for%20Professionals_files/image077.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Selecting 2 columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image078.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-bottom:15.65pt;text-indent:0in;line-height:
107%'><img border=0 width=592 height=93 id="Picture 4691"
src="PostgreSQL%20Notes%20for%20Professionals_files/image079.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#999999'>&gt;&gt;</span></b>&nbsp;</p>
  </td>
 </tr>
</table>

<h2 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:black;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>&gt;</span><span
style='font-size:10.0pt;line-height:110%;color:black'> vs </span><span
style='font-size:9.0pt;line-height:110%;color:black;background:#FAFAFA'>-</span></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999'>&gt;&gt;</span>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:39.4pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:217%'>The <span style='font-size:9.0pt;
line-height:217%;background:#FAFAFA'>-</span><span style='font-size:9.0pt;
line-height:217%;color:#999999;background:#FAFAFA'>&gt;</span> operator returns
the original JSON type (which might be an object), whereas <span
style='font-size:9.0pt;line-height:217%;background:#FAFAFA'>-</span> returns
text. <b>Return NESTED objects</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You can use the <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>-</span><span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>&gt;</span> to return a nested object and
thus chain the operators:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image080.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-bottom:15.2pt;text-indent:0in;line-height:
107%'><img border=0 width=185 height=89 id="Picture 4737"
src="PostgreSQL%20Notes%20for%20Professionals_files/image081.jpg"></p>

<h2 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
10.0pt;line-height:110%;color:black'>Filtering</span></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Select rows based on a value inside your JSON:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="PostgreSQL%20Notes%20for%20Professionals_files/image082.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.3pt;
margin-left:.25pt'>Notice WHERE uses <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>-</span><span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>&gt;</span> so we must compare to JSON <span
style='font-size:9.0pt;line-height:110%;color:red;background:#FAFAFA'>'&quot;Dharma
Bums&quot;'</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999'>&gt;&gt;</span>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.0pt;
margin-left:.25pt'>Or we could use <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>-</span> and compare to <span style='font-size:9.0pt;
line-height:110%;color:red;background:#FAFAFA'>'Dharma Bums'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-bottom:15.2pt;text-indent:0in;line-height:
107%'><img border=0 width=207 height=47 id="Picture 4805"
src="PostgreSQL%20Notes%20for%20Professionals_files/image083.jpg"></p>

<h2 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
10.0pt;line-height:110%;color:black'>Nested filtering</span></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Find rows based on the value of a nested JSON object:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="PostgreSQL%20Notes%20for%20Professionals_files/image084.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=226
src="PostgreSQL%20Notes%20for%20Professionals_files/image085.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>We<span style='font-family:"Arial",sans-serif'></span>re
going to store events in this table, like pageviews. Each event has properties,
which could be anything (e.g. current page) and also sends information about
the browser (like OS, screen resolution, etc). Both of these are completely
free form and could change over time (as we think of extra stuff to track).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=720 height=437
src="PostgreSQL%20Notes%20for%20Professionals_files/image086.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Now lets select everything:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image087.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><img border=0
width=718 height=100 id="Picture 4984"
src="PostgreSQL%20Notes%20for%20Professionals_files/image088.jpg"></p>

<h2 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
10.0pt;line-height:110%;color:black'>JSON operators + PostgreSQL aggregate
functions</span></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.9pt;
margin-left:.25pt'>Using the JSON operators, combined with traditional
PostgreSQL aggregate functions, we can pull out whatever we want. You have the
full might of an RDBMS at your disposal.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
23.25pt;margin-left:20.9pt;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=690 height=112
src="PostgreSQL%20Notes%20for%20Professionals_files/image089.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
23.25pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=199
src="PostgreSQL%20Notes%20for%20Professionals_files/image090.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
23.25pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=214
src="PostgreSQL%20Notes%20for%20Professionals_files/image091.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-bottom:14.95pt;text-indent:0in;line-height:
107%'><img border=0 width=305 height=54 id="Picture 5139"
src="PostgreSQL%20Notes%20for%20Professionals_files/image092.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:117.7pt;margin-bottom:
0in;margin-left:-.75pt;line-height:145%'>More examples and documentation <a
href="http://schinckel.net/2014/05/25/querying-json-in-postgres/"><span
style='color:#336790'>here</span></a> and <a
href="http://clarkdave.net/2013/06/what-can-you-do-with-postgresql-and-json/"><span
style='color:#336790'>here</span></a>.</p>

<h2 style='margin-top:0in;margin-right:117.7pt;margin-bottom:0in;margin-left:
-.75pt;line-height:145%'>Section 10.2: Querying complex JSON documents</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Taking a complex JSON document in a table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=519
src="PostgreSQL%20Notes%20for%20Professionals_files/image093.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Query for a top-level element:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:144.2pt;margin-bottom:
.2pt;margin-left:.25pt;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895804928'><span style='left:0px;position:
absolute;left:0px;top:-9px;width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image094.gif"></span></span><b><span
style='font-size:9.0pt;line-height:240%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:240%'> <b>DATA</b>-</span><span
style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;&gt;</span><span
style='font-size:9.0pt;line-height:240%;color:red'>'name'</span><span
style='font-size:9.0pt;line-height:240%'> <b>FROM</b> mytable <b>WHERE</b> <b>DATA</b>
@</span><span style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:red'>'{&quot;name&quot;:&quot;Alice&quot;}'</span><span
style='font-size:9.0pt;line-height:240%'>; </span>Query for a simple item in an
array:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.6pt;margin-bottom:
.15pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895803904'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image095.gif"></span></span><b><span
style='font-size:9.0pt;line-height:240%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:240%'> <b>DATA</b>-</span><span
style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;&gt;</span><span
style='font-size:9.0pt;line-height:240%;color:red'>'name'</span><span
style='font-size:9.0pt;line-height:240%'> <b>FROM</b> mytable <b>WHERE</b> <b>DATA</b>
@</span><span style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:red'>'{&quot;emails&quot;:[&quot;alice1@test.com&quot;]}'</span><span
style='font-size:9.0pt;line-height:240%'>; </span>Query for an object in an
array:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:41.6pt;margin-bottom:
.15pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895802880'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image096.gif"></span></span><b><span
style='font-size:9.0pt;line-height:240%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:240%'> <b>DATA</b>-</span><span
style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;&gt;</span><span
style='font-size:9.0pt;line-height:240%;color:red'>'name'</span><span
style='font-size:9.0pt;line-height:240%'> <b>FROM</b> mytable <b>WHERE</b> <b>DATA</b>
@</span><span style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:red'>'{&quot;events&quot;:[{&quot;type&quot;:&quot;anniversary&quot;}]}'</span><span
style='font-size:9.0pt;line-height:240%'>; </span>Query for a nested object:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895801856'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image097.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>DATA</b>-</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;&gt;</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'name'</span><span
style='font-size:9.0pt;line-height:110%'> <b>FROM</b> mytable <b>WHERE</b> <b>DATA</b>
@</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>'{&quot;locations&quot;:{&quot;home&quot;:{&quot;city&quot;:&quot;London&quot;}}}'</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#999999'>&gt;&gt;</span></b>&nbsp;</p>
  </td>
 </tr>
</table>

<h3 style='margin-top:0in;margin-right:327.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Performance of <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>@</span><span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>&gt;</span> compared to <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>&gt;</span>
and <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>-</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999'>&gt;&gt;</span>&nbsp;</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.1pt;
margin-left:.25pt'>It is important to understand the performance difference
between using <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>@</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>&gt;</span>,
<span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>&gt;</span>
and <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>-</span>
in the <b><span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>WHERE</span></b>
part of the query. Although these two queries appear to be broadly equivalent:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>DATA</b> <b>FROM</b> mytable <b>WHERE</b>
<b>DATA</b> @</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>'{&quot;name&quot;:&quot;Alice&quot;}'</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>DATA</b> <b>FROM</b> mytable <b>WHERE</b>
<b>DATA</b>-</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'name'</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>'&quot;Alice&quot;'</span><span style='font-size:9.0pt;line-height:
110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt;text-indent:3.75pt;line-height:240%'><span style='position:
relative;z-index:-1895800832'><span style='left:0px;position:absolute;
left:0px;top:-41px;width:718px;height:59px'><img width=718 height=59
src="PostgreSQL%20Notes%20for%20Professionals_files/image098.gif"></span></span><b><span
style='font-size:9.0pt;line-height:240%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:240%'> <b>DATA</b> <b>FROM</b> mytable <b>WHERE</b>
<b>DATA</b>-</span><span style='font-size:9.0pt;line-height:240%;color:#999999'>&gt;&gt;</span><span
style='font-size:9.0pt;line-height:240%;color:red'>'name'</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:#999999'>=</span><span style='font-size:9.0pt;
line-height:240%'> </span><span style='font-size:9.0pt;line-height:240%;
color:red'>'Alice'</span><span style='font-size:9.0pt;line-height:240%'>; </span>the
first statement will use the index created above whereas the latter two will
not, requiring a complete table scan.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.1pt;
margin-left:.25pt'>It is still allowable to use the <span style='font-size:
9.0pt;line-height:110%;background:#FAFAFA'>-</span><span style='font-size:9.0pt;
line-height:110%;color:#999999;background:#FAFAFA'>&gt;</span> operator when
obtaining resultant data, so the following queries will also use the index:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt'><b><span style='font-size:9.0pt;
line-height:110%'>SELECT</span></b><span style='font-size:9.0pt;line-height:
110%'> <b>DATA</b>-</span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>&gt;</span><span style='font-size:9.0pt;line-height:110%;
color:red'>'locations'</span><span style='font-size:9.0pt;line-height:110%'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'work'</span><span
style='font-size:9.0pt;line-height:110%'> <b>FROM</b> mytable <b>WHERE</b> <b>DATA</b>
@</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>'{&quot;name&quot;:&quot;Alice&quot;}'</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895799808'><span style='left:0px;position:absolute;left:0px;top:-25px;
width:718px;height:43px'><img width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image009.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>DATA</b>-</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'locations'</span><span
style='font-size:9.0pt;line-height:110%'>-</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>&gt;</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'work'</span><span style='font-size:9.0pt;
line-height:110%'>-</span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>&gt;&gt;</span><span style='font-size:9.0pt;line-height:110%;
color:red'>'city'</span><span style='font-size:9.0pt;line-height:110%'> <b>FROM</b>
mytable <b>WHERE</b> <b>DATA</b> @</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>'{&quot;name&quot;:&quot;Alice&quot;}'</span><span style='font-size:
9.0pt;line-height:110%'>;</span></p>

<h2 style='margin-left:-.75pt'>Section 10.3: Creating a pure JSON table</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>To create a pure JSON table you need to provide a single
field with the type <span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>JSONB</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image099.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>You should also create a basic index:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895798784'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image100.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INDEX</b> mytable_idx <b>ON</b>
mytable <b>USING</b> gin </span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>(</span><b><span style='font-size:9.0pt;line-height:110%'>DATA</span></b><span
style='font-size:9.0pt;line-height:110%'> jsonb_path_ops</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>At this point you can insert data in to the table and query
it efficiently.</p>

<h1 style='margin-left:-.25pt'>Chapter 11: Aggregate Functions</h1>

<h2 style='margin-left:-.75pt'>Section 11.1: Simple statistics: min(), max(),
avg()</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.2pt;
margin-left:.25pt'>In order to determine some simple statistics of a value in a
column of a table, you can use an aggregate function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.1pt;
margin-left:.25pt'>If your <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>individuals</span> table is:</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:1.1pt;margin-left:
6.7pt'>Name Age</h3>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'>Allie           17</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.85pt;
margin-left:.25pt'>Amanda 14</p>

<p class=MsoNormal style='margin-bottom:15.05pt;text-indent:0in'>Alana         20</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You could write this statement to get the minimum, maximum
and average value:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image101.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
1.1pt;margin-left:.75pt;text-indent:-.5pt'><b>min max avg</b></p>

<p class=MsoNormal style='margin-bottom:20.8pt;text-indent:0in'>14      20      17</p>

<h2 style='margin-left:-.75pt'>Section 11.2: regr_slope(Y, X) : slope of the
least-squares-fit linear equation determined by the (X, Y) pairs</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>To illustrate how to use regr_slope(Y,X), I applied it to a
real world problem. In Java, if you don't clean up memory properly, the garbage
can get stuck and fill up the memory. You dump statistics every hour about
memory utilization of different classes and load it into a postgres database
for analysis.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>All memory leak candidates will have a trend of consuming
more memory as more time passes. If you plot this trend, you would imagine a
line going up and to the left:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=301
src="PostgreSQL%20Notes%20for%20Professionals_files/image102.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>Suppose you have a table containing heap dump histogram data
(a mapping of classes to how much memory they consume):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="PostgreSQL%20Notes%20for%20Professionals_files/image103.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>To compute the slope for each class, we group by over the
class. The HAVING clause &gt; 0 ensures that we get only candidates with a
positive slop (a line going up and to the left). We sort by the slope
descending so that we get the classes with the largest rate of memory increase
at the top.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image104.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Output:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="PostgreSQL%20Notes%20for%20Professionals_files/image105.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.0pt;margin-bottom:.2pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'>From the output we see that java.util.ArrayList's
memory consumption is increasing the fastest at 71.799 bytes per second and is
potentially part of the memory leak. <b><span style='font-size:18.0pt;
line-height:134%;color:#336790'>Section 11.3: string_agg(expression, delimiter)</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>STRING_AGG</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.25pt;
margin-left:.25pt'>You can concatenate strings separated by delimiter using the
<span style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>()</span>
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.1pt;
margin-left:.25pt'>If your <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>individuals</span> table is:</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:1.1pt;margin-left:
6.7pt'>Name Age Country</h3>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'>Allie            15     USA</p>

<p class=MsoNormal style='margin-bottom:3.85pt;text-indent:0in'>Amanda 14        USA</p>

<p class=MsoNormal style='margin-bottom:15.05pt;text-indent:0in'>Alana         20      Russia</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>SELECT</span></b><span style='font-size:9.0pt;
  line-height:107%'> ... <b>GROUP</b> <b>BY</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>You could write  statement to get names from each country:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.0pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image106.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=231 style='width:172.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>GROUP</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>BY</b></span></p>
  </td>
  <td width=101 valign=top style='width:75.75pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> clause because </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>STRING_AGG</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>Note that you need to use a <span style='font-size:9.0pt;
line-height:110%;color:#999999;background:#FAFAFA'>()</span> is an aggregate
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
13.25pt;margin-left:.75pt;text-indent:-.5pt'><b>Result:</b></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.1pt;margin-left:
0in;text-indent:0in'><span style='font-size:11.0pt;line-height:110%;font-weight:
normal'>         </span>names          country</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.85pt;
margin-left:.25pt'>Allie, Amanda USA</p>

<p class=MsoNormal style='margin-bottom:15.05pt;text-indent:0in'>Alana                     Russia</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://www.postgresql.org/docs/devel/static/functions-aggregate.html"><span
style='color:#336790'>More PostgreSQL aggregate function described here</span></a><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 12: Common Table Expressions (WITH)</h1>

<h2 style='margin-left:-.75pt'>Section 12.1: Common Table Expressions in SELECT
Queries</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Common table expressions support extracting portions of
larger queries. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=240
src="PostgreSQL%20Notes%20for%20Professionals_files/image107.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
12.2: Traversing tree using WITH RECURSIVE</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.2pt;margin-bottom:0in;
margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0 width=719
height=536 id="Picture 92001"
src="PostgreSQL%20Notes%20for%20Professionals_files/image108.gif"></p>

<h1 style='margin-left:-.25pt'>Chapter 13: Window Functions</h1>

<h2 style='margin-left:-.75pt'>Section 13.1: generic example</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Preparing data:</p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>TABLE</b> wf_example</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>i </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>INT</span></b><span style='font-size:
9.0pt;line-height:110%'>, t </span><b><span style='font-size:9.0pt;line-height:
110%;color:#333399'>TEXT</span></b><span style='font-size:9.0pt;line-height:
110%'>,ts timestamptz,b </span><b><span style='font-size:9.0pt;line-height:
110%;color:#333399'>BOOLEAN</span></b><span style='font-size:9.0pt;line-height:
110%;color:#999999'>)</span><span style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>1</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'a'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.01.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>TRUE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>1</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'a'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.01.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>FALSE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>1</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'b'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.01.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>FALSE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>2</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'b'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.01.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>FALSE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>3</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'b'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.01.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>FALSE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>4</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'b'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.02.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>FALSE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>5</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'b'</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:red'>'1970.03.01'</span><span
style='font-size:9.0pt;line-height:110%'>,<b>FALSE</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:201.65pt;margin-bottom:
.15pt;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:240%'><span style='position:relative;z-index:
-1895797760'><span style='left:0px;position:absolute;left:0px;top:-140px;
width:718px;height:158px'><img width=718 height=158
src="PostgreSQL%20Notes%20for%20Professionals_files/image109.gif"></span></span><b><span
style='font-size:9.0pt;line-height:240%'>INSERT</span></b><span
style='font-size:9.0pt;line-height:240%'> <b>INTO</b> wf_example <b>SELECT</b> </span><span
style='font-size:9.0pt;line-height:240%;color:#666666'>2</span><span
style='font-size:9.0pt;line-height:240%'>,</span><span style='font-size:9.0pt;
line-height:240%;color:red'>'c'</span><span style='font-size:9.0pt;line-height:
240%'>,</span><span style='font-size:9.0pt;line-height:240%;color:red'>'1970.03.01'</span><span
style='font-size:9.0pt;line-height:240%'>,<b>TRUE</b>; </span>Running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="PostgreSQL%20Notes%20for%20Professionals_files/image110.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:21.7pt;
margin-left:.25pt'>Result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895796736'><span style='left:0px;position:
absolute;left:0px;top:-18px;width:718px;height:205px'><img width=718
height=205 src="PostgreSQL%20Notes%20for%20Professionals_files/image111.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'> i | t
|           ts           | b | dist_by_i | prev_t | nth | num_by_i | num_all |
ntile
---+---+------------------------+---+-----------+--------+-----+----------+---------+-------</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>1 | a |
1970-01-01 00:00:00+01 | f |         1 |        |   3 |        3 |       8
|     1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>1 | a |
1970-01-01 00:00:00+01 | t |         1 | a      |   3 |        3 |       8
|     1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:13.85pt;text-indent:-10.85pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>1<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>| b |
1970-01-01 00:00:00+01 | f |         1 | a      |   3 |        3 |       8
|     1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:13.85pt;text-indent:-10.85pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>2<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>| c |
1970-03-01 00:00:00+01 | t |         2 | b      |   3 |        2 |       8
|     2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:13.85pt;text-indent:-10.85pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>2<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>| b |
1970-01-01 00:00:00+01 | f |         2 | c      |   3 |        2 |       8
|     2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:13.85pt;text-indent:-10.85pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>3<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>| b |
1970-01-01 00:00:00+01 | f |         3 | b      |   3 |        1 |       8
|     2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
.2pt;margin-left:13.85pt;text-indent:-10.85pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>4<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>| b |
1970-02-01 00:00:00+01 | f |         4 | b      |   3 |        1 |       8
|     3 5 | b | 1970-03-01 00:00:00+01 | f |         5 | b      |   3 |       
1 |       8 |     3</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95pt;margin-bottom:
25.1pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;font-family:"DejaVu Sans Mono"'>(8
rows)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Explanation:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>DENSE_RANK</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>()</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>OVER</b> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>ORDER</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>BY</b> i</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>COUNT</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>DISTINCT</span></b><span style='font-size:9.0pt;
  line-height:107%'> i</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.5pt;
margin-left:.25pt'><i>dist_by_i</i>: <span style='font-size:9.0pt;line-height:
110%;color:#999999;background:#FAFAFA'>)</span> is like a row_number per
distinct values. Can be used for the number of distinct values of i (<span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>)</span>
wold not work). Just use the maximum value.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>LAG</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>t</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>OVER</b> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.85pt;
margin-left:.25pt'><i>prev_t</i>: <span style='font-size:9.0pt;line-height:
110%;color:#999999;background:#FAFAFA'>()</span> is a previous value of t over
the whole window. mind that it is null for the first row.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>NTH_VALUE</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>i, </span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>6</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>OVER</b> </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>COUNT</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>TRUE</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>OVER</b> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>PARTITION</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>BY</b> i</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>COUNT</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>TRUE</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>OVER</b> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:90.1pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:215%'><i>nth</i>: <span style='font-size:
9.0pt;line-height:215%;color:#999999;background:#FAFAFA'>()</span> is the value
of sixth rows column i over the whole window <i>num_by_i</i>: <span
style='font-size:9.0pt;line-height:215%;color:#999999;background:#FAFAFA'>)</span>
is an amount of rows for each value of i <i>num_all</i>: <span
style='font-size:9.0pt;line-height:215%;color:#999999;background:#FAFAFA'>()</span>
is an amount of rows over a whole window</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>NTILE</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>(</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>3</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>)</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> over</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><i>ntile</i>: <span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>()</span> splits the whole window to 3 (as
much as possible) equal in quantity parts</p>

<h2 style='margin-left:-.75pt'>Section 13.2: column values vs dense_rank vs
rank vs row_number</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'><a
href="https://www.postgresql.org/docs/current/static/functions-window.html"><span
style='color:#336790'>here</span></a> you can find the functions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>With the table wf_example created in previous example, run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="PostgreSQL%20Notes%20for%20Professionals_files/image112.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:9.05pt;
margin-left:.25pt'>The result is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:8.95pt;
margin-left:30.25pt;text-indent:-30.0pt'><span style='font-size:11.0pt;
line-height:110%'><img border=0 width=718 height=214
src="PostgreSQL%20Notes%20for%20Professionals_files/image113.gif"></span><i>dense_rank</i>
orders <b>VALUES</b> of <b>i</b> by appearance in window. <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>i</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#666666;background:#FAFAFA'>1</span>
appears, so first row has dense_rank, next and third i value does not change,
so it is <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>dense_rank</span>
shows <i>1</i> - FIRST value not changed. fourth row <span style='font-size:
9.0pt;line-height:110%;background:#FAFAFA'>i</span><span style='font-size:9.0pt;
line-height:110%;color:#999999;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#666666;background:#FAFAFA'>2</span>,
it is second value of <i>i</i> met, so <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>dense_rank</span> shows 2, andso for the next row.
Then it meets value <span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>i</span><span style='font-size:9.0pt;line-height:110%;color:#999999;
background:#FAFAFA'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#666666;background:#FAFAFA'>3</span> at 6th row, so it show 3. Same for
the rest two values of <i>i</i>. So the last value of <span style='font-size:
9.0pt;line-height:110%;background:#FAFAFA'>dense_rank</span> is the number of
distinct values of <i>i</i>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:9.7pt;
margin-left:20.9pt'><img width=5 height=36
src="PostgreSQL%20Notes%20for%20Professionals_files/image114.gif" align=left
hspace=12><i>row_number</i> orders <b>ROWS</b> as they are listed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:20.9pt'><i>rank</i> Not to confuse with <span style='font-size:
9.0pt;line-height:110%;background:#FAFAFA'>dense_rank</span> this function
orders <b>ROW NUMBER</b> of <b>i</b> values. So it starts same with three ones,
but has next value 4, which means <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>i</span><span style='font-size:9.0pt;line-height:110%;
color:#999999;background:#FAFAFA'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#666666;background:#FAFAFA'>2</span> (new value) was met
at row 4. Same <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>i</span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#666666;background:#FAFAFA'>3</span>
was met at row 6.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt'>Etc..</p>

<h1 style='margin-left:-.25pt'>Chapter 14: Recursive queries</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:290.9pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>There are no real recursive querys! <b><span
style='font-size:18.0pt;line-height:145%;color:#336790'>Section 14.1: Sum of
Integers</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image115.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://www.postgresql.org/docs/9.6/static/queries-with.html"><span
style='color:#336790'>Link to Documentation</span></a><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 15: Programming with PL/pgSQL</h1>

<h2 style='margin-left:-.75pt'>Section 15.1: Basic PL/pgSQL Function</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>A simple PL/pgSQL function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=256
src="PostgreSQL%20Notes%20for%20Professionals_files/image116.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>This could have been achieved with just the SQL statement
but demonstrates the basic structure of a function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>To execute the function do:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image117.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 15.2: custom exceptions</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>creating custom exception 'P2222':</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image118.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>creating custom exception not assigning errm:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image119.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>calling:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=90
src="PostgreSQL%20Notes%20for%20Professionals_files/image120.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=218
src="PostgreSQL%20Notes%20for%20Professionals_files/image121.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>here custom P0001 processed, and P2222, not, aborting the
execution.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:18.55pt;
margin-left:.25pt'>Also it makes huge sense to keep a table of exceptions, like
here: <a href="http://stackoverflow.com/a/2700312/5315974"><span
style='color:#336790'>http://stackoverflow.com/a/2700312/5315974</span></a></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
15.3: PL/pgSQL Syntax</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="PostgreSQL%20Notes%20for%20Professionals_files/image122.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 15.4: RETURNS Block</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.1pt;
margin-left:.25pt'>Options for returning in a PL/pgSQL function:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=252 valign=top style='width:189.0pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Table</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>(</span><span style='font-size:9.0pt;line-height:107%'>column_name
  column_type, ...</span><span style='font-size:9.0pt;line-height:107%;
  color:#999999'>)</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:2.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=245 valign=top style='width:2.55in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>SETOF</span></b><span style='font-size:9.0pt;
  line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
  color:red'>'Datatype'</span><span style='font-size:9.0pt;line-height:107%'> <b>OR</b>
  </span><span style='font-size:9.0pt;line-height:107%;color:red'>'table_column'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=5 height=45 id="Group 76170"
src="PostgreSQL%20Notes%20for%20Professionals_files/image123.gif"></span><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'> Datatype</span> <a
href="https://www.postgresql.org/docs/9.6/static/datatype.html"><span
style='color:#336790'>List of all datatypes</span></a></p>

<h1 style='margin-left:-.25pt'>Chapter 16: Inheritance</h1>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:4.2pt;margin-left:
-.75pt'>Section 16.1: Creating children tables</h2>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>TABLE</b> users </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>username </span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>TEXT</span></b><span
style='font-size:9.0pt;line-height:110%'>, email </span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>TEXT</span></b><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>TABLE</b> simple_users </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>()</span><span
style='font-size:9.0pt;line-height:110%'> <b>INHERITS</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>users</span><span style='font-size:
9.0pt;line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
17.25pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><span style='position:relative;z-index:-1895794688'><span
style='left:0px;position:absolute;left:0px;top:-1000px;width:718px;height:1px'><img
width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image124.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>TABLE</b> users_with_password </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><b><span
style='font-size:9.0pt;line-height:110%'>PASSWORD</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>TEXT</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'> <b>INHERITS</b> </span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%'>users</span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>)</span><span style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>Our three tables look like this:</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:1.85pt;
margin-left:.75pt'>users</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:443.5pt;margin-bottom:
.05in;margin-left:.25pt;text-indent:4.95pt'><b>Column Type </b>username text
email                text</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:1.85pt;
margin-left:.75pt'>simple_users</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:443.5pt;margin-bottom:
.05in;margin-left:.25pt;text-indent:4.95pt'><b>Column Type </b>username text
email                text</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:1.85pt;
margin-left:.75pt'>users_with_password</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:443.5pt;margin-bottom:
.2pt;margin-left:.25pt;text-indent:4.95pt;line-height:133%'><b>Column Type </b>username
text email                text password text<br clear=all style='page-break-before:
always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 17: Export PostgreSQL database table
header and data to CSV file</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:18.2pt;
margin-left:.25pt'>From Adminer management tool it's has export to csv file
option for mysql database But not available for postgresql database. Here I
will show the command to export CSV for postgresql database.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
17.1: copy from query</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image125.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:4.9pt;margin-left:
-.75pt'>Section 17.2: Export PostgreSQL table to csv with header for some
column(s)</h2>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><span
style='position:relative;z-index:-1895793664'><span style='left:0px;position:
absolute;left:0px;top:-1687px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image126.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>COPY</span></b><span style='font-size:
9.0pt;line-height:110%'> products</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%'>is_public, title, discount</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'> <b>TO</b> </span><span style='font-size:9.0pt;line-height:
110%;color:red'>'D:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\c</span></b><span style='font-size:9.0pt;line-height:110%;
color:red'>sv_backup</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\p</span></b><span style='font-size:9.0pt;line-height:110%;
color:red'>roducts_db.csv'</span><span style='font-size:9.0pt;line-height:110%'>
<b>DELIMITER</b> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>','</span><span style='font-size:9.0pt;line-height:110%'> <b>CSV</b></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
12.55pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>HEADER</span></b><span
style='font-size:9.0pt;line-height:110%'>;    </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt'><b><span style='font-size:9.0pt;
line-height:110%'>COPY</span></b><span style='font-size:9.0pt;line-height:110%'>
categories</span><span style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><b><span
style='font-size:9.0pt;line-height:110%'>NAME</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>)</span><span style='font-size:9.0pt;
line-height:110%'> <b>TO</b> </span><span style='font-size:9.0pt;line-height:
110%;color:red'>'D:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\c</span></b><span style='font-size:9.0pt;line-height:110%;
color:red'>sv_backup</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\c</span></b><span style='font-size:9.0pt;line-height:110%;
color:red'>ategories_db.csv'</span><span style='font-size:9.0pt;line-height:
110%'> <b>DELIMITER</b> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>','</span><span style='font-size:9.0pt;line-height:110%'> <b>CSV</b>
<b>HEADER</b>;</span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:4.2pt;margin-left:
-.75pt'>Section 17.3: Full table backup to csv with header</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895792640'><span style='left:0px;position:absolute;left:0px;top:-1825px;
width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image124.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>COPY</span></b><span style='font-size:
9.0pt;line-height:110%'> products <b>TO</b> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>'D:</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\c</span></b><span style='font-size:9.0pt;
line-height:110%;color:red'>sv_backup</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\p</span></b><span style='font-size:9.0pt;
line-height:110%;color:red'>roducts_db.csv'</span><span style='font-size:9.0pt;
line-height:110%'> <b>DELIMITER</b> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>','</span><span style='font-size:9.0pt;line-height:
110%'> <b>CSV</b> <b>HEADER</b>;    </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt'><b><span style='font-size:9.0pt;
line-height:110%'>COPY</span></b><span style='font-size:9.0pt;line-height:110%'>
categories <b>TO</b> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>'D:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\c</span></b><span style='font-size:9.0pt;line-height:110%;
color:red'>sv_backup</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\c</span></b><span style='font-size:9.0pt;line-height:110%;
color:red'>ategories_db.csv'</span><span style='font-size:9.0pt;line-height:
110%'> <b>DELIMITER</b> </span><span style='font-size:9.0pt;line-height:110%;
color:red'>','</span><span style='font-size:9.0pt;line-height:110%'> <b>CSV</b>
<b>HEADER</b>;</span><br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 18: Triggers and Trigger Functions</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:3.75pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>The trigger will be associated with the
specified table or view and will execute the specified function function_name
when certain events occur. <b><span style='font-size:18.0pt;line-height:134%;
color:#336790'>Section 18.1: Type of triggers</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
10.25pt;margin-left:.75pt;text-indent:-.5pt'><b>Trigger can be specified to
fire:</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>INSTEAD</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>OF</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.75pt;
margin-left:20.9pt'><img width=5 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image127.gif" align=left
hspace=12><b><span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>BEFORE</span></b>
the operation is attempted on a row - insert, update or delete;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:148.6pt;margin-bottom:
9.8pt;margin-left:74.9pt;text-indent:-.75in'><b><span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>AFTER</span></b> the operation has
completed - insert, update or delete;  the operation in the case of inserts,
updates or deletes on a view.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
0in;margin-left:.75pt;text-indent:-.5pt'><b>Trigger that is marked:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=348
src="PostgreSQL%20Notes%20for%20Professionals_files/image128.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
19.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image129.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=147
src="PostgreSQL%20Notes%20for%20Professionals_files/image130.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.8pt;
margin-left:.5pt;text-indent:-.5pt'><span style='font-size:11.0pt;line-height:
110%'><img border=0 width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image131.gif"></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> * <b>FROM</b> company;</span></p>

<h2 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
10.0pt;line-height:110%;color:black'>Trigger for multiple purpose Step 1:
create your function</span></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
19.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=535
src="PostgreSQL%20Notes%20for%20Professionals_files/image132.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=147
src="PostgreSQL%20Notes%20for%20Professionals_files/image133.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image134.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 18.2: Basic PL/pgSQL Trigger Function</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>This is a simple trigger function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=118
src="PostgreSQL%20Notes%20for%20Professionals_files/image135.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
11.9pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=719 height=466
src="PostgreSQL%20Notes%20for%20Professionals_files/image136.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=92
src="PostgreSQL%20Notes%20for%20Professionals_files/image137.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 19: Event Triggers</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:80.7pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>Event Triggers will be fired whenever
event associated with them occurs in database. <b><span style='font-size:18.0pt;
line-height:145%;color:#336790'>Section 19.1: Logging DDL Command Start Events</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>Event Type-</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.15pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:107%'><img width=5 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image127.gif" align=left
hspace=12><span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>DDL_COMMAND_START</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:377.2pt;margin-bottom:
12.8pt;margin-left:21.4pt;text-indent:-.5pt;line-height:107%'><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>DDL_COMMAND_END </span>SQL_DROP</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>This is example for creating an Event Trigger and logging <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>DDL_COMMAND_START</span>
events.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=289
src="PostgreSQL%20Notes%20for%20Professionals_files/image138.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 20: Role Management</h1>

<h2 style='margin-left:-.75pt'>Section 20.1: Create a user with a password</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.45pt;
margin-left:.25pt'>Generally you should avoid using the default database role
(often <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>postgres</span>)
in your application. You should instead create a user with lower levels of
privileges. Here we make one called <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>niceusername</span> and give it a password <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>very-</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:-.25pt;text-indent:-.5pt;background:#FAFAFA'><span
style='font-size:9.0pt;line-height:110%'>strong-<b>PASSWORD</b></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
17.45pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><span style='position:relative;z-index:-1895789568'><span
style='left:0px;position:absolute;left:0px;top:-5177px;width:718px;height:1px'><img
width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>ROLE</b> niceusername <b>WITH</b> <b>PASSWORD</b>
</span><span style='font-size:9.0pt;line-height:110%;color:red'>'very-strong-password'</span><span
style='font-size:9.0pt;line-height:110%'> <b>LOGIN</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>The problem with that is that queries typed into the <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>psql</span> console
get saved in a history file <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>.psql_history</span> in the user's home directory and may
as well be logged to the PostgreSQL database server log, thus exposing the
password.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>PASSWORD</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>To avoid this, use the <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>\</span> command to set the user password.
If the user issuing the command is a superuser, the current password will not
be asked. (Must be superuser to alter passwords of superusers)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image140.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 20.2: Grant and Revoke Privileges</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.3pt;
margin-left:.25pt'>Suppose, that we have three users :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.1pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The
Administrator of the database &gt; admin</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.1pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The
application with a full access for her data &gt; read_write</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The
read only access &gt; read_only</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image141.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>With the above queries, untrusted users can no longer
connect to the database.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="PostgreSQL%20Notes%20for%20Professionals_files/image142.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>The next set of queries revoke all privileges from
unauthenticated users and provide limited set of privileges for the <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>read_write</span>
user.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:107%'><i><span
style='font-size:9.0pt;line-height:107%;color:green'>--ACCESS TABLES</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>REVOKE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>ALL</b> <b>ON</b> <b>ALL</b>
TABLES <b>IN</b> <b>SCHEMA</b> public <b>FROM</b> PUBLIC ;</span></p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>SELECT</b>                        
<b>ON</b> <b>ALL</b> TABLES <b>IN</b> <b>SCHEMA</b> public <b>TO</b> read_only
;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>SELECT</b>, <b>INSERT</b>, <b>UPDATE</b>,
<b>DELETE</b> <b>ON</b> <b>ALL</b> TABLES <b>IN</b> <b>SCHEMA</b> public <b>TO</b>
read_write ;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
12.55pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>ALL</b>                           
<b>ON</b> <b>ALL</b> TABLES <b>IN</b> <b>SCHEMA</b> public <b>TO</b> <b>ADMIN</b>
;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:107%'><i><span
style='font-size:9.0pt;line-height:107%;color:green'>--ACCESS SEQUENCES</span></i></p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>REVOKE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>ALL</b>   <b>ON</b> <b>ALL</b>
SEQUENCES <b>IN</b> <b>SCHEMA</b> public <b>FROM</b> PUBLIC;</span></p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>SELECT</b> <b>ON</b> <b>ALL</b>
SEQUENCES <b>IN</b> <b>SCHEMA</b> public <b>TO</b> read_only; </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>-- allows the use of
CURRVAL</span></i></p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><b><span
style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>UPDATE</b> <b>ON</b> <b>ALL</b>
SEQUENCES <b>IN</b> <b>SCHEMA</b> public <b>TO</b> read_write; </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>-- allows the use of
NEXTVAL and</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:107%'><i><span
style='font-size:9.0pt;line-height:107%;color:green'>SETVAL</span></i></p>

<p class=MsoNormal style='margin-left:3.5pt;text-indent:-.5pt'><span
style='position:relative;z-index:-1895788544'><span style='left:0px;position:
absolute;left:0px;top:-5937px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image143.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> USAGE  <b>ON</b> <b>ALL</b> SEQUENCES
<b>IN</b> <b>SCHEMA</b> public <b>TO</b> read_write; </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>-- allows the use of
CURRVAL and NEXTVAL</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><b><span style='font-size:9.0pt;line-height:110%'>GRANT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>ALL</b>    <b>ON</b> <b>ALL</b>
SEQUENCES <b>IN</b> <b>SCHEMA</b> public <b>TO</b> <b>ADMIN</b>;</span></p>

<h2 style='margin-left:-.75pt'>Section 20.3: Create Role and matching database</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>To support a given application, you often create a new role
and database to match.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>The shell commands to run would be these:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.1pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="PostgreSQL%20Notes%20for%20Professionals_files/image144.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.55pt;
margin-left:.25pt'>This assumes that <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>pg_hba.conf</span> has been properly configured, which
probably looks like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:145.85pt;margin-bottom:
22.95pt;margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895787520'><span style='left:0px;position:absolute;left:0px;
top:-6217px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image124.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'># <b>TYPE</b>  <b>DATABASE</b>        <b>USER</b>           
ADDRESS                 METHOD host    sameuser        <b>ALL</b>            
localhost               md5 <b>LOCAL</b>   sameuser        <b>ALL</b>                                    
md5</span></p>

<h2 style='margin-left:-.75pt'>Section 20.4: Alter default search_path of user</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.3pt;
margin-left:.25pt'>With the below commands, user's default search_path can be
set.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Check
search path before set default schema.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
12.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image145.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>ALTER</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>USER</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Set
<span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>search_path</span>
with  command to append a new schema <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>my_schema</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
12.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image146.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Check
result after execution.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="PostgreSQL%20Notes%20for%20Professionals_files/image147.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Alternative:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image148.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
20.5: Create Read Only User</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image149.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 20.6: Grant access privileges on objects
created in the future</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.65pt;
margin-left:.25pt'>Suppose, that we have <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>three users</span> :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.35pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The
Administrator of the database &gt; <b><span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>ADMIN</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.5pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The
application with a full access for her data &gt; <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>read_write</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.0pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>The
read only access &gt; <span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>read_only</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>With below queries, you can set access privileges on objects
created in the future in specified schema.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
11.05pt;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:137%'><span style='position:relative;z-index:
-1895786496'><span style='left:0px;position:absolute;left:0px;top:-7292px;
width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image150.gif"></span></span><b><span
style='font-size:9.0pt;line-height:137%'>ALTER</span></b><span
style='font-size:9.0pt;line-height:137%'> <b>DEFAULT</b> <b>PRIVILEGES</b> <b>IN</b>
<b>SCHEMA</b> myschema <b>GRANT</b> <b>SELECT</b>                      <b>ON</b>
TABLES <b>TO </b>read_only; <b>ALTER</b> <b>DEFAULT</b> <b>PRIVILEGES</b> <b>IN</b>
<b>SCHEMA</b> myschema <b>GRANT</b> <b>SELECT</b>,<b>INSERT</b>,<b>DELETE</b>,<b>UPDATE</b>
<b>ON</b> TABLES <b>TO </b>read_write; <b>ALTER</b> <b>DEFAULT</b> <b>PRIVILEGES</b>
<b>IN</b> <b>SCHEMA</b> myschema <b>GRANT</b> <b>ALL</b>                        
<b>ON</b> TABLES <b>TO</b> <b>ADMIN</b>; </span>Or, you can set access
privileges on objects created in the future by specified user.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
.15pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><span style='position:relative;z-index:-1895785472'><span
style='left:0px;position:absolute;left:0px;top:-7373px;width:718px;height:1px'><img
width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>ALTER</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>DEFAULT</b> <b>PRIVILEGES</b> <b>FOR</b>
<b>ROLE</b> <b>ADMIN</b> <b>GRANT</b> <b>SELECT</b>  <b>ON</b> TABLES <b>TO</b>
read_only;</span></p>

<h1 style='margin-left:-.25pt'>Chapter 21: Postgres cryptographic functions</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:18.55pt;
margin-left:.25pt'>In Postgres, cryptographic functions can be unlocked by
using pgcrypto module. CREATE EXTENSION pgcrypto;</p>

<h2 style='margin-left:-.75pt'>Section 21.1: digest</h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>DIGEST</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.6in'> functions generate a binary hash of the given data. This <b>can</b>
be used to create a random hash.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=302 style='width:3.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=302 valign=top style='width:3.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>digest</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>(</span><b><span style='font-size:9.0pt;line-height:107%'>DATA</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>TEXT</span></b><span style='font-size:
  9.0pt;line-height:107%'>, <b>TYPE</b> </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#333399'>TEXT</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>)</span><span style='font-size:9.0pt;
  line-height:107%'> <b>RETURNS</b> </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#333399'>BYTEA</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:277.65pt;margin-bottom:
12.8pt;margin-left:.25pt'>Usage: </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=310 style='width:232.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=310 valign=top style='width:232.2pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>digest</span><span style='font-size:9.0pt;line-height:
  107%;color:#999999'>(</span><b><span style='font-size:9.0pt;line-height:107%'>DATA</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#333399'>BYTEA</span></b><span style='font-size:
  9.0pt;line-height:107%'>, <b>TYPE</b> </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#333399'>TEXT</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>)</span><span style='font-size:9.0pt;
  line-height:107%'> <b>RETURNS</b> </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#333399'>BYTEA</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:289.1pt;margin-bottom:
12.8pt;margin-left:.25pt'>Or: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:.25pt'>Examples:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=574
 style='width:430.3pt;margin-left:20.9pt;border-collapse:collapse'>
 <tr style='height:16.65pt'>
  <td width=8 rowspan=2 valign=top style='width:6.35pt;padding:0in 0in 0in 0in;
  height:16.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%'><img border=0 width=5 height=35
  id="Group 75670"
  src="PostgreSQL%20Notes%20for%20Professionals_files/image151.gif"></span></p>
  </td>
  <td width=565 valign=top style='width:423.95pt;padding:0in 0in 0in 0in;
  height:16.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:3.9in;margin-bottom:
  0in;margin-left:-55.6pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=187
   style='width:1.95in;margin-left:2.75pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:
    1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>SELECT</span></b><span
    style='font-size:9.0pt;line-height:107%'> DIGEST</span><span
    style='font-size:9.0pt;line-height:107%;color:#999999'>(</span><span
    style='font-size:9.0pt;line-height:107%;color:red'>'1'</span><span
    style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
    9.0pt;line-height:107%;color:red'>'sha1'</span><span style='font-size:9.0pt;
    line-height:107%;color:#999999'>)</span></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
 </tr>
 <tr style='height:16.65pt'>
  <td width=565 valign=bottom style='width:423.95pt;padding:0in 0in 0in 0in;
  height:16.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:479.55pt;margin-bottom:
  0in;margin-left:-55.6pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=562
   style='width:5.85in;margin-left:2.75pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=562 valign=top style='width:5.85in;background:#FAFAFA;padding:
    1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>SELECT</span></b><span
    style='font-size:9.0pt;line-height:107%'> DIGEST</span><span
    style='font-size:9.0pt;line-height:107%;color:#999999'>(</span><span
    style='font-size:9.0pt;line-height:107%'>CONCAT</span><span
    style='font-size:9.0pt;line-height:107%;color:#999999'>(</span><span
    style='font-size:9.0pt;line-height:107%'>CAST</span><span style='font-size:
    9.0pt;line-height:107%;color:#999999'>(</span><b><span style='font-size:
    9.0pt;line-height:107%'>CURRENT_TIMESTAMP</span></b><span style='font-size:
    9.0pt;line-height:107%'> <b>AS</b> </span><b><span style='font-size:9.0pt;
    line-height:107%;color:#333399'>TEXT</span></b><span style='font-size:9.0pt;
    line-height:107%;color:#999999'>)</span><span style='font-size:9.0pt;
    line-height:107%'>, </span><b><span style='font-size:9.0pt;line-height:
    107%;color:#333399'>RANDOM</span></b><span style='font-size:9.0pt;
    line-height:107%;color:#999999'>()</span><span style='font-size:9.0pt;
    line-height:107%'>::</span><b><span style='font-size:9.0pt;line-height:
    107%;color:#333399'>TEXT</span></b><span style='font-size:9.0pt;line-height:
    107%;color:#999999'>)</span><span style='font-size:9.0pt;line-height:107%'>,
    </span><span style='font-size:9.0pt;line-height:107%;color:red'>'sha1'</span><span
    style='font-size:9.0pt;line-height:107%;color:#999999'>)</span></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
 </tr>
</table>

<span style='font-size:10.0pt;line-height:110%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal>&nbsp;</p>

<h1 style='margin-left:-.25pt'>Chapter 22: Comments in PostgreSQL</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'><b><i>COMMMENT</i></b> main purpose is to define or change a
comment on database object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.7pt;
margin-left:.25pt'>Only a single comment(string) can be given on any database
object. COMMENT will help us to know what for the particular database object
has been defined whats its actual purpose is.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.1pt;
margin-left:.25pt'>The rule for <b><i>COMMENT ON ROLE</i></b> is that you must
be superuser to comment on a superuser role, or have the</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt;line-height:146%'><b><i>CREATEROLE</i></b> privilege to
comment on non-superuser roles. Of course, a <i>superuser can comment on
anything </i><b><span style='font-size:18.0pt;line-height:146%;color:#336790'>Section
22.1: COMMENT on Table</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.5pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><b><span
style='font-size:9.0pt;line-height:107%'>COMMENT</span></b><span
style='font-size:9.0pt;line-height:107%'> <b>ON</b> <b>TABLE</b> table_name <b>IS</b>
</span><span style='font-size:9.0pt;line-height:107%;color:red'>'this is
student details table'</span><span style='font-size:9.0pt;line-height:107%'>;</span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;margin-left:
-.75pt'>Section 22.2: Remove Comment</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:-.25pt;text-indent:-.5pt;background:#FAFAFA'><b><span
style='font-size:9.0pt;line-height:110%'>COMMENT</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>ON</b> <b>TABLE</b> student <b>IS</b>
<b>NULL</b>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Comment will be removed with above statement execution.<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 23: Backup and Restore</h1>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
23.1: Backing up one database</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image152.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.35pt;
margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>-Fc</span> selects the &quot;custom backup format&quot;
which gives you more power than raw SQL; see <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>pg_restore</span> for more details. If you
want a vanilla SQL file, you can do this instead:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image153.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>or even</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image154.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
23.2: Restoring backups</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.0pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image155.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:.25pt'>A safer alternative uses <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>-1</span> to wrap the restore in a
transaction. The <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>-f</span>
specifies the filename rather than using shell redirection.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.1pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image156.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Custom format files must be restored using <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>pg_restore</span>
with the <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>-d</span>
option to specify the database:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image157.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>The custom format can also be converted back to SQL:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image158.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>Usage of the custom format is recommended because you can
choose which things to restore and optionally enable parallel processing.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.5pt;margin-bottom:
.2pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:134%'>You may need to do a pg_dump followed by a
pg_restore if you upgrade from one postgresql release to a newer one. <b><span
style='font-size:18.0pt;line-height:134%;color:#336790'>Section 23.3: Backing
up the whole cluster</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image159.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.75pt;
margin-left:.25pt'>This works behind the scenes by making multiple connections
to the server once for each database and executing <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>pg_dump</span> on it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>Sometimes, you might be tempted to set this up as a cron
job, so you want to see the date the backup was taken as part of the filename:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image160.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>However, please note that this could produce large files on
a daily basis. Postgresql has a much better mechanism for regular backups - <a
href="https://www.postgresql.org/docs/9.2/static/continuous-archiving.html"><span
style='color:#336790'>WAL archives</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.5pt;
margin-left:.25pt'>The output from pg_dumpall is sufficient to restore to an
identically-configured Postgres instance, but the configuration files in <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>$PGDATA</span> (<span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>pg_hba.conf</span>
and <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>postgresql.conf</span>)
are not part of the backup, so you'll have to back them up separately.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="PostgreSQL%20Notes%20for%20Professionals_files/image161.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.15pt;margin-bottom:.2pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:134%'>To take a filesystem backup, you must use these
functions to help ensure that Postgres is in a consistent state while the
backup is prepared. <b><span style='font-size:18.0pt;line-height:134%;
color:#336790'>Section 23.4: Using psql to export data</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>Data can be exported using copy command or by taking use of
command line options of psql command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
14.7pt;margin-left:.75pt;text-indent:-.5pt'><b>To Export csv data from table
user to csv file:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.9pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:167%'><span style='position:
relative;z-index:-1895784448'><span style='left:0px;position:absolute;
left:0px;top:-9342px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image126.gif"></span></span><span
style='font-size:9.0pt;line-height:167%'>psql -p \</span><span
style='font-size:9.0pt;line-height:167%;color:#999999'>&lt;</span><span
style='font-size:9.0pt;line-height:167%'>port</span><span style='font-size:
9.0pt;line-height:167%;color:#999999'>&gt;</span><span style='font-size:9.0pt;
line-height:167%'> -U \</span><span style='font-size:9.0pt;line-height:167%;
color:#999999'>&lt;</span><span style='font-size:9.0pt;line-height:167%'>username</span><span
style='font-size:9.0pt;line-height:167%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:167%'> -d \</span><span style='font-size:
9.0pt;line-height:167%;color:#999999'>&lt;</span><b><span style='font-size:
9.0pt;line-height:167%'>DATABASE</span></b><span style='font-size:9.0pt;
line-height:167%;color:#999999'>&gt;</span><span style='font-size:9.0pt;
line-height:167%'> -A -F</span><span style='font-size:9.0pt;line-height:167%;
color:#999999'>&lt;</span><b><span style='font-size:9.0pt;line-height:167%'>DELIMITER</span></b><span
style='font-size:9.0pt;line-height:167%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:167%'> -c\</span><span style='font-size:
9.0pt;line-height:167%;color:#999999'>&lt;</span><span style='font-size:9.0pt;
line-height:167%'>sql <b>TO</b> <b>EXECUTE</b></span><span style='font-size:
9.0pt;line-height:167%;color:#999999'>&gt;</span><span style='font-size:9.0pt;
line-height:167%'> \</span><span style='font-size:9.0pt;line-height:167%;
color:#999999'>&gt;</span><span style='font-size:9.0pt;line-height:167%'> \</span><span
style='font-size:9.0pt;line-height:167%;color:#999999'>&lt;</span><span
style='font-size:9.0pt;line-height:167%'>output filename <b>WITH</b> path</span><span
style='font-size:9.0pt;line-height:167%;color:#999999'>&gt; </span><span
style='font-size:9.0pt;line-height:167%'>psql -p </span><span style='font-size:
9.0pt;line-height:167%;color:#666666'>5432</span><span style='font-size:9.0pt;
line-height:167%'> -U postgres -d test_database -A -F, -c </span><span
style='font-size:9.0pt;line-height:167%;color:red'>&quot;select * from
user&quot;</span><span style='font-size:9.0pt;line-height:167%'> </span><span
style='font-size:9.0pt;line-height:167%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:167%'> /home/<b>USER</b>/user_data.<b>CSV</b></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.9pt;
margin-left:.25pt'>Here combination of -A and -F does the trick.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>-F</span> is to specify delimiter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image162.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:83.55pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>Switches to unaligned output mode.
(The default output mode is otherwise aligned.) <b><span style='font-size:18.0pt;
line-height:145%;color:#336790'>Section 23.5: Using Copy to import</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.3pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=42
src="PostgreSQL%20Notes%20for%20Professionals_files/image163.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=260 style='width:194.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>user_data.CSV</span></b></p>
  </td>
  <td width=94 valign=top style='width:70.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b> placed inside </b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>/home/USER</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
14.8pt;margin-left:.75pt;text-indent:-.5pt'><b>To insert into table </b><b><span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>USER</span> from a
file named </b><b><span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>/</span>:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895783424'><span style='left:0px;position:absolute;left:0px;top:-9704px;
width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>COPY</span></b><span style='font-size:
9.0pt;line-height:110%'> <b>USER</b> <b>FROM</b> </span><span style='font-size:
9.0pt;line-height:110%;color:red'>'/home/user/user_data.csv'</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:3.5pt;margin-left:
.75pt'>To Copy data from pipe separated file to table</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><span style='position:relative;z-index:-1895782400'><span
style='left:0px;position:absolute;left:0px;top:-9753px;width:718px;height:1px'><img
width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>COPY</span></b><span style='font-size:
9.0pt;line-height:110%'> <b>USER</b> <b>FROM</b> </span><span style='font-size:
9.0pt;line-height:110%;color:red'>'/home/user/user_data'</span><span
style='font-size:9.0pt;line-height:110%'> <b>WITH</b> <b>DELIMITER</b> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'|'</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>WITH</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>DELIMITER</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>Note: In absence of the option , the default delimiter is
comma <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:314.8pt;margin-bottom:
0in;margin-left:.75pt;text-indent:-.5pt;line-height:217%'><b>To ignore header
line while importing file </b>Use the Header option:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image164.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:.25pt'>Note: If data is quoted, by default data quoting characters
are double quote. If the data is quoted using any other character use the <b><span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>QUOTE</span></b>
option; however, this option is allowed only when using CSV format.</p>

<h2 style='margin-left:-.75pt'>Section 23.6: Using Copy to export</h2>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:0in;margin-left:
.75pt'>To Copy table to standard o/p</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:-.25pt;text-indent:-.5pt;background:#FAFAFA'><b><span
style='font-size:9.0pt;line-height:110%'>COPY</span></b><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#999999'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>tablename</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> <b>TO</b> <b>STDOUT</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><b><span
style='font-size:9.0pt;line-height:110%'>DELIMITER</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>'|'</span><span style='font-size:9.0pt;line-height:
110%;color:#999999'>)</span><span style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>To export table user to Standard output:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=259 style='width:2.7in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=259 valign=top style='width:2.7in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>COPY</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>USER</b> <b>TO</b> <b>STDOUT</b> </span><span
  style='font-size:9.0pt;line-height:107%;color:#999999'>(</span><b><span
  style='font-size:9.0pt;line-height:107%'>DELIMITER</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
  line-height:107%;color:red'>'|'</span><span style='font-size:9.0pt;
  line-height:107%;color:#999999'>)</span><span style='font-size:9.0pt;
  line-height:107%'>;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:47.95pt;
margin-bottom:2.35pt;margin-left:0in;text-align:center;text-indent:0in;
line-height:107%'> <b>To Copy table to file</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=410 style='width:307.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=410 valign=top style='width:307.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>COPY</span></b><span style='font-size:9.0pt;
  line-height:107%'> <b>USER</b> <b>FROM</b> </span><span style='font-size:
  9.0pt;line-height:107%;color:red'>'/home/user/user_data'</span><span
  style='font-size:9.0pt;line-height:107%'> <b>WITH</b> <b>DELIMITER</b> </span><span
  style='font-size:9.0pt;line-height:107%;color:red'>'|'</span><span
  style='font-size:9.0pt;line-height:107%'>;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:0in;margin-left:0in;text-align:right;text-indent:0in;line-height:
107%'> <b>To Copy the output of SQL statement to file</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=709
 style='width:531.8pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=340 valign=top style='width:255.1pt;padding:0in 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-top:0in;margin-right:1.3pt;margin-bottom:
  0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=338
   style='width:253.8pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=338 valign=top style='width:253.8pt;background:#FAFAFA;
    padding:1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>COPY</span></b><span
    style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:
    9.0pt;line-height:107%;color:#999999'>(</span><span style='font-size:9.0pt;
    line-height:107%'>sql <b>STATEMENT</b></span><span style='font-size:9.0pt;
    line-height:107%;color:#999999'>)</span><span style='font-size:9.0pt;
    line-height:107%'> <b>TO</b> </span><span style='font-size:9.0pt;
    line-height:107%;color:red'>'&lt;filename with path&gt;'</span><span
    style='font-size:9.0pt;line-height:107%'>;</span></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
  <td width=369 valign=top style='width:276.7pt;padding:0in 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-top:0in;margin-right:560.15pt;margin-bottom:
  0in;margin-left:-283.45pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=367
   style='width:275.4pt;margin-left:1.3pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=367 valign=top style='width:275.4pt;background:#FAFAFA;
    padding:1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>COPY</span></b><span
    style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:
    9.0pt;line-height:107%;color:#999999'>(</span><b><span style='font-size:
    9.0pt;line-height:107%'>SELECT</span></b><span style='font-size:9.0pt;
    line-height:107%'> * <b>FROM</b> <b>USER</b> <b>WHERE</b> user_name <b>LIKE</b>
    </span><span style='font-size:9.0pt;line-height:107%;color:red'>'A%'</span><span
    style='font-size:9.0pt;line-height:107%;color:#999999'>)</span></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>TO</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span><span style='font-size:9.0pt;line-height:107%;color:red'>'/home/user/user_data'</span><span
  style='font-size:9.0pt;line-height:107%'>;</span></p>
  </td>
 </tr>
</table>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:0in;margin-left:
.75pt'><span style='font-weight:normal'> </span>To Copy into a compressed file</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.75pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><b><span
style='font-size:9.0pt;line-height:107%'>COPY</span></b><span style='font-size:
9.0pt;line-height:107%'> <b>USER</b> <b>TO</b> PROGRAM </span><span
style='font-size:9.0pt;line-height:107%;color:red'>'gzip &gt;
/home/user/user_data.gz'</span><span style='font-size:9.0pt;line-height:107%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Here program gzip is executed to compress user table data.<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 24: Backup script for a production DB</h1>

<h2 style='margin-bottom:0in;text-indent:0in;line-height:252%'><span
style='font-size:11.0pt;line-height:252%;color:black;font-weight:normal'>                        </span><span
style='font-size:10.0pt;line-height:252%;color:black'>parameter                                                                                                        details</span></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:228.1pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:141%'>save_db The main backup directory
dbProd  The secondary backup directory</p>

<p class=MsoNormal style='margin-top:0in;margin-right:137.45pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:141%'>DATE       The date of the backup in
the specified format dbprod               The name of the database to be saved</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:3.3pt;
margin-left:.25pt'>/opt/postgres/9.0/bin/pg_dump The path to the pg_dump binary</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:9.7pt;
margin-bottom:0in;margin-left:.5pt;text-align:right;text-indent:-.5pt;
line-height:107%'>Specifies the host name of the machine on which the server is
running, Example :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:345.1pt;margin-bottom:
3.7pt;margin-left:150.65pt;text-indent:-150.4pt'>-h localhost</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:26.6pt;
margin-bottom:0in;margin-left:.5pt;text-align:right;text-indent:-.5pt;
line-height:107%'>Specifies the TCP port or local Unix domain socket file
extension on which the</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>-p</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:1.25in;
margin-bottom:2.55pt;margin-left:81.45pt;text-align:center;text-indent:-.5pt;
line-height:123%'>server is listening for connections, Example 5432</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.75pt;text-indent:0in;line-height:155%'>-U                                                                   User
name to connect as.</p>

<h2 style='margin-top:0in;margin-right:204.9pt;margin-bottom:0in;margin-left:
-.75pt;line-height:155%'>Section 24.1: saveProdDb.sh</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.15pt;
margin-left:.25pt'>In general, we tend to back up the DB with the pgAdmin
client. The following is a sh script used to save the database (under linux) in
two formats:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=323
src="PostgreSQL%20Notes%20for%20Professionals_files/image165.gif"></span></p>

<h1 style='margin-left:-.25pt'>Chapter 25: Accessing Data Programmatically</h1>

<h2 style='margin-left:-.75pt'>Section 25.1: Accessing PostgreSQL with the
C-API</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>The C-API is the most powerful way to access PostgreSQL and
it is surprisingly comfortable.</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Compilation and linking</h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=82 style='width:61.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=82 valign=top style='width:61.7pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>pg_config</span><span style='font-size:9.0pt;
  line-height:107%;font-family:"Arial",sans-serif'> </span><i><span
  style='font-size:9.0pt;line-height:107%;color:green'>--</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:30.85pt;margin-bottom:
1.6pt;margin-left:.25pt'>During compilation, you have to add the PostgreSQL
include directory, which can be found with <i><span style='font-size:9.0pt;
line-height:110%;color:green;background:#FAFAFA'>includedir</span></i>, to the
include path.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=128 style='width:96.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=128 valign=top style='width:96.25pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>pg_config </span><i><span style='font-size:9.0pt;
  line-height:107%;color:green'>--libdir</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.85pt;
margin-left:.25pt'>You must link with the PostgreSQL client shared library (<span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>libpq.so</span> on
UNIX, <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>libpq.dll</span>
on Windows). This library is in the PostgreSQL library directory, which can be
found with .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.25pt;
margin-left:.25pt'><b>Note:</b> For historical reason, the library is called <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>libpq.so</span>and <i>not</i>
<span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>libpg.so</span>,
which is a popular trap for beginners.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.55pt;
margin-left:.25pt'>Given that the below code sample is in file <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>coltype.c</span>,
compilation and linking would be done with</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895781376'><span style='left:0px;position:absolute;left:0px;top:-11385px;
width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>gcc -Wall -I </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;$(pg_config
--includedir)&quot;</span><span style='font-size:9.0pt;line-height:110%'> -L </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;$(pg_config
--libdir)&quot;</span><span style='font-size:9.0pt;line-height:110%'> -o
coltype coltype.c -lpq</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:183.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=245 valign=top style='width:183.65pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>-Wl,-rpath,</span><span style='font-size:9.0pt;
  line-height:107%;color:red'>&quot;$(pg_config --libdir)&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:.25pt'>with the GNU C compiler (consider adding  to add the library
search path) or</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>with</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image166.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>on Windows with Microsoft Visual C.</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:0in;margin-left:
.75pt'>Sample program</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=473
src="PostgreSQL%20Notes%20for%20Professionals_files/image167.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:566.75pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=718
 style='width:538.6pt;border-collapse:collapse'>
 <tr style='height:771.0pt'>
  <td width=718 valign=top style='width:538.6pt;background:#FAFAFA;padding:
  2.55pt 5.75pt 0in 3.75pt;height:771.0pt'>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    </span><i><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>/*</span></i></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:188.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%;color:#666666'>*<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><i><span style='font-size:9.0pt;line-height:112%;color:#666666'>This
  can only happen if there is not enough memory     * to allocate the PGconn
  structure.      */ </span></i><span style='font-size:9.0pt;line-height:112%'>    </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BA0'>if</span><span
  style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
  line-height:112%;color:#333333'>(</span><span style='font-size:9.0pt;
  line-height:112%'>conn </span><span style='font-size:9.0pt;line-height:112%;
  color:navy'>==</span><span style='font-size:9.0pt;line-height:112%'> </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BA0'>NULL</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>)</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:156.45pt;margin-bottom:
  12.3pt;margin-left:0in;text-indent:0in;line-height:112%'><span
  style='font-size:9.0pt;line-height:112%'>    </span><span style='font-size:
  9.0pt;line-height:112%;color:#333333'>{ </span><span style='font-size:9.0pt;
  line-height:112%'>        </span><span style='font-size:9.0pt;line-height:
  112%;color:#0B0BB7'>fprintf</span><span style='font-size:9.0pt;line-height:
  112%;color:#333333'>(</span><span style='font-size:9.0pt;line-height:112%;
  color:#0B0BA0'>stderr</span><span style='font-size:9.0pt;line-height:112%'>, </span><span
  style='font-size:9.0pt;line-height:112%;color:red'>&quot;Out of memory
  connecting to PostgreSQL.</span><b><span style='font-size:9.0pt;line-height:
  112%;color:#000099'>\n</span></b><span style='font-size:9.0pt;line-height:
  112%;color:red'>&quot;</span><span style='font-size:9.0pt;line-height:112%;
  color:#333333'>)</span><span style='font-size:9.0pt;line-height:112%;
  color:teal'>; </span><span style='font-size:9.0pt;line-height:112%'>        </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BA0'>return</span><span
  style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
  line-height:112%;color:#222202'>1</span><span style='font-size:9.0pt;
  line-height:112%;color:teal'>; </span><span style='font-size:9.0pt;
  line-height:112%'>    </span><span style='font-size:9.0pt;line-height:112%;
  color:#333333'>}</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:264.2pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%'>    </span><i><span style='font-size:9.0pt;
  line-height:112%;color:#666666'>/* check if the connection attempt worked */ </span></i><span
  style='font-size:9.0pt;line-height:112%'>    </span><span style='font-size:
  9.0pt;line-height:112%;color:#0B0BA0'>if</span><span style='font-size:9.0pt;
  line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
  color:#333333'>(</span><span style='font-size:9.0pt;line-height:112%'>PQstatus</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:112%'>conn</span><span style='font-size:
  9.0pt;line-height:112%;color:#333333'>)</span><span style='font-size:9.0pt;
  line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
  color:#000040'>!</span><span style='font-size:9.0pt;line-height:112%;
  color:navy'>=</span><span style='font-size:9.0pt;line-height:112%'>
  CONNECTION_OK</span><span style='font-size:9.0pt;line-height:112%;color:#333333'>)</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:237.45pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%'>    </span><span style='font-size:9.0pt;line-height:
  112%;color:#333333'>{ </span><span style='font-size:9.0pt;line-height:112%'>        </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BB7'>fprintf</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BA0'>stderr</span><span
  style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:
  9.0pt;line-height:112%;color:red'>&quot;%s</span><b><span style='font-size:
  9.0pt;line-height:112%;color:#000099'>\n</span></b><span style='font-size:
  9.0pt;line-height:112%;color:red'>&quot;</span><span style='font-size:9.0pt;
  line-height:112%'>, PQerrorMessage</span><span style='font-size:9.0pt;
  line-height:112%;color:#333333'>(</span><span style='font-size:9.0pt;
  line-height:112%'>conn</span><span style='font-size:9.0pt;line-height:112%;
  color:#333333'>))</span><span style='font-size:9.0pt;line-height:112%;
  color:teal'>;</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>        </span><i><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>/*</span></i></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:188.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%;color:#666666'>*<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><i><span style='font-size:9.0pt;line-height:112%;color:#666666'>Even
  if the connection failed, the PGconn structure has been         * allocated
  and must be freed.</span></i></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><i><span style='font-size:9.0pt;line-height:107%;color:#666666'>        
  */</span></i></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:404.85pt;margin-bottom:
  12.3pt;margin-left:0in;text-indent:0in;line-height:112%'><span
  style='font-size:9.0pt;line-height:112%'>        PQfinish</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:112%'>conn</span><span style='font-size:
  9.0pt;line-height:112%;color:#333333'>)</span><span style='font-size:9.0pt;
  line-height:112%;color:teal'>; </span><span style='font-size:9.0pt;
  line-height:112%'>        </span><span style='font-size:9.0pt;line-height:
  112%;color:#0B0BA0'>return</span><span style='font-size:9.0pt;line-height:
  112%'> </span><span style='font-size:9.0pt;line-height:112%;color:#222202'>1</span><span
  style='font-size:9.0pt;line-height:112%;color:teal'>; </span><span
  style='font-size:9.0pt;line-height:112%'>    </span><span style='font-size:
  9.0pt;line-height:112%;color:#333333'>}</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:280.65pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%;color:#666666'>#ifdef TRACE </span><span
  style='font-size:9.0pt;line-height:112%'>    </span><span style='font-size:
  9.0pt;line-height:112%;color:#0B0BA0'>if</span><span style='font-size:9.0pt;
  line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
  color:#333333'>(</span><span style='font-size:9.0pt;line-height:112%;
  color:#0B0BA0'>NULL</span><span style='font-size:9.0pt;line-height:112%'> </span><span
  style='font-size:9.0pt;line-height:112%;color:navy'>==</span><span
  style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
  line-height:112%;color:#333333'>(</span><span style='font-size:9.0pt;
  line-height:112%'>trc </span><span style='font-size:9.0pt;line-height:112%;
  color:navy'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BB7'>fopen</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:112%'>TRACEFILE, </span><span
  style='font-size:9.0pt;line-height:112%;color:red'>&quot;w&quot;</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>)))</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    </span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>{</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:134.85pt;margin-bottom:
  12.3pt;margin-left:0in;text-indent:0in;line-height:112%'><span
  style='font-size:9.0pt;line-height:112%'>        </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BB7'>fprintf</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BA0'>stderr</span><span
  style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:
  9.0pt;line-height:112%;color:red'>&quot;Error opening trace file </span><b><span
  style='font-size:9.0pt;line-height:112%;color:#000099'>\&quot;</span></b><span
  style='font-size:9.0pt;line-height:112%;color:red'>%s</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#000099'>\&quot;</span></b><span
  style='font-size:9.0pt;line-height:112%;color:red'>!</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#000099'>\n</span></b><span
  style='font-size:9.0pt;line-height:112%;color:red'>&quot;</span><span
  style='font-size:9.0pt;line-height:112%'>, TRACEFILE</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>)</span><span
  style='font-size:9.0pt;line-height:112%;color:teal'>; </span><span
  style='font-size:9.0pt;line-height:112%'>        PQfinish</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:112%'>conn</span><span style='font-size:
  9.0pt;line-height:112%;color:#333333'>)</span><span style='font-size:9.0pt;
  line-height:112%;color:teal'>; </span><span style='font-size:9.0pt;
  line-height:112%'>        </span><span style='font-size:9.0pt;line-height:
  112%;color:#0B0BA0'>return</span><span style='font-size:9.0pt;line-height:
  112%'> </span><span style='font-size:9.0pt;line-height:112%;color:#222202'>1</span><span
  style='font-size:9.0pt;line-height:112%;color:teal'>; </span><span
  style='font-size:9.0pt;line-height:112%'>    </span><span style='font-size:
  9.0pt;line-height:112%;color:#333333'>}</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    </span><i><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>/* tracing for
  client-server communication */</span></i></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    PQtrace</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:107%'>conn, trc</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>)</span><span
  style='font-size:9.0pt;line-height:107%;color:teal'>;</span></p>
  <p class=MsoNormal style='margin-bottom:12.75pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%;color:#666666'>#endif</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    </span><i><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>/* this program
  expects the database to return data in UTF-8 */</span></i></p>
  <p class=MsoNormal style='margin-bottom:12.75pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    PQsetClientEncoding</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:107%'>conn, </span><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;UTF8&quot;</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>)</span><span
  style='font-size:9.0pt;line-height:107%;color:teal'>;</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:312.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%'>    </span><i><span style='font-size:9.0pt;
  line-height:112%;color:#666666'>/* perform a query with parameters */ </span></i><span
  style='font-size:9.0pt;line-height:112%'>    res </span><span
  style='font-size:9.0pt;line-height:112%;color:navy'>=</span><span
  style='font-size:9.0pt;line-height:112%'> PQexecParams</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>( </span><span
  style='font-size:9.0pt;line-height:112%'>        conn,         </span><span
  style='font-size:9.0pt;line-height:112%;color:red'>&quot;SELECT column_name,
  data_type &quot;</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>            </span><span
  style='font-size:9.0pt;line-height:107%;color:red'>&quot;FROM
  information_schema.columns &quot;</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:309.9pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%'>            </span><span style='font-size:9.0pt;
  line-height:112%;color:red'>&quot;WHERE table_name = $1&quot;</span><span
  style='font-size:9.0pt;line-height:112%'>,         </span><span
  style='font-size:9.0pt;line-height:112%;color:#222202'>1</span><span
  style='font-size:9.0pt;line-height:112%'>,            </span><i><span
  style='font-size:9.0pt;line-height:112%;color:#666666'>/* one parameter */ </span></i><span
  style='font-size:9.0pt;line-height:112%'>        paramTypes,               
  paramValues,</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>        </span><span
  style='font-size:9.0pt;line-height:107%;color:#0B0BA0'>NULL</span><span
  style='font-size:9.0pt;line-height:107%'>,        </span><i><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>/* parameter lengths
  are not required for strings */</span></i></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>        </span><span
  style='font-size:9.0pt;line-height:107%;color:#0B0BA0'>NULL</span><span
  style='font-size:9.0pt;line-height:107%'>,        </span><i><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>/* all parameters are
  in text format */</span></i></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:214.7pt;margin-bottom:
  12.3pt;margin-left:0in;text-indent:0in;line-height:112%'><span
  style='font-size:9.0pt;line-height:112%'>        </span><span
  style='font-size:9.0pt;line-height:112%;color:#222202'>0</span><span
  style='font-size:9.0pt;line-height:112%'>            </span><i><span
  style='font-size:9.0pt;line-height:112%;color:#666666'>/* result shall be in
  text format */ </span></i><span style='font-size:9.0pt;line-height:112%'>    </span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>)</span><span
  style='font-size:9.0pt;line-height:112%;color:teal'>;</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:237.8pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%'>    </span><i><span style='font-size:9.0pt;
  line-height:112%;color:#666666'>/* out of memory or sever communication
  broken */ </span></i><span style='font-size:9.0pt;line-height:112%'>    </span><span
  style='font-size:9.0pt;line-height:112%;color:#0B0BA0'>if</span><span
  style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
  line-height:112%;color:#333333'>(</span><span style='font-size:9.0pt;
  line-height:112%;color:#0B0BA0'>NULL</span><span style='font-size:9.0pt;
  line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
  color:navy'>==</span><span style='font-size:9.0pt;line-height:112%'> res</span><span
  style='font-size:9.0pt;line-height:112%;color:#333333'>)</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>    </span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>{</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>        </span><span
  style='font-size:9.0pt;line-height:107%;color:#0B0BB7'>fprintf</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:107%;color:#0B0BA0'>stderr</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;%s</span><b><span style='font-size:
  9.0pt;line-height:107%;color:#000099'>\n</span></b><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, PQerrorMessage</span><span style='font-size:9.0pt;
  line-height:107%;color:#333333'>(</span><span style='font-size:9.0pt;
  line-height:107%'>conn</span><span style='font-size:9.0pt;line-height:107%;
  color:#333333'>))</span><span style='font-size:9.0pt;line-height:107%;
  color:teal'>;</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>        PQfinish</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:107%'>conn</span><span style='font-size:
  9.0pt;line-height:107%;color:#333333'>)</span><span style='font-size:9.0pt;
  line-height:107%;color:teal'>;</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%;color:#666666'>#ifdef
  TRACE</span></p>
  <p class=MsoNormal style='margin-bottom:.45pt;text-indent:0in;line-height:
  107%'><span style='font-size:9.0pt;line-height:107%'>        </span><span
  style='font-size:9.0pt;line-height:107%;color:#0B0BB7'>fclose</span><span
  style='font-size:9.0pt;line-height:107%;color:#333333'>(</span><span
  style='font-size:9.0pt;line-height:107%'>trc</span><span style='font-size:
  9.0pt;line-height:107%;color:#333333'>)</span><span style='font-size:9.0pt;
  line-height:107%;color:teal'>;</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:437.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%;color:#666666'>#endif </span><span style='font-size:
  9.0pt;line-height:112%'>        </span><span style='font-size:9.0pt;
  line-height:112%;color:#0B0BA0'>return</span><span style='font-size:9.0pt;
  line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
  color:#222202'>1</span><span style='font-size:9.0pt;line-height:112%;
  color:teal'>;</span></p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%'>    </span><span style='font-size:
  9.0pt;line-height:107%;color:#333333'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:-.2pt;margin-bottom:0in;
margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0 width=719
height=991 id="Picture 92009"
src="PostgreSQL%20Notes%20for%20Professionals_files/image168.gif"></p>

<h2 style='margin-left:-.75pt'>Section 25.2: Accessing PostgreSQL from python
using psycopg2</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>You can find description of the driver <a
href="http://initd.org/psycopg/docs/"><span style='color:#336790'>here</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>The quick example is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=289
src="PostgreSQL%20Notes%20for%20Professionals_files/image169.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Will result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image170.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 25.3: Accessing PostgreSQL from .NET
using the Npgsql provider</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>One of the more popular .NET providers for Postgresql is <a
href="http://www.npgsql.org/"><span style='color:#336790'>Npgsql</span></a>,
which is ADO.NET compatible and is used nearly identically as other .NET
database providers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>A typical query is performed by creating a command, binding
parameters, and then executing the command. In C#:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=720 height=362
src="PostgreSQL%20Notes%20for%20Professionals_files/image171.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=719 height=366
src="PostgreSQL%20Notes%20for%20Professionals_files/image172.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 25.4: Accessing PostgreSQL from PHP
using Pomm2</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>On the shoulders of the low level drivers, there is <a
href="http://www.pomm-project.org/"><span style='color:#336790'>pomm</span></a>.
It proposes a modular approach, data converters, listen/notify support,
database inspector and much more.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Assuming, Pomm has been installed using composer, here is a
complete example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=516
src="PostgreSQL%20Notes%20for%20Professionals_files/image173.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
15.2pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=136
src="PostgreSQL%20Notes%20for%20Professionals_files/image174.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>Pomm<span style='font-family:"Arial",sans-serif'></span>s
query manager module escapes query arguments to prevent SQL injection. When the
arguments are cast, it also converts them from a PHP representation to valid
Postgres values. The result is an iterator, it uses a cursor internally. Every
row is converted on the fly, booleans to booleans, timestamps to \DateTime etc.<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 26: Connect to PostgreSQL from Java</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>The API to use a relational database from Java is JDBC.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>This API is implemented by a JDBC driver.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>To use it, put the JAR-file with the driver on the JAVA
class path.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:60.85pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>This documentation shows samples how
to use the JDBC driver to connect to a database. <b><span style='font-size:
18.0pt;line-height:145%;color:#336790'>Section 26.1: Connecting with
java.sql.DriverManager</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.05pt;
margin-left:.25pt'>This is the simplest way to connect.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:2.0pt;
margin-left:.25pt'>First, the driver has to be <i>registered</i> with <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>java.sql.DriverManager</span>
so that it knows which class to use.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=173 valign=top style='width:1.8in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>java.lang.<b>CLASS</b>.forname</span><span
  style='font-size:9.0pt;line-height:107%;color:#999999'>(</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>This is done by loading the driver class, typically with
;driver<span style='font-family:"Arial",sans-serif'> </span>class<span
style='font-family:"Arial",sans-serif'> </span>name&gt;).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=388
src="PostgreSQL%20Notes%20for%20Professionals_files/image175.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:18.45pt;
margin-left:.25pt'>Not that user and password can also be included in the JDBC
URL, in which case you don't have to specify them in the <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>getConnection</span>
method call.</p>

<h2 style='margin-left:-.75pt'>Section 26.2: Connecting with
java.sql.DriverManager and Properties</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.5pt;
margin-left:.25pt'>Instead of specifying connection parameters like user and
password (see a complete list <a
href="https://jdbc.postgresql.org/documentation/head/connect.html#connection-parameters"><span
style='color:#336790'>here</span></a>) in the URL or a separate parameters, you
can pack them into a <span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>java.util.Properties</span> object:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=93
src="PostgreSQL%20Notes%20for%20Professionals_files/image176.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=719 height=383
src="PostgreSQL%20Notes%20for%20Professionals_files/image177.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 26.3: Connecting with
javax.sql.DataSource using a connection pool</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>It is common to use <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>javax.sql.DataSource</span> with JNDI in application
server containers, where you register a data source under a name and look it up
whenever you need a connection.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>This is code that demonstrates how data sources work:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=388
src="PostgreSQL%20Notes%20for%20Professionals_files/image178.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Once you have created a data source by calling this
function, you would use it like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=40
src="PostgreSQL%20Notes%20for%20Professionals_files/image179.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=71
src="PostgreSQL%20Notes%20for%20Professionals_files/image180.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 27: PostgreSQL High Availability</h1>

<h2 style='margin-left:-.75pt'>Section 27.1: Replication in PostgreSQL</h2>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:18.4pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:110%'><img
border=0 width=5 height=5 id="Group 89412"
src="PostgreSQL%20Notes%20for%20Professionals_files/image005.gif"></span> Configuring
the Primary Server</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
9.35pt;margin-left:51.55pt;text-indent:-.5pt'><span style='font-size:11.0pt;
line-height:110%'><img border=0 width=5 height=5 id="Group 89413"
src="PostgreSQL%20Notes%20for%20Professionals_files/image181.gif"></span><b> Requirements:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.6pt;
margin-left:51.05pt'>Replication User for replication activities</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.85pt;
margin-left:51.05pt'>Directory to store the WAL archives</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:7.0pt;margin-left:
60.5pt'><img width=44 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image182.gif" align=left
hspace=12>Create Replication user</h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=401
 style='width:300.9pt;margin-left:60.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=295 valign=top style='width:221.45pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>CREATEUSER</span></b><span style='font-size:9.0pt;
  line-height:107%'> -U postgres replication -P -c </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>5</span></p>
  </td>
  <td width=99 valign=top style='width:74.1pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> </span><i><span style='font-size:9.0pt;line-height:
  107%;color:green'>--replication</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:64.25pt;text-indent:-.5pt'><span
style='font-size:9.0pt;line-height:110%'>  + <b>OPTION</b> -P will prompt you <b>FOR</b>
<b>NEW</b> <b>PASSWORD</b></span></p>

<p class=MsoNormal style='margin-left:64.25pt;text-indent:-.5pt'><span
style='font-size:9.0pt;line-height:110%'>  + <b>OPTION</b> -c <b>IS</b> <b>FOR</b>
maximum connections. </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>5</span><span style='font-size:9.0pt;line-height:110%'>
connections are enough <b>FOR</b> replication</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
13.25pt;margin-left:60.0pt;text-indent:3.75pt;line-height:150%'><span
style='position:relative;z-index:-1895779328'><span style='left:0px;position:
absolute;left:68px;top:-18659px;width:650px;height:1px'><img width=650
height=1 src="PostgreSQL%20Notes%20for%20Professionals_files/image183.gif"></span></span><span
style='font-size:9.0pt;line-height:150%'>  + -replication will <b>GRANT</b>
replication <b>PRIVILEGES</b> <b>TO</b> the <b>USER </b></span><b>Create a
archive directory in data directory</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.5pt;
margin-left:60.5pt;text-indent:-.5pt;line-height:107%'><span style='font-size:
9.0pt;line-height:107%;background:#FAFAFA'>mkdir $PGDATA/archive</span></p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:20.55pt;
margin-left:51.55pt'><span style='font-size:11.0pt;line-height:110%'><img
border=0 width=5 height=5 id="Group 89415"
src="PostgreSQL%20Notes%20for%20Professionals_files/image181.gif"></span> Edit
the pg_hba.conf file</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:60.0pt'>This is host base authentication file, contains the setting
for client autherntication. Add below entry:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:64.25pt;margin-bottom:
17.95pt;margin-left:60.0pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:131%'><span style='position:relative;z-index:
-1895778304'><span style='left:0px;position:absolute;left:68px;top:-18850px;
width:650px;height:1px'><img width=650 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image184.gif"></span></span><span
style='font-size:9.0pt;line-height:131%'>      #hosttype    database_name    
user_name       hostname/IP      method        host        replication      
replication     </span><span style='font-size:9.0pt;line-height:131%;
color:#999999'>&lt;</span><span style='font-size:9.0pt;line-height:131%'>slave-IP</span><span
style='font-size:9.0pt;line-height:131%;color:#999999'>&gt;</span><span
style='font-size:9.0pt;line-height:131%'>/</span><span style='font-size:9.0pt;
line-height:131%;color:#666666'>32</span><span style='font-size:9.0pt;
line-height:131%'>    md5 </span><b>Edit the postgresql.conf file</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:60.0pt'>This is the configuration file of PostgreSQL.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=166
 style='width:124.2pt;margin-left:60.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>wal_level </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>=</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> hot_standby</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:60.0pt'>This parameter decides the behavior of slave server.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:64.25pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895777280'><span style='left:0px;position:absolute;left:80px;
top:-18994px;width:638px;height:1px'><img width=638 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image185.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>   </span><span style='font-size:9.0pt;
line-height:110%;color:red'>`hot_standby`</span><span style='font-size:9.0pt;
line-height:110%'> logs what <b>IS</b> required <b>TO</b> accept <b>READ</b> <b>ONLY</b>
queries <b>ON</b> slave <b>SERVER</b>.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:64.25pt;text-indent:-.5pt'><span style='font-size:9.0pt;line-height:
110%'>   </span><span style='font-size:9.0pt;line-height:110%;color:red'>`streaming`</span><span
style='font-size:9.0pt;line-height:110%'> logs what <b>IS</b> required <b>TO</b>
just apply the WAL</span><span style='font-size:9.0pt;line-height:110%;
color:red'>'s on slave.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.35pt;
margin-left:64.25pt;text-indent:-.5pt'><span style='font-size:9.0pt;line-height:
110%;color:red'>   `archive` which logs what is required for archiving.</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=108
 style='width:81.0pt;margin-left:60.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>archive_mode</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>=</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>ON</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:60.0pt'>This parameters allows to send WAL segments to archive
location using <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>archive_command</span>
parameter.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=605
 style='width:453.65pt;margin-left:60.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>archive_command </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>=</span></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;line-height:
  107%;color:red'>'test ! -f /path/to/archivedir/%f &amp;&amp; cp %p
  /path/to/archivedir/%f'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.0pt;
margin-left:60.0pt'>Basically what above <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>archive_command</span> does is it copies
the WAL segments to archive directory.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>wal_senders </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.85pt;
margin-left:124.8pt'><span style='position:relative;z-index:-1895776256'><span
style='left:0px;position:absolute;left:174px;top:-19180px;width:7px;height:
1px'><img width=7 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image186.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#999999;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666;background:#FAFAFA'>5</span> This is maximum
number of WAL sender processes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:60.0pt'>Now restart the primary server.</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:20.55pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:110%'><img
border=0 width=5 height=5 id="Group 90611"
src="PostgreSQL%20Notes%20for%20Professionals_files/image005.gif"></span> Backing
up the primay server to the slave server</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:43.5pt;
margin-left:30.0pt'>Before making changes on the server stop the primary
server.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:8.3pt;margin-bottom:23.9pt;
margin-left:24.0pt'><img width=13 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image187.gif" align=left
hspace=12>Important: Don't start the service again until all configuration and
backup steps are complete. You must bring up the standby server in a state
where it is ready to be a backup server. This means that all configuration
settings must be in place and the databases must be already synchronized.
Otherwise, streaming replication will fail to start`</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:20.7pt;
margin-left:16.25pt'>Now run the pg_basebackup utility</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt'><span style='font-size:9.0pt;line-height:110%;background:
#FAFAFA'>pg_basebackup</span> utility copies the data from primary server data
directory to slave data directory.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=669
 style='width:502.0pt;margin-left:30.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>$ pg_basebackup -h </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>&lt;</span>&nbsp;</p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>PRIMARY</span></b><span style='font-size:9.0pt;
  line-height:107%'> IP</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>&gt;</span>&nbsp;</p>
  </td>
  <td width=173 valign=top style='width:1.8in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> -D /var/lib/postgresql/</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>&lt;</span>&nbsp;</p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>VERSION</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>&gt;</span>&nbsp;</p>
  </td>
  <td width=209 valign=top style='width:156.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>/main -U replication -v -P </span><i><span
  style='font-size:9.0pt;line-height:107%;color:green'>--</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.45pt;
margin-left:29.75pt;text-indent:-.5pt'><i><span style='font-size:9.0pt;
line-height:110%;color:green;background:#FAFAFA'>xlog-method=stream</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
23.4pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=721 height=172
src="PostgreSQL%20Notes%20for%20Professionals_files/image188.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt'>To configure the standby server, you'll edit
postgresql.conf and create a new configuration file named recovery.conf.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=115
 style='width:1.2in;margin-left:30.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>hot_standby </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>=</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>ON</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.55pt;
margin-left:30.0pt'>This specifies whether you are allowed to run queries while
recovering</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:7.0pt;margin-left:
51.55pt'><span style='font-size:11.0pt;line-height:110%'><img border=0 width=5
height=5 id="Group 90613"
src="PostgreSQL%20Notes%20for%20Professionals_files/image181.gif"></span> Creating
recovery.conf file</h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=122
 style='width:91.8pt;margin-left:60.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>standby_mode </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>=</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> <b>ON</b></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:18.05pt;margin-bottom:
.2pt;margin-left:60.0pt'>Set the connection string to the primary server.
Replace with the external IP address of the primary server. Replace with the
password for the user named replication `primary_conninfo = 'host= port=5432
user=replication password=' (Optional) Set the trigger file location:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=324
 style='width:243.0pt;margin-left:60.0pt;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>trigger_file </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#999999;background:#FAFAFA'>=</span></p>
  </td>
  <td width=223 valign=top style='width:167.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;line-height:
  107%;color:red'>'/tmp/postgresql.trigger.5432'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.3pt;
margin-left:60.0pt'>The <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>trigger_file</span> path that you specify is the location
where you can add a file when you want the system to fail over to the standby
server. The presence of the file &quot;triggers&quot; the failover.
Alternatively, you can use the pg_ctl promote command to trigger failover.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.75pt;margin-bottom:
20.55pt;margin-left:21.4pt;text-indent:-.5pt'><span style='font-size:11.0pt;
line-height:110%'><img border=0 width=5 height=5 id="Group 86069"
src="PostgreSQL%20Notes%20for%20Professionals_files/image005.gif"></span><b> Start
the standby server</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:32.55pt;
margin-left:30.0pt'>You now have everything in place and are ready to bring up
the standby server</p>

<h3 style='margin-top:0in;margin-right:106.75pt;margin-bottom:13.25pt;
margin-left:.75pt'>Attribution</h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:1.25pt;
margin-left:.25pt'>This article is substantially derived from and attributed to
<a
href="https://cloud.google.com/solutions/setup-postgres-hot-standby#create_a_user_for_replication"><span
style='color:#336790'>How to Set Up PostgreSQL for High Availability and </span></a><a
href="https://cloud.google.com/solutions/setup-postgres-hot-standby#create_a_user_for_replication"><span
style='color:#336790'>Replication with Hot Standby</span></a>, with minor
changes in formatting and examples and some text deleted. The source was
published under the <a href="https://creativecommons.org/licenses/by/3.0/"><span
style='color:#336790'>Creative Commons Public License 3.0</span></a>, which is
maintained here.<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Chapter 28: EXTENSION dblink and postgres_fdw</h1>

<h2 style='margin-left:-.75pt'>Section 28.1: Extention FDW</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>FDW is an implimentation of dblink it is more helpful, so to
use it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:11.25pt;text-indent:-11.0pt'><span style='line-height:110%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span>Create an
extention:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image189.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:11.25pt;text-indent:-11.0pt'><span style='line-height:110%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span>Create SERVER:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:59.45pt;margin-bottom:
17.2pt;margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895774208'><span style='left:0px;position:absolute;left:0px;
top:-20488px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image190.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>SERVER</b> name_srv <b>FOREIGN</b>
<b>DATA</b> <b>WRAPPER</b> postgres_fdw <b>OPTIONS</b> </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>host </span><span style='font-size:
9.0pt;line-height:110%;color:red'>'hostname'</span><span style='font-size:9.0pt;
line-height:110%'>, dbname </span><span style='font-size:9.0pt;line-height:
110%;color:red'>'bd_name'</span><span style='font-size:9.0pt;line-height:110%'>,
port </span><span style='font-size:9.0pt;line-height:110%;color:red'>'5432'</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:11.25pt;text-indent:-11.0pt'><span style='line-height:110%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span>Create user
mapping for postgres server</p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
17.25pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt'><span style='position:relative;z-index:-1895773184'><span
style='left:0px;position:absolute;left:0px;top:-20584px;width:718px;height:
1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>USER</b> <b>MAPPING</b> <b>FOR</b>
postgres <b>SERVER</b> name_srv OPTIONS</span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>(</span><b><span style='font-size:9.0pt;
line-height:110%'>USER</span></b><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:red'>'postgres'</span><span
style='font-size:9.0pt;line-height:110%'>, <b>PASSWORD</b> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'password'</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:11.25pt;text-indent:-11.0pt'><span style='line-height:110%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span>Create foreign
table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:118.85pt;margin-bottom:
17.2pt;margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895772160'><span style='left:0px;position:absolute;left:0px;
top:-20663px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image190.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>CREATE</span></b><span
style='font-size:9.0pt;line-height:110%'> <b>FOREIGN</b> <b>TABLE</b>
table_foreign </span><span style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>id </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>INTEGER</span></b><span style='font-size:
9.0pt;line-height:110%'>, code </span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>CHARACTER VARYING</span></b><span
style='font-size:9.0pt;line-height:110%;color:#999999'>) </span><b><span
style='font-size:9.0pt;line-height:110%'>SERVER</span></b><span
style='font-size:9.0pt;line-height:110%'> name_srv OPTIONS</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%'>schema_name </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'schema'</span><span
style='font-size:9.0pt;line-height:110%'>, table_name </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'table'</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:110%'>;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:11.25pt;text-indent:-11.0pt'><span style='line-height:110%'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span>use this
foreign table like it is in your database:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image191.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 28.2: Foreign Data Wrapper</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:13.3pt;
margin-left:.25pt'>To access complete schema of server db instead of single
table. Follow below steps:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Create
EXTENSION :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
12.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=38
src="PostgreSQL%20Notes%20for%20Professionals_files/image192.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Create
SERVER :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
12.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=54
src="PostgreSQL%20Notes%20for%20Professionals_files/image193.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Create
USER MAPPING:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
12.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=71
src="PostgreSQL%20Notes%20for%20Professionals_files/image194.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Create
new schema to access schema of server DB:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=38
src="PostgreSQL%20Notes%20for%20Professionals_files/image195.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Import
server schema:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
12.05pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=71
src="PostgreSQL%20Notes%20for%20Professionals_files/image196.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:110%'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Access
any table of server schema:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=38
src="PostgreSQL%20Notes%20for%20Professionals_files/image197.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:204.5pt;margin-bottom:
.2pt;margin-left:.25pt;line-height:145%'>This can be used to access multiple
schema of remote DB. <b><span style='font-size:18.0pt;line-height:145%;
color:#336790'>Section 28.3: Extention dblink</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.45pt;
margin-left:.25pt'>dblink EXTENSION is a technique to connect another database
and make operation of this database so to do that you need:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>1-Create a dblink extention:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image198.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:12.8pt;
margin-left:.25pt'>2-Make your operation:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>For exemple Select some attribute from another table in
another database:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:140.45pt;margin-bottom:
.15pt;margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;
z-index:-1895771136'><span style='left:0px;position:absolute;left:0px;
top:-21640px;width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image126.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> * <b>FROM </b>dblink </span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'dbname = bd_distance port =
5432 host = 10.6.6.6 user = username password = passw@rd'</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:red'>'SELECT id, code FROM schema.table'</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:3.75pt;text-indent:0in;line-height:107%'><b><span style='font-size:
9.0pt;line-height:107%'>AS</span></b><span style='font-size:9.0pt;line-height:
107%'> newTable</span><span style='font-size:9.0pt;line-height:107%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:107%'>id </span><b><span style='font-size:
9.0pt;line-height:107%;color:#333399'>INTEGER</span></b><span style='font-size:
9.0pt;line-height:107%'>, code </span><b><span style='font-size:9.0pt;
line-height:107%;color:#333399'>CHARACTER VARYING</span></b><span
style='font-size:9.0pt;line-height:107%;color:#999999'>)</span><span
style='font-size:9.0pt;line-height:107%'>;</span></p>

<h1 style='margin-left:-.25pt'>Chapter 29: Postgres Tip and Tricks</h1>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
29.1: DATEADD alternative in Postgres</h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=408
 style='width:306.1pt;margin-left:20.9pt;border-collapse:collapse'>
 <tr style='height:12.9pt'>
  <td width=8 rowspan=3 valign=top style='width:6.35pt;padding:0in 0in 0in 0in;
  height:12.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%'><img border=0 width=5 height=45
  id="Group 86301"
  src="PostgreSQL%20Notes%20for%20Professionals_files/image123.gif"></span></p>
  </td>
  <td width=400 valign=top style='width:299.75pt;padding:0in 0in 0in 0in;
  height:12.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:1.2in;margin-bottom:
  0in;margin-left:-55.6pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=281
   style='width:210.6pt;margin-left:2.75pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=281 valign=top style='width:210.6pt;background:#FAFAFA;
    padding:1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>SELECT</span></b><span
    style='font-size:9.0pt;line-height:107%'> <b>CURRENT_DATE</b> + </span><span
    style='font-size:9.0pt;line-height:107%;color:red'>'1 day'</span><span
    style='font-size:9.0pt;line-height:107%'>::</span><b><span
    style='font-size:9.0pt;line-height:107%;color:#333399'>INTERVAL</span></b></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
 </tr>
 <tr style='height:15.05pt'>
  <td width=400 valign=top style='width:299.75pt;padding:0in 0in 0in 0in;
  height:15.05pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:16.2pt;margin-bottom:
  0in;margin-left:-55.6pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=374
   style='width:3.9in;margin-left:2.75pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=374 valign=top style='width:3.9in;background:#FAFAFA;padding:
    1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>SELECT</span></b><span
    style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:
    9.0pt;line-height:107%;color:red'>'1999-12-11'</span><span
    style='font-size:9.0pt;line-height:107%'>::</span><b><span
    style='font-size:9.0pt;line-height:107%;color:#333399'>TIMESTAMP</span></b><span
    style='font-size:9.0pt;line-height:107%'> + </span><span style='font-size:
    9.0pt;line-height:107%;color:red'>'19 days'</span><span style='font-size:
    9.0pt;line-height:107%'>::</span><b><span style='font-size:9.0pt;
    line-height:107%;color:#333399'>INTERVAL</span></b></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
 </tr>
 <tr style='height:12.9pt'>
  <td width=400 valign=top style='width:299.75pt;padding:0in 0in 0in 0in;
  height:12.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:355.35pt;margin-bottom:
  0in;margin-left:-55.6pt;text-indent:0in;line-height:107%'>&nbsp;</p>
  <table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=396
   style='width:297.0pt;margin-left:2.75pt;border-collapse:collapse'>
   <tr style='height:.15in'>
    <td width=396 valign=top style='width:297.0pt;background:#FAFAFA;
    padding:1.8pt 0in 0in 0in;height:.15in'>
    <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
    inter-ideograph;text-indent:0in;line-height:107%'><b><span
    style='font-size:9.0pt;line-height:107%'>SELECT</span></b><span
    style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:
    9.0pt;line-height:107%;color:red'>'1 month'</span><span style='font-size:
    9.0pt;line-height:107%'>::</span><b><span style='font-size:9.0pt;
    line-height:107%;color:#333399'>INTERVAL</span></b><span style='font-size:
    9.0pt;line-height:107%'> + </span><span style='font-size:9.0pt;line-height:
    107%;color:red'>'1 month 3 days'</span><span style='font-size:9.0pt;
    line-height:107%'>::</span><b><span style='font-size:9.0pt;line-height:
    107%;color:#333399'>INTERVAL</span></b></p>
    </td>
   </tr>
  </table>
  <p class=MsoNormal style='margin-bottom:8.0pt;text-indent:0in;line-height:
  107%'></p>
  </td>
 </tr>
</table>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
29.2: Comma separated values of a column</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="PostgreSQL%20Notes%20for%20Professionals_files/image199.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
29.3: Delete duplicate records from postgres table</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=223
src="PostgreSQL%20Notes%20for%20Professionals_files/image200.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.75pt'>Section
29.4: Update query with join between two tables alternative since Postresql
does not support join in update query</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
10.35pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="PostgreSQL%20Notes%20for%20Professionals_files/image201.gif"></span></p>

<h2 style='margin-left:-.75pt'>Section 29.5: Di&#57379;erence between two date
timestamps month wise and year wise</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Monthwise difference between two dates(timestamp)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=718 height=125
src="PostgreSQL%20Notes%20for%20Professionals_files/image202.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:14.45pt;
margin-left:.25pt'>Yearwise difference between two dates(timestamp)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt'><span style='position:relative;z-index:
-1895770112'><span style='left:0px;position:absolute;left:0px;top:-22725px;
width:718px;height:1px'><img width=718 height=1
src="PostgreSQL%20Notes%20for%20Professionals_files/image139.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#999999'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>DATE_PART</span></b><span style='font-size:
9.0pt;line-height:110%;color:#999999'>(</span><span style='font-size:9.0pt;
line-height:110%;color:red'>'year'</span><span style='font-size:9.0pt;
line-height:110%'>, AgeonDate</span><span style='font-size:9.0pt;line-height:
110%;color:#999999'>)</span><span style='font-size:9.0pt;line-height:110%'> - </span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>DATE_PART</span></b><span
style='font-size:9.0pt;line-height:110%;color:#999999'>(</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'year'</span><span
style='font-size:9.0pt;line-height:110%'>, tmpdate</span><span
style='font-size:9.0pt;line-height:110%;color:#999999'>))</span><span
style='font-size:9.0pt;line-height:110%'> <b>FROM</b> dbo.</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;Table1&quot;</span></p>

<h2 style='margin-left:-.75pt'>Section 29.6: Query to Copy/Move/Transafer table
data from one database to other database table with same schema</h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>First Execute</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
14.95pt;margin-left:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="PostgreSQL%20Notes%20for%20Professionals_files/image203.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.6pt;margin-bottom:.2pt;
margin-left:.25pt'>Then</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.15pt;margin-bottom:
0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=720 height=223
src="PostgreSQL%20Notes%20for%20Professionals_files/image204.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'>Credits</h1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:12.0pt;
margin-bottom:.45pt;margin-left:12.65pt;text-align:center;text-indent:-.5pt;
line-height:123%'>Thank you greatly to all the people from Stack Overflow
Documentation who helped provide this content, more changes can be sent to <u><span
style='color:#336790'>web@petercv.com</span></u> for new content to be
published or updated</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=408
 style='width:305.65pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1807668/"><span style='color:#336790'>Alison
  S</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6506283/"><span style='color:#336790'>AndrewCichocki</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5850195/"><span style='color:#336790'>ankidaemon</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2733113/"><span style='color:#336790'>AstraSerg</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  25</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6754957/"><span style='color:#336790'>Ben</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1, 20 and 22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7204614/"><span style='color:#336790'>Ben
  H</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Chapters 1, 2, 14, 15, 20,
  21, 23 and 29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/70157/"><span style='color:#336790'>bignose</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3426010/"><span style='color:#336790'>bilelovitch</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  20 and 24</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1919388/"><span style='color:#336790'>Blackus</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/957950/"><span style='color:#336790'>brichins</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  25</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4172500/"><span style='color:#336790'>chalitha
  geekiyanage</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  8 and 18</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4031815/"><span style='color:#336790'>commonSenseCode</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  10</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6494551/"><span style='color:#336790'>Dakota
  Wagner</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/812818/"><span style='color:#336790'>Daniel
  Lyons</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  20 and 23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1778395/"><span style='color:#336790'>Demircan
  Celebi</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2061590/"><span style='color:#336790'>Dmitri
  Goldring</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/267540/"><span style='color:#336790'>e4c5</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1, 4, 20 and 23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/653378/"><span style='color:#336790'>evuez</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  16</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4564845/"><span style='color:#336790'>Goerman</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4851021/"><span style='color:#336790'>gpdude_</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  8 and 27</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1222135/"><span style='color:#336790'>greg</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  20 and 25</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3443194/"><span style='color:#336790'>Jakub
  Fedyczak</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  12</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2486953/"><span style='color:#336790'>jasonszhao</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5666004/"><span style='color:#336790'>Jefferson</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  4</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1596371/"><span style='color:#336790'>jgm</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  10</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1810962/"><span style='color:#336790'>joseph</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/259900/"><span style='color:#336790'>Kevin
  Sylvestre</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  12</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/206698/"><span style='color:#336790'>KIM</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3, 4, 8 and 20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1940824/"><span style='color:#336790'>KIRAN
  KUMAR MATAM</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6625678/"><span style='color:#336790'>Kirill
  Sokolov</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/681084/"><span style='color:#336790'>Kirk
  Roybal</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6464308/"><span style='color:#336790'>Laurenz
  Albe</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  15, 25 and 26</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3166303/"><span style='color:#336790'>leeor</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  4, 8 and 9</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1621638/"><span style='color:#336790'>Mohamed
  Navas</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4432541/"><span style='color:#336790'>Mokadillion</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 7</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1220269/"><span style='color:#336790'>Nathaniel
  Waisbrot</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  8</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1519458/"><span style='color:#336790'>Nuri
  Tasdemir</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3304426/"><span style='color:#336790'>Patrick</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3, 11 and 27</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2680864/"><span style='color:#336790'>Reboot</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6721338/"><span style='color:#336790'>Riya
  Bansal</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  28</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6038797/"><span style='color:#336790'>skj123</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  21 and 29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2598316/"><span style='color:#336790'>Tajinder</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  19</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2495063/"><span style='color:#336790'>Tom
  Gerken</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3583600/"><span style='color:#336790'>Udlei
  Nati</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  18</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3182456/"><span style='color:#336790'>user_0</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5315974/"><span style='color:#336790'>Vao
  Tsun</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  8, 13, 15 and 17</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5860233/"><span style='color:#336790'>wOwhOw</span></a></p>
  </td>
  <td width=238 valign=top style='width:178.15pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  17</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:0in'><a
href="https://stackoverflow.com/users/5558072/"><span style='color:#336790'>YCF_L</span></a><u><span
style='color:#336790'>                                                 </span></u>Chapters
5 and 28</p>

</div>

<span style='font-size:10.0pt;line-height:110%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection3>

<h1 style='margin-left:-43.15pt'>You may also like</h1>

<p class=MsoNormal style='margin-top:0in;margin-right:-45.95pt;margin-bottom:
0in;margin-left:-47.25pt;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=726 height=992
id="Group 85346"
src="PostgreSQL%20Notes%20for%20Professionals_files/image205.gif"></span></p>

</div>

</body>

</html>
