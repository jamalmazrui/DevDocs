<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>Ruby on Rails Notes for Professionals</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Aptos Display";}
@font-face
	{font-family:Aptos;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"DejaVu Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:1.25pt;
	margin-left:0in;
	text-indent:.5pt;
	line-height:112%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:.15pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:26.0pt;
	font-family:"Calibri",sans-serif;
	color:#D4072F;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.75pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:18.0pt;
	font-family:"Calibri",sans-serif;
	color:#D4072F;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.75pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:18.0pt;
	font-family:"Calibri",sans-serif;
	color:#D4072F;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:13.5pt;
	margin-left:1.5pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:1.1pt;
	margin-bottom:1.25pt;
	margin-left:.75pt;
	text-indent:.5pt;
	line-height:112%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:1.1pt;
	margin-bottom:1.6pt;
	margin-left:20.75pt;
	text-indent:.5pt;
	line-height:112%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri",sans-serif;
	color:#D4072F;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Calibri",sans-serif;
	color:black;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Calibri",sans-serif;
	color:#D4072F;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Calibri",sans-serif;
	color:#D4072F;
	font-weight:bold;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:#65B4B4;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:#FF4B4B;}
.MsoChpDefault
	{font-size:12.0pt;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:23.8pt 41.95pt 44.75pt 28.35pt;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:595.3pt 841.9pt;
	margin:23.8pt 28.45pt 42.5pt 28.35pt;}
div.WordSection2
	{page:WordSection2;}
@page WordSection3
	{size:595.3pt 841.9pt;
	margin:32.1pt 433.3pt 46.7pt 28.35pt;}
div.WordSection3
	{page:WordSection3;}
@page WordSection4
	{size:595.3pt 841.9pt;
	margin:23.8pt 53.0pt 45.6pt 28.35pt;}
div.WordSection4
	{page:WordSection4;}
@page WordSection5
	{size:595.3pt 841.9pt;
	margin:63.75pt 1.0in 34.15pt 1.0in;}
div.WordSection5
	{page:WordSection5;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal style='margin-top:0in;margin-right:553.35pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'><img width=792
height=1120
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image001.jpg"><br
clear=ALL>
<br clear=all style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.4pt;margin-bottom:2.0pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:110%'><b><span
style='font-size:26.0pt;line-height:110%;color:#D4072F'>Contents</span></b></p>

<p class=MsoToc1><a href="#_Toc323867"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>About</span></b><span style='color:black;
text-decoration:none'>........................................................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc323868"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 1: Getting started with Ruby on Rails</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>2</span></a></p>

<p class=MsoToc2><a href="#_Toc323869"><span style='color:#D4072F'>Section 1.1:
Creating a Ruby on Rails Application</span><span style='color:black;text-decoration:
none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>2</span></a></p>

<p class=MsoToc2><a href="#_Toc323870"><span style='color:#D4072F'>Section 1.2:
Create a new Rails app with your choice of database and including the RSpec
Testing Tool</span><span style='color:black;text-decoration:none'> ...................................... </span><span style='color:black;text-decoration:none'>4</span></a></p>

<p class=MsoToc2><a href="#_Toc323871"><span style='color:#D4072F'>Section 1.3:
Generating A Controller</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>4</span></a></p>

<p class=MsoToc2><a href="#_Toc323872"><span style='color:#D4072F'>Section 1.4:
Installing Rails</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>5</span></a></p>

<p class=MsoToc2><a href="#_Toc323873"><span style='color:#D4072F'>Section 1.5:
Create a new Rails app with a non-standard database adapter</span><span
style='color:black;text-decoration:none'>........................................................................................ </span><span style='color:black;text-decoration:none'>7</span></a></p>

<p class=MsoToc2><a href="#_Toc323874"><span style='color:#D4072F'>Section 1.6:
Creating Rails APIs in JSON</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>7</span></a></p>

<p class=MsoToc2><a href="#_Toc323875"><span style='color:#D4072F'>Section 1.7:
Generate a Resource with Sca&#57379;olds</span><span style='color:black;
text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>8</span></a></p>

<p class=MsoToc1><a href="#_Toc323876"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 2: Routing</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>10</span></a></p>

<p class=MsoToc2><a href="#_Toc323877"><span style='color:#D4072F'>Section 2.1:
Resource Routing (Basic)</span><span style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>10</span></a></p>

<p class=MsoToc2><a href="#_Toc323878"><span style='color:#D4072F'>Section 2.2:
Constraints</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>11</span></a></p>

<p class=MsoToc2><a href="#_Toc323879"><span style='color:#D4072F'>Section 2.3:
Scoping routes</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>13</span></a></p>

<p class=MsoToc2><a href="#_Toc323880"><span style='color:#D4072F'>Section 2.4:
Concerns</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>15</span></a></p>

<p class=MsoToc2><a href="#_Toc323881"><span style='color:#D4072F'>Section 2.5:
Root route</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>16</span></a></p>

<p class=MsoToc2><a href="#_Toc323882"><span style='color:#D4072F'>Section 2.6:
Split routes into multiple files</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>16</span></a></p>

<p class=MsoToc2><a href="#_Toc323883"><span style='color:#D4072F'>Section 2.7:
Additional RESTful actions</span><span style='color:black;text-decoration:none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>17</span></a></p>

<p class=MsoToc2><a href="#_Toc323884"><span style='color:#D4072F'>Section 2.8:
Member and Collection Routes</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>17</span></a></p>

<p class=MsoToc2><a href="#_Toc323885"><span style='color:#D4072F'>Section 2.9:
Mount another application</span><span style='color:black;text-decoration:none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>18</span></a></p>

<p class=MsoToc2><a href="#_Toc323886"><span style='color:#D4072F'>Section
2.10: Nested Routes</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>18</span></a></p>

<p class=MsoToc2><a href="#_Toc323887"><span style='color:#D4072F'>Section
2.11: Redirection</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>19</span></a></p>

<p class=MsoToc2><a href="#_Toc323888"><span style='color:#D4072F'>Section
2.12: Redirects and Wildcard Routes</span><span style='color:black;text-decoration:
none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>19</span></a></p>

<p class=MsoToc2><a href="#_Toc323889"><span style='color:#D4072F'>Section
2.13: Scope available locales</span><span style='color:black;text-decoration:
none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>19</span></a></p>

<p class=MsoToc2><a href="#_Toc323890"><span style='color:#D4072F'>Section
2.14: URL params with a period</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>20</span></a></p>

<p class=MsoToc1><a href="#_Toc323891"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 3: ActiveRecord</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>21</span></a></p>

<p class=MsoToc2><a href="#_Toc323892"><span style='color:#D4072F'>Section 3.1:
Creating a Model via generator</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>21</span></a></p>

<p class=MsoToc2><a href="#_Toc323893"><span style='color:#D4072F'>Section 3.2:
Introduction to Callbacks</span><span style='color:black;text-decoration:none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>21</span></a></p>

<p class=MsoToc2><a href="#_Toc323894"><span style='color:#D4072F'>Section 3.3:
Creating a Model manually</span><span style='color:black;text-decoration:none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>22</span></a></p>

<p class=MsoToc2><a href="#_Toc323895"><span style='color:#D4072F'>Section 3.4:
Manually Testing Your Models</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>23</span></a></p>

<p class=MsoToc2><a href="#_Toc323896"><span style='color:#D4072F'>Section 3.5:
Creating A Migration</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>23</span></a></p>

<p class=MsoToc2><a href="#_Toc323897"><span style='color:#D4072F'>Section 3.6:
Create a Join Table using Migrations</span><span style='color:black;text-decoration:
none'>.................................................................................................................................... </span><span style='color:black;text-decoration:none'>24</span></a></p>

<p class=MsoToc2><a href="#_Toc323898"><span style='color:#D4072F'>Section 3.7:
Using a model instance to update a row</span><span style='color:black;
text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>25</span></a></p>

<p class=MsoToc1><a href="#_Toc323899"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 4: Views</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>26</span></a></p>

<p class=MsoToc2><a href="#_Toc323900"><span style='color:#D4072F'>Section 4.1:
Structure</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>26</span></a></p>

<p class=MsoToc2><a href="#_Toc323901"><span style='color:#D4072F'>Section 4.2:
Partials</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>26</span></a></p>

<p class=MsoToc2><a href="#_Toc323902"><span style='color:#D4072F'>Section 4.3:
AssetTagHelper</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>27</span></a></p>

<p class=MsoToc2><a href="#_Toc323903"><span style='color:#D4072F'>Section 4.4:
Replace HTML code in Views</span><span style='color:black;text-decoration:none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>28</span></a></p>

<p class=MsoToc2><a href="#_Toc323904"><span style='color:#D4072F'>Section 4.5:
HAML - an alternative way to use in your views</span><span style='color:black;
text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>29</span></a></p>

<p class=MsoToc1><a href="#_Toc323905"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 5: ActiveRecord Migrations</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>31</span></a></p>

<p class=MsoToc2><a href="#_Toc323906"><span style='color:#D4072F'>Section 5.1:
Adding multiple columns to a table</span><span style='color:black;text-decoration:
none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>31</span></a></p>

<p class=MsoToc2><a href="#_Toc323907"><span style='color:#D4072F'>Section 5.2:
Add a reference column to a table</span><span style='color:black;text-decoration:
none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>31</span></a></p>

<p class=MsoToc2><a href="#_Toc323908"><span style='color:#D4072F'>Section 5.3:
Rollback migrations</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>32</span></a></p>

<p class=MsoToc2><a href="#_Toc323909"><span style='color:#D4072F'>Section 5.4:
Add a new column with an index</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>32</span></a></p>

<p class=MsoToc2><a href="#_Toc323910"><span style='color:#D4072F'>Section 5.5:
Run specific migration</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>33</span></a></p>

<p class=MsoToc2><a href="#_Toc323911"><span style='color:#D4072F'>Section 5.6:
Redo migrations</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>33</span></a></p>

<p class=MsoToc2><a href="#_Toc323912"><span style='color:#D4072F'>Section 5.7:
Add a new column to a table</span><span style='color:black;text-decoration:
none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>33</span></a></p>

<p class=MsoToc2><a href="#_Toc323913"><span style='color:#D4072F'>Section 5.8:
Remove an existing column from a table</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>34</span></a></p>

<p class=MsoToc2><a href="#_Toc323914"><span style='color:#D4072F'>Section 5.9:
Add column with default value</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>34</span></a></p>

<p class=MsoToc2><a href="#_Toc323915"><span style='color:#D4072F'>Section
5.10: Running migrations in di&#57379;erent environments</span><span
style='color:black;text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc323916"><span style='color:#D4072F'>Section
5.11: Create a new table</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc323917"><span style='color:#D4072F'>Section
5.12: Running migrations</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc323918"><span style='color:#D4072F'>Section
5.13: Change an existing column’s type</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc323919"><span style='color:#D4072F'>Section
5.14: Create a hstore column</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>36</span></a></p>

<p class=MsoToc2><a href="#_Toc323920"><span style='color:#D4072F'>Section
5.15: Create a join table</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>36</span></a></p>

<p class=MsoToc2><a href="#_Toc323921"><span style='color:#D4072F'>Section
5.16: Add a self reference</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>37</span></a></p>

<p class=MsoToc2><a href="#_Toc323922"><span style='color:#D4072F'>Section
5.17: Create an array column</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>37</span></a></p>

<p class=MsoToc2><a href="#_Toc323923"><span style='color:#D4072F'>Section
5.18: Add an unique column to a table</span><span style='color:black;
text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>37</span></a></p>

<p class=MsoToc2><a href="#_Toc323924"><span style='color:#D4072F'>Section
5.19: Checking migration status</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>38</span></a></p>

<p class=MsoToc2><a href="#_Toc323925"><span style='color:#D4072F'>Section
5.20: Changing Tables</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>38</span></a></p>

<p class=MsoToc2><a href="#_Toc323926"><span style='color:#D4072F'>Section
5.21: Adding a NOT NULL constraint to existing data</span><span
style='color:black;text-decoration:none'>............................................................................................................... </span><span style='color:black;text-decoration:none'>38</span></a></p>

<p class=MsoToc2><a href="#_Toc323927"><span style='color:#D4072F'>Section
5.22: Forbid null values</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>39</span></a></p>

<p class=MsoToc1><a href="#_Toc323928"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 6: Rails Best Practices</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>40</span></a></p>

<p class=MsoToc2><a href="#_Toc323929"><span style='color:#D4072F'>Section 6.1:
Fat Model, Skinny Controller</span><span style='color:black;text-decoration:
none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>40</span></a></p>

<p class=MsoToc2><a href="#_Toc323930"><span style='color:#D4072F'>Section 6.2:
Domain Objects (No More Fat Models)</span><span style='color:black;text-decoration:
none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>40</span></a></p>

<p class=MsoToc2><a href="#_Toc323931"><span style='color:#D4072F'>Section 6.3:
Beware of default_scope</span><span style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>42</span></a></p>

<p class=MsoToc2><a href="#_Toc323932"><span style='color:#D4072F'>Section 6.4:
Convention Over Configuration</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>44</span></a></p>

<p class=MsoToc2><a href="#_Toc323933"><span style='color:#D4072F'>Section 6.5:
Don't Repeat Yourself (DRY)</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................. </span><span style='color:black;text-decoration:none'>45</span></a></p>

<p class=MsoToc2><a href="#_Toc323934"><span style='color:#D4072F'>Section 6.6:
You Ain’t Gonna Need it (YAGNI)</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>45</span></a></p>

<p class=MsoToc1><a href="#_Toc323935"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 7: Naming Conventions</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc323936"><span style='color:#D4072F'>Section 7.1:
Controllers</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc323937"><span style='color:#D4072F'>Section 7.2:
Models</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc323938"><span style='color:#D4072F'>Section 7.3:
Filenames and autoloading</span><span style='color:black;text-decoration:none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc323939"><span style='color:#D4072F'>Section 7.4:
Views and Layouts</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>48</span></a></p>

<p class=MsoToc2><a href="#_Toc323940"><span style='color:#D4072F'>Section 7.5:
Models class from Controller name</span><span style='color:black;text-decoration:
none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>48</span></a></p>

<p class=MsoToc1><a href="#_Toc323941"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 8: ActionCable</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>49</span></a></p>

<p class=MsoToc2><a href="#_Toc323942"><span style='color:#D4072F'>Section 8.1:
User Authentication</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>49</span></a></p>

<p class=MsoToc2><a href="#_Toc323943"><span style='color:#D4072F'>Section 8.2:
[Basic] Server Side</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>49</span></a></p>

<p class=MsoToc2><a href="#_Toc323944"><span style='color:#D4072F'>Section 8.3:
[Basic] Client Side (Co&#57379;eescript)</span><span style='color:black;
text-decoration:none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>49</span></a></p>

<p class=MsoToc1><a href="#_Toc323945"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 9: ActiveModel</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>51</span></a></p>

<p class=MsoToc2><a href="#_Toc323946"><span style='color:#D4072F'>Section 9.1:
Using ActiveModel::Validations</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>51</span></a></p>

<p class=MsoToc1><a href="#_Toc323947"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 10: User Authentication in Rails</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>52</span></a></p>

<p class=MsoToc2><a href="#_Toc323948"><span style='color:#D4072F'>Section
10.1: Authentication using Devise</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>52</span></a></p>

<p class=MsoToc2><a href="#_Toc323949"><span style='color:#D4072F'>Section
10.2: Devise Controller Filters &amp; Helpers</span><span style='color:black;
text-decoration:none'>.................................................................................................................................... </span><span style='color:black;text-decoration:none'>52</span></a></p>

<p class=MsoToc2><a href="#_Toc323950"><span style='color:#D4072F'>Section
10.3: Omniauth</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc323951"><span style='color:#D4072F'>Section
10.4: has_secure_password</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc323952"><span style='color:#D4072F'>Section
10.5: has_secure_token</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc1><a href="#_Toc323953"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 11: ActiveRecord Associations</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>55</span></a></p>

<p class=MsoToc2><a href="#_Toc323954"><span style='color:#D4072F'>Section
11.1: Polymorphic association</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>55</span></a></p>

<p class=MsoToc2><a href="#_Toc323955"><span style='color:#D4072F'>Section
11.2: Self-Referential Association</span><span style='color:black;text-decoration:
none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>55</span></a></p>

<p class=MsoToc2><a href="#_Toc323956"><span style='color:#D4072F'>Section
11.3: belongs_to</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>56</span></a></p>

<p class=MsoToc2><a href="#_Toc323957"><span style='color:#D4072F'>Section
11.4: has_one</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>56</span></a></p>

<p class=MsoToc2><a href="#_Toc323958"><span style='color:#D4072F'>Section
11.5: has_many</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>56</span></a></p>

<p class=MsoToc2><a href="#_Toc323959"><span style='color:#D4072F'>Section
11.6: The has_many :through association</span><span style='color:black;
text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>57</span></a></p>

<p class=MsoToc2><a href="#_Toc323960"><span style='color:#D4072F'>Section
11.7: The has_one :through association</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>57</span></a></p>

<p class=MsoToc2><a href="#_Toc323961"><span style='color:#D4072F'>Section
11.8: The has_and_belongs_to_many association</span><span style='color:black;
text-decoration:none'>.................................................................................................................... </span><span style='color:black;text-decoration:none'>58</span></a></p>

<p class=MsoToc1><a href="#_Toc323962"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 12: ActiveRecord Validations</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>59</span></a></p>

<p class=MsoToc2><a href="#_Toc323963"><span style='color:#D4072F'>Section
12.1: Validating length of an attribute</span><span style='color:black;
text-decoration:none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>59</span></a></p>

<p class=MsoToc2><a href="#_Toc323964"><span style='color:#D4072F'>Section
12.2: Validates format of an attribute</span><span style='color:black;
text-decoration:none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>59</span></a></p>

<p class=MsoToc2><a href="#_Toc323965"><span style='color:#D4072F'>Section
12.3: Validating presence of an attribute</span><span style='color:black;
text-decoration:none'>.................................................................................................................................... </span><span style='color:black;text-decoration:none'>59</span></a></p>

<p class=MsoToc2><a href="#_Toc323966"><span style='color:#D4072F'>Section
12.4: Custom validations</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>60</span></a></p>

<p class=MsoToc2><a href="#_Toc323967"><span style='color:#D4072F'>Section
12.5: Validates inclusion of an attribute</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>60</span></a></p>

<p class=MsoToc2><a href="#_Toc323968"><span style='color:#D4072F'>Section
12.6: Grouping validation</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>61</span></a></p>

<p class=MsoToc2><a href="#_Toc323969"><span style='color:#D4072F'>Section
12.7: Validating numericality of an attribute</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>61</span></a></p>

<p class=MsoToc2><a href="#_Toc323970"><span style='color:#D4072F'>Section
12.8: Validate uniqueness of an attribute</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>62</span></a></p>

<p class=MsoToc2><a href="#_Toc323971"><span style='color:#D4072F'>Section
12.9: Skipping Validations</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>62</span></a></p>

<p class=MsoToc2><a href="#_Toc323972"><span style='color:#D4072F'>Section
12.10: Confirmation of attribute</span><span style='color:black;text-decoration:
none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>62</span></a></p>

<p class=MsoToc2><a href="#_Toc323973"><span style='color:#D4072F'>Section
12.11: Using :on option</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>63</span></a></p>

<p class=MsoToc2><a href="#_Toc323974"><span style='color:#D4072F'>Section
12.12: Conditional validation</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>63</span></a></p>

<p class=MsoToc1><a href="#_Toc323975"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 13: ActiveRecord Query Interface</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>64</span></a></p>

<p class=MsoToc2><a href="#_Toc323976"><span style='color:#D4072F'>Section
13.1: .where</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>64</span></a></p>

<p class=MsoToc2><a href="#_Toc323977"><span style='color:#D4072F'>Section
13.2: .where with an array</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>64</span></a></p>

<p class=MsoToc2><a href="#_Toc323978"><span style='color:#D4072F'>Section
13.3: Scopes</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>65</span></a></p>

<p class=MsoToc2><a href="#_Toc323979"><span style='color:#D4072F'>Section
13.4: Get first and last record</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>66</span></a></p>

<p class=MsoToc2><a href="#_Toc323980"><span style='color:#D4072F'>Section
13.5: Ordering</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>67</span></a></p>

<p class=MsoToc2><a href="#_Toc323981"><span style='color:#D4072F'>Section
13.6: where.not</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>67</span></a></p>

<p class=MsoToc2><a href="#_Toc323982"><span style='color:#D4072F'>Section
13.7: Includes</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>68</span></a></p>

<p class=MsoToc2><a href="#_Toc323983"><span style='color:#D4072F'>Section
13.8: Joins</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>68</span></a></p>

<p class=MsoToc2><a href="#_Toc323984"><span style='color:#D4072F'>Section
13.9: Limit and O&#57379;set</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc2><a href="#_Toc323985"><span style='color:#D4072F'>Section
13.10: .find_by</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc2><a href="#_Toc323986"><span style='color:#D4072F'>Section
13.11: .delete_all</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc2><a href="#_Toc323987"><span style='color:#D4072F'>Section
13.12: ActiveRecord case insensitive search</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc2><a href="#_Toc323988"><span style='color:#D4072F'>Section
13.13: .group and .count</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>70</span></a></p>

<p class=MsoToc2><a href="#_Toc323989"><span style='color:#D4072F'>Section
13.14: .distinct (or .uniq)</span><span style='color:black;text-decoration:
none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>70</span></a></p>

<p class=MsoToc1><a href="#_Toc323990"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 14: ActionMailer</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>71</span></a></p>

<p class=MsoToc2><a href="#_Toc323991"><span style='color:#D4072F'>Section
14.1: Basic Mailer</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>71</span></a></p>

<p class=MsoToc2><a href="#_Toc323992"><span style='color:#D4072F'>Section
14.2: Generating a new mailer</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>72</span></a></p>

<p class=MsoToc2><a href="#_Toc323993"><span style='color:#D4072F'>Section
14.3: ActionMailer Interceptor</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>72</span></a></p>

<p class=MsoToc2><a href="#_Toc323994"><span style='color:#D4072F'>Section
14.4: Adding Attachments</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>72</span></a></p>

<p class=MsoToc2><a href="#_Toc323995"><span style='color:#D4072F'>Section
14.5: ActionMailer Callbacks</span><span style='color:black;text-decoration:
none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>73</span></a></p>

<p class=MsoToc2><a href="#_Toc323996"><span style='color:#D4072F'>Section
14.6: Generate a Scheduled Newsletter</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>73</span></a></p>

<p class=MsoToc1><a href="#_Toc323997"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 15: Rails generate commands</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>79</span></a></p>

<p class=MsoToc2><a href="#_Toc323998"><span style='color:#D4072F'>Section
15.1: Rails Generate Controller</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>79</span></a></p>

<p class=MsoToc2><a href="#_Toc323999"><span style='color:#D4072F'>Section
15.2: Rails Generate Migration</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>80</span></a></p>

<p class=MsoToc2><a href="#_Toc324000"><span style='color:#D4072F'>Section
15.3: Rails Generate Sca&#57379;old</span><span style='color:black;text-decoration:
none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>80</span></a></p>

<p class=MsoToc2><a href="#_Toc324001"><span style='color:#D4072F'>Section
15.4: Rails Generate Model</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>81</span></a></p>

<p class=MsoToc1><a href="#_Toc324002"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 16: Configuration</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>82</span></a></p>

<p class=MsoToc2><a href="#_Toc324003"><span style='color:#D4072F'>Section
16.1: Custom configuration</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>82</span></a></p>

<p class=MsoToc1><a href="#_Toc324004"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 17: I18n - Internationalization</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>84</span></a></p>

<p class=MsoToc2><a href="#_Toc324005"><span style='color:#D4072F'>Section
17.1: I18n with arguments</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>84</span></a></p>

<p class=MsoToc2><a href="#_Toc324006"><span style='color:#D4072F'>Section
17.2: Translating ActiveRecord model attributes</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>84</span></a></p>

<p class=MsoToc2><a href="#_Toc324007"><span style='color:#D4072F'>Section
17.3: Get locale from HTTP request</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>86</span></a></p>

<p class=MsoToc2><a href="#_Toc324008"><span style='color:#D4072F'>Section
17.4: Pluralization</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>87</span></a></p>

<p class=MsoToc2><a href="#_Toc324009"><span style='color:#D4072F'>Section
17.5: Set locale through requests</span><span style='color:black;text-decoration:
none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>87</span></a></p>

<p class=MsoToc2><a href="#_Toc324010"><span style='color:#D4072F'>Section
17.6: Use I18n with HTML Tags and Symbols</span><span style='color:black;
text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>89</span></a></p>

<p class=MsoToc2><a href="#_Toc324011"><span style='color:#D4072F'>Section
17.7: Use I18n in views</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>89</span></a></p>

<p class=MsoToc1><a href="#_Toc324012"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 18: Using GoogleMaps with Rails</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................ </span><span style='color:black;text-decoration:none'>91</span></a></p>

<p class=MsoToc2><a href="#_Toc324013"><span style='color:#D4072F'>Section
18.1: Add the google maps javascript tag to the layout header</span><span
style='color:black;text-decoration:none'>............................................................................................. </span><span style='color:black;text-decoration:none'>91</span></a></p>

<p class=MsoToc2><a href="#_Toc324014"><span style='color:#D4072F'>Section
18.2: Geocode the model</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>91</span></a></p>

<p class=MsoToc2><a href="#_Toc324015"><span style='color:#D4072F'>Section
18.3: Show addresses on a google map in the profile view</span><span
style='color:black;text-decoration:none'>..................................................................................................... </span><span style='color:black;text-decoration:none'>92</span></a></p>

<p class=MsoToc2><a href="#_Toc324016"><span style='color:#D4072F'>Section
18.4: Set the markers on the map with javascript</span><span style='color:black;
text-decoration:none'>..................................................................................................................... </span><span style='color:black;text-decoration:none'>93</span></a></p>

<p class=MsoToc2><a href="#_Toc324017"><span style='color:#D4072F'>Section
18.5: Initialize the map using a co&#57379;ee script class</span><span
style='color:black;text-decoration:none'>..................................................................................................................... </span><span style='color:black;text-decoration:none'>94</span></a></p>

<p class=MsoToc2><a href="#_Toc324018"><span style='color:#D4072F'>Section
18.6: Initialize the map markers using a co&#57379;ee script class</span><span
style='color:black;text-decoration:none'>..................................................................................................... </span><span style='color:black;text-decoration:none'>94</span></a></p>

<p class=MsoToc2><a href="#_Toc324019"><span style='color:#D4072F'>Section
18.7: Auto-zoom a map using a co&#57379;ee script class</span><span
style='color:black;text-decoration:none'>.................................................................................................................... </span><span style='color:black;text-decoration:none'>95</span></a></p>

<p class=MsoToc2><a href="#_Toc324020"><span style='color:#D4072F'>Section
18.8: Exposing the model properties as json</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>96</span></a></p>

<p class=MsoToc1><a href="#_Toc324021"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 19: File Uploads</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>98</span></a></p>

<p class=MsoToc2><a href="#_Toc324022"><span style='color:#D4072F'>Section
19.1: Single file upload using Carrierwave</span><span style='color:black;
text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>98</span></a></p>

<p class=MsoToc2><a href="#_Toc324023"><span style='color:#D4072F'>Section
19.2: Nested model - multiple uploads</span><span style='color:black;
text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>98</span></a></p>

<p class=MsoToc1><a href="#_Toc324024"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 20: Caching</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>100</span></a></p>

<p class=MsoToc2><a href="#_Toc324025"><span style='color:#D4072F'>Section
20.1: Russian Doll Caching</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>100</span></a></p>

<p class=MsoToc2><a href="#_Toc324026"><span style='color:#D4072F'>Section
20.2: SQL Caching</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>100</span></a></p>

<p class=MsoToc2><a href="#_Toc324027"><span style='color:#D4072F'>Section
20.3: Action caching</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>101</span></a></p>

<p class=MsoToc2><a href="#_Toc324028"><span style='color:#D4072F'>Section
20.4: Fragment caching</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>101</span></a></p>

<p class=MsoToc2><a href="#_Toc324029"><span style='color:#D4072F'>Section
20.5: Page caching</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>102</span></a></p>

<p class=MsoToc2><a href="#_Toc324030"><span style='color:#D4072F'>Section
20.6: HTTP caching</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>102</span></a></p>

<p class=MsoToc1><a href="#_Toc324031"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 21: ActionController</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>103</span></a></p>

<p class=MsoToc2><a href="#_Toc324032"><span style='color:#D4072F'>Section
21.1: Basic REST Controller</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>103</span></a></p>

<p class=MsoToc2><a href="#_Toc324033"><span style='color:#D4072F'>Section
21.2: Filters</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>104</span></a></p>

<p class=MsoToc2><a href="#_Toc324034"><span style='color:#D4072F'>Section
21.3: Generating a controller</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>106</span></a></p>

<p class=MsoToc2><a href="#_Toc324035"><span style='color:#D4072F'>Section
21.4: Rescuing ActiveRecord::RecordNotFound with redirect_to</span><span
style='color:black;text-decoration:none'>........................................................................................ </span><span style='color:black;text-decoration:none'>107</span></a></p>

<p class=MsoToc2><a href="#_Toc324036"><span style='color:#D4072F'>Section
21.5: Display error pages for exceptions</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>107</span></a></p>

<p class=MsoToc2><a href="#_Toc324037"><span style='color:#D4072F'>Section
21.6: Output JSON instead of HTML</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>108</span></a></p>

<p class=MsoToc2><a href="#_Toc324038"><span style='color:#D4072F'>Section
21.7: Controllers (Basic)</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>108</span></a></p>

<p class=MsoToc2><a href="#_Toc324039"><span style='color:#D4072F'>Section
21.8: Parameters</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>109</span></a></p>

<p class=MsoToc2><a href="#_Toc324040"><span style='color:#D4072F'>Section
21.9: Filtering parameters (Basic)</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>109</span></a></p>

<p class=MsoToc2><a href="#_Toc324041"><span style='color:#D4072F'>Section
21.10: Redirecting</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>110</span></a></p>

<p class=MsoToc2><a href="#_Toc324042"><span style='color:#D4072F'>Section
21.11: Using Views</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>110</span></a></p>

<p class=MsoToc1><a href="#_Toc324043"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 22: Configuration</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>112</span></a></p>

<p class=MsoToc2><a href="#_Toc324044"><span style='color:#D4072F'>Section
22.1: Rails General Configuration</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>112</span></a></p>

<p class=MsoToc2><a href="#_Toc324045"><span style='color:#D4072F'>Section
22.2: Configuring assets</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>112</span></a></p>

<p class=MsoToc2><a href="#_Toc324046"><span style='color:#D4072F'>Section
22.3: Configuring generators</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>112</span></a></p>

<p class=MsoToc2><a href="#_Toc324047"><span style='color:#D4072F'>Section
22.4: Environments in Rails</span><span style='color:black;text-decoration:
none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>113</span></a></p>

<p class=MsoToc2><a href="#_Toc324048"><span style='color:#D4072F'>Section
22.5: Database Configuration</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>113</span></a></p>

<p class=MsoToc1><a href="#_Toc324049"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 23: Safe Constantize</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>115</span></a></p>

<p class=MsoToc2><a href="#_Toc324050"><span style='color:#D4072F'>Section
23.1: Successful safe_constantize</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>115</span></a></p>

<p class=MsoToc2><a href="#_Toc324051"><span style='color:#D4072F'>Section
23.2: Unsuccessful safe_constantize</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>115</span></a></p>

<p class=MsoToc1><a href="#_Toc324052"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 24: Rails 5</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>116</span></a></p>

<p class=MsoToc2><a href="#_Toc324053"><span style='color:#D4072F'>Section
24.1: How to install Ruby on Rails 5 on RVM</span><span style='color:black;
text-decoration:none'>........................................................................................................................... </span><span style='color:black;text-decoration:none'>116</span></a></p>

<p class=MsoToc2><a href="#_Toc324054"><span style='color:#D4072F'>Section
24.2: Creating a Ruby on Rails 5 API</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>116</span></a></p>

<p class=MsoToc1><a href="#_Toc324055"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 25: Authorization with CanCan</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>119</span></a></p>

<p class=MsoToc2><a href="#_Toc324056"><span style='color:#D4072F'>Section
25.1: Getting started with CanCan</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>119</span></a></p>

<p class=MsoToc2><a href="#_Toc324057"><span style='color:#D4072F'>Section
25.2: Handling large number of abilities</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>119</span></a></p>

<p class=MsoToc2><a href="#_Toc324058"><span style='color:#D4072F'>Section
25.3: Defining abilities</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>121</span></a></p>

<p class=MsoToc2><a href="#_Toc324059"><span style='color:#D4072F'>Section
25.4: Quickly test an ability</span><span style='color:black;text-decoration:
none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>121</span></a></p>

<p class=MsoToc1><a href="#_Toc324060"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 26: Mongoid</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>123</span></a></p>

<p class=MsoToc2><a href="#_Toc324061"><span style='color:#D4072F'>Section
26.1: Fields</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>123</span></a></p>

<p class=MsoToc2><a href="#_Toc324062"><span style='color:#D4072F'>Section
26.2: Installation</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>123</span></a></p>

<p class=MsoToc2><a href="#_Toc324063"><span style='color:#D4072F'>Section
26.3: Creating a Model</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>123</span></a></p>

<p class=MsoToc2><a href="#_Toc324064"><span style='color:#D4072F'>Section
26.4: Classic Associations</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>124</span></a></p>

<p class=MsoToc2><a href="#_Toc324065"><span style='color:#D4072F'>Section
26.5: Embedded Associations</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>124</span></a></p>

<p class=MsoToc2><a href="#_Toc324066"><span style='color:#D4072F'>Section
26.6: Database Calls</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>125</span></a></p>

<p class=MsoToc1><a href="#_Toc324067"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 27: Gems</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>126</span></a></p>

<p class=MsoToc2><a href="#_Toc324068"><span style='color:#D4072F'>Section
27.1: Gemfiles</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>126</span></a></p>

<p class=MsoToc2><a href="#_Toc324069"><span style='color:#D4072F'>Section
27.2: What is a gem?</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>126</span></a></p>

<p class=MsoToc2><a href="#_Toc324070"><span style='color:#D4072F'>Section
27.3: Bundler</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>127</span></a></p>

<p class=MsoToc2><a href="#_Toc324071"><span style='color:#D4072F'>Section
27.4: Gemsets</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>127</span></a></p>

<p class=MsoToc1><a href="#_Toc324072"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 28: Change default timezone</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>130</span></a></p>

<p class=MsoToc2><a href="#_Toc324073"><span style='color:#D4072F'>Section
28.1: Change Rails timezone AND have Active Record store times in this timezone</span><span
style='color:black;text-decoration:none'>........................................................ </span><span style='color:black;text-decoration:none'>130</span></a></p>

<p class=MsoToc2><a href="#_Toc324074"><span style='color:#D4072F'>Section
28.2: Change Rails timezone, but continue to have Active Record save in the
database in UTC</span><span style='color:black;text-decoration:none'> ................................... </span><span style='color:black;text-decoration:none'>130</span></a></p>

<p class=MsoToc1><a href="#_Toc324075"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 29: Asset Pipeline</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>131</span></a></p>

<p class=MsoToc2><a href="#_Toc324076"><span style='color:#D4072F'>Section
29.1: Manifest Files and Directives</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>131</span></a></p>

<p class=MsoToc2><a href="#_Toc324077"><span style='color:#D4072F'>Section
29.2: Rake tasks</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>132</span></a></p>

<p class=MsoToc2><a href="#_Toc324078"><span style='color:#D4072F'>Section
29.3: Basic Usage</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>132</span></a></p>

<p class=MsoToc1><a href="#_Toc324079"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 30: Upgrading Rails</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>133</span></a></p>

<p class=MsoToc2><a href="#_Toc324080"><span style='color:#D4072F'>Section
30.1: Upgrading from Rails 4.2 to Rails 5.0</span><span style='color:black;
text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>133</span></a></p>

<p class=MsoToc1><a href="#_Toc324081"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 31: ActiveRecord Locking</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>135</span></a></p>

<p class=MsoToc2><a href="#_Toc324082"><span style='color:#D4072F'>Section
31.1: Optimistic Locking</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>135</span></a></p>

<p class=MsoToc2><a href="#_Toc324083"><span style='color:#D4072F'>Section
31.2: Pessimistic Locking</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>135</span></a></p>

<p class=MsoToc1><a href="#_Toc324084"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 32: Debugging</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>136</span></a></p>

<p class=MsoToc2><a href="#_Toc324085"><span style='color:#D4072F'>Section
32.1: Debugging Rails Application</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>136</span></a></p>

<p class=MsoToc2><a href="#_Toc324086"><span style='color:#D4072F'>Section
32.2: Debugging Ruby on Rails Quickly + Beginner advice</span><span
style='color:black;text-decoration:none'>.................................................................................................... </span><span style='color:black;text-decoration:none'>136</span></a></p>

<p class=MsoToc2><a href="#_Toc324087"><span style='color:#D4072F'>Section
32.3: Debugging ruby-on-rails application with pry</span><span
style='color:black;text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>138</span></a></p>

<p class=MsoToc2><a href="#_Toc324088"><span style='color:#D4072F'>Section
32.4: Debugging in your IDE</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>139</span></a></p>

<p class=MsoToc1><a href="#_Toc324089"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 33: Configure Angular with Rails</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>141</span></a></p>

<p class=MsoToc2><a href="#_Toc324090"><span style='color:#D4072F'>Section
33.1: Angular with Rails 101</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>141</span></a></p>

<p class=MsoToc1><a href="#_Toc324091"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 34: Rails logger</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>144</span></a></p>

<p class=MsoToc2><a href="#_Toc324092"><span style='color:#D4072F'>Section
34.1: Rails.logger</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>144</span></a></p>

<p class=MsoToc1><a href="#_Toc324093"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 35: Prawn PDF</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>145</span></a></p>

<p class=MsoToc2><a href="#_Toc324094"><span style='color:#D4072F'>Section
35.1: Advanced Example</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>145</span></a></p>

<p class=MsoToc2><a href="#_Toc324095"><span style='color:#D4072F'>Section
35.2: Basic Example</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>146</span></a></p>

<p class=MsoToc1><a href="#_Toc324096"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 36: Rails API</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>147</span></a></p>

<p class=MsoToc2><a href="#_Toc324097"><span style='color:#D4072F'>Section
36.1: Creating an API-only application</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>147</span></a></p>

<p class=MsoToc1><a href="#_Toc324098"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 37: Deploying a Rails app on Heroku</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>148</span></a></p>

<p class=MsoToc2><a href="#_Toc324099"><span style='color:#D4072F'>Section
37.1: Deploying your application</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>148</span></a></p>

<p class=MsoToc2><a href="#_Toc324100"><span style='color:#D4072F'>Section
37.2: Managing Production and staging environments for a Heroku</span><span
style='color:black;text-decoration:none'>.................................................................................. </span><span style='color:black;text-decoration:none'>150</span></a></p>

<p class=MsoToc1><a href="#_Toc324101"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 38: ActiveSupport</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>152</span></a></p>

<p class=MsoToc2><a href="#_Toc324102"><span style='color:#D4072F'>Section
38.1: Core Extensions: String Access</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>152</span></a></p>

<p class=MsoToc2><a href="#_Toc324103"><span style='color:#D4072F'>Section
38.2: Core Extensions: String to Date/Time Conversion</span><span
style='color:black;text-decoration:none'>........................................................................................................ </span><span style='color:black;text-decoration:none'>153</span></a></p>

<p class=MsoToc2><a href="#_Toc324104"><span style='color:#D4072F'>Section
38.3: Core Extensions: String Exclusion</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>153</span></a></p>

<p class=MsoToc2><a href="#_Toc324105"><span style='color:#D4072F'>Section
38.4: Core Extensions: String Filters</span><span style='color:black;
text-decoration:none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>153</span></a></p>

<p class=MsoToc2><a href="#_Toc324106"><span style='color:#D4072F'>Section
38.5: Core Extensions: String Inflection</span><span style='color:black;
text-decoration:none'>.................................................................................................................................... </span><span style='color:black;text-decoration:none'>155</span></a></p>

<p class=MsoToc1><a href="#_Toc324107"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 39: Form Helpers</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>158</span></a></p>

<p class=MsoToc2><a href="#_Toc324108"><span style='color:#D4072F'>Section
39.1: Creating a search form</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>158</span></a></p>

<p class=MsoToc2><a href="#_Toc324109"><span style='color:#D4072F'>Section
39.2: Dropdown</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>158</span></a></p>

<p class=MsoToc2><a href="#_Toc324110"><span style='color:#D4072F'>Section
39.3: Helpers for form elements</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>158</span></a></p>

<p class=MsoToc1><a href="#_Toc324111"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 40: ActiveRecord Transactions</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc324112"><span style='color:#D4072F'>Section
40.1: Basic example</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc324113"><span style='color:#D4072F'>Section
40.2: Di&#57379;erent ActiveRecord classes in a single transaction</span><span
style='color:black;text-decoration:none'>.................................................................................................. </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc324114"><span style='color:#D4072F'>Section
40.3: Multiple database connections</span><span style='color:black;text-decoration:
none'>........................................................................................................................................ </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc324115"><span style='color:#D4072F'>Section
40.4: save and destroy are automatically wrapped in a transaction</span><span
style='color:black;text-decoration:none'>................................................................................... </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc324116"><span style='color:#D4072F'>Section
40.5: Callbacks</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>162</span></a></p>

<p class=MsoToc2><a href="#_Toc324117"><span style='color:#D4072F'>Section
40.6: Rolling back a transaction</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................. </span><span style='color:black;text-decoration:none'>162</span></a></p>

<p class=MsoToc1><a href="#_Toc324118"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 41: RSpec and Ruby on Rails</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>163</span></a></p>

<p class=MsoToc2><a href="#_Toc324119"><span style='color:#D4072F'>Section
41.1: Installing RSpec</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>163</span></a></p>

<p class=MsoToc1><a href="#_Toc324120"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 42: Decorator pattern</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>164</span></a></p>

<p class=MsoToc2><a href="#_Toc324121"><span style='color:#D4072F'>Section
42.1: Decorating a Model using Draper</span><span style='color:black;
text-decoration:none'>.................................................................................................................................... </span><span style='color:black;text-decoration:none'>164</span></a></p>

<p class=MsoToc2><a href="#_Toc324122"><span style='color:#D4072F'>Section
42.2: Decorating a Model using SimpleDelegator</span><span style='color:black;
text-decoration:none'>................................................................................................................... </span><span style='color:black;text-decoration:none'>164</span></a></p>

<p class=MsoToc1><a href="#_Toc324123"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 43: Elasticsearch</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>166</span></a></p>

<p class=MsoToc2><a href="#_Toc324124"><span style='color:#D4072F'>Section
43.1: Searchkick</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>166</span></a></p>

<p class=MsoToc2><a href="#_Toc324125"><span style='color:#D4072F'>Section
43.2: Installation and testing</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>166</span></a></p>

<p class=MsoToc2><a href="#_Toc324126"><span style='color:#D4072F'>Section
43.3: Setting up tools for development</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>167</span></a></p>

<p class=MsoToc2><a href="#_Toc324127"><span style='color:#D4072F'>Section
43.4: Introduction</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>167</span></a></p>

<p class=MsoToc1><a href="#_Toc324128"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 44: React with Rails using react-rails
gem</span></b><span style='color:black;text-decoration:none'>.................................................................................................................... </span><span style='color:black;text-decoration:none'>168</span></a></p>

<p class=MsoToc2><a href="#_Toc324129"><span style='color:#D4072F'>Section
44.1: React installation for Rails using rails_react gem</span><span
style='color:black;text-decoration:none'>.......................................................................................................... </span><span style='color:black;text-decoration:none'>168</span></a></p>

<p class=MsoToc2><a href="#_Toc324130"><span style='color:#D4072F'>Section
44.2: Using react_rails within your application</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>168</span></a></p>

<p class=MsoToc2><a href="#_Toc324131"><span style='color:#D4072F'>Section
44.3: Rendering &amp; mounting</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>169</span></a></p>

<p class=MsoToc1><a href="#_Toc324132"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 45: Rails Cookbook - Advanced rails
recipes/learnings and coding techniques</span></b><span style='color:black;
text-decoration:none'> .................................... </span><span style='color:black;text-decoration:none'>170</span></a></p>

<p class=MsoToc2><a href="#_Toc324133"><span style='color:#D4072F'>Section
45.1: Playing with Tables using rails console</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>170</span></a></p>

<p class=MsoToc2><a href="#_Toc324134"><span style='color:#D4072F'>Section
45.2: Rails methods - returning boolean values</span><span style='color:black;
text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>170</span></a></p>

<p class=MsoToc2><a href="#_Toc324135"><span style='color:#D4072F'>Section
45.3: Handling the error - undefined method `where' for
#&lt;Array:0x000000071923f8&gt;</span><span style='color:black;text-decoration:
none'>............................................... </span><span style='color:black;text-decoration:none'>171</span></a></p>

<p class=MsoToc1><a href="#_Toc324136"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 46: Multipurpose ActiveRecord columns</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>172</span></a></p>

<p class=MsoToc2><a href="#_Toc324137"><span style='color:#D4072F'>Section
46.1: Saving an object</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>172</span></a></p>

<p class=MsoToc2><a href="#_Toc324138"><span style='color:#D4072F'>Section
46.2: How To</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>172</span></a></p>

<p class=MsoToc1><a href="#_Toc324139"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 47: Class Organization</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>173</span></a></p>

<p class=MsoToc2><a href="#_Toc324140"><span style='color:#D4072F'>Section
47.1: Service Class</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>173</span></a></p>

<p class=MsoToc2><a href="#_Toc324141"><span style='color:#D4072F'>Section
47.2: Model Class</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>175</span></a></p>

<p class=MsoToc1><a href="#_Toc324142"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 48: Shallow Routing</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>176</span></a></p>

<p class=MsoToc2><a href="#_Toc324143"><span style='color:#D4072F'>Section
48.1: Use of shallow</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>176</span></a></p>

<p class=MsoToc1><a href="#_Toc324144"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 49: Model states: AASM</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>177</span></a></p>

<p class=MsoToc2><a href="#_Toc324145"><span style='color:#D4072F'>Section
49.1: Basic state with AASM</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>177</span></a></p>

<p class=MsoToc1><a href="#_Toc324146"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 50: Rails 5 API Authetication</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>179</span></a></p>

<p class=MsoToc2><a href="#_Toc324147"><span style='color:#D4072F'>Section
50.1: Authentication with Rails authenticate_with_http_token</span><span
style='color:black;text-decoration:none'>.......................................................................................... </span><span style='color:black;text-decoration:none'>179</span></a></p>

<p class=MsoToc1><a href="#_Toc324148"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 51: Testing Rails Applications</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>180</span></a></p>

<p class=MsoToc2><a href="#_Toc324149"><span style='color:#D4072F'>Section
51.1: Unit Test</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>180</span></a></p>

<p class=MsoToc2><a href="#_Toc324150"><span style='color:#D4072F'>Section
51.2: Request Test</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>180</span></a></p>

<p class=MsoToc1><a href="#_Toc324151"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 52: Active Jobs</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>181</span></a></p>

<p class=MsoToc2><a href="#_Toc324152"><span style='color:#D4072F'>Section
52.1: Introduction</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>181</span></a></p>

<p class=MsoToc2><a href="#_Toc324153"><span style='color:#D4072F'>Section
52.2: Sample Job</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>181</span></a></p>

<p class=MsoToc2><a href="#_Toc324154"><span style='color:#D4072F'>Section
52.3: Creating an Active Job via the generator</span><span style='color:black;
text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>181</span></a></p>

<p class=MsoToc1><a href="#_Toc324155"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 53: Rails frameworks over the years</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc2><a href="#_Toc324156"><span style='color:#D4072F'>Section
53.1: How to find what frameworks are available in the current version of
Rails?</span><span style='color:black;text-decoration:none'>........................................................... </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc2><a href="#_Toc324157"><span style='color:#D4072F'>Section
53.2: Rails versions in Rails 1.x</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc2><a href="#_Toc324158"><span style='color:#D4072F'>Section
53.3: Rails frameworks in Rails 2.x</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc2><a href="#_Toc324159"><span style='color:#D4072F'>Section
53.4: Rails frameworks in Rails 3.x</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc1><a href="#_Toc324160"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 54: Nested form in Ruby on Rails</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>183</span></a></p>

<p class=MsoToc2><a href="#_Toc324161"><span style='color:#D4072F'>Section
54.1: How to setup a nested form in Ruby on Rails</span><span style='color:
black;text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>183</span></a></p>

<p class=MsoToc1><a href="#_Toc324162"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 55: Factory Girl</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>184</span></a></p>

<p class=MsoToc2><a href="#_Toc324163"><span style='color:#D4072F'>Section
55.1: Defining Factories</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>184</span></a></p>

<p class=MsoToc1><a href="#_Toc324164"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 56: Import whole CSV files from
specific folder</span></b><span style='color:black;text-decoration:none'>........................................................................................................ </span><span style='color:black;text-decoration:none'>185</span></a></p>

<p class=MsoToc2><a href="#_Toc324165"><span style='color:#D4072F'>Section
56.1: Uploads CSV from console command</span><span style='color:black;
text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>185</span></a></p>

<p class=MsoToc1><a href="#_Toc324166"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 57: Tools for Ruby on Rails code
optimization and cleanup</span></b><span style='color:black;text-decoration:
none'>............................................................................... </span><span style='color:black;text-decoration:none'>186</span></a></p>

<p class=MsoToc2><a href="#_Toc324167"><span style='color:#D4072F'>Section
57.1: If you want to keep your code maintainable, secure and optimized, look at
some gems forcode optimization and cleanup :</span><span style='color:black;
text-decoration:none'>........................................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>186</span></a></p>

<p class=MsoToc1><a href="#_Toc324168"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 58: ActiveJob</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>187</span></a></p>

<p class=MsoToc2><a href="#_Toc324169"><span style='color:#D4072F'>Section
58.1: Create the Job</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>187</span></a></p>

<p class=MsoToc2><a href="#_Toc324170"><span style='color:#D4072F'>Section
58.2: Enqueue the Job</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>187</span></a></p>

<p class=MsoToc1><a href="#_Toc324171"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 59: Active Model Serializers</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>188</span></a></p>

<p class=MsoToc2><a href="#_Toc324172"><span style='color:#D4072F'>Section
59.1: Using a serializer</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>188</span></a></p>

<p class=MsoToc1><a href="#_Toc324173"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 60: Rails Engine - Modular Rails</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>189</span></a></p>

<p class=MsoToc2><a href="#_Toc324174"><span style='color:#D4072F'>Section
60.1: Create a modular app</span><span style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>189</span></a></p>

<p class=MsoToc1><a href="#_Toc324175"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 61: Single Table Inheritance</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>192</span></a></p>

<p class=MsoToc2><a href="#_Toc324176"><span style='color:#D4072F'>Section
61.1: Basic example</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>192</span></a></p>

<p class=MsoToc2><a href="#_Toc324177"><span style='color:#D4072F'>Section
61.2: Custom inheritance column</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>192</span></a></p>

<p class=MsoToc2><a href="#_Toc324178"><span style='color:#D4072F'>Section
61.3: Rails model with type column and without STI</span><span
style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>193</span></a></p>

<p class=MsoToc1><a href="#_Toc324179"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 62: ActiveRecord Transactions</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>194</span></a></p>

<p class=MsoToc2><a href="#_Toc324180"><span style='color:#D4072F'>Section
62.1: Getting Started with Active Record Transactions</span><span
style='color:black;text-decoration:none'>.......................................................................................................... </span><span style='color:black;text-decoration:none'>194</span></a></p>

<p class=MsoToc1><a href="#_Toc324181"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 63: Turbolinks</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>195</span></a></p>

<p class=MsoToc2><a href="#_Toc324182"><span style='color:#D4072F'>Section
63.1: Binding to turbolink's concept of a page load</span><span
style='color:black;text-decoration:none'>............................................................................................................... </span><span style='color:black;text-decoration:none'>195</span></a></p>

<p class=MsoToc2><a href="#_Toc324183"><span style='color:#D4072F'>Section
63.2: Disable turbolinks on specific links</span><span style='color:black;
text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>195</span></a></p>

<p class=MsoToc2><a href="#_Toc324184"><span style='color:#D4072F'>Section
63.3: Understanding Application Visits</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>196</span></a></p>

<p class=MsoToc2><a href="#_Toc324185"><span style='color:#D4072F'>Section
63.4: Cancelling visits before they begin</span><span style='color:black;
text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>196</span></a></p>

<p class=MsoToc2><a href="#_Toc324186"><span style='color:#D4072F'>Section
63.5: Persisting elements across page loads</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>197</span></a></p>

<p class=MsoToc1><a href="#_Toc324187"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 64: Friendly ID</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>198</span></a></p>

<p class=MsoToc2><a href="#_Toc324188"><span style='color:#D4072F'>Section
64.1: Rails Quickstart</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>198</span></a></p>

<p class=MsoToc1><a href="#_Toc324189"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 65: Securely storing authentication
keys</span></b><span style='color:black;text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc2><a href="#_Toc324190"><span style='color:#D4072F'>Section
65.1: Storing authentication keys with Figaro</span><span style='color:black;
text-decoration:none'>.......................................................................................................................... </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc1><a href="#_Toc324191"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 66: Authenticate Api using Devise</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................... </span><span style='color:black;text-decoration:none'>201</span></a></p>

<p class=MsoToc2><a href="#_Toc324192"><span style='color:#D4072F'>Section
66.1: Getting Started</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>201</span></a></p>

<p class=MsoToc1><a href="#_Toc324193"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 67: Integrating React.js with Rails
Using Hyperloop</span></b><span style='color:black;text-decoration:none'>............................................................................................... </span><span style='color:black;text-decoration:none'>203</span></a></p>

<p class=MsoToc2><a href="#_Toc324194"><span style='color:#D4072F'>Section
67.1: Adding a simple react component (written in ruby) to your Rails app</span><span
style='color:black;text-decoration:none'>...................................................................... </span><span style='color:black;text-decoration:none'>203</span></a></p>

<p class=MsoToc2><a href="#_Toc324195"><span style='color:#D4072F'>Section
67.2: Callbacks</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>203</span></a></p>

<p class=MsoToc2><a href="#_Toc324196"><span style='color:#D4072F'>Section
67.3: Declaring component parameters (props)</span><span style='color:black;
text-decoration:none'>..................................................................................................................... </span><span style='color:black;text-decoration:none'>203</span></a></p>

<p class=MsoToc2><a href="#_Toc324197"><span style='color:#D4072F'>Section
67.4: HTML Tags</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>204</span></a></p>

<p class=MsoToc2><a href="#_Toc324198"><span style='color:#D4072F'>Section
67.5: Event Handlers</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>204</span></a></p>

<p class=MsoToc2><a href="#_Toc324199"><span style='color:#D4072F'>Section
67.6: States</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>204</span></a></p>

<p class=MsoToc1><a href="#_Toc324200"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 68: Change a default Rails application
enviornment</span></b><span style='color:black;text-decoration:none'>.............................................................................................. </span><span style='color:black;text-decoration:none'>205</span></a></p>

<p class=MsoToc2><a href="#_Toc324201"><span style='color:#D4072F'>Section
68.1: Running on a local machine</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>205</span></a></p>

<p class=MsoToc2><a href="#_Toc324202"><span style='color:#D4072F'>Section
68.2: Running on a server</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>205</span></a></p>

<p class=MsoToc1><a href="#_Toc324203"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 69: Rails -Engines</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>206</span></a></p>

<p class=MsoToc2><a href="#_Toc324204"><span style='color:#D4072F'>Section
69.1: Famous examples are</span><span style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>206</span></a></p>

<p class=MsoToc1><a href="#_Toc324205"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 70: Adding an Amazon RDS to your rails
application</span></b><span style='color:black;text-decoration:none'>............................................................................................. </span><span style='color:black;text-decoration:none'>207</span></a></p>

<p class=MsoToc2><a href="#_Toc324206"><span style='color:#D4072F'>Section
70.1: Consider we are connecting MYSQL RDS with your rails application</span><span
style='color:black;text-decoration:none'>........................................................................ </span><span style='color:black;text-decoration:none'>207</span></a></p>

<p class=MsoToc1><a href="#_Toc324207"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 71: Payment feature in rails</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>208</span></a></p>

<p class=MsoToc2><a href="#_Toc324208"><span style='color:#D4072F'>Section
71.1: How to integrate with Stripe</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>208</span></a></p>

<p class=MsoToc1><a href="#_Toc324209"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Chapter 72: Rails on docker</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>210</span></a></p>

<p class=MsoToc2><a href="#_Toc324210"><span style='color:#D4072F'>Section
72.1: Docker and docker-compose</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>210</span></a></p>

<p class=MsoToc1><a href="#_Toc324211"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Appendix A: Reserved Words</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>212</span></a></p>

<p class=MsoToc2><a href="#_Toc324212"><span style='color:#D4072F'>Section A.1:
Reserved Word List</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>212</span></a></p>

<p class=MsoToc1><a href="#_Toc324213"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>Credits</span></b><span style='color:black;
text-decoration:none'>................................................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>218</span></a></p>

<p class=MsoToc1><a href="#_Toc324214"><b><span style='font-size:12.0pt;
line-height:112%;color:#D4072F'>You may also like</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>222</span></a></p>

<p class=MsoNormal>&nbsp;</p>

</div>

<span style='font-size:10.0pt;line-height:112%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection2>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:105.15pt;margin-left:
-.25pt'><a name="_Toc323867">About</a></h1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:116.4pt;
margin-bottom:0in;margin-left:116.5pt;text-align:center;text-indent:0in;
line-height:123%'><span style='font-size:11.0pt;line-height:123%'>Please feel
free to share this PDF with anyone for free, latest version of this book can be
downloaded from:</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:31.9pt;
margin-left:164.55pt;text-indent:0in;line-height:107%'><a
href="https://goalkicker.com/RubyOnRailsBook"><span style='font-size:11.0pt;
line-height:107%;color:#D4072F'>https://goalkicker.com/RubyOnRailsBook</span></a></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:83.25pt;
margin-bottom:1.85pt;margin-left:0in;text-align:right;text-indent:0in;
line-height:107%'>This <i>Ruby® on Rails Notes for Professionals</i> book is
compiled from <a href="https://archive.org/details/documentation-dump.7z"><span
style='color:#D4072F'>Stack Overflow</span></a></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:82.3pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'><a href="https://archive.org/details/documentation-dump.7z"><span
style='color:#D4072F'>Documentation</span></a>, the content is written by the
beautiful people at Stack Overflow.</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:80.7pt;
margin-bottom:9.75pt;margin-left:81.3pt;text-align:center;text-indent:-.5pt;
line-height:137%'>Text content is released under Creative Commons BY-SA, see
credits at the end of this book whom contributed to the various chapters.
Images may be copyright of their respective owners unless otherwise specified</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:77.75pt;
margin-bottom:9.75pt;margin-left:78.3pt;text-align:center;text-indent:-.5pt;
line-height:137%'><span style='position:relative;z-index:-1895824384'><span
style='left:0px;position:absolute;left:87px;top:-274px;width:545px;height:476px'><img
width=545 height=476
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image002.gif"></span></span>This
is an unofficial free book created for educational purposes and is not
affiliated with official Ruby® on Rails group(s) or company(s) nor Stack
Overflow. All trademarks and registered trademarks are the property of their
respective company owners</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:74.1pt;
margin-bottom:9.75pt;margin-left:74.7pt;text-align:center;text-indent:-.5pt;
line-height:137%'>The information presented in this book is not guaranteed to
be correct nor accurate, use at your own risk</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:131.05pt'>Please send feedback and corrections to <u><span
style='color:#D4072F'>web@petercv.com</span></u></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323868">Chapter 1: Getting started with Ruby on Rails</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.35pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Version
Release Date</span></h3>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2018/2/14/Rails-5-1-5-has-been-released/"><span
style='color:#D4072F'>5.1.5</span></a><u><span style='color:#D4072F'>          </span></u>2018-02-14</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2016/6/30/Rails-5-0-final/"><span
style='color:#D4072F'>5.1.2</span></a><u><span style='color:#D4072F'>          </span></u>2017-06-26</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2016/6/30/Rails-5-0-final/"><span
style='color:#D4072F'>5.0</span></a><u><span style='color:#D4072F'>             </span></u>2016-06-30</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2014/12/19/Rails-4-2-final/"><span
style='color:#D4072F'>4.2</span></a><u><span style='color:#D4072F'>             </span></u>2014-12-19</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2014/4/8/Rails-4-1/"><span
style='color:#D4072F'>4.1</span></a><u><span style='color:#D4072F'>             </span></u>2014-04-08</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2013/6/25/Rails-4-0-final/"><span
style='color:#D4072F'>4.0</span></a><u><span style='color:#D4072F'>             </span></u>2013-06-25</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2012/1/20/rails-3-2-0-faster-dev-mode-routing-explain-queries-tagged-logger-store/"><span
style='color:#D4072F'>3.2</span></a><u><span style='color:#D4072F'>             </span></u>2012-01-20</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2011/8/31/rails-3-1-0-has-been-released/"><span
style='color:#D4072F'>3.1</span></a><u><span style='color:#D4072F'>             </span></u>2011-08-31</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2010/8/29/rails-3-0-it-s-done/"><span
style='color:#D4072F'>3.0</span></a><u><span style='color:#D4072F'>             </span></u>2010-08-29</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2009/3/16/rails-2-3-templates-engines-rack-metal-much-more/"><span
style='color:#D4072F'>2.3</span></a><u><span style='color:#D4072F'>             </span></u>2009-03-16</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2007/12/7/rails-2-0-it-s-done/"><span
style='color:#D4072F'>2.0</span></a><u><span style='color:#D4072F'>             </span></u>2007-12-07</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2007/1/19/rails-1-2-rest-admiration-http-lovefest-and-utf-8-celebrations/"><span
style='color:#D4072F'>1.2</span></a><u><span style='color:#D4072F'>             </span></u>2007-01-19</p>

<p class=MsoNormal style='margin-bottom:.05in;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2006/3/28/rails-1-1-rjs-active-record-respond_to-integration-tests-and-500-other-things/"><span
style='color:#D4072F'>1.1</span></a><u><span style='color:#D4072F'>             </span></u>2006-03-28</p>

<p class=MsoNormal style='margin-bottom:20.55pt;text-indent:0in'><a
href="http://weblog.rubyonrails.org/2005/12/13/rails-1-0-party-like-its-one-oh-oh/"><span
style='color:#D4072F'>1.0</span></a><u><span style='color:#D4072F'>             </span></u>2005-12-13</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323869">Section 1.1: Creating a Ruby on Rails Application</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>This example assumes <i>Ruby</i> and <i>Ruby on Rails</i>
have already been installed properly. If not, you can find how to do it in
Section 1.4: Installing Rails.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Open up a command line or terminal. To generate a new rails
application, use <a
href="http://guides.rubyonrails.org/command_line.html#rails-new"><span
style='color:#D4072F'>rails new</span></a> command followed by the name of your
application:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image003.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to create your Rails application with a specific
Rails version then you can specify it at the time of generating the
application. To do that, use <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>rails _version_ new</span> followed by the application
name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image004.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>This will create a Rails application called <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>MyApp</span> in a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>my_app</span>
directory and install the gem dependencies that are already mentioned in <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Gemfile</span>
using <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bundle
install</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To switch to your newly created app's directory, use the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>cd</span> command,
which stands for <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>change
directory</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image005.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>my_app</span> directory has a number of auto-generated
files and folders that make up the structure of a Rails application. Following
is a list of files and folders that are created by default:</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:1.35pt;margin-left:
0in;text-indent:0in'><span style='font-size:11.0pt;line-height:107%;font-weight:
normal'>            </span>File/Folder                                                                                                      Purpose</h4>

<p class=MsoNormal style='margin-bottom:3.1pt;text-indent:0in'>app/                                                Contains
the controllers, models, views, helpers, mailers and assets for your
application.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;text-indent:99.6pt;line-height:90%'>Contains the rails script
that starts your app and can contain other scripts you use to setup, bin/</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.05in;
margin-left:100.6pt'>update, deploy or run your application.</p>

<p class=MsoNormal style='text-indent:0in'>config/                                        Configure
your application's routes, database, and more.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=605
 style='width:453.55pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.65pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>config.ru</p>
  </td>
  <td width=472 valign=top style='width:353.95pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Rack
  configuration for Rack based servers used to start the application.</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>db/</p>
  </td>
  <td width=472 valign=top style='width:353.95pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Contains your current
  database schema, as well as the database migrations.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:100.6pt'>These files allow you to specify what gem dependencies are
needed for your Rails</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Gemfile Gemfile.lock</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:100.6pt'>application. These files are used by the Bundler gem.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=703
 style='width:527.6pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.65pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>lib/</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Extended
  modules for your application.</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>log/</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Application
  log files.</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>public/</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>The
  only folder seen by the world as-is. Contains static files and compiled
  assets.</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=133 style='width:99.6pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Rakefile</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>This
  file locates and loads tasks that can be run from the command line. The task
  definitions are defined throughout the components of Rails.</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=133 style='width:99.6pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>README.md</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>This
  is a brief instruction manual for your application. You should edit this file
  to tell others what your application does, how to set it up etc</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>test/</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Unit
  tests, fixtures, and other test apparatus.</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>temp/</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Temporary
  files (like cache and pid files).</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=133 valign=top style='width:99.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>vendor/</p>
  </td>
  <td width=571 valign=top style='width:428.0pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>A
  place for all third-party code. In a typical Rails application this includes
  vendored gems.</p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>database.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25pt;
margin-left:.25pt'>Now you need to create a database from your  file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=111
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image006.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25pt;
margin-left:.25pt'>Now that we've created the database, we need to run
migrations to set up the tables:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=111
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image007.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To start the application, we need to fire up the server:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image008.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By default, rails will start the application at port 3000.
To start the application with different port number, we need to fire up the
server like,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image009.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>If you navigate to <u><span style='color:#D4072F'>http://localhost:3000</span></u>
in your browser, you will see a Rails welcome page, showing that your
application is now running.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>If it throws an error, there may be several possible
problems:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>database.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:275.35pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=65
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image010.gif"
align=left hspace=12>There is a problem with the </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>You have dependencies in your <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Gemfile</span> that have not been
installed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>You have pending migrations. Run <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>rails db:migrate</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>In case you move to the previous migration <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rails db:rollback</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>database.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:177.85pt;margin-bottom:
18.3pt;margin-left:.25pt'>If that still throws an error, then you should check
your </p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323870">Section 1.2: Create a new Rails app with your
choice of database and including the RSpec Testing Tool</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails uses <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>sqlite3</span> as the default database, but you can
generate a new rails application with a database of your choice. Just add the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>-d</span> option
followed by the name of the database.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image011.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This is a (non-exhaustive) list of available database
options:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:452.15pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=205
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image012.gif"
align=left hspace=12>mysql oracle postgresql sqlite3 frontbase ibm_db</p>

<p class=MsoNormal style='margin-top:0in;margin-right:420.3pt;margin-bottom:
12.25pt;margin-left:20.9pt'>sqlserver jdbcmysql jdbcsqlite3 jdbcpostgresql jdbc</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The -T command indicate to skip the installation of
minitest. To install an alternative test suite like <a href="http://rspec.info/"><span
style='color:#D4072F'>RSpec</span></a>, edit the Gemfile and add</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image013.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then launch the following command from the console:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image014.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323871">Section 1.3: Generating A Controller</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To generate a controller (for example <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Posts</span>),
navigate to your project directory from a command line or terminal, and run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image015.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can shorten this code by replacing <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>generate</span>
with <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>g</span>,
for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image016.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you open up the newly generated app/controllers/<b>posts_controller.rb</b>
you'll see a controller with no actions:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image017.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>It's possible to create default methods for the controller
by passing in controller name arguments.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image018.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>parent_module</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controller_name</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To create a controller within a module, specify the
controller name as a path like .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image019.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This will generate the following files:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Controller: app</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>controllers</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:110%'>credit_cards_controller.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>rb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895821312'><span style='left:0px;position:absolute;
left:0px;top:-25px;width:718px;height:76px'><img width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image020.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#CC00FF'>Test</span></b><span
style='font-size:9.0pt;line-height:110%'>:       test</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>controllers</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>credit_cards_controller_test.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>rb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Views:      app</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>views</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:110%'>credit_cards</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>debit.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>html</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>erb</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>[</span></b><span
style='font-size:9.0pt;line-height:110%'>...</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>etc</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>]</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Helper:     app</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>helpers</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:110%'>credit_cards_helper.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>rb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:.25pt'>A controller is simply a class that is defined to inherit
from <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ApplicationController</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:42.4pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>It's inside this class that you'll
define methods that will become the actions for this controller.</p>

<h2 style='margin-top:0in;margin-right:42.4pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323872">Section 1.4:
Installing Rails</a></h2>

<h4 style='margin-left:.75pt'>Installing Rails on Ubuntu</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>On a clean ubuntu, installation of Rails should be straight
forward</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Upgrading ubuntu packages</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image021.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Install Ruby and Rails dependecies</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895820288'><span style='left:0px;position:absolute;
left:0px;top:-8px;width:718px;height:59px'><img width=718 height=59
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image022.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#C20CB9'>sudo</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#C20CB9'>apt-get install</span></b><span
style='font-size:9.0pt;line-height:110%'> git-core curl zlib1g-dev
build-essential libssl-dev libreadline-dev libyamldev libsqlite3-dev sqlite3
libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties
libffi-dev</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Installing ruby version manager. In this case the easy one
is using rbenv</p>

<p class=MsoNormal style='margin-top:0in;margin-right:226.95pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895819264'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:59px'><img width=718 height=59
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>git clone https:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:110%'>github.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>com</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>rbenv</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:110%'>rbenv.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>git</span><span
style='font-size:9.0pt;line-height:110%'> ~</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>rbenv </span><span style='font-size:9.0pt;line-height:110%'>echo
</span><span style='font-size:9.0pt;line-height:110%;color:#996600'>'export
PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;'</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>&gt;&gt;</span></b><span style='font-size:9.0pt;line-height:
110%'> ~</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>bashrc </span><span style='font-size:9.0pt;
line-height:110%'>echo </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'eval &quot;$(rbenv init -)&quot;'</span><span style='font-size:
9.0pt;line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>&gt;&gt;</span></b><span style='font-size:9.0pt;line-height:
110%'> ~</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>bashrc</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Installing Ruby Build</p>

<p class=MsoNormal style='margin-top:0in;margin-right:118.2pt;margin-bottom:
0in;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.25pt;line-height:176%'><span style='position:relative;z-index:
-1895818240'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:43px'><img width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image024.gif"></span></span><span
style='font-size:9.0pt;line-height:176%'>git clone https:</span><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:176%'>github.</span><span style='font-size:
9.0pt;line-height:176%;color:#9900CC'>com</span><b><span style='font-size:9.0pt;
line-height:176%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:176%'>rbenv</span><b><span style='font-size:9.0pt;line-height:176%;
color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:176%'>ruby</span><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:176%'>build.</span><span style='font-size:
9.0pt;line-height:176%;color:#9900CC'>git</span><span style='font-size:9.0pt;
line-height:176%'> ~</span><b><span style='font-size:9.0pt;line-height:176%;
color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:176%'>.</span><span
style='font-size:9.0pt;line-height:176%;color:#9900CC'>rbenv</span><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:176%'>plugins</span><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:176%'>ruby</span><b><span style='font-size:
9.0pt;line-height:176%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:176%'>build echo </span><span style='font-size:9.0pt;line-height:
176%;color:#996600'>'export
PATH=&quot;$HOME/.rbenv/plugins/ruby-build/bin:$PATH&quot;'</span><span
style='font-size:9.0pt;line-height:176%'> </span><b><span style='font-size:
9.0pt;line-height:176%;color:#006600'>&gt;&gt;</span></b><span
style='font-size:9.0pt;line-height:176%'> ~</span><b><span style='font-size:
9.0pt;line-height:176%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:176%'>.</span><span style='font-size:9.0pt;line-height:176%;
color:#9900CC'>bashrc </span>Restart Shell</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image025.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Install ruby</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=34
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image026.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image027.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Installing rails</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image028.gif"></span></p>

<h4 style='margin-top:0in;margin-right:381.5pt;margin-bottom:0in;margin-left:
.75pt;line-height:218%'>Installing Rails on Windows <span style='font-weight:
normal'>Step 1: </span><i>Installing Ruby</i></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>We need Ruby programming language installed. We can use a
precompiled version of Ruby called RubyInstaller.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=45
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image029.gif"
align=left hspace=12>Download and run Ruby Installer from <a
href="http://rubyinstaller.org/"><span style='color:#D4072F'>rubyinstaller.org</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Run the installer. Check &quot;Add Ruby executables to your
PATH&quot;, then install.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ruby </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:20.9pt'>To access Ruby, go to the Windows menu, click All Programs,
scroll down to Ruby, and click <span style='font-family:"Arial",sans-serif'>“</span>Start
Command Prompt with Ruby<span style='font-family:"Arial",sans-serif'>”</span>.
A command prompt terminal will open. If you type <b><span style='font-size:
9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>-</span></b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>v</span> and press
Enter, you should see the Ruby version number that you installed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>Step 2: <b><i>Ruby
Development Kit</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.1pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>After installing Ruby, we can try to install Rails. But
some of the libraries Rails depends on need some build tools in order to be
compiled, and Windows lacks those tools by default. You can identify this if
you see an error while attempting to install Rails <b><span style='font-size:
9.0pt;line-height:133%;color:#6666FF'>Gem::InstallError</span></b><span
style='font-size:9.0pt;line-height:133%'>: The </span><span style='font-size:
9.0pt;line-height:133%;font-family:"Arial",sans-serif'>‘</span><b><span
style='font-size:9.0pt;line-height:133%;color:#006600'>[</span></b><span
style='font-size:9.0pt;line-height:133%'>gem name</span><b><span
style='font-size:9.0pt;line-height:133%;color:#006600'>]</span></b><span
style='font-size:9.0pt;line-height:133%;font-family:"Arial",sans-serif'>’</span><span
style='font-size:9.0pt;line-height:133%'> native gem requires installed build
tools. </span>To fix this, we need to install the Ruby Development Kit.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:391.95pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=45
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image029.gif"
align=left hspace=12>Download the <a href="http://rubyinstaller.org/downloads/"><span
style='color:#D4072F'>DevKit </span></a>Run the installer.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:20.9pt'>We need to specify a folder where we<span style='font-family:
"Arial",sans-serif'>’</span>re going to permanently install the DevKit. I
recommend installing it in the root of your hard drive, at <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>C:\RubyDevKit</span>.
(Don<span style='font-family:"Arial",sans-serif'>’</span>t use spaces in the
directory name.)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Now we need to make the DevKit tools available to Ruby.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#7A0874'>cd</span></b><span style='font-size:
  9.0pt;line-height:107%'> C:\RubyDevKit</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ruby dk.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span><span style='font-size:9.0pt;
  line-height:107%'> init</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=45
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image030.gif"
align=left hspace=12>In your command prompt, change to the DevKit directory. 
or whatever directory you installed it in.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ruby dk.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span><span style='font-size:9.0pt;
  line-height:107%'> install</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:20.9pt'>We need to run a Ruby script to initialize the DevKit
setup. Type . Now we<span style='font-family:"Arial",sans-serif'>’</span>ll
tell that same script to add the DevKit to our Ruby installation. Type .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>The DevKit should now be available for your Ruby tools to
use when installing new libraries.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Step 3: <b><i>Rails</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:127.7pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:219%'>Now we can install Rails. Rails
comes as a Ruby gem. In your command prompt, type: <span style='font-size:9.0pt;
line-height:219%;background:#FAFAFA'>gem install rails</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Once you press Enter, the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>gem</span> program will download and
install that version of the Rails gem, along with all the other gems Rails
depends on.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>Step 4: <b><i>Node.js</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.0pt;
margin-left:.25pt'>Some libraries that Rails depends on require a JavaScript
runtime to be installed. Let<span style='font-family:"Arial",sans-serif'>’</span>s
install Node.js so that those libraries work properly.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><span style='font-size:11.0pt;line-height:112%'><img
border=0 width=5 height=5 id="Group 254264"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> Download
the Node.js installer from <a href="https://nodejs.org/en/download/"><b><span
style='color:#D4072F'>here</span></b></a>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>node</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>v4.4.7.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>pkg</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=86
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image032.gif"
align=left hspace=12>When the download completes, visit your downloads folder,
and run the  installer.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Read the full license agreement, accept the terms, and
click Next through the rest of the wizard, leaving everything at the default.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:20.9pt'>A window may pop up asking if you want to allow the app to
make changes to your computer. Click <span style='font-family:"Arial",sans-serif'>“</span>Yes<span
style='font-family:"Arial",sans-serif'>”</span>. When the installation is
complete, you<span style='font-family:"Arial",sans-serif'>’</span>ll need to
restart your computer so Rails can access Node.js.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:17.95pt;
margin-left:.25pt'>Once your computer restarts, don<span style='font-family:
"Arial",sans-serif'>’</span>t forget to go to the Windows menu, click <span
style='font-family:"Arial",sans-serif'>“</span>All Programs<span
style='font-family:"Arial",sans-serif'>”</span>, scroll down to Ruby, and click
<span style='font-family:"Arial",sans-serif'>“</span>Start Command Prompt with
Ruby<span style='font-family:"Arial",sans-serif'>”</span>.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323873">Section 1.5: Create a new Rails app with a
non-standard database adapter</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Rails is shipped by default with <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>, an ORM (Object
Relational Mapping) derived from the pattern with the <a
href="https://en.wikipedia.org/wiki/Active_record_pattern"><span
style='color:#D4072F'>same name</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>As an ORM, it is built to handle relational-mapping, and
more precisely by handling SQL requests for you, hence the limitation to SQL
databases only.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>However, you can still create a Rails app with another
database management system:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>simply
create your app without active-record</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:12.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image033.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>add
your own database management system in <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Gemfile</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:12.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image034.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bundle install</span>
and follow the installation steps from the desired database.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>In this example, <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>mongoid</span> is an object mapping for <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>MongoDB</span> and
- as many other database gems built for rails - it also inherits from <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveModel</span>
the same way as <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>,
which provides a common interface for many features such as validations,
callbacks, translations, etc.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Other database adapters include, but are not limited to :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:8.85pt;
margin-left:20.9pt'><img width=5 height=35
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image035.gif"
align=left hspace=12>datamapper</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:25.8pt;
margin-left:20.9pt'>sequel-rails</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323874">Section 1.6: Creating Rails APIs in JSON</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This example assumes that you have experience in creating
Rails applications.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To create an API-only app in Rails 5, run</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image036.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add active_model_serializers in Gemfile</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image037.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>install bundle in terminal</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.5pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image038.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.6pt;
margin-left:.25pt'>Set the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>ActiveModelSerializer</span> adapter to use <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:json_api</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#
config/initializers/active_model_serializer.rb</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>ActiveModelSerializers.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>config</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>adapter</span><span style='font-size:9.0pt;line-height:110%'> = </span><b><span
style='font-size:9.0pt;line-height:110%;color:#FF3333'>:json_api</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895812096'><span style='left:0px;position:absolute;
left:0px;top:-41px;width:718px;height:76px'><img width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image020.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#6666FF'>Mime::Type</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>register</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>&quot;application/json&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:#FF3333'>:json</span></b><span style='font-size:9.0pt;line-height:110%'>,
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>%</span></b><span
style='font-size:9.0pt;line-height:110%'>w</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'> text</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:110%'>x</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>json application</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>jsonrequest application</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>vnd.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>api</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>+</span></b><span style='font-size:9.0pt;
line-height:110%'>json </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>)</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Generate a new scaffold for your resource</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image039.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This will generate the following files:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Controller: app/controllers/tasks_controller.rb</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image040.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323875">Section 1.7: Generate a Resource with
Sca&#57379;olds</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:23.75pt;
margin-left:.25pt'>From guides.rubyonrails.org:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.25pt;margin-bottom:
23.45pt;margin-left:24.0pt'><img width=3 height=91
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image041.gif"
align=left hspace=12>Instead of generating a model directly . . . let's set up
a scaffold. A scaffold in Rails is a full set of model, database migration for
that model, controller to manipulate it, views to view and manipulate the data,
and a test suite for each of the above.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Here's an example of scaffolding a resource called <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Task</span> with a
string name and a text description:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image042.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will generate the following files:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image043.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>example to delete files generated by scaffold for the
resource called <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Task</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image044.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323876">Chapter 2: Routing</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:6.1pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>The Rails router recognizes URLs and dispatches them to
a controller's action. It can also generate paths and URLs, avoiding the need
to hardcode strings in your views.</p>

<h2 style='margin-top:0in;margin-right:6.1pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323877">Section 2.1: Resource Routing (Basic)</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>Routes are defined in . They are often defined as a group of
related routes, using the <a
href="http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources"><span
style='font-size:9.0pt;line-height:112%;color:#D4072F;background:#FAFAFA'>resources
</span></a>or <a
href="http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resource"><span
style='font-size:9.0pt;line-height:112%;color:#D4072F;background:#FAFAFA'>resource</span></a>
methods.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>resources </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#FF3333'>:users</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:1.0pt;
margin-bottom:14.85pt;margin-left:3.7pt;text-align:center;text-indent:-.5pt;
line-height:107%'> creates the following seven routes, all mapping to actions
of <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>UsersController</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:275.55pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895810048'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:125px'><img width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image045.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/users'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'users#index' </span><span
style='font-size:9.0pt;line-height:110%'>post      </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/users'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'users#create' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/users/new'</span><span
style='font-size:9.0pt;line-height:110%'>,      to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'users#new' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/users/:id/edit'</span><span
style='font-size:9.0pt;line-height:110%'>, to: </span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'users#edit' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/users/:id'</span><span
style='font-size:9.0pt;line-height:110%'>,      to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'users#show' </span><span
style='font-size:9.0pt;line-height:110%'>patch</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>put </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'/users/:id'</span><span style='font-size:9.0pt;line-height:
110%'>,      to: </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'users#update' </span><span style='font-size:9.0pt;line-height:
110%'>delete    </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'/users/:id'</span><span style='font-size:9.0pt;line-height:
110%'>,      to: </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'users#destroy'</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users_controller.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Action names are shown after the <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>#</span> in the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>to</span> parameter
above. Methods with those same names must be defined in  as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=160
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image046.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can limit the actions that gets generated with <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>only</span> or <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>except</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image047.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>You can view all the routes of your application at any given
time by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
11.0pt;line-height:110%'><img border=0 width=718 height=26 id="Group 260456"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image048.gif"></span><span
style='font-size:9.0pt;line-height:110%'>$ rake routes</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.8pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><img width=718
height=201
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image049.gif"
align=left hspace=12><i><span style='font-size:9.0pt;line-height:110%;
color:green'># OR</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>$ rails routes</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>To see only the routes that map to a particular controller:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:5.5pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:119.55pt;margin-bottom:
2.65pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895808000'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:59px'><img width=718 height=59
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image050.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>$ rake routes </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>c static_pages static_pages_home   
GET    </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>static_pages</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>home</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>   
static_pages</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#home
</span></i><span style='font-size:9.0pt;line-height:110%'>static_pages_help   
GET    </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>static_pages</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>help</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>   
static_pages</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#help</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image051.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:8.9pt;
margin-left:.25pt'>You can search through routes using the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>-g</span> option.
This shows any route that partially matches the helper method name, the URL
path or the HTTP verb:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image052.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image053.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Additionally, when running <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rails</span> server in development mode,
you can access a web page that shows all your</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=202 style='width:2.1in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;hostname</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>/rails/info/routes</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>routes with a search filter, matched in priority from top to
bottom, at . It will look like this:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=438
 style='width:328.4pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.3pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%'>          </span><b>Helper               HTTP
  Verb</b></p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%'>                    </span><b>Path                             Controller#Action</b></p>
  </td>
 </tr>
 <tr style='height:15.4pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Path
  / Url</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>[
  Path Match ]</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>users_path              GET</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users(.:format)                        users#index</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:45.15pt;text-align:center;text-indent:0in;
  line-height:107%'>POST</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users(.:format)                        users#create</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>new_user_path
  GET</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users/new(.:format)              users#new</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>edit_user_path
  GET</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users/:id/edit(.:format)
  users#edit</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>user_path               GET</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users/:id(.:format)                  users#show</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:73.7pt;text-indent:0in;line-height:107%'>PATCH</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users/:id(.:format)                  users#update</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
  margin-bottom:0in;margin-left:39.15pt;text-align:center;text-indent:0in;
  line-height:107%'>PUT</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users/:id(.:format)                  users#update</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=169 valign=top style='width:127.1pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:73.7pt;text-indent:0in;line-height:107%'>DELETE</p>
  </td>
  <td width=268 valign=top style='width:201.3pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>/users/:id(.:format)                  users#destroy</p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Routes can be declared available for only members (not
collections) using the method <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>resource</span> instead of <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>resources</span> in . With <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>resource</span>, an
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>index</span>
route is not created by default, but only when explicitly asking for one like
this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image054.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323878">Section 2.2: Constraints</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can filter what routes are available using constraints.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>There are several ways to use constraints including:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:375.3pt;margin-bottom:
13.2pt;margin-left:21.4pt;text-indent:-.5pt;line-height:107%'><img width=5
height=45
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image055.gif"
align=left hspace=12><a
href="http://guides.rubyonrails.org/routing.html#segment-constraints"><span
style='color:#D4072F'>segment constraints</span></a>, <a
href="http://guides.rubyonrails.org/routing.html#request-based-constraints"><span
style='color:#D4072F'>request based constraints </span></a><a
href="http://guides.rubyonrails.org/routing.html#advanced-constraints"><span
style='color:#D4072F'>advanced constraints</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, a requested based constraint to only allow a
specific IP address to access a route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image056.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html"><span
style='color:#D4072F'>See other similar examples
ActionDispatch::Routing::Mapper::Scoping</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to do something more complex you can use more
advanced constraints and create a class to wrap the logic:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=470
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image057.gif"></span></p>

<h4 style='margin-left:.75pt'>One form, several submit buttons</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>You can also use the value of the submit tags of a form as a
constraint to route to a different action. If you have a form with multiple
submit buttons (eg &quot;preview&quot; and &quot;submit&quot;), you could
capture this constraint directly in your <span style='font-size:9.0pt;
line-height:112%'>routes.</span><span style='font-size:9.0pt;line-height:112%;
color:#9900CC'>rb</span>, instead of writing javascript to change the form
destination URL. For example with the <a
href="https://github.com/siliconsenthil/commit_param_routing"><span
style='color:#D4072F'>commit_param_routing</span></a> gem you can take
advantage of rails <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>submit_tag</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Rails <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>submit_tag</span> first parameter lets you change the value
of your form commit parameter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=69
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image058.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=334
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image059.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323879">Section 2.3: Scoping routes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Rails provides several ways to organize your routes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>Scope by URL</b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image060.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This generates the following routes</p>

<p class=MsoNormal style='margin-top:0in;margin-right:162.15pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895805952'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:125px'><img width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image045.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/admin/dashboard'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'administration#dashboard'
</span><span style='font-size:9.0pt;line-height:110%'>post      </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/admin/employees'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'employees#create' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/admin/employees/new'</span><span
style='font-size:9.0pt;line-height:110%'>,      to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'employees#new' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/admin/employees/:id/edit'</span><span
style='font-size:9.0pt;line-height:110%'>, to: </span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'employees#edit' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/admin/employees/:id'</span><span
style='font-size:9.0pt;line-height:110%'>,      to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'employees#show' </span><span
style='font-size:9.0pt;line-height:110%'>patch</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>put </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'/admin/employees/:id'</span><span style='font-size:9.0pt;
line-height:110%'>,      to: </span><span style='font-size:9.0pt;line-height:
110%;color:#996600'>'employees#update' </span><span style='font-size:9.0pt;
line-height:110%'>delete    </span><span style='font-size:9.0pt;line-height:
110%;color:#996600'>'/admin/employees/:id'</span><span style='font-size:9.0pt;
line-height:110%'>,      to: </span><span style='font-size:9.0pt;line-height:
110%;color:#996600'>'employees#destroy'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.15in;margin-bottom:0in;
margin-left:.25pt;line-height:170%'>It may make more sense, on the server side,
to keep some views in a different subfolder, to separate admin views from user
views. <b>Scope by module</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image061.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;color:#9966CC;
background:#FAFAFA'>module</span></b> looks for the controller files under the
subfolder of the given name</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:17.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895804928'><span style='left:0px;position:absolute;
left:0px;top:-8px;width:718px;height:26px'><img width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image062.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/dashboard'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'admin/administration#dashboard'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can rename the path helpers prefix by adding an <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>as</span> parameter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=25
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image063.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image064.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails provides a convenient way to do all the above, using
the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>namespace</span>
method. The following declarations are equivalent</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image065.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Scope
by controller</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image066.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This generate these routes</p>

<p class=MsoNormal style='margin-top:0in;margin-right:199.95pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895803904'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:43px'><img width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image024.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/dashboard'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'management#dashboard' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/performance'</span><span
style='font-size:9.0pt;line-height:110%'>,        to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'management#performance'</span></p>

<h4 style='margin-left:.75pt'>Shallow Nesting</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Resource routes accept a <b><span style='font-size:9.0pt;
line-height:112%;color:#FF3333;background:#FAFAFA'>:shallow</span></b> option
that helps to shorten URLs where possible. Resources shouldn't be nested more
than one level deep. One way to avoid this is by creating shallow routes. The
goal is to leave off parent collection URL segments where they are not needed.
The end result is that the only nested routes generated are for the <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:index</span></b>
, <b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:
#FAFAFA'>:create</span></b> , and <b><span style='font-size:9.0pt;line-height:
112%;color:#FF3333;background:#FAFAFA'>:new</span></b> actions. The rest are
kept in their own shallow URL context. There are two options for scope to
custom shallow routes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:23.25pt;
margin-left:20.9pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=690 height=273
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image067.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=117
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image068.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image069.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>alternatively coded as follows (if you<span
style='font-family:"Arial",sans-serif'>’</span>re block-happy):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image070.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The resulting routes are:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=421
 style='width:316.05pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:64.25pt'>
  <td width=421 colspan=2 valign=top style='width:316.05pt;padding:0in 0in 0in 0in;
  height:64.25pt'>
  <p class=MsoNormal style='margin-bottom:1.35pt;text-indent:0in;line-height:
  107%'><b>Prefix                               Verb          URI Pattern</b></p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>bid_comments              GET              /bids/:bid_id/comments(.:format)</p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'><span style='font-size:11.0pt;line-height:107%'>                                         </span>POST           /bids/:bid_id/comments(.:format)</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>new_bid_comment
  GET                   /bids/:bid_id/comments/new(.:format)</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>edit_comment</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>GET              /comments/:id/edit(.:format)</p>
  </td>
 </tr>
 <tr style='height:67.0pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:67.0pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>comment</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:67.0pt'>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>GET             /comments/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>PATCH /comments/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>PUT             /comments/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>DELETE
  /comments/:id(.:format)</p>
  </td>
 </tr>
 <tr style='height:33.5pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>auction_bids</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>GET               /auctions/:auction_id/bids(.:format)</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>POST            /auctions/:auction_id/bids(.:format)</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>new_auction_bid</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>GET                    /auctions/:auction_id/bids/new(.:format)</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>edit_bid</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>GET             /bids/:id/edit(.:format)</p>
  </td>
 </tr>
 <tr style='height:67.0pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:67.0pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>bid</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:67.0pt'>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>GET            /bids/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>PATCH /bids/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>PUT            /bids/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>DELETE
  /bids/:id(.:format)</p>
  </td>
 </tr>
 <tr style='height:33.5pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>auctions</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>GET             /auctions(.:format)</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>POST          /auctions(.:format)</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>new_auction</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>GET             /auctions/new(.:format)</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>edit_auction</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>GET             /auctions/:id/edit(.:format)</p>
  </td>
 </tr>
 <tr style='height:47.15pt'>
  <td width=122 valign=top style='width:91.2pt;padding:0in 0in 0in 0in;
  height:47.15pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>auction</p>
  </td>
  <td width=300 valign=top style='width:224.8pt;padding:0in 0in 0in 0in;
  height:47.15pt'>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>GET             /auctions/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:4.1pt;text-indent:0in;line-height:
  107%'>PATCH /auctions/:id(.:format)</p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>PUT             /auctions/:id(.:format)</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:15.0pt;
margin-left:92.2pt'>DELETE /auctions/:id(.:format)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:8.25pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>If you analyze the routes generated
carefully, you<span style='font-family:"Arial",sans-serif'>’</span>ll notice
that the nested parts of the URL are only included when they are needed to
determine what data to display.</p>

<h2 style='margin-top:0in;margin-right:8.25pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323880">Section 2.4: Concerns</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To avoid repetition in nested routes, concerns provide a
great way of sharing common resources that are reusable. To create a concern
use the method <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>concern</span>
within the  file. The method expects a symbol and block:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=59
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image071.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image072.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>While not creating any routes itself, this code allows using
the <b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:
#FAFAFA'>:concerns</span></b> attribute on a resource. The simplest example
would be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image073.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The equivalent nested resource would look like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image074.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This would build, for example, the following routes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image075.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For concerns to be meaningful, there must be multiple
resources that utilize the concern. Additional resources could use any of the
following syntax to call the concern:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image076.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323881">Section 2.5: Root route</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can add a home page route to your app with the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>root</span> method.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image077.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And in terminal, <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>rake routes</span> (<span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rails routes</span> in Rails 5) will
produce:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image078.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>Because the homepage is usually the most important
route, and routes are prioritized in the order they appear, the <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>root</span> route
should usually be the first in your routes file.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323882">Section 2.6: Split routes into multiple files</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If your routes file is overwhelmingly big, you can put your
routes in multiple files and include each of the files with Ruby<span
style='font-family:"Arial",sans-serif'>’</span>s <a
href="http://apidock.com/ruby/Kernel/require_relative"><span style='font-size:
9.0pt;line-height:112%;color:#D4072F;background:#FAFAFA'>require_relative</span></a>
method:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:1.2in'>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:3.75pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image079.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>api_routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:145.8pt'>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image080.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323883">Section 2.7: Additional RESTful actions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:104.55pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:217%'>resources :photos do member do get
'preview' end collection do get 'dashboard' end end This creates the following
routes <b>in addition to default 7 RESTful routes</b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:183.75pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895802880'><span style='left:0px;position:
absolute;left:0px;top:-8px;width:718px;height:43px'><img width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image024.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/photos/:id/preview'</span><span
style='font-size:9.0pt;line-height:110%'>,          to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'photos#preview' </span><span
style='font-size:9.0pt;line-height:110%'>get       </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'/photos/dashboards'</span><span
style='font-size:9.0pt;line-height:110%'>,           to: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'photos#dashboard'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:148.9pt;margin-bottom:
.05pt;margin-left:.25pt;line-height:215%'>If you want to do this for single
lines, you can use: resources :photos do get 'preview', on: :member get
'dashboard', on: :collection end</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>new</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>You can also add an action to the <b><span style='font-size:
9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>/</span></b> path:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:284.95pt;margin-bottom:
0in;margin-left:.25pt;line-height:215%'>resources :photos do get 'preview', on:
:new end Which will create:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image081.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.2pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>Be mindful when adding actions to your
RESTful routes, probably you are missing another resource!</p>

<h2 style='margin-top:0in;margin-right:10.2pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323884">Section 2.8:
Member and Collection Routes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Defining a member block inside a resource creates a route
that can act on an individual member of that resourcebased route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image082.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This generates the following member route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image083.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Collection routes allow for creating routes that can act on
a collection of resource objects:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image084.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This generates the following collection route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image085.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>An alternate syntax:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image086.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323885">Section 2.9: Mount another application</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:33.75pt;margin-bottom:
0in;margin-left:.25pt;line-height:170%'>mount is used to mount another
application (basically rack application) or rails engines to be used within the
current application <b>syntax:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image087.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Now you can access above mounted application using route
helper <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>some_rack_app_path</span>
or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>some_rack_app_url</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>But if you want to rename this helper name you can do it as:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image088.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;line-height:146%'>This will generate the <span
style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>myapp_path</span>
and <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>myapp_url</span>
helpers which can be used to navigate to this mounted app.</p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:146%'><a name="_Toc323886">Section 2.10:
Nested Routes</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you want to add nested routes you can write the following
code in  file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image089.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This will generate following routes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:6.25pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895801856'><span style='left:0px;position:
absolute;left:0px;top:-9px;width:718px;height:195px'><img width=718 height=195
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image090.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>     admin_employees GET      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>.:</span><b><span style='font-size:
9.0pt;line-height:110%;color:#CC0066'>format</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>            employees</span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#index </span></i><span
style='font-size:9.0pt;line-height:110%'>                     POST     </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>.:</span><b><span style='font-size:
9.0pt;line-height:110%;color:#CC0066'>format</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>            employees</span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#create </span></i><span
style='font-size:9.0pt;line-height:110%'>  new_admin_employee GET      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>new</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>       
employees</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#new
</span></i><span style='font-size:9.0pt;line-height:110%'> edit_admin_employee
GET      </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>edit</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>.:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#CC0066'>format</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>   employees</span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#edit </span></i><span
style='font-size:9.0pt;line-height:110%'>      admin_employee GET      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>       
employees</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#show
</span></i><span style='font-size:9.0pt;line-height:110%'>                     PATCH   
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>       
employees</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#update</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.3pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:absolute;z-index:-1895800832;left:0px;margin-left:0px;
margin-top:78px;width:718px;height:87px'><img width=718 height=87
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image091.gif"></span><span
style='font-size:9.0pt;line-height:110%'>                     PUT      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>       
employees</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#update
</span></i><span style='font-size:9.0pt;line-height:110%'>                     DELETE  
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:admin_id</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>employees</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>       
employees</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#destroy
</span></i><span style='font-size:9.0pt;line-height:110%'>              admins
GET      </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>.:</span><b><span style='font-size:
9.0pt;line-height:110%;color:#CC0066'>format</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>                                admins</span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#index </span></i><span
style='font-size:9.0pt;line-height:110%'>                     POST     </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>.:</span><b><span style='font-size:
9.0pt;line-height:110%;color:#CC0066'>format</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>                                admins</span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#create </span></i><span
style='font-size:9.0pt;line-height:110%'>           new_admin GET      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>new</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>                           
admins</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#new
</span></i><span style='font-size:9.0pt;line-height:110%'>          edit_admin
GET      </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>/</span></b><span style='font-size:9.0pt;
line-height:110%'>edit</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>.:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#CC0066'>format</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>                       admins</span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#edit </span></i><span
style='font-size:9.0pt;line-height:110%'>               admin GET      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>                           
admins</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#show
</span></i><span style='font-size:9.0pt;line-height:110%'>                     PATCH   
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>                           
admins</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#update</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>                     PUT      </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>                           
admins</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#update</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>                     DELETE   </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>admins</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>:id</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>.:</span><b><span style='font-size:9.0pt;line-height:110%;
color:#CC0066'>format</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>                           
admins</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#destroy</span></i></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323887">Section 2.11: Redirection</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>You can perform redirection in Rails routes as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 4.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image092.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 4.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image093.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>You can also redirect all unknown routes to a given path:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 4.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image094.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 4.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image095.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323888">Section 2.12: Redirects and Wildcard Routes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to provide a URL out of convenience for your
user but map it directly to another one you're already using. Use a redirect:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image096.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>here</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Well, that got interesting fast. The basic principle here is
to just use the <i><span style='font-size:9.0pt;line-height:112%;color:green;
background:#FAFAFA'>#redirect</span></i> method to send one route to another
route. If your route is quite simple, it's a really straightforward method. But
if you want to also send the original parameters, you need to do a bit of
gymnastics by capturing the parameter inside <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>%{}</span></b>. Note the
single quotes around everything.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:5.8pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>In the example above, we've also renamed the route for
convenience by using an alias with the :as parameter. This lets us use that
name in methods like the #_path helpers. Again, test out your <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>$ rake routes</span>
with questions.</p>

<h2 style='margin-top:0in;margin-right:5.8pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323889">Section 2.13: Scope available locales</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If your application is available in different languages, you
usually show the current locale in the URL.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image097.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>I18n.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>available_locales</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Your root will be accessible via the locales defined in .</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323890">Section 2.14: URL params with a period</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>If you want to support a url parameter more complex than an
id number, you may run into trouble with the parser if the value contains a
period. Anything following a period will be assumed to be a format (i.e. json,
xml).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>You can work around this limitation by using a constraint to
<i>broaden</i> the accepted input.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, if you want to reference a user record by email
address in the url:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image098.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323891">Chapter 3: ActiveRecord</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323892">Section 3.1: Creating a Model via generator</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Ruby on Rails provides a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>model</span> generator you can use to
create ActiveRecord models. Simply use <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>rails generate model</span> and provide the model
name.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image099.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>In addition to the model file in , the generator will also
create:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>test</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>user_test.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=166 style='width:124.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>test</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>fixtures</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>db</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>migrate</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>XXX_create_users.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:224.35pt;margin-bottom:
12.25pt;margin-left:20.9pt'><img width=5 height=45
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image055.gif"
align=left hspace=12>the Test in the Fixtures in the database Migration in </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>You can also generate some fields for the model when
generating it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895798784'><span style='left:0px;position:absolute;
left:0px;top:-8px;width:718px;height:26px'><img width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image100.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>$ rails g model user email:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#CC0066'>string</span></b><span
style='font-size:9.0pt;line-height:110%'> sign_in_count:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#CC0066'>integer</span></b><span
style='font-size:9.0pt;line-height:110%'> birthday:date</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;line-height:145%'>This will create the columns email,
sign_in_count and birthday in your database, with the appropriate types.</p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323893">Section 3.2:
Introduction to Callbacks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>A callback is a method that gets called at specific moments
of an object's lifecycle (right before or after creation, deletion, update,
validation, saving or loading from the database).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>For instance, say you have a listing that expires within 30
days of creation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>One way to do that is like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image101.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>All of the available methods for callbacks are as follows,
in the same order that they are called during the operation of each object:</p>

<h4 style='margin-left:.75pt'>Creating an Object</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:405.1pt;margin-bottom:
14.3pt;margin-left:20.9pt'><img width=5 height=145
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image102.gif"
align=left hspace=12>before_validation after_validation before_save around_save
before_create around_create after_create after_save <span style='font-size:
11.0pt;line-height:112%'><img border=0 width=5 height=5 id="Group 244528"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> after_commit/after_rollback</p>

<h4 style='margin-left:.75pt'>Updating an Object</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:401.15pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=165
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image103.gif"
align=left hspace=12>before_validation after_validation before_save around_save
before_update around_update after_update after_save</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:20.9pt'>after_commit/after_rollback</p>

<h4 style='margin-left:.75pt'>Destroying an Object</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:372.85pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=65
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image010.gif"
align=left hspace=12>before_destroy around_destroy after_destroy</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:20.9pt'>after_commit/after_rollback</p>

<p class=MsoNormal style='margin-top:0in;margin-right:50.1pt;margin-bottom:
0in;margin-left:0in;text-align:justify;text-justify:inter-ideograph;text-indent:
0in;line-height:135%'><b><i>NOTE:</i></b><i> after_save runs both on create and
update, but always after the more specific callbacks after_create and
after_update, no matter the order in which the macro calls were executed.</i></p>

<h2 style='margin-top:0in;margin-right:50.1pt;margin-bottom:0in;margin-left:
0in;text-align:justify;text-justify:inter-ideograph;text-indent:0in;line-height:
135%'><a name="_Toc323894">Section 3.3: Creating a Model manually</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>While using scaffolding is a fast and easy if you are new to
Rails or you are creating a new application, later it can be useful just to do
it on your own ato avoid the need to go through the scaffold-generated code to
slim it down (remove unused parts, etc.).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.95pt;
margin-left:.25pt'>Creating a model can be as simple as creating a file under .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The most simple model, in <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>ActiveRecord</span>, is a class that
extends <b><span style='font-size:9.0pt;line-height:112%;color:#6666FF;
background:#FAFAFA'>ActiveRecord::Base</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image104.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Model files are stored in <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>/</span></b>, and the file
name corresponds to the singular name of the class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image105.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The class will inherit all the ActiveRecord features: query
methods, validations, callbacks, etc.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image106.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Note: Make sure that the table for the corresponding model
exists. If not, you can create the table by creating a Migration</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can generate a model and it's migration by terminal from
the following command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:158.85pt;margin-bottom:
0in;margin-left:.25pt;line-height:210%'><span style='font-size:9.0pt;
line-height:210%;background:#FAFAFA'>rails g model column_name1:data_type1,
column_name2:data_type2, ... </span>and can also assign foreign
key(relationship) to the model by following command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image107.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323895">Section 3.4: Manually Testing Your Models</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Testing your Active Record models through your command line
interface is simple. Navigate to the app directory in your terminal and type in
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rails console</span>
to start the Rails console. From here, you can run active record methods on
your database.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=246 style='width:184.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>name:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0066'>string</span></b></p>
  </td>
  <td width=81 valign=top style='width:60.55pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> column and </p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>email:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0066'>string</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For example, if you had a database schema with a Users table
having a , you could run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image108.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then, to show that record, you could run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image109.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Or if this is your first or only record, you could simply
get the first record by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image110.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323896">Section 3.5: Creating A Migration</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:328.9pt;margin-bottom:
0in;margin-left:.75pt;text-indent:-.5pt;line-height:217%'><b>Add/remove fields
in existing tables </b>Create a migration by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image111.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create a migration that adds a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>title</span> column
to a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>categories</span>
table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image112.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Similarly, you can generate a migration to remove a column: <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rails generate
migration</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.95pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><span
style='font-size:9.0pt;line-height:107%'>RemoveTitleFromCategories title:</span><b><span
style='font-size:9.0pt;line-height:107%;color:#CC0066'>string</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create a migration that removes a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>title</span> column
from the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>categories</span>
table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image113.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>string</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>While, strictly speaking, specifying <b>type</b> (<span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>:</span> in this
case) is <b>not necessary</b> for removing a column, <b>it's helpful</b>, since
it provides the information necessary for <b>rolling it back</b>.</p>

<h4 style='margin-left:.75pt'>Create a table</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Create a migration by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image114.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails recognizes the intent to create a table from the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Create</span>
prefix, the rest of the migration name will be used as a table name. The given
example generates the following:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image115.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:41.95pt;margin-bottom:
0in;margin-left:.25pt;line-height:217%'>Notice that the creation command didn't
specify types of columns and the default <b><span style='font-size:9.0pt;
line-height:217%;color:#CC0066;background:#FAFAFA'>string</span></b> was used. <b>Create
a join table</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:162.1pt;margin-bottom:
1.55pt;margin-left:3.75pt;text-indent:-3.75pt;line-height:253%'><span
style='position:absolute;z-index:-1895794688;left:0px;margin-left:0px;
margin-top:30px;width:718px;height:26px'><img width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image116.gif"></span>Create
a migration by running: <span style='font-size:9.0pt;line-height:253%'>rails g
CreateJoinTableParticipation user:references group:references</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails detects the intent to create a join table by finding <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>JoinTable</span> in
migration name. Everything else is determined from the names of the fields you
give after the name.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image117.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Uncomment the necessary <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>index</span> statements and delete the
rest.</p>

<h4 style='margin-left:.75pt'>Precedence</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>Notice that the example migration name <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>CreateJoinTableParticipation</span>
matches the rule for table creation: it has a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Create</span> prefix. But it did not
generate a simple <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>create_table</span>. This is because migration generator (<a
href="https://github.com/rails/rails/blob/ff044c3c3a0a85d26d7c000abeeed835a3bee0bf/activerecord/lib/rails/generators/active_record/migration/migration_generator.rb#L19"><span
style='color:#D4072F'>source code</span></a>) uses a <b>first match</b> of the
following list:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=288 style='width:3.0in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Add</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>|</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Remove</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>)&lt;</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ignored</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&gt;(</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>To</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>|</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>From</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>)&lt;</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>table_name</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;ignored</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>
  </td>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>JoinTable<b>&lt;ignored</b></span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Create</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>table_name</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.45pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:110%'><img width=5 height=65
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image118.gif"
align=left hspace=12><b><span style='font-size:9.0pt;line-height:110%;
color:#006600;background:#FAFAFA'>(&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.65pt;
margin-left:80.75pt;text-indent:-.5pt;line-height:107%'><b><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:27.4pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:110%'><b><span
style='font-size:9.0pt;line-height:110%;color:#006600;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323897">Section 3.6: Create a Join Table using Migrations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Specially useful for <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>has_and_belongs_to_many</span> relation,
you can manually create a join table using the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>create_table </span>method. Suppose you
have two models <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Tags</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Proyects</span>,
and you'd like to associate them using a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>has_and_belongs_to_many</span> relation.
You need a join table to associate instances of both classes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image119.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>The actual name of the table needs to follow this
convention: the model which alphabetically precedes the other must go first. <b>P</b>roject
preceds <b>T</b>ags so the name of the table is projects_tags.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>id: </span><b><span style='font-size:9.0pt;
  line-height:107%;color:blue'>false</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Also since the purpose of this table is to route the
association between the instances of two models, the actual id of every record
in this table is not necessary. You specify this by passing </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.85pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Finally, as is convention in Rails, the
table name must be the compound plural form of the individual models, but the
column of the table must be in singular form.</p>

<h2 style='margin-top:0in;margin-right:15.85pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323898">Section 3.7: Using a model instance to update a row</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Let's say you have a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>User</span> model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image120.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>id = </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now to update the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>first_name</span> and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>last_name</span> of a user with <span
style='font-size:9.0pt;line-height:112%;color:#006666;background:#FAFAFA'>1</span>,
you can write the following code.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image121.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Calling <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>update</span> will attempt to update the given attributes
in a single transaction, returning <b><span style='font-size:9.0pt;line-height:
112%;color:blue;background:#FAFAFA'>true</span></b> if successful and <b><span
style='font-size:9.0pt;line-height:112%;color:blue;background:#FAFAFA'>false</span></b>
if not.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323899">Chapter 4: Views</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323900">Section 4.1: Structure</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>As Rails follows the M<b>V</b>C pattern <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Views</span> are
where your &quot;templates&quot; are for your actions.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>articles_controller.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Let's say you have a controller . For this controller you
would have a folder in views called</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>articles</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:1.35in'>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=237
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image122.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This structure allows you to have a folder for each
controller. When calling an action in your controller the appropriate view will
be rendered automatically.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image123.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323901">Section 4.2: Partials</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Partial templates (partials) are a way of breaking the
rendering process into more manageable chunks. Partials allow you to extract
pieces of code from your templates to separate files and also reuse them
throughout your templates.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>_form.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:146.95pt;margin-bottom:
12.6pt;margin-left:.25pt'>To <i>create</i> a partial, create a new file that
begins with an underscore: </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;%= render </span><span
  style='font-size:9.0pt;line-height:107%;color:red'>&quot;form&quot;</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666'> %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>To <i>render</i> a partial as part of a view, use the render
method within the view: <b><span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=25
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image124.gif"
align=left hspace=12>Note, the underscore is left out when rendering</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:20.9pt'>A partial has to be rendered using its path if located in a
different folder</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.45pt;
margin-left:.25pt'>To <i>pass</i> a variable into the partial as a local
variable, use this notation:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=403 style='width:4.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>&lt;%= render :partial =</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>
  </td>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;line-height:
  107%;color:red'>'form'</span><span style='font-size:9.0pt;line-height:107%'>,
  locals: </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>{</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> post: @post </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>}</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:14.0pt;margin-left:71.75pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:9.0pt;line-height:107%;background:
#FAFAFA'>&gt;</span></b>&nbsp;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Partials are also useful when you need to <i>reuse</i>
exactly the same code (<b>DRY philosophy</b>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=490 style='width:367.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;head</span></b></p>
  </td>
  <td width=191 valign=top style='width:143.35pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b> code, create a
  partial named </p>
  </td>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>_html_header.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
  <td width=75 valign=top style='width:56.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>, enter your </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;head</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>&lt;%= render </span><span style='font-size:9.0pt;
  line-height:107%;color:red'>'html_header'</span><span style='font-size:9.0pt;
  line-height:107%'> %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>For example, to reuse <b><span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>&gt;</span></b> code to be reused, and
render the partial whenever needed by: <b><span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>&gt;</span></b>.</p>

<h4 style='margin-left:.75pt'>Object Partials</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;%= render @post %</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>posts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>post</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>posts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>_post.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:41.15pt;margin-bottom:
12.35pt;margin-left:.25pt'>Objects that respond to <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>to_partial_path</span> can also be
rendered, as in <b><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>&gt;</span></b>. By default, for ActiveRecord models, this will be
something like , so by actually rendering <b><span style='font-size:9.0pt;
line-height:112%;color:#0066FF;background:#FAFAFA'>@post</span></b>, the file 
will be rendered.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;%= render @post %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A local named <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>post</span> will be automatically assigned. In the end, <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>&gt;</span></b> is
a short hand for <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>&lt;%=
render</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=194 valign=top style='width:145.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:red'>'posts/post'</span><span style='font-size:
  9.0pt;line-height:107%'>, post: @post %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.7pt;
margin-left:146.3pt;text-indent:-.5pt;line-height:107%'><b><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;%= render @posts %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Collections of objects that respond to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>to_partial_path</span>
can also be provided, such as <b><span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>&gt;</span></b>. Each item will be rendered consecutively.</p>

<h4 style='margin-left:.75pt'>Global Partials</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>To create a global partial that can be used anywhere without
referencing its exact path, the partial has to be located in the  path. The
previous example has been modified below to illustrate this feature.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=310 style='width:232.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>_html_header.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>For example, this is a path to a global partial <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>:</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;%= render </span><span
  style='font-size:9.0pt;line-height:107%;color:red'>'html_header'</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666'> %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.35pt;
margin-left:.25pt'>To render this global partial anywhere, use <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>&gt;</span></b></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323902">Section 4.3: AssetTagHelper</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To let rails automatically and correctly link assets
(css/js/images) in most cases you want to use built in helpers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>(<a
href="http://guides.rubyonrails.org/action_view_overview.html#assettaghelper"><span
style='color:#D4072F'>Official documentation</span></a>)</p>

<h4 style='margin-top:0in;margin-right:412.9pt;margin-bottom:13.5pt;margin-left:
.75pt'>Image helpers <i>image_path</i></h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>images</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This returns the path to an image asset in .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image125.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>image_url</i></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>images</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This returns the full URL to an image asset in .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image126.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>image_tag</i></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;img</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#666666'> </span><span style='font-size:9.0pt;
  line-height:107%;color:#000066'>src</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;&quot;</span><span style='font-size:
  9.0pt;line-height:107%;color:#666666'> </span><b><span style='font-size:9.0pt;
  line-height:107%'>/&gt;</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:48.7pt;margin-bottom:
0in;margin-left:4.0pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895791616'><span style='left:0px;position:
absolute;left:0px;top:-281px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>Use
this helper if you want to include an -tag with the source set. <span
style='font-size:9.0pt;line-height:253%'>image_tag</span><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:253%;color:#996600'>&quot;icon.png&quot;</span><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:253%'> </span><i><span style='font-size:
9.0pt;line-height:253%;color:green'># =&gt; &lt;img
src=&quot;/assets/icon.png&quot; alt=&quot;Icon&quot; /&gt;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b>JavaScript
helpers <i>javascript_include_tag</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:65.5pt;margin-bottom:
5.55pt;margin-left:4.0pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895790592'><span style='left:0px;position:
absolute;left:0px;top:-401px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>If
you want to include a JavaScript-file in your view. <span style='font-size:
9.0pt;line-height:253%'>javascript_include_tag </span><span style='font-size:
9.0pt;line-height:253%;color:#996600'>&quot;application&quot;</span><span
style='font-size:9.0pt;line-height:253%'> </span><i><span style='font-size:
9.0pt;line-height:253%;color:green'># =&gt; &lt;script
src=&quot;/assets/application.js&quot;&gt;&lt;/script&gt;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>javascript_path</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This returns the path of your JavaScript-file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image128.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>javascript_url</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:119.25pt;margin-bottom:
.15pt;margin-left:3.75pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895789568'><span style='left:0px;position:
absolute;left:0px;top:-637px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>This
returns the full URL of your JavaScript-file. <span style='font-size:9.0pt;
line-height:253%'>javascript_url </span><span style='font-size:9.0pt;
line-height:253%;color:#996600'>&quot;application&quot;</span><span
style='font-size:9.0pt;line-height:253%'> </span><i><span style='font-size:
9.0pt;line-height:253%;color:green'># =&gt;
http://www.example.com/assets/application.js</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b>Stylesheet
helpers <i>stylesheet_link_tag</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>If you want to include a CSS-file in your view.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:21.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895788544'><span style='left:0px;position:absolute;
left:0px;top:-796px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>stylesheet_link_tag </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;application&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># =&gt; &lt;link
href=&quot;/assets/application.css&quot; media=&quot;screen&quot;
rel=&quot;stylesheet&quot; /&gt;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>stylesheet_path</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This returns the path of you stylesheet asset.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image130.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>stylesheet_url</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:114.0pt;margin-bottom:
.15pt;margin-left:3.75pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895787520'><span style='left:0px;position:
absolute;left:0px;top:-987px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>This
returns the full URL of you stylesheet asset. <span style='font-size:9.0pt;
line-height:253%'>stylesheet_url </span><span style='font-size:9.0pt;
line-height:253%;color:#996600'>&quot;application&quot;</span><span
style='font-size:9.0pt;line-height:253%'> </span><i><span style='font-size:
9.0pt;line-height:253%;color:green'># =&gt;
http://www.example.com/assets/application.css</span></i></p>

<h4 style='margin-left:.75pt'>Example usage</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>When creating a new rails app you will automatically have
two of these helpers in</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=274
 style='width:2.85in;border-collapse:collapse'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>layouts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:37.9pt;margin-bottom:
.1pt;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:176%'><span style='position:relative;z-index:
-1895786496'><span style='left:0px;position:absolute;left:0px;top:-1147px;
width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:176%;color:#666666'>&lt;%=
stylesheet_link_tag    </span><span style='font-size:9.0pt;line-height:176%;
color:red'>'application'</span><span style='font-size:9.0pt;line-height:176%;
color:#666666'>, media: </span><span style='font-size:9.0pt;line-height:176%;
color:red'>'all'</span><span style='font-size:9.0pt;line-height:176%;
color:#666666'>, </span><span style='font-size:9.0pt;line-height:176%;
color:red'>'data-turbolinks-track'</span><span style='font-size:9.0pt;
line-height:176%;color:#666666'>: </span><span style='font-size:9.0pt;
line-height:176%;color:red'>'reload'</span><span style='font-size:9.0pt;
line-height:176%;color:#666666'> %</span><b><span style='font-size:9.0pt;
line-height:176%'>&gt; </span></b><span style='font-size:9.0pt;line-height:
176%;color:#666666'>&lt;%= javascript_include_tag </span><span
style='font-size:9.0pt;line-height:176%;color:red'>'application'</span><span
style='font-size:9.0pt;line-height:176%;color:#666666'>, </span><span
style='font-size:9.0pt;line-height:176%;color:red'>'data-turbolinks-track'</span><span
style='font-size:9.0pt;line-height:176%;color:#666666'>: </span><span
style='font-size:9.0pt;line-height:176%;color:red'>'reload'</span><span
style='font-size:9.0pt;line-height:176%;color:#666666'> %</span><b><span
style='font-size:9.0pt;line-height:176%'>&gt; </span></b>This outputs:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image131.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323903">Section 4.4: Replace HTML code in Views</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>If you ever wanted to determine the html content to be
printed on a page during run time then, rails has a very good solution for
that. It has something called the <b>content_for</b> which allows us to pass a
block to a rails view. Please check the below example,</p>

<h4 style='margin-left:.75pt'>Declare content_for</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image132.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323904">Section 4.5: HAML - an alternative way to use in
your views</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>HAML (HTML abstraction markup language) is a beautiful and
elegant way to describe and design the HTML of your views. Instead of opening-
and closing tags, HAML uses indentation for the structure of your pages.
Basically, if something should be placed within another element, you just
indent it by using one tab stop. Tabs and white space are important in HAML, so
be sure that you always use the same amount of tabs.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>Examples:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image133.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And in HAML:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image134.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>You see, the structure of the layout is much clearer than
using HTML and ERB.</p>

<h4 style='margin-left:.75pt'>Installation</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Just install the gem using</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image135.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and add the gem to the Gemfile</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image136.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>something.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For using HAML instead of HTML/ERB, just replace the file
extensions of your views from  to</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>something.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>haml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:102.6pt'>.</p>

<h4 style='margin-left:.75pt'>Quick tipps</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Common elements like divs can be written in a short way</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>HTML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image137.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>HAML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image138.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>HAML, shorthand</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image139.gif"></span></p>

<h4 style='margin-left:.75pt'>Attributes</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>HTML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image140.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>HAML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image141.gif"></span></p>

<h4 style='margin-left:.75pt'>Inserting ruby code</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can insert ruby code with the = and - signs.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image142.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>Code starting with <b>=</b> will be executed and embedded
into the document.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>Code starting with <b>-</b> will be executed, but not
inserted into the document.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>Full documentation</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>HAML is very easy to start with, but is also very complex,
so that I'll recommend <a
href="http://haml.info/docs/yardoc/file.REFERENCE.html#using_haml"><span
style='color:#D4072F'>reading the documentation</span></a>.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323905">Chapter 5: ActiveRecord Migrations</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.8pt;margin-left:0in;
text-indent:0in'><span style='font-size:10.0pt;line-height:107%;color:black'>Column
type                                                                                 Description</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:5.0pt;
margin-left:1.0pt;text-indent:0in;line-height:107%'><b><span style='font-size:
9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:primary_key </span></b>Primary
key</p>

<p class=MsoNormal style='margin-bottom:3.8pt;text-indent:0in'><span
style='font-size:9.0pt;line-height:112%'>:</span><b><span style='font-size:
9.0pt;line-height:112%;color:#CC0066'>string                                  </span></b>Shorter
string datatype. Allows <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>limit</span> option for maximum number of characters.</p>

<p class=MsoNormal style='margin-bottom:3.8pt;text-indent:0in'><b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:text                                   </span></b>Longer
amount of text. Allows <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>limit</span> option for maximum number of bytes.</p>

<p class=MsoNormal style='margin-bottom:0in;text-indent:0in'><span
style='font-size:9.0pt;line-height:112%'>:</span><b><span style='font-size:
9.0pt;line-height:112%;color:#CC0066'>integer                            </span></b>Integer.
Allows <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>limit</span>
option for maximum number of bytes.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=178
 style='width:133.65pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:10.6pt'>
  <td width=91 valign=top style='width:68.05pt;padding:0in 0in 0in 0in;
  height:10.6pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:bigint</span></b></p>
  </td>
  <td width=87 valign=top style='width:65.6pt;padding:0in 0in 0in 0in;
  height:10.6pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Larger integer</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><span
style='font-size:9.0pt;line-height:107%'>:</span><b><span style='font-size:
9.0pt;line-height:107%;color:#CC0066'>float                       </span></b>Float</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=573
 style='width:429.9pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.75pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:decimal</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Decimal number with
  variable precision. Allows <span style='font-size:9.0pt;line-height:107%;
  background:#FAFAFA'>precision</span> and <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>scale</span> options.</p>
  </td>
 </tr>
 <tr style='height:16.9pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:numeric</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Allows
  <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>precision</span>
  and <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>scale</span>
  options.</p>
  </td>
 </tr>
 <tr style='height:16.8pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:datetime</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>DateTime
  object for dates/times.</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:time</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Time
  object for times.</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:date</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Date
  object for dates.</p>
  </td>
 </tr>
 <tr style='height:16.8pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:binary</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Binary
  data. Allows <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>limit</span>
  option for maximum number of bytes.</p>
  </td>
 </tr>
 <tr style='height:13.75pt'>
  <td width=91 valign=top style='width:68.05pt;padding:.2pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:9.0pt;line-height:107%;color:#FF3333;background:#FAFAFA'>:boolean</span></b></p>
  </td>
  <td width=482 valign=top style='width:361.85pt;padding:.2pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Boolean</p>
  </td>
 </tr>
</table>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323906">Section 5.1: Adding multiple columns to a table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>To add multiple columns to a table, separate <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>field:type</span>
pairs with spaces when using <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>rails generate migration </span>command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.5pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:247%'><span style='position:relative;z-index:
-1895785472'><span style='left:0px;position:absolute;left:0px;top:-3415px;
width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='position:relative;z-index:-1895784448'><span style='left:0px;position:
absolute;left:0px;top:-3415px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>The
general syntax is: <span style='font-size:9.0pt;line-height:247%'>rails
generate migration NAME </span><b><span style='font-size:9.0pt;line-height:
247%;color:#006600'>[</span></b><span style='font-size:9.0pt;line-height:247%'>field</span><b><span
style='font-size:9.0pt;line-height:247%;color:#006600'>[</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#FF3333'>:type</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#006600'>][</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#FF3333'>:index</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#006600'>]</span></b><span
style='font-size:9.0pt;line-height:247%'> field</span><b><span
style='font-size:9.0pt;line-height:247%;color:#006600'>[</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#FF3333'>:type</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#006600'>][</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#FF3333'>:index</span></b><b><span
style='font-size:9.0pt;line-height:247%;color:#006600'>]]</span></b><span
style='font-size:9.0pt;line-height:247%'> </span><b><span style='font-size:
9.0pt;line-height:247%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:247%'>options</span><b><span style='font-size:9.0pt;line-height:
247%;color:#006600'>] </span></b>For example, the following will add <span
style='font-size:9.0pt;line-height:247%;background:#FAFAFA'>name</span>, <span
style='font-size:9.0pt;line-height:247%;background:#FAFAFA'>salary</span> and <span
style='font-size:9.0pt;line-height:247%;background:#FAFAFA'>email</span> fields
to the <span style='font-size:9.0pt;line-height:247%;background:#FAFAFA'>users</span>
table: <span style='font-size:9.0pt;line-height:247%'>rails generate migration
AddDetailsToUsers name:</span><b><span style='font-size:9.0pt;line-height:247%;
color:#CC0066'>string</span></b><span style='font-size:9.0pt;line-height:247%'>
salary:decimal email:</span><b><span style='font-size:9.0pt;line-height:247%;
color:#CC0066'>string </span></b>Which generates the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image143.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323907">Section 5.2: Add a reference column to a table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add a reference to a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>team</span> to the <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>users</span> table, run this
command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image144.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This generates the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=69
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image145.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image146.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>That migration will create a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>team_id</span> column in the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>users</span> table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to add an appropriate <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>index</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>foreign_key</span>
on the added column, change the command to <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rails generate migration AddTeamRefToUsers
team:references:index</span>. This will generate the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image147.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to name your reference column other than what
Rails auto generates, add the following to your migration: (E.g.: You might
want to call the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>User</span>
who created the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Post</span>
as <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Author</span>
in the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Post</span>
table)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image148.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323908">Section 5.3: Rollback migrations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:8.9pt;
margin-left:.25pt'>To <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>rollback</span> the latest migration, either by reverting the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>change</span>
method or by running the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>down</span> method. Run command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img border=0
width=718 height=26 id="Group 245241"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image149.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rake db:rollback</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.15pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img
border=0 width=718 height=26 id="Group 245242"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image150.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rails db:rollback</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Rollback
the last 3 migrations</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img border=0
width=718 height=26 id="Group 245243"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image150.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rake db:rollback STEP=</span><span
style='font-size:9.0pt;line-height:110%;color:#006666'>3</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image151.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>STEP</span> provide the number of migrations to revert.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Rollback
all migrations</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image152.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image153.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323909">Section 5.4: Add a new column with an index</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add a new <i>indexed</i> column <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>email</span> to the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>users</span> table,
run the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image154.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This will generate the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image155.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323910">Section 5.5: Run specific migration</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>To run a specific migration up or down, use <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>db:migrate:up</span>
or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>db:migrate:down</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>Up a specific migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image156.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image157.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>Down a specific migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image158.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image159.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The version number in the above commands is the numeric
prefix in the migration<span style='font-family:"Arial",sans-serif'>’</span>s
filename. For example, to</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=252 valign=top style='width:189.0pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#006666'>20160515085959</span><span
  style='font-size:9.0pt;line-height:107%'>_add_name_to_users.</span><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:14.55pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>migrate to the migration , you would use <span
style='font-size:9.0pt;line-height:133%;color:#006666;background:#FAFAFA'>20160515085959</span>
as the version number.</p>

<h2 style='margin-top:0in;margin-right:14.55pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323911">Section 5.6: Redo migrations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>You can rollback and then migrate again using the <b><span
style='font-size:9.0pt;line-height:112%;color:#9966CC;background:#FAFAFA'>redo</span></b>
command. This is basically a shortcut that combines <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>rollback</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>migrate</span>
tasks.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25pt;
margin-left:.25pt'>Run command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image160.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image161.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>You can use the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>STEP</span> parameter to go back more than one
version.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>For example, to go back 3 migrations:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image162.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image163.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323912">Section 5.7: Add a new column to a table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To add a new column <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>name</span> to the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>users</span> table, run the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image164.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This generates the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image165.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:30.8pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>When the migration name is of the form <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>AddXXXToTABLE_NAME</span>
followed by list of columns with data types, the generated migration will
contain the appropriate <span style='font-size:9.0pt;line-height:133%;
background:#FAFAFA'>add_column</span> statements.</p>

<h2 style='margin-top:0in;margin-right:30.8pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323913">Section 5.8: Remove an existing column from a table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To remove existing column <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>name</span> from <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>users</span> table, run the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image166.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will generate the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image167.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>When the migration name is of the form <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>RemoveXXXFromYYY</span>
followed by list of columns with data types then the generated migration will
contain the appropriate <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>remove_column</span> statements.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>string</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:49.45pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>While it<span style='font-family:"Arial",sans-serif'>’</span>s
not required to specify the data type (e.g. <span style='font-size:9.0pt;
line-height:133%;background:#FAFAFA'>:</span>) as a parameter to <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>remove_column</span>,
it is highly recommended. If the data type is <i>not</i> specified, then the
migration will not be reversible.</p>

<h2 style='margin-top:0in;margin-right:49.45pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323914">Section 5.9: Add column with default value</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The following example adds a column <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>admin</span> to the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>users</span> table,
and gives that column the default value <b><span style='font-size:9.0pt;
line-height:112%;color:blue;background:#FAFAFA'>false</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image168.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>Migrations with defaults might take a long time in large
tables with for example PostgreSQL. This is because each row will have to be
updated with the default value for the newly added column. To circumvent this
(and reduce downtime during deployments), you can split your migration into
three steps:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add
a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>add_column</span>-migration
similar to the one above, but set no default</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Deploy
and update the column in a rake task or on the console while your app is
running. Make sure your application already writes data to that colum for
new/updated rows.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add
another <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>change_column</span>
migration, which then changes the default of that column to the desired default
value</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323915">Section 5.10: Running migrations in
di&#57379;erent environments</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To run migrations in the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>test</span> environment, run this shell
command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image169.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Starting in Rails 5.0, you can use <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>rails</span> instead of <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rake</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image170.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323916">Section 5.11: Create a new table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To create a new <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>users</span> table with the columns <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>name</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>salary</span>, run
the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image171.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will generate the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image172.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.3pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>When the migration name is of the form <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>CreateXXX</span>
followed by list of columns with data types, then a migration will be generated
that creates the table <span style='font-size:9.0pt;line-height:133%;
background:#FAFAFA'>XXX</span> with the listed columns.</p>

<h2 style='margin-top:0in;margin-right:17.3pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323917">Section 5.12: Running migrations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>Run command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img border=0
width=718 height=26 id="Group 246250"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image150.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rake db:migrate</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.1pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img
border=0 width=718 height=26 id="Group 246251"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image150.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rails db:migrate</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.0pt;
margin-left:.25pt'>Specifying target version will run the required migrations
(up, down, change) until it has reached the specified version. Here, <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>version number</span>
is the numerical prefix on the migration's filename.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image173.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image174.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323918">Section 5.13: Change an existing column’s type</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To modify an existing column in Rails with a migration, run
the following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image175.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>db</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>migration</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This will create a new migration file in  directory (if it
doesn<span style='font-family:"Arial",sans-serif'>’</span>t exist already),
which will contain the file prefixed with timestamp and migration file name
which contains the below content:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image176.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="http://guides.rubyonrails.org/active_record_migrations.html#changing-columns"><span
style='color:#D4072F'>Rails Guide </span></a><a
href="http://guides.rubyonrails.org/active_record_migrations.html#changing-columns"><span
style='font-family:"Arial",sans-serif;color:#D4072F'>–</span></a><a
href="http://guides.rubyonrails.org/active_record_migrations.html#changing-columns"><span
style='color:#D4072F'> Changing Columns</span></a></p>

<h4 style='margin-left:.75pt'>A longer but safer method</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The above code prevents the user from ever rolling back the
migration. You can avoid this problem by splitting the <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>change</span> method into separate <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>up</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>down</span>
methods:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image177.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323919">Section 5.14: Create a hstore column</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>Hstore</span> columns can be useful to store settings. They are
available in PostgreSQL databases after you enabled the extension.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image178.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323920">Section 5.15: Create a join table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To create a join table between <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>students</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>courses</span>, run
the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image179.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will generate the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image180.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323921">Section 5.16: Add a self reference</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>A self reference can be useful to build a hierarchical tree.
This can be achieved with <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>add_reference</span> in a migration.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image181.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The foreign key column will be <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>pages_id</span>. If you want to decide
about the foreign key column name, you have to create the column first and add
the reference after.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image182.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323922">Section 5.17: Create an array column</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>An <b><span style='font-size:9.0pt;line-height:112%;
color:#CC0066;background:#FAFAFA'>array</span></b> column is supported by
PostgreSQL. Rails will automatically convert a PostgreSQL array to a Ruby
array, and vice-versa.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Create a table with an <b><span style='font-size:9.0pt;
line-height:112%;color:#CC0066;background:#FAFAFA'>array</span></b> column:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image183.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add an <b><span style='font-size:9.0pt;line-height:112%;
color:#CC0066;background:#FAFAFA'>array</span></b> column to an existing table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image184.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add an index for an <b><span style='font-size:9.0pt;
line-height:112%;color:#CC0066;background:#FAFAFA'>array</span></b> column:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image185.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323923">Section 5.18: Add an unique column to a table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add a new <i>unique</i> column <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>email</span> to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>users</span>, run
the following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image186.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create the following migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image187.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323924">Section 5.19: Checking migration status</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.1pt;
margin-left:.25pt'>We can check the status of migrations by running</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 3.0</span> <span style='font-size:8.0pt;line-height:108%;font-family:
"DejaVu Sans Mono";color:#666666'>Version &lt; 5.0 </span><span
style='font-size:11.0pt;line-height:108%'><img border=0 width=718 height=26
id="Group 249336"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image150.gif"></span><span
style='font-size:9.0pt;line-height:108%'>rake db:migrate:status</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.1pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img
border=0 width=718 height=26 id="Group 249337"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image150.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rails db:migrate:status</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The output will look like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image188.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;line-height:145%'>Under the status field, <span
style='font-size:9.0pt;line-height:145%;background:#FAFAFA'>up</span> means the
migration has been run and <span style='font-size:9.0pt;line-height:145%;
background:#FAFAFA'>down</span> means that we need to run the migration.</p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323925">Section 5.20:
Changing Tables</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you have created a table with some wrong schema, then the
easiest way to change the columns and their properties is <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>change_table</span>.
Review the following example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image189.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>The above migration changes a table <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>orders</span>. Here is a
line-by-line description of the changes:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>t.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>remove</span><span style='font-size:9.0pt;line-height:
  107%'> </span><b><span style='font-size:9.0pt;line-height:107%;color:#FF3333'>:ordered_at</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:173.0pt;text-indent:-156.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>removes the column <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>ordered_at</span> from the table <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>orders</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>t.</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0066'>string</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span><b><span style='font-size:9.0pt;line-height:107%;color:#FF3333'>:skew_number</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:173.0pt;text-indent:-156.9pt'><span style='line-height:112%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>adds a new string-type column named <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>skew_number</span> in the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>orders</span>
table.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>t.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>index</span><span style='font-size:9.0pt;line-height:
  107%'> </span><b><span style='font-size:9.0pt;line-height:107%;color:#FF3333'>:skew_number</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:173.0pt;text-indent:-156.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>adds an index on the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>skew_number</span> column in the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>orders</span>
table.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>t.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>rename</span><span style='font-size:9.0pt;line-height:
  107%'> </span><b><span style='font-size:9.0pt;line-height:107%;color:#FF3333'>:location</span></b><span
  style='font-size:9.0pt;line-height:107%'>, </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#FF3333'>:state</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.55pt;
margin-left:173.0pt;text-indent:-156.9pt'><span style='line-height:112%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>renames the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>location</span> column in the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>orders</span> table to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>state</span>.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323926">Section 5.21: Adding a NOT NULL constraint to
existing data</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>NOT</span></b><span style='font-size:
  9.0pt;line-height:107%'> NULL</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Say you want to add a foreign key <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>company_id</span> to the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>users</span> table,
and you want to have a  constraint on it. If you already have data in <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>users</span>, you
will have to do this in multiple steps.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=145
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image190.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=235
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image191.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323927">Section 5.22: Forbid null values</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To forbid <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>null</span> values in your table columns, add the <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:null</span></b>
parameter to your migration, like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image192.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323928">Chapter 6: Rails Best Practices</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323929">Section 6.1: Fat Model, Skinny Controller</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'><span style='font-family:"Arial",sans-serif'>“</span>Fat
Model, Skinny Controller<span style='font-family:"Arial",sans-serif'>”</span>
refers to how the M and C parts of MVC ideally work together. Namely, any
nonresponse-related logic should go in the model, ideally in a nice, testable
method. Meanwhile, the <span style='font-family:"Arial",sans-serif'>“</span>skinny<span
style='font-family:"Arial",sans-serif'>”</span> controller is simply a nice
interface between the view and model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>In practice, this can require a range of different types of
refactoring, but it all comes down to one idea: by moving any logic that isn<span
style='font-family:"Arial",sans-serif'>’</span>t about the response to the
model (instead of the controller), not only have you promoted reuse where
possible but you<span style='font-family:"Arial",sans-serif'>’</span>ve also
made it possible to test your code outside of the context of a request.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Let<span style='font-family:"Arial",sans-serif'>’</span>s
look at a simple example. Say you have code like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image193.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can change it to this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image194.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Then, you can move the logic to your post model, where it
might look like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:16.35pt;margin-bottom:
22.95pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895783424'><span style='left:0px;position:
absolute;left:0px;top:-11475px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image195.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>scope </span><b><span
style='font-size:9.0pt;line-height:110%;color:#FF3333'>:published</span></b><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>-&gt;(</span></b><span style='font-size:
9.0pt;line-height:110%'>timestamp = </span><b><span style='font-size:9.0pt;
line-height:110%;color:#CC00FF'>Time</span></b><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>now</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>{</span></b><span
style='font-size:9.0pt;line-height:110%'> where</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'published_at &lt;= ?'</span><span
style='font-size:9.0pt;line-height:110%'>, timestamp</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>} </span></b><span style='font-size:9.0pt;
line-height:110%'>scope </span><b><span style='font-size:9.0pt;line-height:
110%;color:#FF3333'>:unpublished</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>-&gt;(</span></b><span style='font-size:9.0pt;line-height:110%'>timestamp
= </span><b><span style='font-size:9.0pt;line-height:110%;color:#CC00FF'>Time</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>now</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>{</span></b><span style='font-size:9.0pt;line-height:110%'>
where</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'published_at IS NULL OR
published_at &gt; ?'</span><span style='font-size:9.0pt;line-height:110%'>,
timestamp</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>}</span></b></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323930">Section 6.2: Domain Objects (No More Fat Models)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>&quot;Fat Model, Skinny Controller&quot; is a very good
first step, but it doesn't scale well once your codebase starts to grow.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Let's think on the <a
href="https://en.wikipedia.org/wiki/Single_responsibility_principle"><span
style='color:#D4072F'>Single Responsibility</span></a> of models. What is the
single responsibility of models? Is it to hold business logic? Is it to hold
non-response-related logic?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>No. Its responsibility is to handle the persistence layer
and its abstraction.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Business logic, as well as any non-response-related logic
and non-persistence-related logic, should go in domain objects.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Domain objects are classes designed to have only one
responsibility in the domain of the problem. Let your classes &quot;<a
href="https://8thlight.com/blog/uncle-bob/2011/09/30/Screaming-Architecture.html"><span
style='color:#D4072F'>Scream Their Architecture</span></a>&quot; for the
problems they solve.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>In practice, you should strive towards skinny models, skinny
views and skinny controllers. The architecture of your solution shouldn't be
influenced by the framework you're choosing.</p>

<h4 style='margin-left:.75pt'>For example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Let's say you're a marketplace which charges a fixed 15%
commission to your customers via Stripe. If you charge a fixed 15% commission,
that means that your commission changes depending on the order's amount because
Stripe charges 2.9% + 30<span style='font-family:"Arial",sans-serif'>¢</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>amount</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>*</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#006666'>0.15</span><span style='font-size:9.0pt;
  line-height:107%'> </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>amount</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>*</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#006666'>0.029</span><span style='font-size:
  9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>+</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;line-height:
  107%;color:#006666'>0.30</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'><span style='position:relative;z-index:-1895782400'><span
style='left:0px;position:absolute;left:409px;top:-11947px;width:7px;height:
1px'><img width=7 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image196.gif"></span></span>The
amount you charge as commission should be: <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>-</span></b><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>()</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Don't write this logic in the model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=306
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image197.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>As soon as you integrate with a new payment method, you
won't be able to scale this functionality inside this model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>Also, as soon as you start to integrate more business logic,
your <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Order</span>
object will start to lose <a
href="https://thebojan.ninja/2015/04/08/high-cohesion-loose-coupling/"><span
style='color:#D4072F'>cohesion</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Prefer domain objects, with the calculation of the
commission completely abstracted from the responsibility of persisting orders:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=457
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image198.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=235
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image199.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Using domain objects has the following architectural
advantages:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>it's extremely easy to unit test, as no fixtures or
factories are required to instantiate the objects with the logic. works with
everything that accepts the message <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>amount</span>. keeps each domain object small, with
clearly defined responsibilities, and with higher cohesion. easily scales with
new payment methods by <a
href="https://en.wikipedia.org/wiki/Open/closed_principle"><span
style='color:#D4072F'>addition, not modification</span></a>. stops the tendency
to have an ever-growing <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>User</span> object in each Ruby on Rails application.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>I personally like to put domain objects in <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>lib</span>. If you
do so, remember to add it to <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>autoload_paths</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image201.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>commands</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>You may also prefer to create domain objects more
action-oriented, following the Command/Query pattern. In such case, putting
these objects in  might be a better place as all <span style='font-size:9.0pt;
line-height:133%;background:#FAFAFA'>app</span> subdirectories are
automatically added to the autoload path.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323931">Section 6.3: Beware of default_scope</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>ActiveRecord includes <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>default_scope</span>, to automatically
scope a model by default.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image202.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The above code will serve posts which are already published
when you perform any query on the model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image203.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:40.35pt;margin-bottom:
.1pt;margin-left:.25pt;line-height:222%'>That scope, while innocuous-looking,
has multiple hidden side-effect that you may not want. <b><span
style='font-size:9.0pt;line-height:222%;background:#FAFAFA'>default_scope</span>
and </b><b><span style='font-size:9.0pt;line-height:222%;background:#FAFAFA'>order</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Since you declared an <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>order</span> in the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default_scope</span>,
calling <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>order</span>
on <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Post</span>
will be added as additional orders instead of overriding the default.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=69
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image204.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This is probably not the behavior you wanted; you can
override this by excluding the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>order</span> from the scope first</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.7pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Post.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>except</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#FF3333'>:order</span></b><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>order</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>updated_at:
</span><b><span style='font-size:9.0pt;line-height:110%;color:#FF3333'>:desc</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b></p>

<p class=MsoNormal style='margin-bottom:8.35pt;text-align:justify;text-justify:
inter-ideograph;text-indent:3.75pt;line-height:153%'><span style='position:
relative;z-index:-1895780352'><span style='left:0px;position:absolute;
left:0px;top:-13829px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image205.gif"></span></span><b><span
style='font-size:9.0pt;line-height:153%;color:blue'>SELECT</span></b><span
style='font-size:9.0pt;line-height:153%'> </span><span style='font-size:9.0pt;
line-height:153%;color:red'>&quot;posts&quot;</span><span style='font-size:
9.0pt;line-height:153%;color:#CCCCCC'>.*</span><span style='font-size:9.0pt;
line-height:153%'> </span><b><span style='font-size:9.0pt;line-height:153%;
color:blue'>FROM</span></b><span style='font-size:9.0pt;line-height:153%'> </span><span
style='font-size:9.0pt;line-height:153%;color:red'>&quot;posts&quot;</span><span
style='font-size:9.0pt;line-height:153%'> </span><b><span style='font-size:
9.0pt;line-height:153%;color:blue'>WHERE</span></b><span style='font-size:9.0pt;
line-height:153%'> </span><span style='font-size:9.0pt;line-height:153%;
color:red'>&quot;posts&quot;</span><span style='font-size:9.0pt;line-height:
153%;color:#CCCCCC'>.</span><span style='font-size:9.0pt;line-height:153%;
color:red'>&quot;published&quot;</span><span style='font-size:9.0pt;line-height:
153%'> </span><span style='font-size:9.0pt;line-height:153%;color:#CCCCCC'>=</span><span
style='font-size:9.0pt;line-height:153%'> </span><span style='font-size:9.0pt;
line-height:153%;color:red'>'t'</span><span style='font-size:9.0pt;line-height:
153%'> </span><b><span style='font-size:9.0pt;line-height:153%;color:blue'>ORDER</span></b><span
style='font-size:9.0pt;line-height:153%'> </span><b><span style='font-size:
9.0pt;line-height:153%;color:blue'>BY</span></b><span style='font-size:9.0pt;
line-height:153%'> </span><span style='font-size:9.0pt;line-height:153%;
color:red'>&quot;posts&quot;</span><span style='font-size:9.0pt;line-height:
153%;color:#CCCCCC'>.</span><span style='font-size:9.0pt;line-height:153%;
color:red'>&quot;updated_at&quot;</span><span style='font-size:9.0pt;
line-height:153%'> </span><b><span style='font-size:9.0pt;line-height:153%;
color:blue'>DESC </span></b><b><span style='font-size:9.0pt;line-height:153%;
background:#FAFAFA'>default_scope</span> and model initialization</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>As with any other <b><span style='font-size:9.0pt;
line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveRecord::Relation</span></b>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default_scope</span>
will alter the default state of models initialized from it.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>where</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>published: </span><b><span style='font-size:9.0pt;
  line-height:107%;color:blue'>true</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In the above example, <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Post</span> has <b><span style='font-size:
9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>)</span></b> set by
default, and so new models from <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Post</span> will also have it set.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image206.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>default_scope</span> can nominally be cleared by calling <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>unscoped</span>
first, but this also has side-effects. Take, for example, an STI model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image207.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By default, queries against <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Post</span> will be scoped to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>type</span> columns
containing <span style='font-size:9.0pt;line-height:112%;color:#996600;
background:#FAFAFA'>'Post'</span>. But <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>unscoped</span> will clear this along with your own <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default_scope</span>,
so if you use <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>unscoped</span>
you have to remember to account for this as well.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image208.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.9pt;margin-left:
.75pt'><span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>unscoped</span>
and Model Associations</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=172
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image209.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>By getting an individual <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>User</span>, you can see the posts related
to it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=86
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image210.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>But you want to clear the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>default_scope</span> from the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>posts</span>
relation, so you use <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>unscoped</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=53
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image211.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.35pt;
margin-left:.25pt'>This wipes out the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>user_id</span> condition as well as the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default_scope</span>.</p>

<h4 style='margin-left:.75pt'>An example use-case for <span style='font-size:
9.0pt;line-height:107%;background:#FAFAFA'>default_scope</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Despite all of that, there are situations where using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default_scope</span>
is justifiable.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Consider a multi-tenant system where multiple subdomains are
served from the same application but with isolated data. One way to achieve
this isolation is through <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>default_scope</span>. The downsides in other cases become
upsides here.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image212.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Tenant.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>current_id</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>All you need to do is set  to something early in the
request, and any table that contains <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>tenant_id</span> will automatically become scoped
without any additional code. Instantiating records will automatically inherit
the tenant id they were created under.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:12.95pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>The important thing about this use-case is
that the scope is set once per request, and it doesn't change. The only cases
you will need <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>unscoped</span>
here are special cases like background workers that run outside of a request
scope.</p>

<h2 style='margin-top:0in;margin-right:12.95pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323932">Section 6.4: Convention Over Configuration</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>In Rails, you find yourself looking at <i>controllers,
views, and models</i> for your database.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>To reduce the need for heavy configuration, Rails implements
rules to ease up working with the application. You may define your own rules
but for the beginning (and for later on) it's a good idea to stick to
conventions that Rails offers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>These conventions will speed up development, keep your code
concise and readable, and allow you an easy navigation inside your application.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Conventions also lower the barriers to entry for beginners.
There are so many conventions in Rails that a beginner doesn<span
style='font-family:"Arial",sans-serif'>’</span>t even need to know about, but
can just benefit from in ignorance. It<span style='font-family:"Arial",sans-serif'>’</span>s
possible to create great applications without knowing why everything is the way
it is.</p>

<h4 style='margin-left:.75pt'>For Example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>If you have a database table called <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>orders</span> with the primary key <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>id</span>, the
matching model is called <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>order</span> and the controller that handles all the logic
is named <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>orders_controller</span>.
The view is split in different actions: if the controller has a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>new</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>edit</span> action,
there is also a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>new</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>edit</span>
view.</p>

<h4 style='margin-left:.75pt'>For Example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>To create an app you simply run <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rails new app_name</span>. This will
generate roughly 70 files and folders that comprise the infrastructure and
foundation for your Rails app.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>It includes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>Folders to hold your models (database layer), controllers,
and views</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Folders to hold unit tests for your application</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Folders to hold your web assets like Javascript and CSS
files</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Default files for HTTP 400 responses (i.e. file not found)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:190.45pt;margin-bottom:
0in;margin-left:-.75pt;text-indent:20.9pt;line-height:145%'><span
style='font-size:11.0pt;line-height:145%'><img border=0 width=5 height=5
id="Group 254425"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> Many
others</p>

<h2 style='margin-top:0in;margin-right:190.45pt;margin-bottom:0in;margin-left:
-.75pt;text-indent:20.9pt;line-height:145%'><a name="_Toc323933">Section 6.5:
Don't Repeat Yourself (DRY)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>To help to maintain clean code, Rails follows the principle
of DRY.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>It involves whenever possible, re-using as much code as
possible rather than duplicating similar code in multiple places (for example,
using partials). This reduces <i>errors</i>, keeps your code <i>clean</i> and
enforces the principle of <i>writing code once</i> and then reusing it. It is
also easier and more efficient to update code in one place than to update
multiple parts of the same code. Thus making your code more modular and robust.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Also <i>Fat Model, Skinny Controller</i> is DRY, because you
write the code in your model and in the controller only do the call, like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=289
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image213.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.2pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>This also helps lead to an API driven
structure where internal methods are hidden and changes are achieved through
passing parameters in an API fashion.</p>

<h2 style='margin-top:0in;margin-right:35.2pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323934">Section 6.6: You Ain’t Gonna Need it (YAGNI)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>If you can say <span style='font-family:"Arial",sans-serif'>“</span>YAGNI<span
style='font-family:"Arial",sans-serif'>”</span> (You ain<span style='font-family:
"Arial",sans-serif'>’</span>t gonna need it) about a feature, you better not
implement it. There can be a lot of development time saved through focussing
onto simplicity. Implementing such features anyway can lead to problems:</p>

<h4 style='margin-left:.75pt'>Problems Overengineering</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>If a product is more complicated than it has to be, it is
over engineered. Usually these <span style='font-family:"Arial",sans-serif'>“</span>not
yet used<span style='font-family:"Arial",sans-serif'>”</span> features will
never be used in the intended way they were written and have to be refactored
if they ever get used. Premature optimisations, especially performance
optimisations, often lead to design decisions which will be proved wrong in the
future.</p>

<h4 style='margin-left:.75pt'>Code Bloat</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Code Bloat means unnecessary complicated code. This can
occur for example by abstraction, redundancy or incorrect application of design
patterns. The code base becomes difficult to understand, confusing and
expensive to maintain.</p>

<h4 style='margin-left:.75pt'>Feature Creep</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Feature Creep refers to adding new features that go beyond
the core functionality of the product and lead to an unnecessarily high
complexity of the product.</p>

<h4 style='margin-left:.75pt'>Long development time</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>The time which could be used to develop necessary features
is spent to develop unnecessary features. The product takes longer to deliver.</p>

<h4 style='margin-left:.75pt'>Solutions KISS - Keep it simple, stupid</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>According to KISS, most systems work the best if they are
designed simple. Simplicity should be a primary design goal to reduce
complexity. It can be achieved by following the <span style='font-family:"Arial",sans-serif'>“</span>Single
Responsibility Principle<span style='font-family:"Arial",sans-serif'>”</span>
for example.</p>

<h4 style='margin-left:.75pt'>YAGNI <span style='font-family:"Arial",sans-serif;
font-weight:normal'>–</span> You Ain<span style='font-family:"Arial",sans-serif;
font-weight:normal'>’</span>t Gonna Need it</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Less is more. Think about every feature, is it really
needed? If you can think of any way that it<span style='font-family:"Arial",sans-serif'>’</span>s
YAGNI, leave it away. It<span style='font-family:"Arial",sans-serif'>’</span>s
better to develop it when it<span style='font-family:"Arial",sans-serif'>’</span>s
needed.</p>

<h4 style='margin-left:.75pt'>Continuous Refactoring</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The product is being improved steadily. With refactoring, we
can make sure that the product is being done according to best practice and
does not degenerate to a patch work.<br clear=all style='page-break-before:
always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323935">Chapter 7: Naming Conventions</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323936">Section 7.1: Controllers</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Controller class names are pluralized. The reason is the
controller controls multiple instances of object instance.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=302 style='width:226.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>orders_controller.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
  <td width=50 valign=top style='width:37.15pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> in the <b><span
  style='font-size:9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.5pt;
margin-left:.25pt'><i>For Example</i>: <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>OrdersController</span> would be the controller for an
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>orders</span>
table. Rails will then look for the class definition in a file called 
directory.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'><i>For Example</i>: <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>PostsController</span> would be the controller for a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>posts</span> table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>If the controller class name has multiple capitalized words,
the table name is assumed to have underscores between these words.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><i>For Example:</i> If a controller is named <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>PendingOrdersController</span>
then assumed file name for this controller will be</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=202 style='width:2.1in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=202 valign=top style='width:2.1in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>pending_orders_controller.</span><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<h2 style='margin-top:0in;margin-right:320.8pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc323937"><span style='font-size:10.0pt;
line-height:145%;color:black;font-weight:normal'>. </span>Section 7.2: Models</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>The model is named using the class naming convention of
unbroken MixedCase and is always the singular of the table name.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:.25pt'><i>For Example</i>: If a table was named <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>orders</span>, the
associated model would be named <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Order</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'><i>For Example</i>: If a table was named <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>posts</span>, the
associated model would be named <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Post</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=179 style='width:134.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>order.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>rb</span></p>
  </td>
  <td width=50 valign=top style='width:37.15pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> in the <b><span
  style='font-size:9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Rails will then look for the class definition in a file
called  directory.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>If the model class name has multiple capitalized words, the
table name is assumed to have underscores between these words.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:61.9pt;margin-bottom:
0in;margin-left:.25pt;line-height:146%'><i>For Example:</i> If a model is named
<span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>BlogPost</span>
then assumed table name will be <span style='font-size:9.0pt;line-height:146%;
background:#FAFAFA'>blog_posts</span>.</p>

<h2 style='margin-top:0in;margin-right:61.9pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:146%'><a name="_Toc323938">Section 7.3:
Filenames and autoloading</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Rails files - and Ruby files in general - should be named
with <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>lower_snake_case</span>
filenames. E.g.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image214.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>is the file that contains the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>ApplicationController</span> class
definition. Note that while <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>PascalCase</span> is used for class and module names, the
files in which they reside should still be <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>lower_snake_case</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>Consistent naming is important since Rails makes use of
auto-loading files as needed, and uses &quot;inflection&quot; to transform
between different naming styles, such as transforming <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>application_controller</span> to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ApplicationController</span>
and back again.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>blog_post.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:45.45pt;margin-bottom:
12.2pt;margin-left:65.05pt;text-indent:-.9in'>E.g. if Rails sees that the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>BlogPost</span>
class doesn't exist (hasn't been loaded yet), it'll look for a file named  and
attempt to load that file.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>blog_post.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>It is therefore also important to name files for what they
contain, since the autoloader expects file names to match content. If, for
instance, the  instead contains a class named just <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Post</span>, you'll see a <b><span
style='font-size:9.0pt;line-height:112%;color:#CC00FF;background:#FAFAFA'>LoadError</span></b>:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=374 style='width:3.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Expected </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>[</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>some path</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>]/</span></b></p>
  </td>
  <td width=223 valign=top style='width:167.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>blog_post.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span><span style='font-size:9.0pt;
  line-height:107%'> to define BlogPost</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:13.05pt;margin-left:26.3pt;text-align:center;text-indent:-.5pt;
line-height:107%'>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>something</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you add a dir under <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>/</span></b> (e.g.
/models/products/), and</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><span style='font-size:11.0pt;line-height:112%'><img
border=0 width=5 height=5 id="Group 309816"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> want
to namespace modules and classes inside new dir then you don't need to do
anything and it'll be</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=410 style='width:307.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=266 valign=top style='width:199.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> you would need to wrap your </span><b><span
  style='font-size:9.0pt;line-height:107%;color:#9966CC'>class</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>in</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>loaded itself. For example, in module</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Products`.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=615 style='width:461.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>autoload_paths</span><span style='font-size:
  9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>+</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>= </span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>%</span></b><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>W</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=261 valign=top style='width:195.6pt;background:#FAFAFA;padding:
  .9pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> </span><i><span style='font-size:9.0pt;line-height:
  107%;color:green'>#{config.root}/app/models/products )</span></i></p>
  </td>
  <td width=52 valign=top style='width:38.65pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> to your </p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:35.25pt;margin-bottom:
12.25pt;margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:112%'><img border=0 width=5 height=5 id="Group 309817"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> don't
want to namespace modules and classes inside my new dir then you have to add 
to autoload.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:6.5pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>One more thing to pay attention to (especially if
English is not your first language) is the fact that Rails accounts for
irregular plural nouns in English. So if you have model named &quot;Foot&quot;
the corresponding controller needs to be called &quot;FeetController&quot;
rather than &quot;FootsController&quot; if you want rails &quot;magic&quot;
routing (and many more such features) to work.</p>

<h2 style='margin-top:0in;margin-right:6.5pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323939">Section 7.4: Views and Layouts</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>When a controller action is rendered, Rails will attempt to
find a matching layout and view based on the name of the controller.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Views and layouts are placed in the  directory.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=157 style='width:118.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=157 valign=top style='width:118.1pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>PeopleController</span><i><span style='font-size:
  9.0pt;line-height:107%;color:green'>#index</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Given a request to the  action, Rails will search for:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>layouts</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=234 style='width:175.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
  <td width=18 valign=top style='width:13.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> in </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>people</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index_new.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=357 style='width:267.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=157 valign=top style='width:118.1pt;background:#FAFAFA;padding:
  .9pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>PeopleController</span><i><span style='font-size:
  9.0pt;line-height:107%;color:green'>#index</span></i></p>
  </td>
  <td width=70 valign=top style='width:52.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> action like </p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>render </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>'index_new'</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=194 valign=top style='width:145.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>render </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>'index_new'</span><span style='font-size:
  9.0pt;line-height:107%'>, layout:</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12>the layout called <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>people</span> in <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>/</span></b> (or <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>application</span>
if no match is found)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>a view called <b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>/</span></b> by default</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:3.05pt;
margin-left:20.9pt'>if you wish to render other file called  you have to write
code for that in</p>

<p class=MsoNormal style='margin-top:5.4pt;margin-right:100.2pt;margin-bottom:
0in;margin-left:20.9pt'>we can set different <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>layouts</span> for every <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>action</span> by
writing </p>

<p class=MsoNormal style='margin-top:0in;margin-right:131.45pt;margin-bottom:
0in;margin-left:-.75pt;text-indent:30.0pt;line-height:142%'><span
style='font-size:9.0pt;line-height:142%;color:#996600;background:#FAFAFA'>'your_layout_name'</span></p>

<h2 style='margin-top:0in;margin-right:131.45pt;margin-bottom:0in;margin-left:
-.75pt;text-indent:30.0pt;line-height:142%'><a name="_Toc323940">Section 7.5:
Models class from Controller name</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can get a Model class from a Controller name this way
(context is Controller class):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image216.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323941">Chapter 8: ActionCable</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc323942">Section 8.1: User Authentication</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=371
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image217.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc323943">Section 8.2: [Basic] Server Side</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image218.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc323944">Section 8.3: [Basic] Client Side (Co&#57379;eescript)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=220
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image219.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image220.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>app/assets/javascripts/application.js
# usually generated like this</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image221.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>app/assets/javascripts/cable.js
# usually generated like this</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image222.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323945">Chapter 9: ActiveModel</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323946">Section 9.1: Using ActiveModel::Validations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can validate any object, even plain ruby.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=283
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image223.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323947">Chapter 10: User Authentication in Rails</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:6.2pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>Devise is a very powerful gem, it allows you to sign
up, sign in and sign out options just after installing. Moreover user can add
authentications and restrictions to its applications. Devise also come with its
own views, if user wants to use. A user can also customize sign up and sign in
forms according to its need and requirement. It should be noted that Devise
recommends that you implement your own login if you're new to rails.</p>

<h2 style='margin-top:0in;margin-right:6.2pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323948">Section 10.1: Authentication using Devise</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.45pt;
margin-left:.25pt'>Add gem to the Gemfile:</p>

<p class=MsoNormal style='margin-bottom:14.1pt;text-indent:0in;line-height:
107%;background:#FAFAFA'><span style='font-size:9.0pt;line-height:107%'>gem </span><span
style='font-size:9.0pt;line-height:107%;color:#996600'>'devise'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.2pt;
margin-left:.25pt'>Then run the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>bundle install</span> command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Use command <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>$ rails generate devise:install</span> to generate required
configuration file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.9pt;
margin-left:.25pt'>Set up the default URL options for the Devise mailer in each
environment In development environment add this line:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:2.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>environments</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>development.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:114.75pt;margin-bottom:
.15pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895777280'><span style='left:0px;position:
absolute;left:0px;top:-20861px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:240%'>config.</span><span style='font-size:
9.0pt;line-height:240%;color:#9900CC'>action_mailer</span><span
style='font-size:9.0pt;line-height:240%'>.</span><span style='font-size:9.0pt;
line-height:240%;color:#9900CC'>default_url_options</span><span
style='font-size:9.0pt;line-height:240%'> = </span><b><span style='font-size:
9.0pt;line-height:240%;color:#006600'>{</span></b><span style='font-size:9.0pt;
line-height:240%'> host: </span><span style='font-size:9.0pt;line-height:240%;
color:#996600'>'localhost'</span><span style='font-size:9.0pt;line-height:240%'>,
port: </span><span style='font-size:9.0pt;line-height:240%;color:#006666'>3000</span><span
style='font-size:9.0pt;line-height:240%'> </span><b><span style='font-size:
9.0pt;line-height:240%;color:#006600'>} </span></b>to your </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=238 style='width:178.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>environments</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>production.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>similarly in production this edit  file and add</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895776256'><span style='left:0px;position:absolute;
left:0px;top:-20979px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>config.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>action_mailer</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>default_url_options</span><span
style='font-size:9.0pt;line-height:110%'> = </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>{</span></b><span style='font-size:9.0pt;
line-height:110%'> host: </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'your-site-url'</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>}</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.5pt;
margin-left:.25pt'>Then create a model using:<span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>$ rails generate devise USER</span> Where <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>USER</span> is the
class name for which you want to implement authentication.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>Finally, run: <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>rake db:migrate</span> and you are all set.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Custom views</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>If you need to configure your views, you can use the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rails generate
devise:views</span> generator that will copy all views to your application.
Then you can edit them as desired.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>scoped_views</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you have more than one Devise model in your application
(for example User and Admin), you will notice that Devise uses the same views
for all models. Devise offers an easy way to customize views. Set </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=320 style='width:239.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>= </span><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>true</span></b></p>
  </td>
  <td width=68 valign=top style='width:50.8pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> inside the </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>initializers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>devise.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:42.8pt;
margin-bottom:13.4pt;margin-left:3.7pt;text-align:center;text-indent:-.5pt;
line-height:107%'> file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>You can also use the generator to create scoped views: <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rails generate
devise:views users</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=418 style='width:4.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=202 valign=top style='width:2.1in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails generate devise:views </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=209 valign=top style='width:156.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>v registrations confirmations</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>If you would like to generate only a few sets of views,
such as the ones for the registerable and confirmable module use the -v flag: </p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323949">Section 10.2: Devise Controller Filters &amp; Helpers</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.15pt;
margin-left:.25pt'>To set up a controller with user authentication using
devise, add this before_action: (assuming your devise model is 'User'):</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=230 valign=top style='width:2.4in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>before_action </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#FF3333'>:authenticate_user</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.85pt;
margin-left:173.3pt;text-indent:-.5pt;line-height:109%'><span style='font-size:
9.0pt;line-height:109%;background:#FAFAFA'>!</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:203.5pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:219%'>To verify if a user is signed in,
use the following helper: <span style='font-size:9.0pt;line-height:219%;
background:#FAFAFA'>user_signed_in?</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:258.75pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:219%'>For the current signed-in user, use
this helper: <span style='font-size:9.0pt;line-height:219%;background:#FAFAFA'>current_user</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:280.65pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:219%'>You can access the session for this
scope: <span style='font-size:9.0pt;line-height:219%;background:#FAFAFA'>user_session</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;text-indent:20.9pt;line-height:146%'><span style='font-size:
11.0pt;line-height:146%'><img border=0 width=5 height=5 id="Group 263515"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> Note
that if your Devise model is called <span style='font-size:9.0pt;line-height:
146%;background:#FAFAFA'>Member</span> instead of <span style='font-size:9.0pt;
line-height:146%;background:#FAFAFA'>User</span>, replace <span
style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>user</span> above
with <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>member</span></p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:20.9pt;line-height:146%'><a name="_Toc323950">Section 10.3:
Omniauth</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.85pt;
margin-left:.25pt'>First choose your auth strategy and add it to your <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Gemfile</span>. You
can find a list of strategies here: <a
href="https://github.com/intridea/omniauth/wiki/List-of-Strategies"><span
style='color:#D4072F'>https://github.com/intridea/omniauth/wiki/List-of-Strategies</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:210.7pt;margin-bottom:
0in;margin-left:0in;text-align:justify;text-justify:inter-ideograph;text-indent:
3.75pt;line-height:176%'><span style='position:relative;z-index:-1895775232'><span
style='left:0px;position:absolute;left:0px;top:-21708px;width:718px;height:
1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:176%'>gem </span><span style='font-size:
9.0pt;line-height:176%;color:#996600'>'omniauth-github'</span><span
style='font-size:9.0pt;line-height:176%'>, </span><b><span style='font-size:
9.0pt;line-height:176%;color:#FF3333'>:github</span></b><span style='font-size:
9.0pt;line-height:176%'> </span><b><span style='font-size:9.0pt;line-height:
176%;color:#006600'>=&gt;</span></b><span style='font-size:9.0pt;line-height:
176%'> </span><span style='font-size:9.0pt;line-height:176%;color:#996600'>'intridea/omniauth-github'
</span><span style='font-size:9.0pt;line-height:176%'>gem </span><span
style='font-size:9.0pt;line-height:176%;color:#996600'>'omniauth-openid'</span><span
style='font-size:9.0pt;line-height:176%'>, </span><b><span style='font-size:
9.0pt;line-height:176%;color:#FF3333'>:github</span></b><span style='font-size:
9.0pt;line-height:176%'> </span><b><span style='font-size:9.0pt;line-height:
176%;color:#006600'>=&gt;</span></b><span style='font-size:9.0pt;line-height:
176%'> </span><span style='font-size:9.0pt;line-height:176%;color:#996600'>'intridea/omniauth-openid'
</span>You can add this to your rails middleware like so:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image224.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>auth</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>:provider</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>By default, OmniAuth will add <b><span style='font-size:
9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>/</span></b> to your
routes and you can start by using these paths.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>auth</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>failure</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:211.1pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>By default, if there is a failure,
omniauth will redirect to <b><span style='font-size:9.0pt;line-height:145%;
color:#006600;background:#FAFAFA'>/</span></b></p>

<h2 style='margin-top:0in;margin-right:211.1pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323951">Section 10.4:
has_secure_password</a></h2>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Create User
Model</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.95pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><span
style='font-size:9.0pt;line-height:107%'>rails generate model User email:</span><b><span
style='font-size:9.0pt;line-height:107%;color:#CC0066'>string</span></b><span
style='font-size:9.0pt;line-height:107%'> password_digest:</span><b><span
style='font-size:9.0pt;line-height:107%;color:#CC0066'>string</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:267.8pt;margin-bottom:
12.2pt;margin-left:.25pt'><b>Add has_secure_password module to User model </b>class
User &lt; ActiveRecord::Base has_secure_password end</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Now you can create a new user with password</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895774208'><span style='left:0px;position:absolute;
left:0px;top:-22179px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>user = User.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>new</span><span
style='font-size:9.0pt;line-height:110%'> email: </span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'bob@bob.com'</span><span
style='font-size:9.0pt;line-height:110%'>, password: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'Password1'</span><span
style='font-size:9.0pt;line-height:110%'>, password_confirmation: </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'Password1'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Verify password with authenticate method</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image225.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323952">Section 10.5: has_secure_token</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Create User Model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=31
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image226.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image227.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now when you create a new user a token and auth_token are
automatically generated</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.45pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image228.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'>You can update the tokens
using <span style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>regenerate_token</span>
and <span style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>regenerate_auth_token</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image229.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323953">Chapter 11: ActiveRecord Associations</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323954">Section 11.1: Polymorphic association</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This type of association allows an ActiveRecord model to
belong to more than one kind of model record. Common example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image230.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Without this association, you<span style='font-family:"Arial",sans-serif'>’</span>d
have all these foreign keys in your Address table but you only would ever have
a value for one of them because an address, in this scenario, can only belong
to one entity (Human or Company). Here is what it would look like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image231.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323955">Section 11.2: Self-Referential Association</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:39.0pt;margin-bottom:
0in;margin-left:.25pt;line-height:169%'>Self-referential association is used to
associate a model with itself. The most frequent example would be, to manage
association between a friend and his follower. ex.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image232.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>now you can associate models like;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image233.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and the other model will look like;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image234.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323956">Section 11.3: belongs_to</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>A <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>belongs_to</span> association sets up a one-to-one connection with
another model, so each instance of the declaring model &quot;belongs to&quot;
one instance of the other model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For example, if your application includes users and posts,
and each post can be assigned to exactly one user, you'd declare the post model
this way:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image235.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In your table structure you might then have</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image236.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323957">Section 11.4: has_one</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>A <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>has_one</span> association sets up a one-to-one connection with
another model, but with different semantics. This association indicates that
each instance of a model contains or possesses one instance of another model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, if each user in your application has only one
account, you'd declare the user model like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image237.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>In Active Record, when you have a <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>has_one</span> relation, active
record ensures that the only one record exists with the foreign key.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.9pt;
margin-left:.25pt'>Here in our example: In accounts table, there can only be
one record with a particular user_id. If you try to associate one more account
for the same user, it makes the previous entry's foreign key as null(making it
orphan) and creates a new one automatically. It makes the previous entry null
even if the save fails for the new entry to maintain consistency.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:16.35pt;margin-bottom:
22.95pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895773184'><span style='left:0px;position:
absolute;left:0px;top:-24114px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image238.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>user = User.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>first </span><span
style='font-size:9.0pt;line-height:110%'>user.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>build_account</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>name: </span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;sample&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>) </span></b><span
style='font-size:9.0pt;line-height:110%'>user.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>save</span><span style='font-size:9.0pt;
line-height:110%'>   </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>[</span></b><span style='font-size:9.0pt;line-height:110%'>Saves
it successfully, </span><b><span style='font-size:9.0pt;line-height:110%;
color:#9966CC'>and</span></b><span style='font-size:9.0pt;line-height:110%'>
creates an entry </span><b><span style='font-size:9.0pt;line-height:110%;
color:#9966CC'>in</span></b><span style='font-size:9.0pt;line-height:110%'>
accounts table with user_id </span><span style='font-size:9.0pt;line-height:
110%;color:#006666'>1</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>] </span></b><span style='font-size:9.0pt;line-height:110%'>user.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>build_account</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>name: </span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;sample1&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>  </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:110%'>automatically makes the previous entry</span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'s foreign key null]
user.save  [creates the new account with name sample 1 and user_id 1]</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323958">Section 11.5: has_many</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>A <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>has_many</span> association indicates a one-to-many connection with
another model. This association generally is located on the other side of a
belongs_to association.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This association indicates that each instance of the model
has zero or more instances of another model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, in an application containing users and posts,
the user model could be declared like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=63
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image239.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image240.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>The table structure of <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Post</span> would remain the same as in
the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>belongs_to</span>
example; in contrast, <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>User</span> would not require any schema changes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to get the list of all the published posts for
the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>User</span>,
then you can add the following (i.e. you can add scopes to your association
objects):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image241.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323959">Section 11.6: The has_many :through association</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=438 style='width:328.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>has_many </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#FF3333'>:through</span></b></p>
  </td>
  <td width=229 valign=top style='width:171.6pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> association is often used
  to set up a </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>many</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>to</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>many</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A  connection with another model. This</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>association indicates that the declaring model can be
matched with zero or more instances of another model by proceeding through a
third model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For example, consider a medical practice where patients make
appointments to see physicians. The relevant association declarations could
look like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image242.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323960">Section 11.7: The has_one :through association</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=323 style='width:242.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>has_one </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#FF3333'>:through</span></b></p>
  </td>
  <td width=136 valign=top style='width:101.75pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> association sets up a </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>one</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>to</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>one</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A  connection with another model. This association indicates</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>that the declaring model can be matched with one instance of
another model by proceeding through a third model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For example, if each <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>supplier</span> has one <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>account</span>, and
each account is associated with one account history, then the supplier model
could look like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=227
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image243.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image244.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323961">Section 11.8: The has_and_belongs_to_many
association</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>many</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:107%'>to</span><b><span style='font-size:9.0pt;line-height:107%;
  color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:107%'>many</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>A <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>has_and_belongs_to_many</span> association creates a direct 
connection with another model, with no intervening model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For example, if your application includes <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>assemblies</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>parts</span>,
with each assembly having many parts and each part appearing in many
assemblies, you could declare the models this way:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image245.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323962">Chapter 12: ActiveRecord Validations</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc323963">Section 12.1: Validating length of an attribute</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image246.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>The possible length constraint options are:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>in</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:minimum</span></b> - The attribute cannot
have less than the specified length.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:maximum</span></b> - The attribute cannot
have more than the specified length.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>:</span> (or <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:within</span></b>) - The attribute length
must be included in a given interval. The value for this option must be a
range.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:148.1pt;margin-bottom:
0in;margin-left:.25pt;text-indent:5.5pt;line-height:145%'><b><span
style='font-size:9.0pt;line-height:145%;color:#FF3333;background:#FAFAFA'>:is</span></b>
- The attribute length must be equal to the given value.</p>

<h2 style='margin-top:0in;margin-right:148.1pt;margin-bottom:0in;margin-left:
.25pt;text-indent:5.5pt;line-height:145%'><a name="_Toc323964">Section 12.2:
Validates format of an attribute</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Validate that an attribute's value matches a regular
expression using <b><span style='font-size:9.0pt;line-height:112%;color:#CC0066;
background:#FAFAFA'>format</span></b> and the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>with</span> option.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image247.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can also define a constant and set its value to a
regular expression and pass it to the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>with:</span> option. This might be more convenient for
really complex regular expressions</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image248.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:78.45pt;margin-bottom:
1.25pt;margin-left:4.0pt;text-indent:-3.75pt;line-height:255%'><span
style='position:relative;z-index:-1895771136'><span style='left:0px;position:
absolute;left:0px;top:-26299px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>The
default error message is <span style='font-size:9.0pt;line-height:255%;
background:#FAFAFA'>is invalid</span>. This can be changed with the <b><span
style='font-size:9.0pt;line-height:255%;color:#FF3333;background:#FAFAFA'>:message</span></b>
option. <span style='font-size:9.0pt;line-height:255%'>validates </span><b><span
style='font-size:9.0pt;line-height:255%;color:#FF3333'>:bio</span></b><span
style='font-size:9.0pt;line-height:255%'>, </span><b><span style='font-size:
9.0pt;line-height:255%;color:#CC0066'>format</span></b><span style='font-size:
9.0pt;line-height:255%'>: </span><b><span style='font-size:9.0pt;line-height:
255%;color:#006600'>{</span></b><span style='font-size:9.0pt;line-height:255%'>
with: </span><b><span style='font-size:9.0pt;line-height:255%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:255%'>\A\D</span><b><span style='font-size:
9.0pt;line-height:255%;color:#006600'>+</span></b><span style='font-size:9.0pt;
line-height:255%'>\z</span><b><span style='font-size:9.0pt;line-height:255%;
color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:255%'>,
message: </span><span style='font-size:9.0pt;line-height:255%;color:#996600'>&quot;Numbers
are not allowed&quot;</span><span style='font-size:9.0pt;line-height:255%'> </span><b><span
style='font-size:9.0pt;line-height:255%;color:#006600'>}</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.45pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>The reverse also replies, and you can
specify that a value should <i>not</i> match a regular expression with the <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>without: </span>option</p>

<h2 style='margin-top:0in;margin-right:7.45pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323965">Section 12.3: Validating presence of an attribute</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This helper validates that the specified attributes are not
empty.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image249.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can use the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>absence</span> helper to validate that the specified
attributes are absent. It uses the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>present?</span> method to check for nil or empty
values.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image250.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><b>Note:</b> In case the attribute is a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>boolean</span> one,
you cannot make use of the usual presence validation (the attribute would not
be valid for a <b><span style='font-size:9.0pt;line-height:112%;color:blue;
background:#FAFAFA'>false</span></b> value). You can get this done by using an
inclusion validation:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image251.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323966">Section 12.4: Custom validations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.4pt;
margin-left:.25pt'>You can add your own validations adding new classes
inheriting from <b><span style='font-size:9.0pt;line-height:112%;color:#6666FF;
background:#FAFAFA'>ActiveModel::Validator</span></b> or from <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveModel::EachValidator</span></b>.
Both methods are similar but they work in a slightly different ways:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:98.55pt;margin-bottom:
14.0pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><span
style='font-size:9.0pt;line-height:107%;color:#6666FF;background:#FAFAFA'>ActiveModel::Validator</span>
and </b><b><span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>validates_with</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Implement the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>validate</span> method which takes a record as an argument
and performs the validation on it. Then use <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>validates_with</span> with the class on
the model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:16.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=247
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image252.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you prefer to use your new validator using the common <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>validate</span>
method on a single param, create a class inheriting from <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveModel::EachValidator</span></b>
and implement the <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>validate_each</span> method which takes three</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:11.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=255
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image253.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323967">Section 12.5: Validates inclusion of an attribute</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>in</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can check if a value is included in an array using the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>inclusion:</span>
helper. The <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>:</span>
option and its alias, <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:within </span></b>show the set of acceptable
values.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><b><span
style='font-size:9.0pt;line-height:110%;color:#9966CC'>class</span></b><span
style='font-size:9.0pt;line-height:110%'> Country </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>&lt;</span></b><span
style='font-size:9.0pt;line-height:110%'> ApplicationRecord</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:97.35pt;margin-bottom:
17.35pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895770112'><span style='left:0px;position:
absolute;left:0px;top:-27652px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>  validates </span><b><span
style='font-size:9.0pt;line-height:110%;color:#FF3333'>:continent</span></b><span
style='font-size:9.0pt;line-height:110%'>, inclusion: </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>{</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#9966CC'>in</span></b><span style='font-size:9.0pt;
line-height:110%'>: </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>%</span></b><span style='font-size:9.0pt;line-height:110%'>w</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>Africa Antartica Asia
Australia                                             Europe North America
South America</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>} </span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#9966CC'>end</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To check if a value is not included in an array, use the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>exclusion:</span>
helper</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image255.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323968">Section 12.6: Grouping validation</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Sometimes it is useful to have multiple validations use one
condition. It can be easily achieved using with_options.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image256.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;line-height:145%'>All validations inside of the with_options
block will have automatically passed the condition if: :is_admin?</p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323969">Section 12.7:
Validating numericality of an attribute</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This validation restricts the insertion of only numeric
values.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image257.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Besides <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:only_integer</span></b>, this helper also
accepts the following options to add constraints to acceptable values:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image258.gif"
align=left hspace=12><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:greater_than</span></b> - Specifies the
value must be greater than the supplied value. The default error message for
this option is &quot;must be greater than %{count}&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:greater_than_or_equal_to</span></b> -
Specifies the value must be greater than or equal to the supplied value. The
default error message for this option is &quot;must be greater than or equal to
%{count}&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:equal_to</span></b> - Specifies the value
must be equal to the supplied value. The default error message for this option
is &quot;must be equal to %{count}&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:less_than</span></b> - Specifies the value
must be less than the supplied value. The default error message for this option
is &quot;must be less than %{count}&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:less_than_or_equal_to</span></b> - Specifies
the value must be less than or equal to the supplied value. The default error
message for this option is &quot;must be less than or equal to %{count}&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:other_than</span></b> - Specifies the value
must be other than the supplied value. The default error message for this
option is &quot;must be other than %{count}&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:odd</span></b> - Specifies the value must be
an odd number if set to true. The default error message for this option is
&quot;must be odd&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.0pt;
margin-left:20.9pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:even</span></b> - Specifies the value must
be an even number if set to true. The default error message for this option is
&quot;must be even&quot;.</p>

<p class=MsoNormal style='text-indent:0in'><span style='font-size:11.0pt;
line-height:112%'>        <img border=0 width=3 height=51 id="Group 261003"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image259.gif"></span>              By
default, numericality doesn't allow nil values. You can use allow_nil: true
option to permit it.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323970">Section 12.8: Validate uniqueness of an attribute</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This helper validates that the attribute's value is unique
right before the object gets saved.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image260.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>There is a <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:scope</span></b> option that you can use to
specify one or more attributes that are used to limit the uniqueness check:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image261.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>There is also a <b><span style='font-size:9.0pt;line-height:
112%;color:#FF3333;background:#FAFAFA'>:case_sensitive</span></b> option that
you can use to define whether the uniqueness constraint will be case sensitive
or not. This option defaults to <b><span style='font-size:9.0pt;line-height:
112%;color:blue;background:#FAFAFA'>true</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image262.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323971">Section 12.9: Skipping Validations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Use following methods if you want to skip the validations.
These methods will save the object to the database even if it is invalid.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12>decrement!</p>

<p class=MsoNormal style='margin-top:0in;margin-right:366.55pt;margin-bottom:
1.25pt;margin-left:20.9pt'>decrement_counter increment!</p>

<p class=MsoNormal style='margin-top:0in;margin-right:420.0pt;margin-bottom:
12.4pt;margin-left:20.9pt'>increment_counter toggle! touch update_all
update_attribute update_column update_columns update_counters</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can also skip validation while saving by passing <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>validate</span> as
an argument to <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>save</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image263.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323972">Section 12.10: Confirmation of attribute</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You should use this when you have two text fields that
should receive exactly the same content. For example, you may want to confirm
an email address or a password. This validation creates a <b><i>virtual</i></b>
attribute whose name is the name of the field that has to be confirmed with <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>_confirmation</span>
appended.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image264.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'><b>Note</b> This check is performed only if <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>email_confirmation</span>
is not nil.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To require confirmation, make sure to add a presence check
for the confirmation attribute.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image265.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:285.7pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'><a
href="http://guides.rubyonrails.org/active_record_validations.html"><span
style='color:#D4072F'>Source</span></a></p>

<h2 style='margin-top:0in;margin-right:285.7pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc323973">Section 12.11: Using :on option</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:on</span></b> option lets you specify when
the validation should happen. The default behavior for all the built-in
validation helpers is to be run on save (both when you're creating a new record
and when you're updating it).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image266.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323974">Section 12.12: Conditional validation</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Sometimes you may need to validate record only under certain
conditions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image267.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you conditional is really small, you can use a Proc:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image268.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For negative conditional you can use <b><span
style='font-size:9.0pt;line-height:112%;color:#9966CC;background:#FAFAFA'>unless</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image269.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can also pass a string, which will be executed via <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>instance_eval</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image270.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323975">Chapter 13: ActiveRecord Query Interface</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>ActiveRecord is the M in MVC which is the layer of the
system responsible for representing business data and logic. The technique that
connects the rich objects of an application to tables in a relational database
management system is <b>O</b>bject <b>R</b>elational <b>M</b>apper(<b>ORM</b>).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>ActiveRecord will perform queries on the database for you
and is compatible with most database systems.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;line-height:145%'>Regardless of which database system you're
using, the ActiveRecord method format will always be the same.</p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323976">Section 13.1:
.where</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>where</span> method is available on any <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>
model and allows querying the database for a set of records matching the given
criteria.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>where</span> method accepts a hash where the keys
correspond to the column names on the table that the model represents.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>As a simple example, we will use the following model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image271.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To find all people with the first name of <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Sven</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image272.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.35pt;
margin-left:.25pt'>To find all people with the first name of <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Sven</span> and
last name of <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Schrodinger</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>people = Person.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>first_name: </span><span style='font-size:9.0pt;line-height:
110%;color:#996600'>'Sven'</span><span style='font-size:9.0pt;line-height:110%'>,
last_name: </span><span style='font-size:9.0pt;line-height:110%;color:#996600'>'Schrodinger'</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.35pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895767040'><span style='left:0px;position:absolute;
left:0px;top:-30931px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>people.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>to_sql</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># &quot;SELECT * FROM people WHERE first_name='Sven' AND
last_name='Schrodinger'&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:31.8pt;margin-bottom:
5.25pt;margin-left:.25pt;line-height:174%'>In the above example, the sql output
shows that records will only be returned if both the <span style='font-size:
9.0pt;line-height:174%;background:#FAFAFA'>first_name</span> and the <span
style='font-size:9.0pt;line-height:174%;background:#FAFAFA'>last_name</span>
match. <b>query with OR condition</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=321 style='width:240.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  .9pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>first_name == </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>'Bruce'</span></p>
  </td>
  <td width=26 valign=top style='width:19.15pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> OR </p>
  </td>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>last_name == </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>'Wayne'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:202.3pt;margin-bottom:
14.2pt;margin-left:.25pt'>To find records with </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'first_name = ? or last_name = ?'</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'Bruce'</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'Wayne'</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895766016'><span style='left:0px;position:absolute;
left:0px;top:-31095px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># SELECT
&quot;users&quot;.* FROM &quot;users&quot; WHERE (first_name = 'Bruce' or
last_name = 'Wayne')</span></i></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323977">Section 13.2: .where with an array</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>WHERE column_name </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>IN</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>a, b, c, ...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:20.75pt;margin-bottom:
12.25pt;margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>where</span> method on any ActiveRecord model can be used
to generate SQL of the form <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>()</span></b>. This is achieved by passing an
array as argument.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>As a simple example, we will use the following model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=63
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image273.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image274.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>If the array contains a <b><span style='font-size:9.0pt;
line-height:112%;color:blue;background:#FAFAFA'>nil</span></b>, the SQL will be
modified to check if the column is <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>null</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>people = Person.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>first_name: </span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'Mark'</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'Mary'</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>nil</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>])</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895764992'><span style='left:0px;position:absolute;
left:0px;top:-31467px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>people.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>to_sql</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># &quot;SELECT * FROM people WHERE first_name IN ('Mark', 'Mary')
OR first_name IS NULL&quot;</span></i></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323978">Section 13.3: Scopes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Scopes act as predefined filters on <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span> models.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>A scope is defined using the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>scope</span> class method.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>As a simple example, we will use the following model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image275.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Scopes can be called directly off the model class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image276.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Scopes can be chained:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image277.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:156.15pt;margin-bottom:
1.25pt;margin-left:4.0pt;text-indent:-3.75pt;line-height:254%'><span
style='position:relative;z-index:-1895763968'><span style='left:0px;position:
absolute;left:0px;top:-32008px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>The
<span style='font-size:9.0pt;line-height:254%;background:#FAFAFA'>where</span>
method and other query type methods can also be chained: <span
style='font-size:9.0pt;line-height:254%'>mary_smith = Person.</span><span
style='font-size:9.0pt;line-height:254%;color:#9900CC'>with_last_name</span><b><span
style='font-size:9.0pt;line-height:254%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:254%;color:#996600'>'Smith'</span><b><span
style='font-size:9.0pt;line-height:254%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:254%'>.</span><span style='font-size:9.0pt;
line-height:254%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;
line-height:254%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:254%'>first_name: </span><span style='font-size:9.0pt;line-height:
254%;color:#996600'>'Mary'</span><b><span style='font-size:9.0pt;line-height:
254%;color:#006600'>)</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Behind the scenes, scopes are simply syntactic sugar for a
standard class method. For example, these methods are functionally identical:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image278.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:221.6pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:217%'><b>Default Scope </b>in your model
to set a default scope for all operations on the model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:13.55pt;margin-bottom:
29.15pt;margin-left:24.0pt'><img width=3 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image279.gif"
align=left hspace=12>There is one notable difference between the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>scope</span> method
and a class method: <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>scope</span>-defined scopes will <i>always</i> return an <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveRecord::Relation</span></b>,
even if the logic within returns nil. Class methods, however, have no such
safety net and can break chainability if they return something else.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323979">Section 13.4: Get first and last record</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Rails have very easy way to get <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>first</span> and <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>last</span> record from database.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To get the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>first</span> record from <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>users</span> table we need to type
following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image280.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>It will generate following <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>sql</span> query:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image281.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>And will return following record:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895761920'><span style='left:0px;position:absolute;
left:0px;top:-32702px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#&lt;User:0x007f8a6db09920
id: 1, first_name: foo, created_at: Thu, 16 Jun 2016 21:43:03 UTC +00:00,
updated_at: Thu, 16 Jun 2016 21:43:03 UTC +00:00 &gt;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To get the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>last</span> record from <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>users</span> table we need to type
following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image282.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>It will generate following <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>sql</span> query:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:159.75pt;margin-bottom:
0in;margin-left:.25pt;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895760896'><span style='left:0px;position:
absolute;left:0px;top:-32866px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:240%;color:blue'>SELECT</span></b><span
style='font-size:9.0pt;line-height:240%'>  </span><span style='font-size:9.0pt;
line-height:240%;color:red'>`users`</span><span style='font-size:9.0pt;
line-height:240%;color:#CCCCCC'>.*</span><span style='font-size:9.0pt;
line-height:240%'> </span><b><span style='font-size:9.0pt;line-height:240%;
color:blue'>FROM</span></b><span style='font-size:9.0pt;line-height:240%'> </span><span
style='font-size:9.0pt;line-height:240%;color:red'>`users`</span><span
style='font-size:9.0pt;line-height:240%'>  </span><b><span style='font-size:
9.0pt;line-height:240%;color:blue'>ORDER</span></b><span style='font-size:9.0pt;
line-height:240%'> </span><b><span style='font-size:9.0pt;line-height:240%;
color:blue'>BY</span></b><span style='font-size:9.0pt;line-height:240%'> </span><span
style='font-size:9.0pt;line-height:240%;color:red'>`users`</span><span
style='font-size:9.0pt;line-height:240%;color:#CCCCCC'>.</span><span
style='font-size:9.0pt;line-height:240%;color:red'>`id`</span><span
style='font-size:9.0pt;line-height:240%'> </span><b><span style='font-size:
9.0pt;line-height:240%;color:blue'>DESC</span></b><span style='font-size:9.0pt;
line-height:240%'> </span><b><span style='font-size:9.0pt;line-height:240%;
color:blue'>LIMIT</span></b><span style='font-size:9.0pt;line-height:240%'> </span><span
style='font-size:9.0pt;line-height:240%;color:#666666'>1 </span>And will return
following record:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895759872'><span style='left:0px;position:absolute;
left:0px;top:-32949px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#&lt;User:0x007f8a6db09920
id: 10, first_name: bar, created_at: Thu, 16 Jun 2016 21:43:03 UTC +00:00,
updated_at: Thu, 16 Jun 2016 21:43:03 UTC +00:00 &gt;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Passing an integer to <b>first</b> and <b>last</b> method
creates a <b>LIMIT</b> query and returns array of objects.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image283.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>It will generate following <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>sql</span> query.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image284.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image285.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>It will generate following <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>sql</span> query.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:3.75pt;text-indent:0in;line-height:107%'><span style='position:
relative;z-index:-1895758848'><span style='left:0px;position:absolute;
left:0px;top:-33248px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:107%;color:blue'>SELECT</span></b><span
style='font-size:9.0pt;line-height:107%'>  </span><span style='font-size:9.0pt;
line-height:107%;color:red'>&quot;users&quot;</span><span style='font-size:
9.0pt;line-height:107%;color:#CCCCCC'>.*</span><span style='font-size:9.0pt;
line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:107%;
color:blue'>FROM</span></b><span style='font-size:9.0pt;line-height:107%'> </span><span
style='font-size:9.0pt;line-height:107%;color:red'>&quot;users&quot;</span><span
style='font-size:9.0pt;line-height:107%'>  </span><b><span style='font-size:
9.0pt;line-height:107%;color:blue'>ORDER</span></b><span style='font-size:9.0pt;
line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:107%;
color:blue'>BY</span></b><span style='font-size:9.0pt;line-height:107%'> </span><span
style='font-size:9.0pt;line-height:107%;color:red'>&quot;users&quot;</span><span
style='font-size:9.0pt;line-height:107%;color:#CCCCCC'>.</span><span
style='font-size:9.0pt;line-height:107%;color:red'>&quot;id&quot;</span><span
style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
9.0pt;line-height:107%;color:blue'>DESC</span></b><span style='font-size:9.0pt;
line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:107%;
color:blue'>LIMIT</span></b><span style='font-size:9.0pt;line-height:107%'> </span><span
style='font-size:9.0pt;line-height:107%;color:#666666'>5</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323980">Section 13.5: Ordering</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>order</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can order <b>ActiveRecord</b> query results by using <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>.</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image286.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If not specified, ordering will be performed in ascending
order. You can specify it by doing:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image287.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>order</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>.</span></b> also accepts a string, so you could also do</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image288.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>As the string is raw SQL, you can also specify a table and
not only an attribute. Assuming you want to order <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>users </span>according to their <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>role</span> name,
you can do this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=192
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image289.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image290.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323981">Section 13.6: where.not</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>where.</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#9966CC'>not</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>where</span> clauses can be negated using the  syntax:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image291.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Supported by ActiveRecord 4.0 and later.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323982">Section 13.7: Includes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>ActiveRecord with <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>includes</span> ensures that all of the specified
associations are loaded using the minimum possible number of queries. So when
querying a table for data with an associated table, both tables are loaded into
memory.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=403
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image292.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323983">Section 13.8: Joins</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>joins</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:27.0pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>()</span></b> allows you to join tables to
your current model. For ex.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image293.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>will produce the following SQL query:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:38.25pt;margin-bottom:
0in;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895757824'><span style='left:0px;position:
absolute;left:0px;top:-34806px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:240%;color:#996600'>&quot;SELECT &quot;</span><span
style='font-size:9.0pt;line-height:240%'>users</span><span style='font-size:
9.0pt;line-height:240%;color:#996600'>&quot;.* FROM &quot;</span><span
style='font-size:9.0pt;line-height:240%'>users</span><span style='font-size:
9.0pt;line-height:240%;color:#996600'>&quot; INNER JOIN &quot;</span><span
style='font-size:9.0pt;line-height:240%'>posts</span><span style='font-size:
9.0pt;line-height:240%;color:#996600'>&quot; ON &quot;</span><span
style='font-size:9.0pt;line-height:240%'>posts</span><span style='font-size:
9.0pt;line-height:240%;color:#996600'>&quot;.&quot;</span><span
style='font-size:9.0pt;line-height:240%'>user_id</span><span style='font-size:
9.0pt;line-height:240%;color:#996600'>&quot; = &quot;</span><span
style='font-size:9.0pt;line-height:240%'>users</span><span style='font-size:
9.0pt;line-height:240%;color:#996600'>&quot;.&quot;</span><span
style='font-size:9.0pt;line-height:240%'>id</span><span style='font-size:9.0pt;
line-height:240%;color:#996600'>&quot;&quot; </span>Having table joined, you
will have access to it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image294.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>joins</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>Pay attention on plural form. If your relation is <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:has_many</span></b>,
then the <b><span style='font-size:9.0pt;line-height:112%;color:#006600;
background:#FAFAFA'>()</span></b> argument should be pluralized. Otherwise, use
singular.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.5pt;
margin-left:.25pt'>Nested <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>joins</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:145.6pt;margin-bottom:
.2pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895756800'><span style='left:0px;position:
absolute;left:0px;top:-35033px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:240%'>User.</span><span style='font-size:
9.0pt;line-height:240%;color:#9900CC'>joins</span><b><span style='font-size:
9.0pt;line-height:240%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:240%'>posts: </span><b><span style='font-size:9.0pt;line-height:
240%;color:#FF3333'>:images</span></b><b><span style='font-size:9.0pt;
line-height:240%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:240%'>.</span><span style='font-size:9.0pt;line-height:240%;
color:#9900CC'>where</span><b><span style='font-size:9.0pt;line-height:240%;
color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:240%'>images:
</span><b><span style='font-size:9.0pt;line-height:240%;color:#006600'>{</span></b><span
style='font-size:9.0pt;line-height:240%'> caption: </span><span
style='font-size:9.0pt;line-height:240%;color:#996600'>'First post'</span><span
style='font-size:9.0pt;line-height:240%'> </span><b><span style='font-size:
9.0pt;line-height:240%;color:#006600'>}) </span></b>which will produce:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895755776'><span style='left:0px;position:absolute;
left:0px;top:-35075px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;SELECT &quot;</span><span
style='font-size:9.0pt;line-height:110%'>users</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;.* FROM &quot;</span><span
style='font-size:9.0pt;line-height:110%'>users</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot; INNER JOIN &quot;</span><span
style='font-size:9.0pt;line-height:110%'>posts</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot; ON &quot;</span><span
style='font-size:9.0pt;line-height:110%'>posts</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;.&quot;</span><span
style='font-size:9.0pt;line-height:110%'>user_id</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot; = &quot;</span><span
style='font-size:9.0pt;line-height:110%'>users</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;.&quot;</span><span
style='font-size:9.0pt;line-height:110%'>id</span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>&quot; INNER JOIN</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;</span><span style='font-size:9.0pt;
line-height:110%'>images</span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>&quot; ON &quot;</span><span style='font-size:9.0pt;line-height:
110%'>images</span><span style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;.&quot;</span><span
style='font-size:9.0pt;line-height:110%'>post_id</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot; = &quot;</span><span
style='font-size:9.0pt;line-height:110%'>images</span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;.&quot;</span><span
style='font-size:9.0pt;line-height:110%'>id</span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>&quot;&quot;</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323984">Section 13.9: Limit and O&#57379;set</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>You can use <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>limit</span> to tell the number of records to be fetched,
and use <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>offset</span>
to tell the number of records to skip before starting to return the records.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For Example</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image295.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>It will generate following sql query.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image296.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>As offset is not mentioned in above query so it will return
first three records.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.85pt;margin-bottom:
.15pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895754752'><span style='left:0px;position:
absolute;left:0px;top:-35375px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image297.gif"></span></span><span
style='font-size:9.0pt;line-height:240%'>User.</span><span style='font-size:
9.0pt;line-height:240%;color:#9900CC'>limit</span><b><span style='font-size:
9.0pt;line-height:240%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:240%;color:#006666'>5</span><b><span style='font-size:9.0pt;
line-height:240%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:240%'>.</span><span style='font-size:9.0pt;line-height:240%;
color:#9900CC'>offset</span><b><span style='font-size:9.0pt;line-height:240%;
color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:240%;
color:#006666'>30</span><b><span style='font-size:9.0pt;line-height:240%;
color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:240%'> </span><i><span
style='font-size:9.0pt;line-height:240%;color:green'>#returns 5 records
starting from 31th i.e from 31 to 35 </span></i>It will generate following sql
query.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image298.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323985">Section 13.10: .find_by</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>You can find records by any field in your table using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>find_by</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>So, if you have a <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>User</span> model with a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>first_name</span> attribute you can do:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image299.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>Mind that <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>find_by</span> doesn't throw any exception by default. If
the result is an empty set, it returns <b><span style='font-size:9.0pt;
line-height:112%;color:blue;background:#FAFAFA'>nil</span></b> instead of <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>find</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt;line-height:147%'>If the exception is needed may use <span
style='font-size:9.0pt;line-height:147%;background:#FAFAFA'>find_by!</span>
that raises an <b><span style='font-size:9.0pt;line-height:147%;color:#6666FF;
background:#FAFAFA'>ActiveRecord::RecordNotFound</span></b> error like <span
style='font-size:9.0pt;line-height:147%;background:#FAFAFA'>find</span>.</p>

<h2 style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:147%'><a name="_Toc323986">Section 13.11:
.delete_all</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>delete_all</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>delete_all</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>before_</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you need to delete a lot of records quickly, <b>ActiveRecord</b>
gives <b><span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>.</span></b>
method. to be called directly on a model, to delete all records in that table,
or a collection. Beware though, as <b><span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>.</span></b> does not instantiate any object hence
does not provide any callback (<b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>*</span></b> and <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>after_destroy</span> don't get
triggered).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image300.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323987">Section 13.12: ActiveRecord case insensitive
search</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>If you need to search an ActiveRecord model for similar
values, you might be tempted to use <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>LIKE</span> or <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>ILIKE</span> but this isn't portable
between database engines. Similarly, resorting to always downcasing or upcasing
can create performance issues.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can use ActiveRecord's underlying Arel <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>matches</span>
method to do this in a safe way:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image301.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:58.75pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>Arel will apply the appropriate LIKE or
ILIKE construct for the database engine configured.</p>

<h2 style='margin-top:0in;margin-right:58.75pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc323988">Section 13.13:
.group and .count</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>We have a <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Product</span> model and we want to group them by their <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>category</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image302.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This will query the database as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:110%'><span style='position:relative;z-index:-1895753728'><span
style='left:0px;position:absolute;left:0px;top:-36269px;width:718px;height:
1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;product&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#CCCCCC'>.</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;category&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>FROM</span></b><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:red'>&quot;product&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>GROUP</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>BY</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;product&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>.</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;category&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Make sure that the grouped field is also selected. Grouping
is especially useful for counting the occurrence - in this case - of <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>categories</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image303.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.9pt;
margin-left:.25pt'>As the query shows, it will use the database for counting,
which is much more efficient, than retrieving all record first and do the
counting in the code:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:110%'><span style='position:relative;z-index:-1895752704'><span
style='left:0px;position:absolute;left:0px;top:-36456px;width:718px;height:
1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>SELECT</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>COUNT</span></b><span style='font-size:9.0pt;
line-height:110%;color:#AAAAAA'>(</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;products&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#CCCCCC'>.</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;category&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#AAAAAA'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>AS</span></b><span style='font-size:9.0pt;line-height:110%'>
count_categories</span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>,</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;products&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>.</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;category&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>AS</span></b><span style='font-size:9.0pt;
line-height:110%'> products_category</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>FROM</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;products&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>GROUP</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>BY</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;products&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>.</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;category&quot;</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323989">Section 13.14: .distinct (or .uniq)</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>distinct</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you want to remove duplicates from a result, you can use <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>.</span><b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>()</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image304.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This queries the database as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image305.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>uniq</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>.</span><b><span style='font-size:9.0pt;line-height:112%;color:#006600;
background:#FAFAFA'>()</span></b> has the same effect. With Rails 5.0 it got
deprecated and it will be removed from Rails with version 5.1. The reason is,
that the word <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>unique</span>
doesn't have the same meaning as distinct and it can be misleading. Furthermore
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>distinct</span>
is closer to the SQL syntax.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323990">Chapter 14: ActionMailer</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>Action Mailer allows you to send emails from your
application using mailer classes and views. Mailers work very similarly to
controllers. They inherit from ActionMailer::Base and live in app/mailers, and
they have associated views that appear in app/views.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323991">Section 14.1: Basic Mailer</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This example uses four different files:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:417.4pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>The User model The User mailer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>The html template for the email</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:20.9pt'>The plain-text template for the email</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In this case, the user model calls the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>approved</span>
method in the mailer and passes the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>post</span> that has been approved (the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>approved</span>
method in the model may be called by a callback, from a controller method,
etc). Then, the mailer generates the email from either the html or plain-text
template using the information from the passed-in <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>post</span> (e.g. the title). By default,
the mailer uses the template with the same name as the method in the mailer
(which is why both the mailer method and the templates have the name 'approved').
<b>user_mailer.rb </b><span style='font-size:11.0pt;line-height:112%'><img
border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image306.gif"></span><span
style='font-size:9.0pt;line-height:112%'>  </span><b><span style='font-size:
9.0pt;line-height:112%;color:#9966CC'>end </span>user.rb</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image307.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:10.0pt;line-height:107%;color:black'>approved.html.erb</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image308.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:3.75pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>approved.text.erb</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:129.75pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895750656'><span style='left:0px;position:
absolute;left:0px;top:-37630px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>Congrats </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>&lt;%</span></b><span
style='font-size:9.0pt;line-height:110%'>= </span><b><span style='font-size:
9.0pt;line-height:110%;color:#0066FF'>@user</span></b><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>name</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>%&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'>! Your post (#</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>&lt;%</span></b><span
style='font-size:9.0pt;line-height:110%'>= </span><b><span style='font-size:
9.0pt;line-height:110%;color:#0066FF'>@title</span></b><span style='font-size:
9.0pt;line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>%&gt;</span></b><span style='font-size:9.0pt;line-height:
110%'>) has been approved! We look forward to your future posts!</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323992">Section 14.2: Generating a new mailer</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To generate a new mailer, enter the following command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image309.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>mailers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>post_mailer.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will generate a blank template file in  named <i>PostMailer</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image310.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Two layout files will also be generated for the email view,
one for the html format and one for the text format.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:72.85pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>If you prefer not to use the generator, you
can create your own mailers. Make sure they inherit from <b><span
style='font-size:9.0pt;line-height:133%;color:#6666FF;background:#FAFAFA'>ActionMailer::Base</span></b></p>

<h2 style='margin-top:0in;margin-right:72.85pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc323993">Section 14.3: ActionMailer Interceptor</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Action Mailer provides hooks into the interceptor methods.
These allow you to register classes that are called during the mail delivery
life cycle.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>An interceptor class must implement the
:delivering_email(message) method which will be called before the email is
sent, allowing you to make modifications to the email before it hits the
delivery agents. Your class should make any needed modifications directly to
the passed in Mail::Message instance.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>It can be useful for developers to send email to themselves
not real users.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Example of registering an actionmailer interceptor:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image311.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323994">Section 14.4: Adding Attachments</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>ActionMailer</span> also allows attaching files.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image312.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By default, attachments will be encoded with <b><span
style='font-size:9.0pt;line-height:112%;color:#CC00FF;background:#FAFAFA'>Base64</span></b>.
To change this, you can add a hash to the attachments method.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=94
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image313.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image314.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can also add inline attachments</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image315.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323995">Section 14.5: ActionMailer Callbacks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>ActionMailer supports three callbacks</p>

<p class=MsoNormal style='margin-top:0in;margin-right:389.4pt;margin-bottom:
12.25pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>before_action after_action around_action</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Provide these in your Mailer class</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><b><span
style='font-size:9.0pt;line-height:110%;color:#9966CC'>class</span></b><span
style='font-size:9.0pt;line-height:110%'> UserMailer </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>&lt;</span></b><span
style='font-size:9.0pt;line-height:110%'> ApplicationMailer</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.35pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895748608'><span style='left:0px;position:absolute;
left:0px;top:-38893px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>  after_action </span><b><span
style='font-size:9.0pt;line-height:110%;color:#FF3333'>:set_delivery_options</span></b><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#FF3333'>:prevent_delivery_to_guests</span></b><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#FF3333'>:set_business_headers</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=204
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image316.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323996">Section 14.6: Generate a Scheduled Newsletter</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Create the <b>Newsletter</b> model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=120
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image317.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Create the <b>Newsletter</b> controller:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=198
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image318.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=252
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image319.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>After that, change the <b>create.html.erb</b> view to the
nex name. We will convert this file to and <b>partial view</b> which will be
stored inside the <b>Footer</b>. The name will be <b>_form.html.erb</b>.</p>

<p class=MsoNormal style='margin-bottom:1.35pt;text-indent:0in;line-height:
107%'><b>Change name file from:                                        To:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:152.6pt;margin-bottom:
0in;margin-left:.25pt;line-height:233%'>app/views/newsletters/create.html.erb
app/views/newsletters/_form.html.erb After that set the routes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image320.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Later on, we need to set the form we will use to save each
mail:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=284
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image321.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And after that, insert on the footer:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image322.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Now, install the -<b>letter_opener</b>- to can preview email
in the default browser instead of sending it. This means you do not need to set
up email delivery in your development environment, and you no longer need to
worry about accidentally sending a test email to someone else's address.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>First add the gem to your development environment and run
the bundle command to install it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image323.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then set the delivery method in the Development Environment:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image324.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now, create an <b>Mailer Structure</b> to manage the whole
mailers which we will work. In terminal</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image325.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>And inside the <b>UserMailer</b>, we have to create a method
called <b>Newsletter Mailer</b> which will be created to contain inside on the
lastest blog post and will be fired with a rake action. We will assume that you
had a blog structure created before.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=235
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image326.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>After that, create the <b>Mailer Template</b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=337
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image327.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=254
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image328.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Since we want to send the email as a separate process, let<span
style='font-family:"Arial",sans-serif'>’</span>s create a Rake task to fire off
the email. Add a new file called email_tasks.rake to lib/tasks directory of
your Rails application:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=120
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image329.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>The send_digest_email: :environment means to load the Rails
environment before running the task, so you can access the application classes
(like UserMailer) within the task.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Now, running the command rake -T will list the newly created
Rake task. Test everything works by running the task and checking whether the
email is sent or not.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To test if the mailer method works, run the rake command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image330.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>At this point, we have a working rake task which can be
scheduled using <b>crontab</b>. So we will install the <b>Whenever Gem</b>
which is used to provide a clear syntax for writing and deploying cron jobs.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image331.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>After that, run the next command to create an initial
config/schedule.rb file for you (as long as the config folder is already
present in your project).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=87
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image332.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Now, inside the schedule file, we have to create our <b>CRON
JOB</b> and call the mailer method inside determining the CRON JOB to operate
some tasks without assistance and in a selected range of time. You can use
different types of syntax as is explained on this <a
href="https://github.com/javan/whenever"><span style='color:#D4072F'>link</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=12 id="Group 264819"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image333.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=87
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image334.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=358 id="Picture 16201"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image335.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=441 id="Picture 16203"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image336.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Now to test the <b>Cron Job</b> was succesfully created we
can use the next command to read since terminal, our scheduled job in CRON
SYNTAX:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=41
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image337.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.45pt;
margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:110%'><span style='position:relative;z-index:-1895747584'><span
style='left:0px;position:absolute;left:0px;top:-43564px;width:718px;height:
1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image338.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>30 4 <b>*</b> <b>*</b> <b>*</b> <b>/</b>bin<b>/</b></span><b><span
style='font-size:9.0pt;line-height:110%;color:#C20CB9'>bash</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#660033'>-l</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#660033'>-c</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'cd
/Users/your_mac_user/Desktop/your_project &amp;&amp; RAILS_ENV=production
bundle exec rake weekly_newsletter_email --silent'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Now, to run the test in Development Environment, is wise to
set the next line on the <b>application.rb</b> principal file to let the
application knows where are the models it will use.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image339.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Now to let <b>Capistrano V3</b> save the new <b>Cron Job</b>
inside the server and the trigger which will fired up the execution of this
task, we have to add the next requirement:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image340.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>And insert into the <b>deploy</b> file the identifier which <b>CRON
JOB</b> will use about the <b>environment</b> and the name of the <b>application</b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image341.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And ready, after save changes on each file, run the
capistrano deploy command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image342.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>And now your JOB was created and calendarize to run the
Mailer Method which is what i want and in the range of time we set on this
files.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc323997">Chapter 15: Rails generate commands</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.95pt;margin-left:
0in;text-indent:0in'><span style='font-size:10.0pt;line-height:107%;color:black'>Parameter                                                                                                             Details</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>--</span></b><span style='font-size:
  9.0pt;line-height:107%'>help</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:3.35pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>-h</span>/Get help on any generator command</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>--</span></b><span style='font-size:
  9.0pt;line-height:107%'>pretend</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:3.2pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>-p</span>/Pretend Mode: Run generator but will not create or change
any files</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:67.35pt'>'field-name' is the name of the column to be created and
'type' is the data-type of column. The</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'><span style='font-size:
9.0pt;line-height:109%;background:#FAFAFA'>field:type</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:15.35pt;
margin-left:67.35pt'>possible values for 'type' in <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>field:type</span> are given in the Remarks
section.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>options</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=216 valign=top style='width:2.25in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails generate GENERATOR_NAME </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>[</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>args</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.15pt;
margin-left:.25pt'><span style='position:relative;z-index:-1895746560'><span
style='left:0px;position:absolute;left:305px;top:-44314px;width:7px;height:
1px'><img width=7 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image196.gif"></span></span>Usage:
<b><span style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>]</span></b><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>[]</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:180.85pt;margin-bottom:
0in;margin-left:.25pt;line-height:146%'>Use <span style='font-size:9.0pt;
line-height:146%;background:#FAFAFA'>rails generate</span> to list available
generators. Alias: <span style='font-size:9.0pt;line-height:146%;background:
#FAFAFA'>rails g</span>.</p>

<h2 style='margin-top:0in;margin-right:180.85pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:146%'><a name="_Toc323998">Section 15.1:
Rails Generate Controller</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>we can create a new controller with <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>rails g controller</span> command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image343.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>The controller generator is expecting parameters in the form
of <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>generate
controller ControllerName action1 action2</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The following creates a Greetings controller with an action
of hello.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image344.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You will see the following output</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image345.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This generates the following</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.8pt;margin-left:0in;
text-indent:0in'><span style='font-size:11.0pt;line-height:107%;color:black;
font-weight:normal'>                  </span><span style='font-size:10.0pt;
line-height:107%;color:black'>File                                            Example</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=166 style='width:124.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=166 valign=top style='width:124.2pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>greetings_controller.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:321.05pt;margin-bottom:
3.1pt;margin-left:.25pt'>Controller File</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>hello.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:369.65pt;margin-bottom:
3.1pt;margin-left:.25pt'>View File</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=202 style='width:2.1in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=202 valign=top style='width:2.1in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>greetings_controller_test.</span><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:294.05pt;margin-bottom:
3.1pt;margin-left:.25pt'>Functional Test File</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>greetings_helper.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:342.65pt;margin-bottom:
3.1pt;margin-left:.25pt'>View Helper</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>greetings.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:358.8pt;margin-bottom:
15.0pt;margin-left:.25pt'>JavaScript File</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>It will also add routes for each action in <span
style='font-size:9.0pt;line-height:112%'>routes.</span><span style='font-size:
9.0pt;line-height:112%;color:#9900CC'>rb</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc323999">Section 15.2: Rails Generate Migration</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:86.5pt;margin-bottom:
1.25pt;margin-left:4.0pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895745536'><span style='left:0px;position:
absolute;left:0px;top:-45124px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>You
can generate a rails migration file from the terminal using the following
command: <span style='font-size:9.0pt;line-height:253%'>rails generate
migration NAME </span><b><span style='font-size:9.0pt;line-height:253%;
color:#006600'>[</span></b><span style='font-size:9.0pt;line-height:253%'>field</span><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>[</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#FF3333'>:type</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>][</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#FF3333'>:index</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>]</span></b><span
style='font-size:9.0pt;line-height:253%'> field</span><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>[</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#FF3333'>:type</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>][</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#FF3333'>:index</span></b><b><span
style='font-size:9.0pt;line-height:253%;color:#006600'>]]</span></b><span
style='font-size:9.0pt;line-height:253%'> </span><b><span style='font-size:
9.0pt;line-height:253%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:253%'>options</span><b><span style='font-size:9.0pt;line-height:
253%;color:#006600'>]</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.0pt;
margin-left:.25pt'>For a list of all the options supported by the command, you
could run the command without any arguments as in <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rails generate migration</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:82.35pt;margin-bottom:
1.25pt;margin-left:4.0pt;text-indent:-3.75pt;line-height:255%'><span
style='position:relative;z-index:-1895744512'><span style='left:0px;position:
absolute;left:0px;top:-45266px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>For
example, if you want to add <span style='font-size:9.0pt;line-height:255%;
background:#FAFAFA'>first_name</span> and <span style='font-size:9.0pt;
line-height:255%;background:#FAFAFA'>last_name</span> fields to <span
style='font-size:9.0pt;line-height:255%;background:#FAFAFA'>users</span> table,
you can do: <span style='font-size:9.0pt;line-height:255%'>rails generate
migration AddNamesToUsers last_name:</span><b><span style='font-size:9.0pt;
line-height:255%;color:#CC0066'>string</span></b><span style='font-size:9.0pt;
line-height:255%'> first_name:</span><b><span style='font-size:9.0pt;
line-height:255%;color:#CC0066'>string</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Rails will create the following migration file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image346.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:.25pt'>Now, apply the pending migrations to the database by running
the following in the terminal:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
8.0pt;line-height:110%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&lt; 5.0 </span><span style='font-size:11.0pt;line-height:110%'><img border=0
width=718 height=26 id="Group 269603"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image347.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rake db:migrate</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;text-indent:-.5pt;line-height:108%'><span style='font-size:
8.0pt;line-height:108%;font-family:"DejaVu Sans Mono";color:#666666'>Version
&#8805; 5.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=94
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image348.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324000">Section 15.3: Rails Generate Sca&#57379;old</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'><b><i>DISCLAIMER</i></b>: Scaffolding is not recommended
unless it's for very conventional CRUD apps/testing. This may generate a lot of
files(views/models/controllers) that are not needed in your web application
thus causing headaches(bad :().</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To generate a fully working scaffold for a new object,
including model, controller, views, assets, and tests, use the</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=284
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image349.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=252
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image350.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:.25pt'>Then you can run <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>rake db:migrate</span> to set up the database table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.15pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>Then you can visit <u><span
style='color:#D4072F'>http://localhost:3000/widgets</span></u> and you'll see a
fully functional CRUD scaffold.</p>

<h2 style='margin-top:0in;margin-right:35.15pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324001">Section 15.4:
Rails Generate Model</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To generate an <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>ActiveRecord</span> model that automagically creates
the correct db migrations &amp; boilerplate test files for your model, enter
this command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image351.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>name:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0066'>string</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:59.65pt;text-indent:-59.4pt'>'NAME' is the name of the model.
'field' is the name of the column in the DB table and 'type' is the column type
(e.g.  or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>body:text</span>).
Check the Remarks section for a list of supported column types.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.1pt;
margin-left:.25pt'>To setup foreign keys, add <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>belongs_to:model_name</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.85pt;
margin-left:.25pt'>So say you wanted to setup a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>User</span> model that has a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>username</span>, <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>email</span> and
belongs to a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>School</span>,
you would type in the following</p>

<p class=MsoNormal style='margin-top:0in;margin-right:118.95pt;margin-bottom:
.2pt;margin-left:0in;text-indent:3.75pt;line-height:242%'><span
style='position:relative;z-index:-1895743488'><span style='left:0px;position:
absolute;left:0px;top:-46714px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:242%'>rails generate model User username:</span><b><span
style='font-size:9.0pt;line-height:242%;color:#CC0066'>string</span></b><span
style='font-size:9.0pt;line-height:242%'> email:</span><b><span
style='font-size:9.0pt;line-height:242%;color:#CC0066'>string</span></b><span
style='font-size:9.0pt;line-height:242%'> school:belongs_to <span
style='background:#FAFAFA'>rails g</span></span> is shorthand for <span
style='font-size:9.0pt;line-height:242%;background:#FAFAFA'>rails generate</span>.
This would produce the same result</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image352.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324002">Chapter 16: Configuration</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324003">Section 16.1: Custom configuration</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=313 style='width:235.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=155 valign=top style='width:116.2pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b>
  directory, for example: </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>neo4j.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:192.0pt;margin-bottom:
12.75pt;margin-left:.25pt'>Create a <b><span style='font-size:9.0pt;line-height:
112%;color:#CC00FF;background:#FAFAFA'>YAML</span></b> file in the </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>neo4j.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The content of  can be something like the below (for
simplicity, <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default</span>
is used for all environments):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image353.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>in :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image354.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now, your custom config is accessible like below:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image355.gif"></span></p>

<h4 style='margin-left:.75pt'>More info</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.45pt;
margin-left:.25pt'>Rails official API document describes the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>config_for</span>
method as:</p>

<p class=MsoNormal style='margin-bottom:12.2pt;text-indent:0in'><span
style='font-size:11.0pt;line-height:112%'>        <img border=0 width=3
height=51 id="Group 293130"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image356.gif"></span>           Convenience
for loading config/foo.yml for the current Rails env.</p>

<h4 style='margin-left:.75pt'>If you do not want to use a <span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>yaml</span> file</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:26.25pt;margin-bottom:
12.5pt;margin-left:38.05pt;text-indent:-37.8pt'>You can configure your own code
through the Rails configuration object with custom configuration under the <span
style='font-size:9.0pt;line-height:112%;color:#9900CC;background:#FAFAFA'>x</span>
property.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image357.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>These configuration points are then available through the
configuration object:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895742464'><span style='left:0px;position:absolute;
left:0px;top:-47833px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>Rails.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>configuration</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>x</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>payment_processing</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>schedule</span><span style='font-size:9.0pt;line-height:110%'> </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># =&gt; :daily</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Rails.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>configuration</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>x</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>payment_processing</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>retries</span><span style='font-size:9.0pt;
line-height:110%'>  </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; 3</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Rails.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>configuration</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>x</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>super_debugger</span><span
style='font-size:9.0pt;line-height:110%'>              </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># =&gt; true</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>Rails.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>configuration</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>x</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>super_debugger</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>not_set</span><span style='font-size:9.0pt;
line-height:110%'>      </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; nil</span></i><br clear=all style='page-break-before:
always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324004">Chapter 17: I18n - Internationalization</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324005">Section 17.1: I18n with arguments</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=436
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image358.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image359.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324006">Section 17.2: Translating ActiveRecord model
attributes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>globalize</span></b> gem is a great solution to add translations to
your <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>
models. You can install it adding this to your <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Gemfile</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image360.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=406 style='width:304.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Rails </span><span style='font-size:9.0pt;line-height:
  107%;color:#006666'>5</span></p>
  </td>
  <td width=161 valign=top style='width:120.55pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> you will also need to add </p>
  </td>
  <td width=194 valign=top style='width:145.8pt;background:#FAFAFA;padding:
  .9pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>activemodel</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:107%'>serializers</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:107%'>xml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:166.15pt;margin-bottom:
0in;margin-left:.25pt'>If you're using </p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image361.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Model translations allow you to translate your models'
attribute values, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=160
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image362.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.95pt;
margin-left:.25pt'>After you defined your model attributes that need to be
translated you have to create a translation table, through a migration. <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>globalize</span></b>
provides <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>create_translation_table!</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>drop_translation_table!</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For this migration you need to use <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>up</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>down</span>, and <b>not</b>
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>change</span>.
Also, in order to run this migration successfully, you have to define the
translated attributes in your model first, like shown above. A proper migration
for the previous <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Post</span>
model is this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image363.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You may also pass options for specific options, like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image364.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In case you already have any <b>existing data</b> in your
needing translation columns, you can easily migrate it to the translations
table, by adjusting your migration:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image365.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><b><i>Make sure you drop the translated columns from the
parent table after all your data is safely migrated.</i></b> To automatically
remove the translated columns from the parent table after the data migration,
add the option</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=128
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image366.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=186
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image367.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You may also add new fields to a previously created
translations table:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image368.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324007">Section 17.3: Get locale from HTTP request</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Sometimes it can be useful to set your application locale
based upon the request IP. You can easily achieve this using <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Geocoder</span></b>.
Among the many things <b><span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Geocoder</span></b> does, it can also tell the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>location</span> of
a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>request</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>First, add <b><span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Geocoder</span></b> to your <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Gemfile</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image369.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>Geocoder</span></b> adds <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>location</span> and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>safe_location</span> methods to the
standard <b><span style='font-size:9.0pt;line-height:112%;color:#6666FF;
background:#FAFAFA'>Rack::Request</span></b> object so you can easily look up
the location of any HTTP request by IP address. You can use this methods in a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>before_action</span>
in your</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=237
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image370.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Beware that this will not work in <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>development</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>test</span>
environments, as things like <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>0.0.0.0</span> and <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>localhost</span> are valid valid Internet IP
addresses.</p>

<h4 style='margin-left:.75pt'>Limitations and alternatives</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>Geocoder</span></b> is very powerful and flexible, but needs to be
configured to work with a <i>geocoding service</i> (see <a
href="https://github.com/alexreisner/geocoder#geocoding-service-lookup-configuration"><span
style='color:#D4072F'>more </span></a><a
href="https://github.com/alexreisner/geocoder#geocoding-service-lookup-configuration"><span
style='color:#D4072F'>details</span></a>); many of which place limits on usage.
It's also worth bearing in mind that calling an external service on every
request could impact performance.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>To address these, it can also be worth considering:</p>

<h4 style='margin-left:.75pt'>1. An offline solution</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Using a gem like <b><span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>GeoIP</span></b> (see <a
href="https://github.com/cjheath/geoip"><span style='color:#D4072F'>here</span></a>)
allows lookups to happen against a local datafile. There may be a trade-off in
terms of accuracy, as these datafiles need to be kept up-to-date.</p>

<h4 style='margin-left:.75pt'>2. Use CloudFlare</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:19.5pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Pages served through CloudFlare have the
option of being geocoded transparently, with the country code being added to
the header (<span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>HTTP_CF_IPCOUNTRY</span>).
More detail can be found <a
href="https://support.cloudflare.com/hc/en-us/articles/200168236-What-does-Cloudflare-IP-Geolocation-do-"><span
style='color:#D4072F'>here</span></a>.</p>

<h2 style='margin-top:0in;margin-right:19.5pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324008">Section 17.4: Pluralization</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>You can let <b>I18n</b> handle pluralization for you, just
use <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>count</span>
argument.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You need to set up your locale file like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image371.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>I18n.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And then use the key you just created by passing the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>count</span>
argument to <span style='font-size:9.0pt;line-height:112%;color:#9900CC;
background:#FAFAFA'>t</span> helper:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image372.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324009">Section 17.5: Set locale through requests</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In most cases, you may want to set <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>I18n</span></b>
locale. One might want to set the locale for the current session, the current
user, or based on a URL parameter This is easily achievable by implementing a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>before_action</span>
in one of your controllers, or in <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>ApplicationController</span> to have it in all of your
controllers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=222
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image373.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:2.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=120
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image374.gif"></span><span
style='font-size:9.0pt;line-height:107%'>    </span><b><span style='font-size:
9.0pt;line-height:107%;color:#9966CC'>end</span></b></p>

<h4 style='margin-left:.75pt'>URL-based</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>locale</span> param could come from an URL like this</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image375.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Or</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image376.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To achieve the latter, you need to edit your <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>routes</span>,
adding a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>scope</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image377.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=274 style='width:2.85in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>http:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>//</span></b><span style='font-size:9.0pt;
  line-height:107%'>yourapplication.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>com</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>en</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By doing this, visiting  will set your locale to <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:en</span></b>.
Instead, visiting</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=274 style='width:2.85in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>http:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>//</span></b><span style='font-size:9.0pt;
  line-height:107%'>yourapplication.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>com</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>fr</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:26.9pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'> will set it to <b><span style='font-size:9.0pt;line-height:
107%;color:#FF3333;background:#FAFAFA'>:fr</span></b>. Furthermore, you won't
get a routing error when</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>http:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>//</span></b><span style='font-size:9.0pt;
  line-height:107%'>yourapplication.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>com</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.15pt;
margin-left:.25pt'>missing the <b><span style='font-size:9.0pt;line-height:
112%;color:#FF3333;background:#FAFAFA'>:locale</span></b> param, as visiting 
will load the default <b>I18n</b> locale.</p>

<h4 style='margin-left:.75pt'>Session-based or persistence-based</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This assumes the user can click on a button/language flag to
change the language. The action can route to a controller that sets the session
to the current language (and eventually persist the changes to a database if
the user is connected)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=244
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image378.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you have very few languages, it may be worth defining
them like this instead:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=115
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image379.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=301
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image380.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.45pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><i>Note: don't forget to
add some routes to your </i><i><span style='font-size:9.0pt;line-height:107%;
background:#FAFAFA'>change_language</span> actions</i></p>

<h4 style='margin-left:.75pt'>Default Locale</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Remember that you need to set your application default
locale. You can do it by either setting it in</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:113.4pt'>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image381.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>initializers</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>or by creating an initializer in the  folder:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image382.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324010">Section 17.6: Use I18n with HTML Tags and Symbols</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.65pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=126
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image383.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And in Views,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image384.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324011">Section 17.7: Use I18n in views</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Assuming you have this YAML locale file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image385.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and you want to display your title string, you can do this</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image386.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324012">Chapter 18: Using GoogleMaps with Rails</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324013">Section 18.1: Add the google maps javascript tag
to the layout header</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In order to have google maps work properly with <a
href="https://github.com/turbolinks/turbolinks"><span style='color:#D4072F'>turbolinks</span></a>,
add the javascript tag directly to the layout header rather than including it
in a view.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.4pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image387.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>google_maps_api_script_tag</span> is best defined in a
helper.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image388.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>You can register your application with google and get your
api key in the <a href="https://console.developers.google.com/"><span
style='color:#D4072F'>google api console</span></a>. Google has a short <a
href="https://developers.google.com/maps/documentation/javascript/get-api-key?hl=de"><span
style='color:#D4072F'>guide how to request an api key for the google maps
javascript api</span></a>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>secrets.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The api key is stored in the file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image389.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=253 style='width:189.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>/</span></b><span style='font-size:9.0pt;
  line-height:107%'>secrets.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>yml</span></p>
  </td>
  <td width=52 valign=top style='width:38.65pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> to your </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>gitignore</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:14.9pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Don't forget to add  file and makre sure
you don't commit the api key to the repository.</p>

<h2 style='margin-top:0in;margin-right:14.9pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324014">Section 18.2: Geocode the model</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Suppose, your users and/or groups have profiles and you want
to display address profile fields on a google map.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=82
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image390.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=40
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image391.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.95pt;
margin-left:.25pt'>A great way to geocode the addresses, i.e. provide <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>longitude</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>latitude</span>
is the <a href="https://github.com/alexreisner/geocoder"><span
style='color:#D4072F'>geocoder gem</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add geocoder to your <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Gemfile</span> and run <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bundle</span> to
install it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image392.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Add database columns for <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>latitude</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>longitude</span> in
order to save the location in the database. This is more efficient than
querying the geocoding service every time you need the location. It's faster
and you're not hitting the query limit so quickly.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=81
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image393.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Add the geocoding mechanism to your model. In this example,
the address string is stored in the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>value</span> attribute. Configure the geocoding to
perform when the record has changed, and only whan a value is present:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image394.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>By default, geocoder uses google as lookup service. It has
lots of interesting features like distance calculations or proximity search.
Fore more information, have a look at the <a
href="https://github.com/alexreisner/geocoder"><span style='color:#D4072F'>geocoder
README</span></a>.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324015">Section 18.3: Show addresses on a google map in
the profile view</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>On the profile view, show the profile fields of a user or
group in a list as well as the address fields on a google map.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image395.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The appropriate <b><span style='font-size:9.0pt;line-height:
112%;color:#0066FF;background:#FAFAFA'>@profile_fields</span></b> and <b><span
style='font-size:9.0pt;line-height:112%;color:#0066FF;background:#FAFAFA'>@address_fields</span></b>
are set in the controller:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image396.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Initialize the map, place the markers, set the zoom and
other map settings with javascript.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=445 id="Picture 18670"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image397.jpg"></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324016">Section 18.4: Set the markers on the map with
javascript</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>google_map</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>Suppose, there is a <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>.</span> div, which will become the map, and which has
the address fields to show as markers as <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>data</span> attribute.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=111
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image398.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>document</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>)</span></b><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>ready</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>To make use of the <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>$</span><b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>(</span></b> event with <a
href="https://github.com/turbolinks/turbolinks"><span style='color:#D4072F'>turbolinks</span></a>
without managing the turbolinks events by hand, use the <a
href="https://github.com/kossnocorp/jquery.turbolinks"><span style='color:#D4072F'>jquery.turbolinks
gem</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to perform some other operations with the map,
later, for example filtering or info windows, it's convenient to have the map
managed by a <a href="http://coffeescript.org/#classes"><span style='color:
#D4072F'>coffee script class</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image399.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>When using several coffee script files, which are namespaced
by default, it's convenient to define a global <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>App </span>namespace, which is shared by
all coffee script files.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=396 style='width:297.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>google_map</span></p>
  </td>
  <td width=224 valign=top style='width:167.75pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> divs and create one
  instance of the </p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>App.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>GoogleMap</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Then, loop through (possibly several)  class for each of
them.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image400.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324017">Section 18.5: Initialize the map using a
co&#57379;ee script class</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>App.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>GoogleMap</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Provided an <a href="http://coffeescript.org/#classes"><span
style='color:black;text-decoration:none'> </span></a><a
href="http://coffeescript.org/#classes"><span style='color:#D4072F'>coffee
script class</span></a>, the google map can be initialized like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=568
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image401.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>To learn more about the possible <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>map_configuration</span> options,
have a look at google's <a
href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#MapOptions"><span
style='color:#D4072F'>MapOptions documentation </span></a>and their <a
href="https://developers.google.com/maps/documentation/javascript/controls"><span
style='color:#D4072F'>guide to adding control elements</span></a>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map"><span
  style='font-size:9.0pt;line-height:107%;color:#D4072F'>google.</span></a><a
  href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map"><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>maps</span></a><a
  href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map"><span
  style='font-size:9.0pt;line-height:107%;color:#D4072F'>.</span></a><a
  href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map"><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>Map</span></a></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
18.8pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>For reference,
the class <a
href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map"><span
style='color:#D4072F'>is extensively documented here</span></a>.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324018">Section 18.6: Initialize the map markers using a
co&#57379;ee script class</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=594 style='width:445.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>App.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>GoogleMap</span></p>
  </td>
  <td width=414 valign=top style='width:310.45pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="http://coffeescript.org/#classes"><span style='color:black;text-decoration:
  none'> </span></a><a href="http://coffeescript.org/#classes"><span
  style='color:#D4072F'>coffee script class</span></a> and the marker
  information being stored in the </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>address</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>google_map</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Provided an <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>fields</span> attribute of the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>.</span> div, the map markers can be
initialized on the map like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=470
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image402.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:25.3pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>To learn more about marker options, have a
look at google's <a
href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#MarkerOptions"><span
style='color:#D4072F'>MarkerOptions documentation</span></a> and their <a
href="https://developers.google.com/maps/documentation/javascript/markers"><span
style='color:#D4072F'>guide to </span></a><a
href="https://developers.google.com/maps/documentation/javascript/markers"><span
style='color:#D4072F'>markers</span></a>.</p>

<h2 style='margin-top:0in;margin-right:25.3pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324019">Section 18.7: Auto-zoom a map using a co&#57379;ee script
class</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=372 style='width:279.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>App.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>GoogleMap</span></p>
  </td>
  <td width=170 valign=top style='width:127.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="http://coffeescript.org/#classes"><span style='color:black;text-decoration:
  none'> </span></a><a href="http://coffeescript.org/#classes"><span
  style='color:#D4072F'>coffee script class</span></a> with the </p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>google.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>maps</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>Map</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Provided an  stored as <b><span style='font-size:9.0pt;
line-height:112%;color:#0066FF;background:#FAFAFA'>@map</span></b> and the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>google.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>maps</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>Marker</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:13.45pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'>s stored as <b><span style='font-size:9.0pt;line-height:107%;
color:#0066FF;background:#FAFAFA'>@markers</span></b>, the map can be
auto-zoomed, i.e. adjusted that all markers are visible,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>like this: on the map like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=276
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image403.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image404.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:84.45pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>To learn more about bounds, have a look
at google's <a
href="https://developers.google.com/maps/documentation/javascript/3.exp/reference#LatLngBounds"><span
style='color:#D4072F'>LatLngBounds documentation</span></a>.</p>

<h2 style='margin-top:0in;margin-right:84.45pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324020">Section 18.8:
Exposing the model properties as json</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>To display address profile fields as markers on a google
map, the address field objects need to be passed as json objects to javascript.</p>

<h4 style='margin-left:.75pt'>Regular database attributes</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.3pt;
margin-left:.25pt'>When calling <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>to_json</span> on an <a
href="http://guides.rubyonrails.org/active_record_basics.html#creating-active-record-models"><span
style='font-size:9.0pt;line-height:112%;color:#D4072F;background:#FAFAFA'>ApplicationRecord</span></a>
object, the database attributes are automatically exposed.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>address_field.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>as_json</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:64.15pt;margin-bottom:
1.25pt;margin-left:113.65pt;text-indent:-113.4pt'>Given a <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>ProfileFields::Address</span></b>
model with <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>label</span>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>value</span>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>longitude</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>latitude</span>
attributes,  results in a <b><span style='font-size:9.0pt;line-height:112%;
color:#CC00FF;background:#FAFAFA'>Hash</span></b>, e.g. representation,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=62
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image405.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>which is converted to a json string by <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>to_json</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=62
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image406.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>This is useful because it allows to use <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>label</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>value</span> later
in javascript, for example to show tool tips for the map markers.</p>

<h4 style='margin-left:.75pt'>Other attributes</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Other virtual attributes can be exposed by overriding the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>as_json</span>
method.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, to expose a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>title</span> attribute, include it in the
merged <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>as_json</span>
hash:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image407.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The above example uses <a
href="http://rubylearning.com/satishtalim/ruby_overriding_methods.html"><b><span
style='font-size:9.0pt;line-height:112%;color:#9966CC;background:#FAFAFA'>super</span></b></a>
to call the original <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>as_json</span> method, which returns the original attribute hash of
the object, and merges it with the required position hash.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>To understand the difference between <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>as_json</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>to_json</span>,
have a look at <a
href="http://jonathanjulian.com/2010/04/rails-to_json-or-as_json/"><span
style='color:#D4072F'>this blog post by jjulian</span></a>.</p>

<h4 style='margin-left:.75pt'>Position</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>To render markers, the google maps api, by default, requires
a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>position</span>
hash which has longitude and latitude stored as <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>lng</span> and <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>lat</span> respectively.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>This position hash can be created in javascript, later, or
here when defining the json representation of the address field:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To provide this <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>position</span> as json attribute of the address
field, just override the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>as_json</span> method on the model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image408.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324021">Chapter 19: File Uploads</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324022">Section 19.1: Single file upload using Carrierwave</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Start using File Uploads in Rails is quite simple, first
thing you have to do is to choice plugin for managing uploads. The most common
onces are <b>Carrierwave</b> and <b>Paperclip</b>. Both are similar in
functionality and rich in documentation on</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>Let's have an look on example with simple avatar upload
image with Carrierwave</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>After <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>bundle install</span> Carrierwave, type in console</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image409.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This will create an config file located at <i>/app/uploaders/profile_uploader.rb</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Here you can set up storage (i.e local or cloud), apply
extensions for image manipulations (i.e. generting thumbs via MiniMagick) and
set server-side extension white list</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Next, create new migration with string tipe for user_pic and
mount uploader for it in <i>user.rb</i> model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image410.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Next, display an form to upload avatar (may be an edit view
for the user)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image411.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Make sure to include { multipart: true } in order form can
process uploads. Accept is an optional to set client-side extension white-list.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To display an avatar, simply do</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image412.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324023">Section 19.2: Nested model - multiple uploads</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>If you want to create multiple uploads, first thing you
might want to do is create new model and set up relations</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Let's say you want an multiple images for the Product model.
Create an new model and make it <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>belongs_to</span> your parent model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image413.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'><i>accepts_nested_attributes_for</i> is must, because it
allow us to create nested form, so we can upload new file, change product name
and set price from an single form</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Next, create form in a view (edit/create)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image414.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Controller is nothing special, if you don't want to create
an new one, just make an new one inside your product controller</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image415.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Display all images in a view</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image416.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324024">Chapter 20: Caching</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324025">Section 20.1: Russian Doll Caching</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>You may want to nest cached fragments inside other cached
fragments. This is called <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Russian doll caching</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>The advantage of <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Russian doll caching</span> is that if a single
product is updated, all the other inner fragments can be reused when
regenerating the outer fragment.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>As explained in the previous section, a cached file will
expire if the value of <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>updated_at</span> changes for a record on which the cached
file directly depends. However, this will not expire any cache the fragment is
nested within.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, take the following view:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image417.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Which in turn renders this view:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image418.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:.25pt'>If any attribute of game is changed, the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>updated_at</span>
value will be set to the current time, thereby expiring the cache.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>However, because <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>updated_at</span> will not be changed for the product
object, that cache will not be expired and your app will serve stale data. To
fix this, we tie the models together with the touch method:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image419.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324026">Section 20.2: SQL Caching</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Query caching is a <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Rails</span> feature that caches the result set
returned by each query. If <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Rails</span> encounters the same query again for that
request, it will use the cached result set as opposed to running the query
against the database again.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=189
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image420.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image421.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>The second time the same query is run against the database,
it's not actually going to hit the database. The first time the result is
returned from the query it is stored in the query cache (in memory) and the
second time it's pulled from memory.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:9.3pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>However, it's important to note that query caches are
created at the start of an action and destroyed at the end of that action and
thus persist only for the duration of the action. If you'd like to store query
results in a more persistent fashion, you can with low level caching.</p>

<h2 style='margin-top:0in;margin-right:9.3pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324027">Section 20.3: Action caching</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Like page caching, action caching caches the whole page. The
difference is that the request hits the Rails stack so before filters are run
before the cache is served. It's extracted from Rails to <a
href="https://github.com/rails/actionpack-action_caching"><span
style='color:#D4072F'>actionpack-action_caching gem</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>A common example is caching of an action that requires
authentication:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image422.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=70 style='width:52.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.45pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>if</span></b></p>
  </td>
  <td width=12 valign=top style='width:9.05pt;padding:1.45pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>/<span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>:</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.45pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>unless</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Options include <b><span style='font-size:9.0pt;line-height:
112%;color:#FF3333;background:#FAFAFA'>:expires_in</span></b>, a custom <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:cache_path</span></b>
(for actions with multiple routes that should be cached differently) and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>:</span> to control
when the action should be cached.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image423.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>layout: </span><b><span style='font-size:9.0pt;
  line-height:107%;color:blue'>false</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>When the layout has dynamic content, cache only the action
content by passing .</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324028">Section 20.4: Fragment caching</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Rails.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>cache</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:59.4pt'>, provided by ActiveSupport, can be used to cache any
serializable Ruby object across requests.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>cache.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>read</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To fetch a value from the cache for a given key, use :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image424.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>cache.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>write</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Use  to write a value to the cache:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image425.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>cache.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>fetch</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Alternatively, use  to read a value from the cache and
optionally write a default if there is no value:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=25
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image426.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image427.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>The return value of the passed block will be assigned to the
cache under the given key, and then returned.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can also specify a cache expiry:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image428.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324029">Section 20.5: Page caching</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can use the <a
href="https://github.com/rails/actionpack-page_caching"><span style='color:
#D4072F'>ActionPack page_caching gem</span></a> to cache individual pages. This
stores the result of one dynamic request as a static HTML file, which is served
in place of the dynamic request on subsequent requests. The README contains
full setup instructions. Once set up, use the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>caches_page</span> class method in a
controller to cache the result of an action:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image429.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Use <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>expire_page</span> to force expiration of the cache by
deleting the stored HTML file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image430.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:182.55pt;margin-bottom:
0in;margin-left:.25pt;line-height:146%'>The syntax of <span style='font-size:
9.0pt;line-height:146%;background:#FAFAFA'>expire_page</span> mimics that of <span
style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>url_for</span> and
friends.</p>

<h2 style='margin-top:0in;margin-right:182.55pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:146%'><a name="_Toc324030">Section 20.6:
HTTP caching</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Cache</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Control</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>Rails &gt;= 3 comes with HTTP caching abilities out of the
box. This uses the  and <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>ETag</span> headers to control how long a client or
intermediary (such as a CDN) can cache a page.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In a controller action, use <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>expires_in</span> to set the length of
caching for that action:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image431.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Use <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>expires_now</span> to force immediate expiration of a
cached resource on any visiting client or intermediary:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image432.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324031">Chapter 21: ActionController</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Action Controller is the C in MVC. After the router has
determined which controller to use for a request, the controller is responsible
for making sense of the request and producing the output.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>The controller will receive the request, fetch or save data
from a model and use a view to create output. A controller can be thought of as
a middleman between models and views. It makes the model data available to the
view so it can display to the user, and it saves or updates user data to the
model.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324032">Section 21.1: Basic REST Controller</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0 width=719
height=801 id="Picture 313708"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image433.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=235
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image434.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324033">Section 21.2: Filters</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>Filters are methods that are run &quot;before&quot;,
&quot;after&quot; or &quot;around&quot; a controller action. They are
inherited, so if you set any in your <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>ApplicationController</span> they will be run for
every request your application receives.</p>

<h4 style='margin-left:.75pt'>Before Filter</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Before filters are executed before the controller action and
can halt the request (and/or redirect). A common use is to verify if a user is
logged in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image435.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Before filters are run on requests before the request gets
to the controller<span style='font-family:"Arial",sans-serif'>’</span>s action.
It can return a response itself and completely bypass the action.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Other common uses of before filters is validating a user<span
style='font-family:"Arial",sans-serif'>’</span>s authentication before granting
them access to the action designated to handle their request. I<span
style='font-family:"Arial",sans-serif'>’</span>ve also seen them used to load a
resource from the database, check permissions on a resource, or manage
redirects under other circumstances.</p>

<h4 style='margin-left:.75pt'>After Filter</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>After filters are similar to &quot;before&quot; ones, but as
they get executed after the action run they have access the response object
that's about to be sent. So in short after filters are run after the action
completes. It can modify the response. Most of the time if something is done in
an after filter, it can be done in the action itself, but if there is some
logic to be run after running any of a set of actions, then an after filter is
a good place to do it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Generally, I<span style='font-family:"Arial",sans-serif'>’</span>ve
seen after and around filters used for logging.</p>

<h4 style='margin-left:.75pt'>Around Filter</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Around filters may have logic before and after the action
being run. It simply yields to the action in whatever place is necessary. Note
that it doesn<span style='font-family:"Arial",sans-serif'>’</span>t need to
yield to the action and may run without doing so like a before filter.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Around filters are responsible for running their associated
actions by yielding, similar to how Rack middlewares work.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Around callbacks wrap the execution of actions. You can
write an around callback in two different styles. In the first, the callback is
a single chunk of code. That code is called before the action is executed. If
the callback code invokes yield, the action is executed. When the action
completes, the callback code continues executing. Thus, the code before the
yield is like a before action callback and the code after the yield is the
after action callback. If the callback code never invokes yield. the action is
not run-this is the same as having a before action callback return false.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Here's an example of the around filter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image436.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>This will catch exception of any action and put the message
in your log. You can use around filters for exception handling, setup and
teardown, and a myriad of other cases.</p>

<h4 style='margin-left:.75pt'>Only and Except</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>All filters can be applied to specific actions, using <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:only</span></b>
and <b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:
#FAFAFA'>:except</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image437.gif"></span></p>

<h4 style='margin-left:.75pt'>Skipping Filter</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>All filters (inherited ones too) can also be skipped for
some specific actions:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image438.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>As they're inherited, filters can also be defined in a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>namespace</span>
&quot;parent&quot; controller. Say for example that you have an <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>admin</span>
namespace, and you of course want only admin users to be able to access it. You
could do something like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.55pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=339
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image439.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Beware that in <b>Rails 4.x</b> you could
use <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>before_filter</span>
along with <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>before_action</span>,
but <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>before_filter</span>
is currently deprecated in <b>Rails 5.0.0</b> and will be removed in <b>5.1</b>.</p>

<h2 style='margin-top:0in;margin-right:15.7pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324034">Section 21.3: Generating a controller</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Rails provides a lot of generators, for controllers too of
course.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can generate a new controller by running this command in
your app folder</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image440.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.45pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><i>Note: You can also
use </i><i><span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>rails
g</span> alias to invoke </i><i><span style='font-size:9.0pt;line-height:107%;
background:#FAFAFA'>rails generate</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, to generate a controller for a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Product</span>
model, with <i><span style='font-size:9.0pt;line-height:112%;color:green;
background:#FAFAFA'>#index</span></i> and <i><span style='font-size:9.0pt;
line-height:112%;color:green;background:#FAFAFA'>#show</span></i> actions you
would run</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image441.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=274 style='width:2.85in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products_controller.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create the controller in , with both the actions
you specified</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image442.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>It will also create a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>products</span> folder inside <b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>/</span></b>,
containing the two templates for your controller's actions</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=225 style='width:168.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> and </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>show.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=234 style='width:175.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=70 valign=top style='width:52.85pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i><span style='font-size:
  9.0pt;line-height:107%'>index.</span></i><i><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></i></p>
  </td>
  <td width=7 valign=top style='width:5.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></i></p>
  </td>
  <td width=28 valign=top style='width:21.15pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>slim</span></i></p>
  </td>
  <td width=30 valign=top style='width:22.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i> and </i></p>
  </td>
  <td width=63 valign=top style='width:47.55pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i><span style='font-size:
  9.0pt;line-height:107%'>show.</span></i><i><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>html</span></i></p>
  </td>
  <td width=7 valign=top style='width:5.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></i></p>
  </td>
  <td width=28 valign=top style='width:21.15pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><i><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>slim</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.85pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>(i.e. , <i>note that the
extension may vary according to your template engine, so if you're using </i><i><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>slim</span>, for
example, generator will create </i> )</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Furthermore, if you specified any actions they will also be
added to your <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>routes</span>
file</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image443.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>helpers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products_helper.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails creates a helper file for you, in , and also the
assets files in</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=528 style='width:395.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>javascripts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>js</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> and </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>stylesheets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>css</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=232 style='width:174.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> and </p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>sass</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>. As for views, the generator changes this behaviour
according to what's specified in your <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Gemfile</span>: i.e., if you're using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Coffeescript</span>
and <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Sass</span>
in your application, the controller generator will instead generator .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>At last, but not least, Rails also generates test files for
your controller, your helper and your views.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:22.45pt;
margin-left:.25pt'>If you don't want any of these to be created for you can
tell Rails to skip them, just prepend any option with</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>--</span></b><span style='font-size:
  9.0pt;line-height:107%'>skip</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:450.15pt;margin-bottom:
0in;margin-left:.25pt;line-height:187%'><span style='font-family:"DejaVu Sans Mono"'>--no</span>or
, like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.5pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895741440'><span style='left:0px;position:absolute;
left:0px;top:-68738px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>rails generate controller products
index show </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>--</span></b><span
style='font-size:9.0pt;line-height:110%'>no</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>assets </span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>--</span></b><span style='font-size:9.0pt;line-height:110%'>no</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>helper</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>And the generator will skip both <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>assets</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>helper</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you need to create a controller for a specific <b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>namespace</span></b>
add it in front of <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>NAME</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image444.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=317 style='width:3.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>admin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>products_controller.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:127.45pt;margin-bottom:
12.55pt;margin-left:.25pt'>This will create your controller inside </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Rails can also generate a complete RESTful controller for
you:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:132.55pt;margin-bottom:
22.95pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895740416'><span style='left:0px;position:
absolute;left:0px;top:-68957px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>rails generate scaffold_controller
MODEL_NAME </span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#
available from Rails 4 </span></i><span style='font-size:9.0pt;line-height:
110%'>rails generate scaffold_controller Product</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324035">Section 21.4: Rescuing
ActiveRecord::RecordNotFound with redirect_to</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can rescue a RecordNotFound exception with a redirect
instead of showing an error page:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image445.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324036">Section 21.5: Display error pages for exceptions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>If you want to display to your users meaningful errors
instead of simple &quot;sorry, something went wrong&quot;, Rails has a nice
utility for the purpose.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=295 style='width:221.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application_controller.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Open the file  and you should find something like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=56
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image446.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image447.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>We can now add a <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>rescue_from</span> to recover from specific errors:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image448.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.25pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>It's recommended not to rescue from <b><span
style='font-size:9.0pt;line-height:133%;color:#CC00FF;background:#FAFAFA'>Exception</span></b>
or <b><span style='font-size:9.0pt;line-height:133%;color:#CC00FF;background:
#FAFAFA'>StandardError</span></b> otherwise Rails won't be able to display
helpful pages in case of errors.</p>

<h2 style='margin-top:0in;margin-right:7.25pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324037">Section 21.6: Output JSON instead of HTML</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image449.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In addition you will need the route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image450.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This will respond in two different ways to requests on <b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>/</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=156
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image451.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=310 style='width:232.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>format</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>html</span><span style='font-size:9.0pt;
  line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>{</span></b></p>
  </td>
  <td width=216 valign=top style='width:2.25in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'> render inline: </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>&quot;Hello World&quot;</span><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:17.95pt;
margin-left:.25pt'>You can <b>omit</b> <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>}</span></b> if you want to
make sure that your route will answer only to JSON requests.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324038">Section 21.7: Controllers (Basic)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=97
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image452.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image453.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This is a basic controller, with the addition of the
following route (in routes.rb):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image454.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:143.4pt;margin-bottom:
0in;margin-left:.25pt;line-height:146%'>Will display the <span
style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>Hello World</span>
message in a webpage when you access the URL <b><span style='font-size:9.0pt;
line-height:146%;color:#006600;background:#FAFAFA'>/</span></b></p>

<h2 style='margin-top:0in;margin-right:143.4pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:146%'><a name="_Toc324039">Section 21.8:
Parameters</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Controllers have access to HTTP parameters (you might know
them as <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>?name=foo</span>
in URLs, but Ruby on Rails handle different formats too!) and output different
responses based on them. There isn't a way to distinguish between GET and POST
parameters, but you shouldn't do that in any case.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image455.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>As usual our route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image454.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=518 style='width:388.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users?name=john</span></p>
  </td>
  <td width=273 valign=top style='width:204.6pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> and the output will be <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>Hello John</span>,
  access <b><span style='font-size:9.0pt;line-height:107%;color:#006600;
  background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.15pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users?name=whatever</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.25pt;
margin-left:.25pt'>Access the URL <b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>/</span></b> and the output will be <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Hello someone</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324040">Section 21.9: Filtering parameters (Basic)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image456.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>You can allow (or reject) some params so that only what you
want will <i>pass through</i> and you won't have bad surprises like user
setting options not meant to be changed.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:2.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users?name=john</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&amp;</span></b></p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>sentence=developer</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Visiting <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>/</span></b> will display <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Hello john
developer</span>, however visiting</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users?name=smith</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&amp;</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>sentence=spy</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:24.95pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'><b><span style='font-size:9.0pt;line-height:
133%;color:#006600;background:#FAFAFA'>/</span></b> will display <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>Hello smith</span>
only, because <b><span style='font-size:9.0pt;line-height:133%;color:#FF3333;
background:#FAFAFA'>:sentence</span></b> is only allowed when you access as <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>john</span></p>

<h2 style='margin-top:0in;margin-right:24.95pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324041">Section 21.10: Redirecting</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Assuming the route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image457.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can redirect to a different URL using:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image458.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can go back to the previous page the user visited using:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image459.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Note that in <i>Rails 5</i> the syntax for redirecting back
is different:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image460.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>Which will try to redirect to the previous page and in
case not possible (the browser is blocking the HTTP_REFERRER header), it will
redirect to <b><span style='font-size:9.0pt;line-height:133%;color:#FF3333;
background:#FAFAFA'>:fallback_location</span></b></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324042">Section 21.11: Using Views</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Assuming the route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image461.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And the controller:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image462.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The view  will be rendered. If the view is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image463.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>The output will be a webpage with the text: &quot;Hello <b>World</b>&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you want to render a different view, you can use:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image464.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>pages</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>home.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>And the file  will be used instead.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can pass variables to views using controller instance
variables:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image465.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And in the file  you can use <b><span style='font-size:9.0pt;
line-height:112%;color:#0066FF;background:#FAFAFA'>@name</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image466.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>And the output will be: &quot;Hello <b>john</b>&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>An important note around the render syntax, you can omit the
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>render</span>
syntax entirely, Rails assumes that if you omit it. So:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image467.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Can be written instead as:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image468.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails is smart enough to figure out that it must render the
file .</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324043">Chapter 22: Configuration</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324044">Section 22.1: Rails General Configuration</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.95pt;
margin-left:.25pt'>The following configuration options should be called on a <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>Rails::Railtie</span></b>
object</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=173 valign=top style='width:1.8in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>action_controller</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>asset_host</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>cache_classes</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>UTF</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12><b>config.after_initialize</b>: Takes a block which will
be run after rails has initialized the application.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><b>config.asset_host</b>: This sets the host for the
assets. This is useful when using a <i>Content Delivery Network</i>. This is
shorthand for <b>config.autoload_once_paths</b>: This option accepts an array
of paths where Rails autoloads constants. The default value is an empty array <b>config.autoload_paths</b>:
This accepts an array of paths where Rails autoloads constants. It defaults to
all directories under <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>app </span><b>config.cache_classes</b>: Determines if classes and
modules should be reloaded on each request. In development mode, this defaults
to <b><span style='font-size:9.0pt;line-height:112%;color:blue;background:#FAFAFA'>false</span></b>
and in the production and test modes it defaults to <b><span style='font-size:
9.0pt;line-height:112%;color:blue;background:#FAFAFA'>true </span>config.action_view.cache_template_loading</b>:
This determines if templates should be reloaded on each request. It defaults to
the  setting</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.4pt;
margin-left:20.9pt'><b>config.beginning_of_week</b>: This sets the default
beginning of week. It requires a valid week day symbol</p>

<p class=MsoNormal style='margin-top:0in;margin-right:40.5pt;margin-bottom:
1.25pt;margin-left:20.9pt'>(<b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:monday</span></b>) <b>config.cache_store</b>:
Choose which cache store to use. Options include <b><span style='font-size:
9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:file_store</span></b>,
<b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:memory_store</span></b>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>mem_cache_store</span>
or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>null_store</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:62.45pt;margin-bottom:
1.25pt;margin-left:20.9pt'><b>config.colorize_logging</b>: This controls
whether logging information is colorized <b>config.eager_load</b>: Eager-loads
all registered <b>config.encoding</b>: Specifies the application encoding. The
default value is <b><span style='font-size:9.0pt;line-height:112%;color:#006600;
background:#FAFAFA'>-</span></b><span style='font-size:9.0pt;line-height:112%;
color:#006666;background:#FAFAFA'>8 </span><b>config.log_level</b>: Sets the
verbosity of the Rails Logger. It defaults to <b><span style='font-size:9.0pt;
line-height:112%;color:#FF3333;background:#FAFAFA'>:debug</span></b> in all
environments.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:177.45pt;margin-bottom:
.25pt;margin-left:.55pt;text-align:justify;text-justify:inter-ideograph;
text-indent:5.5pt;line-height:133%'><b>config.middleware</b>: Use this to
configure the application's middleware <b>config.time_zone</b>: This sets the
application's default time zone.</p>

<h2 style='margin-top:0in;margin-right:177.45pt;margin-bottom:.25pt;margin-left:
.55pt;text-align:justify;text-justify:inter-ideograph;text-indent:5.5pt;
line-height:133%'><a name="_Toc324045">Section 22.2: Configuring assets</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>The following configuration options can be used for
configuring assets</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>MD</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:9.2pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12><b>config.assets.enabled</b>: Determines whether the asset
pipeline is enabled. This defaults to true <b>config.assets.raise_runtime_errors</b>:
This enables runtime error checking. It's useful for <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>development mode </span><b>config.assets.compress</b>:
Lets assets be compressed. In production mode, this defaults to true <b>config.assets.js_compressor</b>:
Specifies which JS compressor to use. Options include <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:closure</span></b>,
<b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:uglifier
</span></b>and <b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;
background:#FAFAFA'>:yui </span>config.assets.paths</b>: Specifies which paths
to search for assets.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:4.35pt;margin-bottom:
1.25pt;margin-left:20.9pt'><b>config.assets.precompile</b>: Lets you choose
additional assets to be precompiled when <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rake assets:precompile</span> is run <b>config.assets.digest</b>:
This option allows the use of <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>-</span></b><span style='font-size:9.0pt;
line-height:112%;color:#006666;background:#FAFAFA'>5</span> fingerprints in the
asset names. It defaults to true in development mode</p>

<p class=MsoNormal style='margin-top:0in;margin-right:74.85pt;margin-bottom:
0in;margin-left:.25pt;text-indent:5.5pt;line-height:147%'><b>config.assets.compile</b>:
Toggles live <span style='font-size:9.0pt;line-height:147%;background:#FAFAFA'>Sprockets</span>
compilation in production mode</p>

<h2 style='margin-top:0in;margin-right:74.85pt;margin-bottom:0in;margin-left:
.25pt;text-indent:5.5pt;line-height:147%'><a name="_Toc324046">Section 22.3:
Configuring generators</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>generators</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:92.05pt;text-indent:-91.8pt'>Rails allows you to configure what
generators are used when running <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>rails generate</span> commands. This method,  takes a block</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=39
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image470.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image471.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Here are some of the options</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:1.35pt;margin-left:
0in;text-indent:0in'><span style='font-size:11.0pt;line-height:107%;font-weight:
normal'>              </span>Option                                               Description                                     Default</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:201.0pt;margin-bottom:
0in;margin-left:.25pt;line-height:143%'>assets     Creates assets when
generating scaffold true force_plural          Allows pluralized model names      false
helper           Determines whether to generate helpers true integration_tool             Specify
integration tool      <span style='font-size:9.0pt;line-height:143%;background:
#FAFAFA'>test_unit </span>javascript_engine  Configures JS engine            <b><span
style='font-size:9.0pt;line-height:143%;color:#FF3333;background:#FAFAFA'>:js </span></b>resource_route                 Generates
resource route      true stylesheet_engine        Configures stylesheet engine                <b><span
style='font-size:9.0pt;line-height:143%;color:#FF3333;background:#FAFAFA'>:cs </span></b>scaffold_stylesheet
Creates CSS upon scaffolding    true test_framework     Specify Test Framework      <span
style='font-size:9.0pt;line-height:143%;background:#FAFAFA'>Minitest </span>template_engine                Configures
template engine               <b><span style='font-size:9.0pt;line-height:143%;
color:#FF3333;background:#FAFAFA'>:erb</span></b></p>

<h2 style='margin-top:0in;margin-right:201.0pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:143%'><a name="_Toc324047">Section 22.4:
Environments in Rails</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>environments</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Configuration files for rails can be found in <b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>/</span></b>.
By default rails has 3 environments,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>development</span>, <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>production</span> and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>test</span>. By editing each file you are
editing the configuration for that environment only.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Rails also has a configuration file in . This is a common
configuration file as any settings defined here are overwritten by the config
specified in each environment.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Rails.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>application</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>configure</span><span style='font-size:
  9.0pt;line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:
  107%;color:#9966CC'>do</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:23.35pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>You add or modify configuration options
within the  block and configuration options start with <span style='font-size:
9.0pt;line-height:133%;background:#FAFAFA'>config.</span></p>

<h2 style='margin-top:0in;margin-right:23.35pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324048">Section 22.5: Database Configuration</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>database.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>database.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Database configuration of a rails project lies in a file .
If you create a project using <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>rails new </span>command and don't specify a database
engine to be used then rails uses <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>sqlite</span> as the default database. A typical  file
with default configuration will look similar to following.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=358
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image472.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image473.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you want to change the default database while creating a
new project you can specify database: <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>rails new</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.95pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><span
style='font-size:9.0pt;line-height:107%'>hello_world </span><b><span
style='font-size:9.0pt;line-height:107%;color:#006600'>--</span></b><span
style='font-size:9.0pt;line-height:107%'>database=mysql</span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324049">Chapter 23: Safe Constantize</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324050">Section 23.1: Successful safe_constantize</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>User</span> is an <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>ActiveRecord</span> or <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Mongoid</span> class. Replace <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>User</span> with
any <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Rails</span>
class in your project (even something like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=254
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image474.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324051">Section 23.2: Unsuccessful safe_constantize</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This example will not work because the string passed in
isn't recognized as a constant in the project. Even if you pass in <span
style='font-size:9.0pt;line-height:112%;color:#996600;background:#FAFAFA'>&quot;array&quot;</span>,
it won't work as it isn't capitalized.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image475.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324052">Chapter 24: Rails 5</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324053">Section 24.1: How to install Ruby on Rails 5 on
RVM</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>RVM is a great tool to manage your ruby versions and set up
your working environment.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Assuming you already have RVM installed, to get the latest
version of ruby, which is needed for these examples, open a terminal and run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image476.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Check your ruby version by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image477.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To install Rails 5, first create a new gemset using the
latest ruby version and then install rails:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image478.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To check your rails version, run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image479.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324054">Section 24.2: Creating a Ruby on Rails 5 API</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To create a new Rails 5 API, open a terminal and run the
following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image480.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The following file structure will be created:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=354
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image481.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.9pt;
margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0 width=719
height=941 id="Picture 313710"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image482.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This file structure will be created inside a new folder
called <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>app_name</span>.
It contains all the assets and code needed to start your project.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Enter the folder and install the dependencies:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image483.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You should also start your database. Rails uses SQLite as a
default database. To create it, run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image484.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now run your appplication:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image485.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>http:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>//</span></b><span style='font-size:9.0pt;
  line-height:107%'>localhost:</span><span style='font-size:9.0pt;line-height:
  107%;color:#006666'>3000</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>When you open your browser at , your shiny new (empty) API
should be running!<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324055">Chapter 25: Authorization with CanCan</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'><a href="https://github.com/CanCanCommunity/cancancan"><span
style='color:#D4072F'>CanCan</span></a> is a simple authorization strategy for
Rails which is decoupled from user roles. All permissions are stored in a
single location.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324056">Section 25.1: Getting started with CanCan</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'><a href="https://github.com/CanCanCommunity/cancancan"><span
style='color:#D4072F'>CanCan</span></a> is a a popular authorization library
for Ruby on Rails which restricts user access to specific resources. The latest
gem (CanCanCan) is a continuation of the dead project <a
href="https://github.com/ryanb/cancan"><span style='color:#D4072F'>CanCan</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>Permissions are defined in the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Ability</span> class and can be used from
controllers, views, helpers, or any other place in the code.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add authorization support to an app, add the CanCanCan
gem to the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Gemfile</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image486.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then define the ability class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image487.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then check authorization using <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>load_and_authorize_resource</span> to load
authorized models into the controller:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image488.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>authorize!</span> to check authorization or raise an exception</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image489.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>can?</span> to check if an object is authorized against a particular
action anywhere in the controllers, views, or helpers</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image490.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:112.55pt;margin-bottom:
0in;margin-left:.25pt;line-height:147%'><b>Note:</b> This assumes the signed
user is provided by the <span style='font-size:9.0pt;line-height:147%;
background:#FAFAFA'>current_user</span> method.</p>

<h2 style='margin-top:0in;margin-right:112.55pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:147%'><a name="_Toc324057">Section 25.2:
Handling large number of abilities</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Once the number of abilities definitions start to grow in
number, it becomes more and more difficult to handle the Ability file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The first strategy to handle these issue is to move
abilities into meaningful methods, as per this example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=585
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image491.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Once this class grow large enough, you can try breaking it
into different classes to handle the different responsibilities like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=304
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image492.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image493.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and then define those classes as:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.45pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image494.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:98.55pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:147%'>and so on with <b><span
style='font-size:9.0pt;line-height:147%;color:#6666FF;background:#FAFAFA'>Abilities::Authenticated</span></b>,
<b><span style='font-size:9.0pt;line-height:147%;color:#6666FF;background:#FAFAFA'>Abilities::Admin</span></b>
or any other else.</p>

<h2 style='margin-top:0in;margin-right:98.55pt;margin-bottom:0in;margin-left:
-.25pt;line-height:147%'><a name="_Toc324058">Section 25.3: Defining abilities</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Abilities are defined in the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Ability</span> class using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>can</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>cannot</span>
methods. Consider the following commented example for basic reference:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=421
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image495.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324059">Section 25.4: Quickly test an ability</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you'd like to quickly test if an ability class is giving
the correct permissions, you can initialize an ability in the console or on
another context with the rails environment loaded, just pass an user instance
to test against:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image496.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>More information: <a
href="https://github.com/ryanb/cancan/wiki/Testing-Abilities"><span
style='color:#D4072F'>https://github.com/ryanb/cancan/wiki/Testing-Abilities</span></a><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324060">Chapter 26: Mongoid</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324061">Section 26.1: Fields</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>As per the <a
href="https://docs.mongodb.com/ecosystem/tutorial/mongoid-documents/#fields"><span
style='color:#D4072F'>Mongoid Documentation</span></a>, there are 16 valid
field types:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image497.gif"
align=left hspace=12>Array</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>BigDecimal</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Boolean</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Date</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>DateTime</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Float</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Hash</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Integer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>BSON::ObjectId</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>BSON::Binary</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Range</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Regexp</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>String</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Symbol</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Time</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:20.9pt'>TimeWithZone</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add a field (let's call it <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>name</span> and have it be a <b><span
style='font-size:9.0pt;line-height:112%;color:#CC0066;background:#FAFAFA'>String</span></b>),
add this to your model file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image498.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To set a default value, just pass in the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>default</span>
option:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image499.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324062">Section 26.2: Installation</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>First, add <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Mongoid</span> to your <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Gemfile</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image500.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and then run <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>bundle install</span>. Or just run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image501.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>After installation, run the generator to create the config
file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image502.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>(</span></b><span style='font-size:
  9.0pt;line-height:107%'>myapp</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>)/</span></b><span style='font-size:9.0pt;
  line-height:107%'>config</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:
  107%'>mongoid.</span><span style='font-size:9.0pt;line-height:107%;
  color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:217.35pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'>which will create
the file .</p>

<h2 style='margin-top:0in;margin-right:217.35pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc324063">Section 26.3: Creating a Model</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Create a model (lets call it <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>User</span>) by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image503.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>user.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>which will generate the file :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image504.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>This is all you need to have a model (albeit nothing but an <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>id</span> field).
Unlike <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>,
there is no migration files. All the database information for the model is
contained in the model file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Timestamps are not automatically included in your model when
you generate it. To add <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>created_at</span> and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>updated_at</span> to your model, add</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image505.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:135.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=180 valign=top style='width:135.0pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>include</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#6666FF'>Mongoid::Document</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to your model underneath  like so:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image506.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324064">Section 26.4: Classic Associations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.25pt;
margin-left:.25pt'>Mongoid allows the classic <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>ActiveRecord</span> associations:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.85pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:109%'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>One-to-one: <span style='font-size:9.0pt;line-height:109%;
background:#FAFAFA'>has_one</span> / <span style='font-size:9.0pt;line-height:
109%;background:#FAFAFA'>belongs_to</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.85pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:109%'>One-to-many: <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>has_many</span> / <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>belongs_to</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:109%'>Many-to-many: <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>has_and_belongs_to_many</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add an association (lets say the User <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>has_many</span>
posts), you can add this to your <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>User</span> model file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image507.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and this to your <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Post</span> model file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image508.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:5.8pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>This will add a <span style='font-size:9.0pt;
line-height:133%;background:#FAFAFA'>user_id</span> field in your <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>Post</span> model,
add a <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>user</span>
method to your <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>Post</span>
class, and add a <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>posts</span>
method to your <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>User</span>
class.</p>

<h2 style='margin-top:0in;margin-right:5.8pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324065">Section 26.5: Embedded Associations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.15pt;
margin-left:.25pt'>Mongoid allows Embedded Associations:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.85pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:109%'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>One-to-one: <span style='font-size:9.0pt;line-height:109%;
background:#FAFAFA'>embeds_one</span> / <span style='font-size:9.0pt;
line-height:109%;background:#FAFAFA'>embedded_in</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:109%'>One-to-many: <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>embeds_many</span>
/ <span style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>embedded_in</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To add an association (lets say the User <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>embeds_many</span>
addresses), add this to your <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>User</span> file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image509.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and this to your <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Address</span> model file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image510.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:46.7pt;margin-bottom:
0in;margin-left:.25pt;line-height:146%'>This will embed <span style='font-size:
9.0pt;line-height:146%;background:#FAFAFA'>Address</span> in your <span
style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>User</span> model,
adding a <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>addresses</span>
method to your <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>User</span>
class.</p>

<h2 style='margin-top:0in;margin-right:46.7pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:146%'><a name="_Toc324066">Section 26.6:
Database Calls</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>Mongoid tries to have similar syntax to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>
when it can. It supports these calls (and many more)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>first</span><span style='font-size:9.0pt;line-height:110%'>
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#Gets
first user from the database</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>count</span><span style='font-size:9.0pt;line-height:110%'>
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'>#Gets the
count of all users from the database</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>find</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>params</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>[</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#FF3333'>:id</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>])</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'>#Returns the user with the id found in
params[:id]</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>name:
</span><span style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;Bob&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'>#Returns a Mongoid::Criteria object that
can be chained</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>                        </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#with other queries (like
another 'where' or an 'any_in')</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>                        </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#Does NOT return any
objects from database</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>name:
</span><span style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;Bob&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>entries</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'>#Returns all objects with name &quot;Bob&quot; from database</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895734272'><span style='left:0px;position:absolute;
left:0px;top:-83226px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image511.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>User.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>where</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><b><span style='font-size:
9.0pt;line-height:110%;color:#FF3333'>:name</span></b><span style='font-size:
9.0pt;line-height:110%'>.</span><b><span style='font-size:9.0pt;line-height:
110%;color:#9966CC'>in</span></b><span style='font-size:9.0pt;line-height:110%'>
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'Bob'</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'Alice'</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>])</span></b><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>entries</span><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'>#Returns all objects with name
&quot;Bob&quot; or &quot;Alice&quot; from database</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>any_in</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>name:
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>[</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;Bob&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>&quot;Joe&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>])</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>first</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'>#Returns the first object with name &quot;Bob&quot; or
&quot;Joe&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>User.</span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#FF3333'>:name</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'Bob'</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>exists</span><span style='font-size:9.0pt;line-height:110%'>? </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># will return true if
there is one or more users with name bob</span></i><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324067">Chapter 27: Gems</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324068">Section 27.1: Gemfiles</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>To start, gemfiles require at least one source, in the form
of the URL for a RubyGems server.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Generate a Gemfile with the default rubygems.org source by
running <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bundle
init</span>. Use https so your connection to the server will be verified with
SSL.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image512.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Next, declare the gems that you need, including version
numbers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image513.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Most of the version specifiers, like &gt;= 1.0, are
self-explanatory. The specifier ~&gt; has a special meaning. ~&gt; 2.0.3 is
identical to &gt;= 2.0.3 and &lt; 2.1. ~&gt; 2.1 is identical to &gt;= 2.1 and
&lt; 3.0. ~&gt; 2.2.beta will match prerelease versions like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>2.2.beta.12.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.05pt;
margin-left:.25pt'>Git repositories are also valid gem sources, as long as the
repo contains one or more valid gems. Specify what to check out with <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:tag</span></b>,
<b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:branch</span></b>,
or <b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;background:
#FAFAFA'>:ref</span></b>. The default is the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>master</span> branch.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:17.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895733248'><span style='left:0px;position:absolute;
left:0px;top:-83775px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>gem </span><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'nokogiri'</span><span style='font-size:
9.0pt;line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:
110%;color:#FF3333'>:git</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'https://github.com/sparklemotion/nokogiri'</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#FF3333'>:branch</span></b><span style='font-size:
9.0pt;line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>=&gt;</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#996600'>'master'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you would like to use an unpacked gem directly from the
filesystem, simply set the :path option to the path containing the gem's files.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image507.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>--</span></b><span style='font-size:
  9.0pt;line-height:107%'>without</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Bundler.</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0066'>require</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Dependencies can be placed into groups. Groups can be
ignored at install-time (using ) or required all at once (using ).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image514.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can specify the required version of Ruby in the Gemfile
with <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ruby</span>.
If the Gemfile is loaded on a different Ruby version, Bundler will raise an
exception with an explanation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image510.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324069">Section 27.2: What is a gem?</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>A gem is the equivalent to a plugin or an extension for the
programming language ruby.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To be exact even rails is nothing more than a gem. A lot of
gems are built on rails or other gems (they are dependent of said gem) or are
standalone.</p>

<h4 style='margin-left:.75pt'>In your Rails project Gemfile</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.5pt;
margin-left:.25pt'>For your Rails project you have a file called <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Gemfile</span>. In
here you can add gems you want to include and use in your project. Once added
you need to install the gem by using <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>bundler</span> (See Bundler section).</p>

<h4 style='margin-left:.75pt'>Gemfile.lock</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Gemfile.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>lock</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Once you have done this, your  will be updated with your
newly added gems and their dependencies.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This file locks your used gems so they use that specific
version declared in that file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image515.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Gemfile.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>lock</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>This example is for the gem <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>devise</span>. In the  the version <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>4.0.3</span> is
declared, to tell when installing your project on an other machine or on your
production server which specified version to use.</p>

<h4 style='margin-left:.75pt'>Development</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>Either a single person, a group or a whole community works
on and maintains a gem. Work done is usually released after certain <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>issues</span> have
been fixed or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>features</span>
have been added.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:164.8pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>Usually the releases follow the <a
href="http://semver.org/"><span style='color:#D4072F'>Semantic Versioning 2.0.0</span></a>
principle.</p>

<h2 style='margin-top:0in;margin-right:164.8pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324070">Section 27.3:
Bundler</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>The easiest way to handle and manage gems is by using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bundler</span>. <a
href="http://bundler.io/"><span style='color:#D4072F'>Bundler</span></a> is a
package manager comparable to bower.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To use bundler you first need to install it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image516.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>After you have bundler up and running all you need to do is
add gems to your <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Gemfile</span>
and run</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image517.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>in your terminal. This installs your newly added gems to
your project. Should an issue arise, you would get a prompt in your terminal.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:130.4pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>If you are interested in more details,
I suggest you have a look at the <a href="http://bundler.io/docs.html"><span
style='color:#D4072F'>docs</span></a>.</p>

<h2 style='margin-top:0in;margin-right:130.4pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324071">Section 27.4:
Gemsets</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>RVM</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Ruby Version Manager</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you are using <b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>)</span></b> then using a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>gemset</span> for
each project is a good idea. A <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>gemset</span> is just a container you can use to keep gems
separate from each other. Creating a <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>gemset</span> per project allows you to change gems
(and gem versions) for one project without breaking all your other projects.
Each project need only worry about its own gems.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=483 style='width:362.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#0066FF'>@global</span></b><span
  style='font-size:9.0pt;line-height:107%'> gemset</span></p>
  </td>
  <td width=281 valign=top style='width:210.8pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> per ruby interpreter. Gems
  you install to the </p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#0066FF'>@global</span></b><span
  style='font-size:9.0pt;line-height:107%'> gemset</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>RVM</span> provides (&gt;= 0.1.8) a  for a given</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>ruby are available to all other gemsets you create in
association with that ruby. This is a good way to allow all of your projects to
share the same installed gem for a specific ruby interpreter installation.</p>

<h4 style='margin-left:.75pt'>Creating gemsets</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ruby</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>2.3.1</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Suppose you already have  installed and you have selected it
using this command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image518.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now to create gemset for this ruby version:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image519.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>where the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>new_gemset</span> is the name of gemset. To see the list of
available gemsets for a ruby version:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image520.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to list the gems of all ruby versions:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image521.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to use a gemset from the list (suppose <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>new_gemset</span>
is the gemset I want to use):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image522.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>you can also specify the ruby version with the gemset if you
want to shift to some other ruby version:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image522.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to specify a default gemset for a particular ruby version:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image523.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to remove all the installed gems from a gemset you can empty
it by:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image524.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to copy a gemset from one ruby to another you can do it by:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image525.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to delete a gemset:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image526.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to see the current gemset name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image527.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to install a gem in the global gemset:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image521.gif"></span></p>

<h4 style='margin-left:.75pt'>Initializing Gemsets during Ruby Installs</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>When you install a new ruby, RVM not only creates two
gemsets (the default, empty gemset and the global gemset), it also uses a set
of user-editable files to determine which gems to install.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=383 style='width:287.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rvm</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gemsets</span></p>
  </td>
  <td width=107 valign=top style='width:80.45pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>, rvm searchs for </p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>global.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>gems</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> and </p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>default.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>gems</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Working in <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>~</span><b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>/</span></b><span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>.</span> using a tree-hierachy based on
the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ree</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>1.8.7</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>p2010.02</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>ruby string being installed. Using the example of , rvm will
check (and import from) the following files:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image528.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=166 style='width:124.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rvm</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gemsets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>global.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>gems</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, if you edited <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>~</span><b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>/</span></b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>.</span> by adding
these two lines:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image529.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>default.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>gems</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>global.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>gems</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:25.25pt;margin-bottom:
1.25pt;margin-left:59.65pt;text-indent:-59.4pt'>every time you install a new
ruby, these two gems are installed into your global gemset.  and  files are
usually overwritten during update of rvm.<br clear=all style='page-break-before:
always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324072">Chapter 28: Change default timezone</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324073">Section 28.1: Change Rails timezone AND have Active Record
store times in this timezone</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image530.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324074">Section 28.2: Change Rails timezone, but continue to have
Active Record save in the database in UTC</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image531.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324075">Chapter 29: Asset Pipeline</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:11.2pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>The asset pipeline provides a framework to
concatenate and minify or compress JavaScript and CSS assets. It also adds the
ability to write these assets in other languages and pre-processors such as
CoffeeScript, Sass and ERB. It allows assets in your application to be
automatically combined with assets from other gems. For example, jqueryrails
includes a copy of jquery.js and enables AJAX features in Rails.</p>

<h2 style='margin-top:0in;margin-right:11.2pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324076">Section 29.1: Manifest Files and Directives</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>initializers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>In the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>assets</span> initalizer () are a few files explicitly
defined to be precompiled.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><i><span
style='font-size:9.0pt;line-height:110%;color:green'># Precompile additional
assets.</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895732224'><span style='left:0px;position:absolute;
left:0px;top:-87129px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image195.gif"></span></span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># application.coffee,
application.scss, and all non-JS/CSS in app/assets folder are already added.</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><i><span
style='font-size:9.0pt;line-height:110%;color:green'>#
Rails.application.config.assets.precompile += %w( search.js )</span></i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=276 style='width:206.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> and </p>
  </td>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>scss</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>In this example the  are so called 'Manifest Files'. This
files should be used to include other JavaScript or CSS assets. The following
command are available:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>require</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=585 style='width:438.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>require_directory </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span></p>
  </td>
  <td width=376 valign=top style='width:281.9pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&gt;</span></b>:
  requires all the files inside a single directory. It's similar to </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>/*</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=599 style='width:449.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>require_tree </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span></p>
  </td>
  <td width=405 valign=top style='width:303.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&gt;</span></b>:
  requires all the nested files in a directory. Its glob equivalent is </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>/**/*</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:6.75pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12><b><span style='font-size:9.0pt;line-height:107%;
color:#006600;background:#FAFAFA'>&gt;</span></b>: The <b><span
style='font-size:9.0pt;line-height:107%;color:#CC0066;background:#FAFAFA'>require</span></b>
directive functions similar to Ruby's own <b><span style='font-size:9.0pt;
line-height:107%;color:#CC0066;background:#FAFAFA'>require</span></b>. It
provides a way to declare a dependency on a file in your path and ensures it's
only loaded once before the source file.  since it does</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>not follow nested directories.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:11.4pt;margin-bottom:
.25pt;margin-left:21.4pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>. <span style='font-size:9.0pt;line-height:
133%;background:#FAFAFA'>require_self</span>: causes the body of the current
file to be inserted before any subsequent <b><span style='font-size:9.0pt;
line-height:133%;color:#CC0066;background:#FAFAFA'>require</span></b>
directives. Useful in CSS files, where it's common for the index file to
contain global styles that need to be defined before other dependencies are
loaded.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>stub </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>depend_on </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>path</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12><b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>&gt;</span></b>: remove a file from being
included</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:16.2pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'><b><span style='font-size:9.0pt;line-height:107%;color:#006600;
background:#FAFAFA'>&gt;</span></b>: Allows you to state a dependency on a file
without including it. This is used for caching</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:30.0pt'>purposes. Any changes made to the dependency file will
invalidate the cache of the source file.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>scss</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>An  file could look like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image532.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Another example is the  file. Here with including <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>jquery</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Turbolinks</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image533.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you don't use CoffeeScript, but plain JavaScript, the
syntax would be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image534.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324077">Section 29.2: Rake tasks</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>sprockets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>By default  is shipped with the following rake tasks:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets:clean</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>[</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>keep</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>precompile</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12><b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>]</span></b>: Remove old compiled assets</p>

<p class=MsoNormal style='margin-top:0in;margin-right:254.05pt;margin-bottom:
.25pt;margin-left:.55pt;text-align:justify;text-justify:inter-ideograph;
text-indent:5.5pt;line-height:133%'><span style='font-size:9.0pt;line-height:
133%;background:#FAFAFA'>assets:clobber</span>: Remove compiled assets <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>assets:environment</span>:
Load asset compile environment <span style='font-size:9.0pt;line-height:133%;
background:#FAFAFA'>assets:precompile</span>: Compile all the assets named in </p>

<h2 style='margin-top:0in;margin-right:254.05pt;margin-bottom:.25pt;margin-left:
.55pt;text-align:justify;text-justify:inter-ideograph;text-indent:5.5pt;
line-height:133%'><a name="_Toc324078">Section 29.3: Basic Usage</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>There are two basic ways that the asset pipeline is used:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>When
running a server in development mode, it automatically pre-processes and
prepares your assets onthe-fly.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:17.65pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>In
production mode, you<span style='font-family:"Arial",sans-serif'>’</span>ll
probably use it to pre-process, versionize, and compress and compile your
assets. You can do so by running the following command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.95pt;
margin-left:30.5pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><span
style='font-size:9.0pt;line-height:107%'>bundle </span><b><span
style='font-size:9.0pt;line-height:107%;color:#CC0066'>exec</span></b><span
style='font-size:9.0pt;line-height:107%'> rake assets:precompile</span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324079">Chapter 30: Upgrading Rails</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324080">Section 30.1: Upgrading from Rails 4.2 to Rails
5.0</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.0pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><i>Note: Before
upgrading your Rails app, always make sure to save your code on a version
control system, such as Git.</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To upgrade from Rails 4.2 to Rails 5.0, you must be using
Ruby 2.2.2 or newer. After upgrading your Ruby version if required, go to your
Gemfile and change the line:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image535.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image536.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>and on the command line run:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image537.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now run the update task using the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image538.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.5pt;
margin-left:.25pt'>This will help you to update configuration files. You will
be prompted to overwrite files and you have several options to input:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:235.8pt;margin-bottom:
12.2pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12>Y <span style='font-family:"Arial",sans-serif'>–</span>
yes, overwrite n <span style='font-family:"Arial",sans-serif'>–</span> no, do
not overwrite a <span style='font-family:"Arial",sans-serif'>–</span> all,
overwrite this and all others q <span style='font-family:"Arial",sans-serif'>–</span>
quit, abort d <span style='font-family:"Arial",sans-serif'>–</span> diff, show
the differences between the old and the new h <span style='font-family:"Arial",sans-serif'>–</span>
help</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:.25pt'>Typically, you should check the differences between the old
and new files to make sure you aren't getting any unwanted changes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails 5.0 <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>ActiveRecord</span> models inherit from <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ApplicationRecord</span>,
rather than <b><span style='font-size:9.0pt;line-height:112%;color:#6666FF;
background:#FAFAFA'>ActiveRecord::Base</span></b>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>models</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application_record.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>ApplicationRecord</span> is the superclass for all models, similar to
how <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ApplicationController</span>
is the superclass for controllers. To account for this new way in which models
are handled, you must create a file in your <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>/ </span></b>folder called 
and then edit that file's contents to be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image539.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Rails 5.0 also handles callbacks slightly different.
Callbacks that return <b><span style='font-size:9.0pt;line-height:112%;
color:blue;background:#FAFAFA'>false</span></b> won't halt the callback chain,
which means subsequent callbacks will still run, unlike Rails 4.2. When you
upgrade, the Rails 4.2 behavior will remain, though you can switch to the Rails
5.0 behavior by adding:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image540.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=579 style='width:434.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
  <td width=341 valign=top style='width:255.95pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> file. You can explicitly
  halt the callback chain by calling </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>throw</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#FF3333'>:abort</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>to the <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>)</span></b>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:172.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application_job.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
  <td width=42 valign=top style='width:31.75pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> in the </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>jobs</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In Rails 5.0, <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>ActiveJob</span> will inherit from <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>ApplicationJob</span>, rather than <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveJob::Base</span></b>
like in Rails 4.2. To upgrade to Rails 5.0, create a file called <b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>/</span></b>
folder. Edit that file's contents to be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image541.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Then, you must change all of your jobs to inherit from <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ApplicationJob</span>
rather than <b><span style='font-size:9.0pt;line-height:112%;color:#6666FF;
background:#FAFAFA'>ActiveJob::Base</span></b>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>$ bin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>One of the other biggest changes of Rails 5.0 doesn't
require any code changes, but will change the way you use the command line with
your Rails apps. You will be able to use , or just <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rails</span>, to run tasks and tests. For
example, instead of using <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>$ rake db:migrate</span>, you can now do <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>$ rails db:migrate</span>.
If you run , you can view all the available commands. Note that many of the
tasks that can now be run with  still work using <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>rake</span>.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324081">Chapter 31: ActiveRecord Locking</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324082">Section 31.1: Optimistic Locking</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image542.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324083">Section 31.2: Pessimistic Locking</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image543.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324084">Chapter 32: Debugging</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324085">Section 32.1: Debugging Rails Application</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>To be able to debug an application is very important to
understand the flow of an application's logic and data. It helps solving
logical bugs and adds value to the programming experience and code quality. Two
popular gems for debugging are <a href="https://github.com/cldwalker/debugger"><span
style='color:#D4072F'>debugger</span></a> (for ruby 1.9.2 and 1.9.3) and <a
href="https://github.com/deivid-rodriguez/byebug"><span style='color:#D4072F'>byebug</span></a>
(for ruby &gt;= 2.x).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.6pt;
margin-left:.25pt'>For debugging <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>.</span> files, follow these steps:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.85pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:109%'><span
style='line-height:109%'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Add <span style='font-size:9.0pt;line-height:109%;background:
#FAFAFA'>debugger</span> or <span style='font-size:9.0pt;line-height:109%;
background:#FAFAFA'>byebug</span> to the <span style='font-size:9.0pt;
line-height:109%;background:#FAFAFA'>development</span> group of <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>Gemfile</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.85pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:109%'><span
style='line-height:109%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run <span style='font-size:9.0pt;line-height:109%;background:
#FAFAFA'>bundle install</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>debugger</span>
or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>byebug</span>
as the breakpoint</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Run
the code or make request</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>See
the rails server log stopped at the specified breakpoint</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>At
this point you can use your server terminal just like <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>rails console</span> and check the
values of variable and params</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>For
moving to next instruction, type <b><span style='font-size:9.0pt;line-height:
112%;color:#9966CC;background:#FAFAFA'>next</span></b> and press <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>enter</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.75pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>For
stepping out type <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>c</span> and press <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>enter</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=365 style='width:273.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
  <td width=213 valign=top style='width:160.1pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> files, break point will be
  added as </p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;% debugger %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.4pt;
margin-left:.25pt'>If you want to debug <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>.<b>&gt;</b></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324086">Section 32.2: Debugging Ruby on Rails Quickly +
Beginner advice</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:27.5pt;
margin-left:.25pt'><b><i>Debugging by raising exceptions</i></b> is <i>far
easier</i> than squinting through <b><span style='font-size:9.0pt;line-height:
112%;color:#CC0066;background:#FAFAFA'>print</span></b> log statements, and for
most bugs, its generally <i>much faster</i> than opening up an irb debugger
like <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>pry</span>
or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>byebug</span>.
Those tools should not be your first step.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>Debugging Ruby/Rails
Quickly:</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>inspect</span></b></p>
  </td>
 </tr>
</table>

<h4 style='margin-left:.75pt'>1. Fast Method: Raise an <span style='font-size:
9.0pt;line-height:107%;color:#CC00FF;background:#FAFAFA'>Exception</span> then
and <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span>
its result</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>inspect</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The <i>fastest</i> way to debug Ruby (especially Rails) code
is to <b><span style='font-size:9.0pt;line-height:112%;color:#CC0066;
background:#FAFAFA'>raise</span></b> an exception along the execution path of
your code while calling <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>.</span> on the method or object (e.g. <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>foo</span>):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image544.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>inspect</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>In the above code, <b><i><span style='font-size:9.0pt;
line-height:112%;color:#CC0066;background:#FAFAFA'>raise</span></i></b>
triggers an <b><i><span style='font-size:9.0pt;line-height:112%;color:#CC00FF;
background:#FAFAFA'>Exception</span></i></b> that <i>halts execution of your
code</i>, and returns an error message that conveniently contains <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>.</span>
information about the object/method (i.e. <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>foo</span>) on the line that you're trying
to debug.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>This technique is useful for <i>quickly</i> examining an
object or method (<i>e.g. is it </i><b><i><span style='font-size:9.0pt;
line-height:112%;color:blue;background:#FAFAFA'>nil</span></i></b><i>?</i>) and
for immediately confirming whether a line of code is even getting executed at
all within a given context.</p>

<h4 style='margin-left:.75pt'>2. Fallback: Use a ruby <i>IRB</i> debugger like <span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>byebug</span> or <span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>pry</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>Only after you have information about the state of your
codes execution flow should you consider moving to a ruby gem irb debugger like
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>pry</span> or
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>byebug</span>
where you can delve more deeply into the state of objects within your execution
path.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To use the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>byebug</span> gem for debugging in Rails:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gem </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'byebug'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.5pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add 
inside the <i>development</i> group in your <i>Gemfile</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.85pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:109%'><span
style='line-height:109%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Run <span style='font-size:9.0pt;line-height:109%;background:
#FAFAFA'>bundle install</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Then
to use, insert the phrase <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>byebug</span> inside the execution path of the code you
want examined.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>This <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>byebug</span> variable when executed will open up an ruby
IRB session of your code, giving you direct access to the state of objects as
they are at that point in the code's execution.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:27.5pt;
margin-left:.25pt'>IRB debuggers like Byebug are useful for deeply analyzing
the state of your code as it executes. However, they are more time consuming
procedure compared to raising errors, so in most situations they should not be
your first step.</p>

<h4 style='margin-left:.75pt'>General Beginner Advice</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>When you are trying to debug a problem, good advice is to
always: <b>Read The !@#$ing Error Message (RTFM)</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.0pt;
margin-left:.25pt'>That means reading error messages <i>carefully</i> and <i>completely</i>
before acting so that you <i>understand what it's trying to tell you.</i> When
you debug, ask the following mental questions, <i>in this order</i>, when
reading an error message:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.9pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:107%'><span
style='line-height:107%'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>What <b><i>class</i></b> does the error reference? (i.e. <i>do I
have the correct object class or is my object </i><b><i><span style='font-size:
9.0pt;line-height:107%;color:blue;background:#FAFAFA'>nil</span></i></b><i>?</i>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.2pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:107%'><span
style='line-height:107%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>What <b><i>method</i></b> does the error reference? (i.e. <i>is
their a type in the method; can I call this method on this type/class of
object?</i>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Finally,
using what I can infer from my last two questions, what <b><i>lines of code</i></b>
should I investigate? (remember: the last line of code in the stack trace is
not necessarily where the problem lies.)</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:26.4pt;margin-bottom:
12.25pt;margin-left:38.05pt;text-indent:-37.8pt'>In the stack trace pay
particular attention to lines of code that come from your project (e.g. lines
starting with  if you are using Rails). 99% of the time the problem is with
your own code.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>To illustrate why interpreting <i>in this order</i> is
important...</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>E.g. a Ruby error
message that confuses many beginners:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You execute code that at some point executes as such:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image545.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.45pt;
margin-left:.25pt'>and you get an error that states:</p>

<p class=MsoNormal style='margin-bottom:14.0pt;text-indent:0in;line-height:
107%;background:#FAFAFA'><b><span style='font-size:9.0pt;line-height:107%'>undefined
method </span></b><b><span style='font-size:9.0pt;line-height:107%;color:#996600'>&quot;bar&quot;</span></b><b><span
style='font-size:9.0pt;line-height:107%'> </span></b><b><span style='font-size:
9.0pt;line-height:107%;color:#9966CC'>for</span></b><b><span style='font-size:
9.0pt;line-height:107%'> </span></b><b><span style='font-size:9.0pt;line-height:
107%;color:blue'>Nil</span></b><b><span style='font-size:9.0pt;line-height:
107%'>:nilClass</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.1pt;
margin-left:.25pt'>Beginners see this error and think the problem is that the
method <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bar</span>
is <i>undefined</i>. <b>It's not.</b> In this error the real part that matters
is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.95pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><b><span
style='font-size:9.0pt;line-height:107%;color:#9966CC'>for</span></b><span
style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
9.0pt;line-height:107%;color:blue'>Nil</span></b><span style='font-size:9.0pt;
line-height:107%'>:nilClass</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>for</span></b><b><span
  style='font-size:9.0pt;line-height:107%'> </span></b><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>Nil</span></b><b><span
  style='font-size:9.0pt;line-height:107%'>:nilClass</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:.45pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'><b> means that </b><b><span style='font-size:9.0pt;
line-height:107%;color:#0066FF;background:#FAFAFA'>@foo</span> is Nil!</b> <b><span
style='font-size:9.0pt;line-height:107%;color:#0066FF;background:#FAFAFA'>@foo</span></b>
is not a <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>Foo</span>
instance variable! You have an object that is <b><span style='font-size:9.0pt;
line-height:107%;color:blue;background:#FAFAFA'>Nil</span></b>. When</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>you see this error, it's simply ruby trying to tell you that
the method <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bar</span>
doesn't exist for objects of the class <b><span style='font-size:9.0pt;
line-height:112%;color:blue;background:#FAFAFA'>Nil</span></b>. (well duh!
since we are trying to use a method for an object of the class <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Foo</span> not <b><span
style='font-size:9.0pt;line-height:112%;color:blue;background:#FAFAFA'>Nil</span></b>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=281 style='width:210.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=281 valign=top style='width:210.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>undefined method </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>&quot;bar&quot;</span><span style='font-size:
  9.0pt;line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:
  107%;color:#9966CC'>for</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>Nil</span></b><span
  style='font-size:9.0pt;line-height:107%'>:nilClass</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Unfortunately, due to how this error is written () its easy
to get tricked</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>into thinking this error has to do with <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bar</span> being <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>undefined</span>.
When not read carefully this error causes beginners to mistakenly go digging
into the details of the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>bar</span> method on <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Foo</span>, entirely missing the part of
the error that hints that the object is of the wrong class (in this case: nil).
It's a mistake that's easily avoided by reading error messages in their
entirety.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>Summary:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>Always carefully <b>read the <i>entire</i> error message</b>
before beginning any debugging. That means: Always check the <b><i>class</i></b>
type of an object in an error message <i>first</i>, then its <b><i>methods</i></b>,
<i>before</i> you begin sleuthing into any stacktrace or line of code where you
think the error may be occurring. Those 5 seconds can save you 5 hours of
frustration.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:30.65pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'><b>tl;dr:</b> Don't squint at print logs:
raise exceptions instead. Avoid rabbit holes by reading errors carefully before
debugging.</p>

<h2 style='margin-top:0in;margin-right:30.65pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324087">Section 32.3: Debugging ruby-on-rails application with pry</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'><a href="https://github.com/pry/pry"><span style='color:
#D4072F'>pry</span></a> is a powerful tool that can be used to debug any ruby
application. Setting up a ruby-on-rails application with this gem is very easy
and straightforward.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.7pt;margin-left:
.75pt'>Setup</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=171
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image546.gif"></span></p>

<h4 style='margin-left:.75pt'>Use</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>binding</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>pry</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>binding</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>pry</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Using pry in your application is just including  on the
breakpoints you want to inspect while debugging. You can add  breakpoints
anywhere in your application that is interpreted by ruby interpreter (any
app/controllers, app/models, app/views files)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:284.45pt;margin-bottom:
.15pt;margin-left:.5pt;text-indent:-.5pt;line-height:215%'><span
style='line-height:215%'>i)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Debugging a Controller<i>app/controllers/users_controller.rb</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image547.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In this example, the rails server pauses with a pry console
at the break-point when you try to visit a page routing to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>show</span> action
on <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>UsersController</span>.
You can inspect <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>params</span>
object and make ActiveRecord query on <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>User</span> model from that breakpoint</p>

<p class=MsoNormal style='margin-top:0in;margin-right:284.45pt;margin-bottom:
.15pt;margin-left:.5pt;text-indent:-.5pt;line-height:215%'><span
style='line-height:215%'>ii)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Debugging a View<i>app/views/users/show.html.haml</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image548.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>users</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>show</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#0066FF'>@user</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>logged_in</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:21.85pt;margin-bottom:
12.25pt;margin-left:.25pt'>In this example, the break-point pauses with pry
console when the  page is pre-compiled in the rails server before sending it
back to the client's browser. This break-point allows to debug correctness of <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>?</span> when it is
misbehaving.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>ii) Debugging a Model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image549.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>In this example, the break-point can be used to debug <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>User</span> model's
instance method <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>full_name</span>
when this method is called from anywhere in the application.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.4pt;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>In conclusion, pry is a powerful debugging tool for
rails application with easy setup and straightforward debugging guideline. Give
this a try.</p>

<h2 style='margin-top:0in;margin-right:7.4pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324088">Section 32.4: Debugging in your IDE</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Every good <a
href="https://en.wikipedia.org/wiki/Integrated_development_environment"><span
style='color:#D4072F'>IDE</span></a> provides a <a
href="https://en.wikipedia.org/wiki/Graphical_user_interface"><span
style='color:#D4072F'>GUI</span></a> for interactively debugging Ruby (and thus
Rails) applications where you can add breakpoints, watches, auto pausing on
exception and allows you to follow the code execution even step by step, line
by line.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>For example, take a look at one of the best Ruby IDE's,
RubyMine's debugging features on the picture</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=655 id="Picture 26148"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image550.jpg"></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324089">Chapter 33: Configure Angular with Rails</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324090">Section 33.1: Angular with Rails 101</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.75pt;margin-left:
.75pt'>Step 1: Create a new Rails app</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:399.75pt;margin-bottom:
10.45pt;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.25pt;line-height:131%'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"
align=left hspace=12><span style='font-size:9.0pt;line-height:131%'>gem install
rails </span><b><span style='font-size:9.0pt;line-height:131%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:131%'>v </span><span style='font-size:9.0pt;
line-height:131%;color:#006666'>4.1 </span><span style='font-size:9.0pt;
line-height:131%'>rails new angular_example </span><b>Step 2: Remove Turbolinks</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Removing turbolinks requires removing it from the Gemfile.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image551.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=266 style='width:199.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=266 valign=top style='width:199.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:
  107%'>assets</span><b><span style='font-size:9.0pt;line-height:107%;
  color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:107%'>javascripts</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600'>/</span></b><span
  style='font-size:9.0pt;line-height:107%'>application.</span><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>js</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:8.1pt;
margin-left:.25pt'>Remove the <b><span style='font-size:9.0pt;line-height:112%;
color:#CC0066;background:#FAFAFA'>require</span></b> from :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.8pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
11.0pt;line-height:110%'><img border=0 width=718 height=26 id="Group 277411"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image552.gif"></span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:110%'>= </span><b><span style='font-size:
9.0pt;line-height:110%;color:#CC0066'>require</span></b><span style='font-size:
9.0pt;line-height:110%'> turbolinks</span></p>

<h4 style='margin-left:.75pt'>Step 3: Add AngularJS to the asset pipeline</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In order to get Angular to work with the Rails asset
pipeline we need to add to the Gemfile:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image553.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now run the command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image554.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>bower</span> so that we can install the AngularJS
dependency:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image555.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bower.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>json</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add Angular to :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image556.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bower.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>json</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.55pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:155%'>Now that  is setup with the right dependencies, let<span
style='font-family:"Arial",sans-serif'>’</span>s install them: <span
style='font-size:11.0pt;line-height:155%'><img border=0 width=718 height=26
id="Group 277419"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image557.gif"></span><span
style='font-size:9.0pt;line-height:155%'>bundle </span><b><span
style='font-size:9.0pt;line-height:155%;color:#CC0066'>exec</span></b><span
style='font-size:9.0pt;line-height:155%'> rake bower:install </span><b>Step 4:
Organize the Angular app</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:2.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=245 valign=top style='width:2.55in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:
  107%'>assets</span><b><span style='font-size:9.0pt;line-height:107%;
  color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:107%'>javascript</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600'>/</span></b><span
  style='font-size:9.0pt;line-height:107%'>angular</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:107%'>app</span><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>/</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Create the following folder structure in :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=27
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image558.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=104
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image559.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=266 style='width:199.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>javascripts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>js</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In , add <b><span style='font-size:9.0pt;line-height:112%;
color:#CC0066;background:#FAFAFA'>require</span></b> for Angular, the template
helper, and the Angular app file structure. Like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=259
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image560.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=346 style='width:3.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>javascripts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>angular</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>js</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Create :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:12.55pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><b><span
style='font-size:9.0pt;line-height:110%;color:#0066FF'>@app</span></b><span
style='font-size:9.0pt;line-height:110%'> = angular.</span><b><span
style='font-size:9.0pt;line-height:110%;color:#9966CC'>module</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'app'</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'templates'</span><span style='font-size:9.0pt;line-height:110%'>
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>])</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><b><span
style='font-size:9.0pt;line-height:110%;color:#0066FF'>@app</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>config</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>([</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>'$httpProvider'</span><span style='font-size:9.0pt;line-height:
110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>$httpProvider</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)-&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:17.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895726080'><span style='left:0px;position:absolute;
left:0px;top:-95757px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image238.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#FF6633'>$httpProvider</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>defaults</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>headers</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>common</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>[</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'X-CSRF-Token'</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>]</span></b><span
style='font-size:9.0pt;line-height:110%'> = $</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'meta[name=csrftoken]'</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>attr</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'content'</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>) ])</span></b><span style='font-size:9.0pt;
line-height:110%'>  </span><b><span style='font-size:9.0pt;line-height:110%;
color:#0066FF'>@app</span></b><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>run</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(-&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'>   console.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>log</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'angular app running'</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>)</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=461 style='width:4.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>javascripts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>angular</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>modules</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>example.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>js</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Create an Angular module at :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895725056'><span style='left:0px;position:absolute;
left:0px;top:-95853px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#0066FF'>@exampleApp</span></b><span
style='font-size:9.0pt;line-height:110%'> = angular.</span><b><span
style='font-size:9.0pt;line-height:110%;color:#9966CC'>module</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'app.exampleApp'</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:110%'>     </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># additional dependencies here   ])   .run(-&gt;    console.log
'exampleApp running'   )</span></i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>assets</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>javascripts</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>angular</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Create an Angular controller for this app at <b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>-</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=266 style='width:199.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>exampleCtrl.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>js</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>coffee</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:199.8pt'>:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>config</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>routes.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:27.4pt;margin-bottom:
6.35pt;margin-left:0in;text-indent:3.75pt;line-height:176%'><span
style='position:relative;z-index:-1895724032'><span style='left:0px;position:
absolute;left:0px;top:-95953px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:176%'>angular.</span><b><span
style='font-size:9.0pt;line-height:176%;color:#9966CC'>module</span></b><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:176%;color:#996600'>'app.exampleApp'</span><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:176%'>.</span><span style='font-size:9.0pt;
line-height:176%;color:#9900CC'>controller</span><b><span style='font-size:
9.0pt;line-height:176%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:176%;color:#996600'>&quot;ExampleCtrl&quot;</span><span
style='font-size:9.0pt;line-height:176%'>, </span><b><span style='font-size:
9.0pt;line-height:176%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:176%'>   </span><span style='font-size:9.0pt;line-height:176%;
color:#996600'>'$scope'</span><span style='font-size:9.0pt;line-height:176%'>,  
</span><b><span style='font-size:9.0pt;line-height:176%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:176%'>$scope</span><b><span
style='font-size:9.0pt;line-height:176%;color:#006600'>)-&gt;</span></b><span
style='font-size:9.0pt;line-height:176%'>    console.</span><span
style='font-size:9.0pt;line-height:176%;color:#9900CC'>log</span><span
style='font-size:9.0pt;line-height:176%'> </span><span style='font-size:9.0pt;
line-height:176%;color:#996600'>'ExampleCtrl running'</span><span
style='font-size:9.0pt;line-height:176%'>      </span><b><span
style='font-size:9.0pt;line-height:176%;color:#FF6633'>$scope</span></b><span
style='font-size:9.0pt;line-height:176%'>.</span><span style='font-size:9.0pt;
line-height:176%;color:#9900CC'>exampleValue</span><span style='font-size:9.0pt;
line-height:176%'> = </span><span style='font-size:9.0pt;line-height:176%;
color:#996600'>&quot;Hello angular and rails&quot;</span><span
style='font-size:9.0pt;line-height:176%'>  </span><b><span style='font-size:
9.0pt;line-height:176%;color:#006600'>]) </span></b>Now add a route to Rails to
pass control over to Angular. In:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:107.9pt;margin-bottom:
0in;margin-left:.25pt;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895723008'><span style='left:0px;position:
absolute;left:0px;top:-96019px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:240%'>Rails.</span><span style='font-size:
9.0pt;line-height:240%;color:#9900CC'>application</span><span style='font-size:
9.0pt;line-height:240%'>.</span><span style='font-size:9.0pt;line-height:240%;
color:#9900CC'>routes</span><span style='font-size:9.0pt;line-height:240%'>.</span><span
style='font-size:9.0pt;line-height:240%;color:#9900CC'>draw</span><span
style='font-size:9.0pt;line-height:240%'> </span><b><span style='font-size:
9.0pt;line-height:240%;color:#9966CC'>do</span></b><span style='font-size:9.0pt;
line-height:240%'>   get </span><span style='font-size:9.0pt;line-height:240%;
color:#996600'>'example'</span><span style='font-size:9.0pt;line-height:240%'> </span><b><span
style='font-size:9.0pt;line-height:240%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:#996600'>'example#index'</span><span style='font-size:
9.0pt;line-height:240%'> </span><b><span style='font-size:9.0pt;line-height:
240%;color:#9966CC'>end </span></b>Generate the Rails controller to respond to
that route:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image561.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=266 style='width:199.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>example_controller.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=44
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image562.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image563.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>In the view, we need to specify which Angular app and which
Angular controller will drive this page. So in</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>views</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>example</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>index.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>html</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>erb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:2.4in'>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image564.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>To view the app, start your Rails server and visit <u><span
style='color:#D4072F'>http://localhost:3000/example</span></u>.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324091">Chapter 34: Rails logger</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324092">Section 34.1: Rails.logger</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=295 style='width:221.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Rails.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>logger</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>{</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>debug</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>|</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>info</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>|</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>warn</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>|</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>error</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>|</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>fatal</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>log</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=329 style='width:246.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>development.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>log</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> or </p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>production.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>log</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> or </p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>staging.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>log</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Always use <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>}</span></b> rather than <b><span
style='font-size:9.0pt;line-height:112%;color:#CC0066;background:#FAFAFA'>puts</span></b>.
This allows your logs to fit into the standard log format, have a timestamp and
have a level so you choose whether they are important enough to be shown in a
specific environment. You can see the separate log files for your application
under <b><span style='font-size:9.0pt;line-height:112%;color:#006600;
background:#FAFAFA'>/</span></b> directory with your rails app environment
name. like: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>You can easily rotating rails production logs with
LogRotate.You just have to do small configuration as below</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>etc</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>logrotate.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>conf</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Open <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>/</span></b> with your favourite linux editor
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>vim</span> or
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>nano</span>
and add the below code in this file at bottom.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image565.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>So, <b>How It Works</b> This is fantastically easy. Each bit
of the configuration does the following:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image258.gif"
align=left hspace=12><b>daily</b> <span style='font-family:"Arial",sans-serif'>–</span>
Rotate the log files each day. You can also use weekly or monthly here instead.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:9.65pt;margin-bottom:
12.4pt;margin-left:20.9pt'><b>missingok</b> <span style='font-family:"Arial",sans-serif'>–</span>
If the log file doesn<span style='font-family:"Arial",sans-serif'>’</span>t
exist,ignore it <b>rotate 7</b> <span style='font-family:"Arial",sans-serif'>–</span>
Only keep 7 days of logs around <b>compress</b> <span style='font-family:"Arial",sans-serif'>–</span>
GZip the log file on rotation <b>delaycompress</b> <span style='font-family:
"Arial",sans-serif'>–</span> Rotate the file one day, then compress it the next
day so we can be sure that it won<span style='font-family:"Arial",sans-serif'>’</span>t
interfere with the Rails server <b>notifempty</b> <span style='font-family:
"Arial",sans-serif'>–</span> Don<span style='font-family:"Arial",sans-serif'>’</span>t
rotate the file if the logs are empty <b>copytruncate</b> <span
style='font-family:"Arial",sans-serif'>–</span> Copy the log file and then
empties it. This makes sure that the log file Rails is writing to always exists
so you won<span style='font-family:"Arial",sans-serif'>’</span>t get problems
because the file does not actually change. If you don<span style='font-family:
"Arial",sans-serif'>’</span>t use this, you would need to restart your Rails
application each time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'><b>Running Logrotate</b> Since we just wrote this
configuration, you want to test it.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=338 style='width:253.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#C20CB9'>sudo</span></b><span style='font-size:
  9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>usr</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>sbin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>logrotate </span><span style='font-size:9.0pt;
  line-height:107%;color:#660033'>-f</span><span style='font-size:9.0pt;
  line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>etc</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>logrotate.conf</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:121.7pt;margin-bottom:
12.55pt;margin-left:.25pt'>To run logrotate manually, just do: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>That's it.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324093">Chapter 35: Prawn PDF</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324094">Section 35.1: Advanced Example</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This is the advanced approach with example</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image566.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=238 style='width:178.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=238 valign=top style='width:178.2pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>FundsPdf.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>new</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>(</span></b><span style='font-size:9.0pt;
  line-height:107%'>@fund, view_context</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>)</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>I above code we have this line . Here we are initializing
FundsPdf class with</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>@fund instance and view_context to use helper methods in
FundsPdf. FundsPdf wuld look like this</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=437
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image567.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This is one of the best approach to generate PDF with
classes using Prawn gem.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324095">Section 35.2: Basic Example</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>You need to add Gem and PDF MIME:Type inside mime_types.rb
as we need to notify rails about PDF mime type.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>After that we can generate Pdf with Prawn in following basic
ways</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=94
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image568.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image569.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>With
Explicit Block</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image570.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324096">Chapter 36: Rails API</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324097">Section 36.1: Creating an API-only application</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>To build a Rails application that will be an API server, you
can start with a more limited subset of Rails in Rails 5.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To generate a new Rails API app:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image571.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>--</span></b><span style='font-size:
  9.0pt;line-height:107%'>api</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>What  does is to remove functionality that is not needed
when building an API. This includes sessions, cookies, assets, and anything
that makes Rails work on a browser.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>It will also configure the generators so that they don't
generate views, helpers, and assets when generating a new resource.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>When you compare the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>ApplicationController</span> on a web app
versus an API app, you will see that the web version extends from <b><span
style='font-size:9.0pt;line-height:112%;color:#6666FF;background:#FAFAFA'>ActionController::Base</span></b>,
whereas the API version extends from <b><span style='font-size:9.0pt;
line-height:112%;color:#6666FF;background:#FAFAFA'>ActionController::API</span></b>,
which includes a much smaller subset of functionality.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324098">Chapter 37: Deploying a Rails app on Heroku</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324099">Section 37.1: Deploying your application</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Make sure you are in the directory that contains your Rails
app, then create an app on Heroku.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.85pt;
margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0 width=719
height=62 id="Picture 313715"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image572.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>The first URL of the ouput, <a
href="http://example.herokuapp.com/"><span style='color:#D4072F'>http://example.herokuapp.com</span></a>,
is the location the app is available at. The second URL,
git@heroku.com:example.git, is the remote git repository URL.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>This command should only be used on an initialized git
repository. The heroku create command automatically adds a git remote named <span
style='font-family:"Arial",sans-serif'>“</span>heroku<span style='font-family:
"Arial",sans-serif'>”</span> pointing at this URL.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>The app name argument (<span style='font-family:"Arial",sans-serif'>“</span>example<span
style='font-family:"Arial",sans-serif'>”</span>) is optional. If no app name is
specified, a random name will be generated. Since Heroku app names are in a
global namespace, you can expect that common names, like <span
style='font-family:"Arial",sans-serif'>“</span>blog<span style='font-family:
"Arial",sans-serif'>”</span> or <span style='font-family:"Arial",sans-serif'>“</span>wiki<span
style='font-family:"Arial",sans-serif'>”</span>, will already be taken. It<span
style='font-family:"Arial",sans-serif'>’</span>s often easier to start with a
default name and rename the app later.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Next, deploy your code:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:313.35pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>$ git push heroku master remote:
Compressing source files... </span><span style='font-size:9.0pt;line-height:
110%;color:#9900CC'>done</span><span style='font-size:9.0pt;line-height:110%'>.
</span><span style='font-size:9.0pt;line-height:110%;color:#9900CC'>remote</span><span
style='font-size:9.0pt;line-height:110%'>: Building source: remote:</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>remote: </span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>-----&gt;</span></b><span style='font-size:
9.0pt;line-height:110%'> Ruby app detected remote: </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-----&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> Compiling Ruby</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>Rails remote: </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-----&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> Using Ruby version: ruby</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>2.3.1 remote: </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-----&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> Installing dependencies using bundler
1.11.2 remote:        Running: bundle install </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>--</span></b><span style='font-size:9.0pt;
line-height:110%'>without development:test </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>--</span></b><span style='font-size:9.0pt;
line-height:110%'>path vendor</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:110%'>bundle
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>--</span></b><span
style='font-size:9.0pt;line-height:110%'>binstubs vendor</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>bundle</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>bin </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>j4 </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>--</span></b><span style='font-size:9.0pt;line-height:110%'>deployment
remote:        Warning: the running version of Bundler is older than the
version that created the lockfile. </span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>We</span><span style='font-size:9.0pt;
line-height:110%'> suggest you upgrade to the latest version of Bundler by
running </span><span style='font-size:9.0pt;line-height:110%;color:#996600'>`gem
install bundler`</span><span style='font-size:9.0pt;line-height:110%'>. </span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>remote</span><span
style='font-size:9.0pt;line-height:110%'>:        Fetching gem metadata from
https:</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:110%'>rubygems.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>org</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>.......... </span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>remote</span><span
style='font-size:9.0pt;line-height:110%'>:        Fetching version metadata
from https:</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:110%'>rubygems.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>org</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>... </span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>remote</span><span style='font-size:9.0pt;
line-height:110%'>:        Fetching dependency metadata from https:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:110%'>rubygems.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>org</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>/</span></b><span
style='font-size:9.0pt;line-height:110%'>..</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:210.75pt;margin-bottom:
.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895720960'><span style='left:0px;position:
absolute;left:0px;top:-99405px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image573.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>remote</span><span
style='font-size:9.0pt;line-height:110%'>:        Installing concurrent</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>ruby 1.0.2 remote:        Installing
i18n 0.7.0 remote:        Installing rake 11.2.2 remote:        Installing
minitest 5.9.0 remote:        Installing thread_safe 0.3.5 remote:       
Installing builder 3.2.2 remote:        Installing mini_portile2 2.1.0
remote:        Installing erubis 2.7.0 remote:        Installing pkg</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>config 1.1.7 remote:        Installing
rack 2.0.1 remote:        Installing nio4r 1.2.1 with native extensions
remote:        Installing websocket</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>extensions 0.1.2 remote:        Installing mime</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>-</span></b><span
style='font-size:9.0pt;line-height:110%'>types</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>data 3.2016.0521 remote:        Installing arel 7.0.0
remote:        Installing coffee</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>script</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:110%'>source
1.10.0 remote:        Installing execjs 2.7.0 remote:        Installing
method_source 0.8.2 remote:        Installing thor 0.19.1 remote:       
Installing multi_json 1.12.1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:566.85pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=718
 style='width:538.6pt;border-collapse:collapse'>
 <tr style='height:771.0pt'>
  <td width=718 valign=top style='width:538.6pt;background:#FAFAFA;padding:
  2.55pt .2pt 0in 3.75pt;height:771.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:1.5in;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%'>remote:        Installing puma 3.4.0 with native
  extensions remote:        Installing pg 0.18.4 with native extensions
  remote:        Using bundler 1.11.2 remote:        Installing sass 3.4.22
  remote:        Installing tilt 2.0.5 remote:        Installing turbolinks</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>source 5.0.0 remote:       
  Installing tzinfo 1.2.2 remote:        Installing nokogiri 1.6.8 with native
  extensions remote:        Installing rack</span><b><span style='font-size:
  9.0pt;line-height:112%;color:#006600'>-</span></b><span style='font-size:
  9.0pt;line-height:112%'>test 0.6.3 remote:        Installing sprockets 3.6.3
  remote:        Installing websocket</span><b><span style='font-size:9.0pt;
  line-height:112%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:112%'>driver 0.6.4 with native extensions remote:       
  Installing mime</span><b><span style='font-size:9.0pt;line-height:112%;
  color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:112%'>types
  </span><span style='font-size:9.0pt;line-height:112%;color:#006666'>3.1 </span><span
  style='font-size:9.0pt;line-height:112%'>remote:        Installing coffee</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>script 2.4.1 remote:       
  Installing uglifier 3.0.0 remote:        Installing turbolinks 5.0.0
  remote:        Installing activesupport 5.0.0 remote:        Installing mail
  2.6.4 remote:        Installing globalid 0.3.6 remote:        Installing
  activemodel 5.0.0 remote:        Installing jbuilder 2.5.0 remote:       
  Installing activejob 5.0.0 remote:        Installing activerecord 5.0.0
  remote:        Installing loofah 2.0.3 remote:        Installing rails</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>dom</span><b><span style='font-size:
  9.0pt;line-height:112%;color:#006600'>-</span></b><span style='font-size:
  9.0pt;line-height:112%'>testing 2.0.1 remote:        Installing rails</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>html</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>sanitizer 1.0.3 remote:       
  Installing actionview 5.0.0 remote:        Installing actionpack 5.0.0
  remote:        Installing actionmailer 5.0.0 remote:        Installing
  railties 5.0.0 remote:        Installing actioncable 5.0.0 remote:       
  Installing sprockets</span><b><span style='font-size:9.0pt;line-height:112%;
  color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:112%'>rails
  3.1.1 remote:        Installing coffee</span><b><span style='font-size:9.0pt;
  line-height:112%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:112%'>rails 4.2.1 remote:        Installing jquery</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>rails 4.1.1 remote:       
  Installing rails 5.0.0 remote:        Installing sass</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:112%'>rails 5.0.5 remote:        Bundle
  complete! </span><span style='font-size:9.0pt;line-height:112%;color:#006666'>15</span><span
  style='font-size:9.0pt;line-height:112%'> Gemfile dependencies, </span><span
  style='font-size:9.0pt;line-height:112%;color:#006666'>54</span><span
  style='font-size:9.0pt;line-height:112%'> gems now installed. </span><span
  style='font-size:9.0pt;line-height:112%;color:#9900CC'>remote</span><span
  style='font-size:9.0pt;line-height:112%'>:        Gems </span><b><span
  style='font-size:9.0pt;line-height:112%;color:#9966CC'>in</span></b><span
  style='font-size:9.0pt;line-height:112%'> the groups development </span><b><span
  style='font-size:9.0pt;line-height:112%;color:#9966CC'>and</span></b><span
  style='font-size:9.0pt;line-height:112%'> test were </span><b><span
  style='font-size:9.0pt;line-height:112%;color:#9966CC'>not</span></b><span
  style='font-size:9.0pt;line-height:112%'> installed. </span><span
  style='font-size:9.0pt;line-height:112%;color:#9900CC'>remote</span><span
  style='font-size:9.0pt;line-height:112%'>:        Bundled gems are installed
  into .</span><b><span style='font-size:9.0pt;line-height:112%;color:#006600'>/</span></b><span
  style='font-size:9.0pt;line-height:112%'>vendor</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>/</span></b><span
  style='font-size:9.0pt;line-height:112%'>bundle.</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:3.9in;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%;color:#9900CC'>remote</span><span style='font-size:
  9.0pt;line-height:112%'>:        Bundle completed </span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>(</span></b><span
  style='font-size:9.0pt;line-height:112%'>31.86s</span><b><span
  style='font-size:9.0pt;line-height:112%;color:#006600'>) </span></b><span
  style='font-size:9.0pt;line-height:112%'>remote:        Cleaning up the
  bundler cache.</span></p>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:112%'><span
  style='font-size:9.0pt;line-height:112%;color:#9900CC'>remote</span><span
  style='font-size:9.0pt;line-height:112%'>:        Warning: the running
  version of Bundler is older than the version that created the lockfile. </span><span
  style='font-size:9.0pt;line-height:112%;color:#9900CC'>We</span><span
  style='font-size:9.0pt;line-height:112%'> suggest you upgrade to the latest
  version of Bundler by running </span><span style='font-size:9.0pt;line-height:
  112%;color:#996600'>`gem install bundler`</span><span style='font-size:9.0pt;
  line-height:112%'>.</span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:154.15pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><span style='font-size:
  9.0pt;line-height:112%;color:#9900CC'>remote</span><span style='font-size:
  9.0pt;line-height:112%'>: </span><b><span style='font-size:9.0pt;line-height:
  112%;color:#006600'>-----&gt;</span></b><span style='font-size:9.0pt;
  line-height:112%'> Preparing app </span><b><span style='font-size:9.0pt;
  line-height:112%;color:#9966CC'>for</span></b><span style='font-size:9.0pt;
  line-height:112%'> Rails asset pipeline remote:        Running: rake
  assets:precompile remote:        I, </span><b><span style='font-size:9.0pt;
  line-height:112%;color:#006600'>[</span></b><span style='font-size:9.0pt;
  line-height:112%;color:#006666'>2016</span><b><span style='font-size:9.0pt;
  line-height:112%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:112%'>07</span><b><span style='font-size:9.0pt;line-height:112%;
  color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:112%'>08T17:08:</span><span
  style='font-size:9.0pt;line-height:112%;color:#006666'>57.046245</span><span
  style='font-size:9.0pt;line-height:112%'> </span><i><span style='font-size:
  9.0pt;line-height:112%;color:green'>#1222]  INFO -- : Writing</span></i></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:1.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:112%'><i><span
  style='font-size:9.0pt;line-height:112%;color:green'>/tmp/build_49ba6c877f5502cd4029406e981f90b4/public/assets/application-1bf5315c71171ad5f9cbef00193d56b
  7e45263ddc64caf676ce988cfbb6570bd.js </span></i><span style='font-size:9.0pt;
  line-height:112%'>remote:        I, </span><b><span style='font-size:9.0pt;
  line-height:112%;color:#006600'>[</span></b><span style='font-size:9.0pt;
  line-height:112%;color:#006666'>2016</span><b><span style='font-size:9.0pt;
  line-height:112%;color:#006600'>-</span></b><span style='font-size:9.0pt;
  line-height:112%'>07</span><b><span style='font-size:9.0pt;line-height:112%;
  color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:112%'>08T17:08:</span><span
  style='font-size:9.0pt;line-height:112%;color:#006666'>57.046951</span><span
  style='font-size:9.0pt;line-height:112%'> </span><i><span style='font-size:
  9.0pt;line-height:112%;color:green'>#1222]  INFO -- : Writing</span></i></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:1.05pt;margin-bottom:
  0in;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><i><span style='font-size:9.0pt;line-height:
  107%;color:green'>/tmp/build_49ba6c877f5502cd4029406e981f90b4/public/assets/application-1bf5315c71171ad5f9cbef00193d56b
  7e45263ddc64caf676ce988cfbb6570bd.js.gz </span></i><span style='font-size:
  9.0pt;line-height:107%'>remote:        I, </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>[</span></b><span style='font-size:
  9.0pt;line-height:107%;color:#006666'>2016</span><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>-</span></b><span style='font-size:
  9.0pt;line-height:107%'>07</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#006600'>-</span></b><span style='font-size:9.0pt;line-height:
  107%'>08T17:08:</span><span style='font-size:9.0pt;line-height:107%;
  color:#006666'>57.060208</span><span style='font-size:9.0pt;line-height:107%'>
  </span><i><span style='font-size:9.0pt;line-height:107%;color:green'>#1222] 
  INFO -- : Writing
  /tmp/build_49ba6c877f5502cd4029406e981f90b4/public/assets/applicatione3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css
  </span></i><span style='font-size:9.0pt;line-height:107%'>remote:        I, </span><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600'>[</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#006666'>2016</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600'>-</span></b><span
  style='font-size:9.0pt;line-height:107%'>07</span><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>-</span></b><span style='font-size:
  9.0pt;line-height:107%'>08T17:08:</span><span style='font-size:9.0pt;
  line-height:107%;color:#006666'>57.060656</span><span style='font-size:9.0pt;
  line-height:107%'> </span><i><span style='font-size:9.0pt;line-height:107%;
  color:green'>#1222]  INFO -- : Writing
  /tmp/build_49ba6c877f5502cd4029406e981f90b4/public/assets/applicatione3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css.gz
  </span></i><span style='font-size:9.0pt;line-height:107%'>remote:       
  Asset precompilation completed </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>(</span></b><span style='font-size:9.0pt;
  line-height:107%'>4.06s</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#006600'>) </span></b><span style='font-size:9.0pt;line-height:
  107%'>remote:        Cleaning assets remote:        Running: rake
  assets:clean remote: remote: </span><i><span style='font-size:9.0pt;
  line-height:107%;color:green'>###### WARNING: </span></i><span
  style='font-size:9.0pt;line-height:107%'>remote:        No Procfile detected,
  using the default web server.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=268
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image574.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you are using the database in your application you need
to manually migrate the database by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image575.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Any commands after <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>heroku run</span> will be executed on a Heroku dyno.
You can obtain an interactive shell session by running:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image576.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Ensure you have one dyno running the web process type:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image577.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The heroku ps command lists the running dynos of your
application:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image578.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>heroku </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0066'>open</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can now visit the app in our browser with .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image579.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>herokuapp.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>com</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>Heroku gives you a default web URL in the  domain. When you
are ready to scale up for production, you can add your own custom domain.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324100">Section 37.2: Managing Production and staging
environments for a Heroku</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>Every Heroku app runs in at least two environments: on
Heroku (we<span style='font-family:"Arial",sans-serif'>’</span>ll call that
production) and on your local machine (development). If more than one person is
working on the app, then you<span style='font-family:"Arial",sans-serif'>’</span>ve
got multiple development environments - one per machine, usually. Usually, each
developer will also have a test environment for running tests. Unfortunately,
this approach breaks down as the environments become less similar. Windows and
Macs, for instance, both provide different environments than the Linux stack on
Heroku, so you can<span style='font-family:"Arial",sans-serif'>’</span>t always
be sure that code that works in your local development environment will work
the same way when you deploy it to production.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>The solution is to have a staging environment that is as
similar to production as is possible. This can be achieved by creating a second
Heroku application that hosts your staging application. With staging, you can
check your code in a production-like setting before having it affect your
actual users.</p>

<h4 style='margin-left:.75pt'>Starting from scratch</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Assume you have an application running on your local
machine, and you<span style='font-family:"Arial",sans-serif'>’</span>re ready
to push it to Heroku. We<span style='font-family:"Arial",sans-serif'>’</span>ll
need to create both remote environments, staging and production. To get in the
habit of pushing to staging first, we<span style='font-family:"Arial",sans-serif'>’</span>ll
start with this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image580.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By default, the heroku CLI creates projects with a heroku
git remote. Here, we<span style='font-family:"Arial",sans-serif'>’</span>re
specifying a different name with the --remote flag, so pushing code to Heroku
and running commands against the app look a little different than the normal
git push heroku master:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image581.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Once your staging app is up and running properly, you can
create your production app:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image582.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>And with that, you<span style='font-family:"Arial",sans-serif'>’</span>ve
got the same codebase running as two separate Heroku apps <span
style='font-family:"Arial",sans-serif'>–</span> one staging and one production,
set up identically. Just remember you will have to specify which app you are
going to operate on your daily work. You can either use flag '--remote' or use
your git config to specify a default app.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324101">Chapter 38: ActiveSupport</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324102">Section 38.1: Core Extensions: String Access</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/access.rb#L27-L29"><b><span
style='color:#D4072F'>String#at</span></b></a></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=64 style='width:48.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=64 valign=top style='width:48.25pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>String</span></b><i><span
  style='font-size:9.0pt;line-height:107%;color:green'>#[]</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns a substring of a string object. Same interface as .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=144
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image583.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns a substring from the given position to the end of
the string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image584.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/access.rb#L61-L63"><b><span
style='color:#D4072F'>String#to</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:190.05pt;margin-bottom:
1.25pt;margin-left:.25pt'>Returns a substring from the beginning of the string
to the given position. If the position is negative, it is counted from the end
of the string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image585.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>from</span> and <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>to</span> can be used in tandem.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image586.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/access.rb#L75-L83"><b><span
style='color:#D4072F'>String#first</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns the first character, or a given number of characters
up to the length of the string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image587.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/access.rb#L95-L103"><b><span
style='color:#D4072F'>String#last</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns the last character, or a given number of characters
from the end of the string counting backwards.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=67
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image588.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image589.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324103">Section 38.2: Core Extensions: String to Date/Time
Conversion</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/conversions.rb#L19-L36"><b><span
style='color:#D4072F'>String#to_time</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.35pt;
margin-left:.25pt'>Converts a string to a Time value. The <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>form</span>
parameter can be either <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:utc</span></b> or <b><span style='font-size:
9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:local</span></b>,
defaults to <b><span style='font-size:9.0pt;line-height:112%;color:#FF3333;
background:#FAFAFA'>:local</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:127.85pt;margin-bottom:
.15pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895719936'><span style='left:0px;position:
absolute;left:0px;top:-103392px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image590.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;13-12-2012&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_time</span><span style='font-size:9.0pt;
line-height:110%'>               </span><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt; 2012-12-13 00:00:00 +0100 </span></i><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;06:12&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_time</span><span style='font-size:9.0pt;
line-height:110%'>                    </span><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt; 2012-12-13 06:12:00 +0100 </span></i><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;2012-12-13
06:12&quot;</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>to_time</span><span
style='font-size:9.0pt;line-height:110%'>         </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># =&gt; 2012-12-13
06:12:00 +0100</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;2012-12-13T06:12&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_time</span><span style='font-size:9.0pt;
line-height:110%'>         </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; 2012-12-13 06:12:00 +0100</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;2012-12-13T06:12&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_time</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><b><span style='font-size:9.0pt;
line-height:110%;color:#FF3333'>:utc</span></b><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:110%'>   </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; 2012-12-13 06:12:00 UTC</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:6.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;12/13/2012&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_time</span><span style='font-size:9.0pt;
line-height:110%'>               </span><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt; ArgumentError: argument out of range</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/conversions.rb#L44-L46"><b><span
style='color:#D4072F'>String#to_date</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Converts a string to a Date value.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image591.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/conversions.rb#L54-L56"><b><span
style='color:#D4072F'>String#to_datetime</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Converts a string to a DateTime value.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:101.55pt;margin-bottom:
.15pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895718912'><span style='left:0px;position:
absolute;left:0px;top:-103702px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;1-1-2012&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_datetime</span><span style='font-size:9.0pt;
line-height:110%'>            </span><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt; Sun, 01 Jan 2012 00:00:00 +0000 </span></i><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;01/01/2012
23:59:59&quot;</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>to_datetime</span><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># =&gt; Sun, 01 Jan 2012 23:59:59 +0000 </span></i><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;2012-12-13
12:50&quot;</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>to_datetime</span><span
style='font-size:9.0pt;line-height:110%'>    </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># =&gt; Thu, 13 Dec 2012 12:50:00 +0000</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>&quot;12/13/2012&quot;</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>to_datetime</span><span style='font-size:9.0pt;
line-height:110%'>          </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; ArgumentError: invalid date</span></i></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324104">Section 38.3: Core Extensions: String Exclusion</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/exclude.rb#L8-L10"><b><span
style='color:#D4072F'>String#exclude?</span></b></a></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=107 style='width:79.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=107 valign=top style='width:79.95pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>String</span></b><i><span
  style='font-size:9.0pt;line-height:107%;color:green'>#include?</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:390.3pt;margin-bottom:
0in;margin-left:.25pt'>The inverse of </p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image592.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324105">Section 38.4: Core Extensions: String Filters</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/filters.rb#L11-L13"><b><span
style='color:#D4072F'>String#squish</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Returns a version of the given string without leading or
trailing whitespace, and combines all consecutive whitespace in the interior to
single spaces. Destructive version <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>squish!</span> operates directly on the string
instance.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Handles both ASCII and Unicode whitespace.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image593.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/filters.rb#L30-L32"><b><span
style='color:#D4072F'>String#remove</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Returns a new string with all occurrences of the patterns
removed. Destructive version <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>remove!</span> operates directly on the given string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image594.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/filters.rb#L64-L77"><b><span
style='color:#D4072F'>String#truncate</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns a copy of a given string truncated at a given length
if the string is longer than the length.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image595.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Pass a string or regexp <b><span style='font-size:9.0pt;
line-height:112%;color:#FF3333;background:#FAFAFA'>:separator</span></b> to
truncate at a natural break</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image596.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/filters.rb#L93-L101"><b><span
style='color:#D4072F'>String#truncate_words</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns a string truncated after a given number of words.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image597.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Pass a string or regexp to specify a different separator of
words</p>

<p class=MsoNormal style='margin-top:0in;margin-right:75.85pt;margin-bottom:
17.3pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895717888'><span style='left:0px;position:
absolute;left:0px;top:-104704px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'Once&lt;br&gt;upon&lt;br&gt;a&lt;br&gt;time&lt;br&gt;in&lt;br&gt;a&lt;br&gt;world'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>truncate_words</span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%;color:#006666'>5</span><span style='font-size:9.0pt;
line-height:110%'>, separator: </span><span style='font-size:9.0pt;line-height:
110%;color:#996600'>'&lt;br&gt;'</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>) </span></b><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt;
&quot;Once&lt;br&gt;upon&lt;br&gt;a&lt;br&gt;time&lt;br&gt;in...&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The last characters will be replaced with the <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:omission</span></b>
string (defaults to &quot;...&quot;)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image598.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/strip.rb#L20-L22"><b><span
style='color:#D4072F'>String#strip_heredoc</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Strips indentation in heredocs. Looks for the least-indented
non-empty line and removes that amount of leading whitespace.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image599.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>the user would see</p>

<p class=MsoNormal style='margin-top:0in;margin-right:47.7pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>NO_FORMAT]This command does such and
such. Supported options are: -h This message ...</p>

<h2 style='margin-top:0in;margin-right:47.7pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324106">Section 38.5:
Core Extensions: String Inflection</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L31-L38"><b><span
style='color:#D4072F'>String#pluralize</span></b></a></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>count == </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Returns of plural form of the string. Optionally takes a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>count</span>
parameter and returns singular form if <span style='font-size:9.0pt;line-height:
112%;color:#006666;background:#FAFAFA'>1</span>. Also accepts a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>locale</span>
parameter for language-specific pluralization.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:16.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=194
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image600.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.3pt;
margin-left:.25pt'>Returns the singular form of the string. Accepts an optional
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>locale</span>
parameter.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'posts'</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>singularize</span><span style='font-size:9.0pt;line-height:110%'>           
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;post&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'octopi'</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>singularize</span><span style='font-size:9.0pt;line-height:110%'>          
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;octopus&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'sheep'</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>singularize</span><span style='font-size:9.0pt;line-height:110%'>           
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;sheep&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'word'</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>singularize</span><span style='font-size:9.0pt;line-height:110%'>            
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;word&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895716864'><span style='left:0px;position:absolute;
left:0px;top:-105578px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image601.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'the blue mailmen'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>singularize</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; &quot;the blue mailman&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'CamelOctopi'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>singularize</span><span style='font-size:9.0pt;
line-height:110%'>      </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; &quot;CamelOctopus&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'leyes'</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>singularize</span><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>(</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#FF3333'>:es</span></b><b><span style='font-size:9.0pt;line-height:
110%;color:#006600'>)</span></b><span style='font-size:9.0pt;line-height:110%'>      
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;ley&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L65-L67"><b><span
style='color:#D4072F'>String#constantize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Tries to find a declared constant with the name specified in
the string. It raises a <b><span style='font-size:9.0pt;line-height:112%;
color:#CC00FF;background:#FAFAFA'>NameError</span></b> when the name is not in
CamelCase or is not initialized.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image602.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L76-L78"><b><span
style='color:#D4072F'>String#safe_constantize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Performs a <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>constantize</span> but returns <b><span style='font-size:
9.0pt;line-height:112%;color:blue;background:#FAFAFA'>nil</span></b> instead of
raising <b><span style='font-size:9.0pt;line-height:112%;color:#CC00FF;
background:#FAFAFA'>NameError</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=79
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image603.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.2pt;
margin-left:.25pt'>Converts strings to UpperCamelCase by default, if <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:lower</span></b>
is given as param converts to lowerCamelCase instead.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.65pt;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'>alias: <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>camelcase</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.5pt;
margin-left:.25pt'><b>Note:</b> will also convert <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>/</span> to <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>::</span> which is useful for converting
paths to namespaces.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'active_record'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>camelize</span><span style='font-size:9.0pt;
line-height:110%'>                </span><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt; &quot;ActiveRecord&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'active_record'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>camelize</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><b><span style='font-size:9.0pt;
line-height:110%;color:#FF3333'>:lower</span></b><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:110%'>        </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; &quot;activeRecord&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:6.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895715840'><span style='left:0px;position:absolute;
left:0px;top:-106089px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image604.gif"></span></span><span
style='position:relative;z-index:-1895714816'><span style='left:0px;position:
absolute;left:0px;top:-106089px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image605.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'active_record/errors'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>camelize</span><span style='font-size:9.0pt;
line-height:110%'>         </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; &quot;ActiveRecord::Errors&quot; </span></i><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'active_record/errors'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>camelize</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><b><span style='font-size:9.0pt;
line-height:110%;color:#FF3333'>:lower</span></b><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>)</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; &quot;activeRecord::Errors&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L107-L110"><b><span
style='color:#D4072F'>String#titleize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.15pt;
margin-left:.25pt'>Capitalizes all the words and replaces some characters in
the string to create a nicer looking title.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'>alias: <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>titlecase</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895713792'><span style='left:0px;position:absolute;
left:0px;top:-106227px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'man from the boondocks'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>titleize</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; &quot;Man From The Boondocks&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:6.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'x-men: the last stand'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>titleize</span><span style='font-size:9.0pt;
line-height:110%'>  </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; &quot;X Men: The Last Stand&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L118-L120"><b><span
style='color:#D4072F'>String#underscore</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:.25pt'>Makes an underscored, lowercase form from the expression in
the string. The reverse of <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>camelize</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.6pt;
margin-left:.25pt'><b>Note:</b> <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>underscore</span> will also change <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>::</span> to <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>/</span> to convert namespaces to
paths.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'ActiveModel'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>underscore</span><span style='font-size:9.0pt;
line-height:110%'>         </span><i><span style='font-size:9.0pt;line-height:
110%;color:green'># =&gt; &quot;active_model&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:134.85pt;margin-bottom:
8.1pt;margin-left:0in;text-indent:3.75pt;line-height:150%'><span
style='position:relative;z-index:-1895712768'><span style='left:0px;position:
absolute;left:0px;top:-106401px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:150%;color:#996600'>'ActiveModel::Errors'</span><span
style='font-size:9.0pt;line-height:150%'>.</span><span style='font-size:9.0pt;
line-height:150%;color:#9900CC'>underscore</span><span style='font-size:9.0pt;
line-height:150%'> </span><i><span style='font-size:9.0pt;line-height:150%;
color:green'># =&gt; &quot;active_model/errors&quot; </span></i><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L125-L127"><b><span
style='color:#D4072F'>String#dasherize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Replaces underscores with dashes in the string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image606.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L137-L139"><b><span
style='color:#D4072F'>String#demodulize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Removes the module part from the constant expression in the
string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895711744'><span style='left:0px;position:absolute;
left:0px;top:-106566px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'ActiveRecord::CoreExtensions::String::Inflections'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>demodulize</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># =&gt; &quot;Inflections&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'Inflections'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>demodulize</span><span style='font-size:9.0pt;
line-height:110%'>                                       </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;Inflections&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'::Inflections'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>demodulize</span><span style='font-size:9.0pt;
line-height:110%'>                                     </span><i><span
style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;Inflections&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>''</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>demodulize</span><span style='font-size:9.0pt;line-height:110%'>                                                 
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt; ''</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L150-L152"><b><span
style='color:#D4072F'>String#deconstantize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Removes the rightmost segment from the constant expression
in the string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=112
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image607.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Replaces special characters in a string so that it may be
used as part of a 'pretty' URL.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image608.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.35pt;
margin-left:.25pt'>Preserve the case of the characters in a string with the <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:preserve_case</span></b>
argument.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895710720'><span style='left:0px;position:absolute;
left:0px;top:-106941px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;Donald E.
Knuth&quot;</span><span style='font-size:9.0pt;line-height:110%'>.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>parameterize</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'>preserve_case: </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>true</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># =&gt; &quot;Donald-E-Knuth&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A very common use-case for <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>parameterize</span> is to override the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>to_param</span>
method of an ActiveRecord model to support more descriptive url slugs.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image609.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image610.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L195-L197"><b><span
style='color:#D4072F'>String#tableize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Creates the name of a table like Rails does for models to
table names. Pluralizes the last word in the string.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image611.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L205-L207"><b><span
style='color:#D4072F'>String#classify</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Returns a class name string from a plural table name like
Rails does for table names to models.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image612.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L221-L223"><b><span
style='color:#D4072F'>String#humanize</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.25pt;
margin-left:.25pt'>Capitalizes the first word, turns underscores into spaces,
and strips a trailing <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>_id</span> if present.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'employee_salary'</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>humanize</span><span style='font-size:9.0pt;
line-height:110%'>              </span><i><span style='font-size:9.0pt;
line-height:110%;color:green'># =&gt; &quot;Employee salary&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'author_id'</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>humanize</span><span style='font-size:9.0pt;line-height:110%'>                   
</span><i><span style='font-size:9.0pt;line-height:110%;color:green'># =&gt;
&quot;Author&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#996600'>'author_id'</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>humanize</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>(</span></b><span style='font-size:9.0pt;line-height:110%'>capitalize:
</span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>false</span></b><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># =&gt; &quot;author&quot;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
8.1pt;margin-left:-.75pt;text-indent:3.75pt;line-height:150%'><span
style='position:relative;z-index:-1895709696'><span style='left:0px;position:
absolute;left:0px;top:-107517px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><span
style='font-size:9.0pt;line-height:150%;color:#996600'>'_id'</span><span
style='font-size:9.0pt;line-height:150%'>.</span><span style='font-size:9.0pt;
line-height:150%;color:#9900CC'>humanize</span><span style='font-size:9.0pt;
line-height:150%'>                          </span><i><span style='font-size:
9.0pt;line-height:150%;color:green'># =&gt; &quot;Id&quot; </span></i><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L230-L232"><b><span
style='color:#D4072F'>String#upcase_first</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Converts just the first character to uppercase.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image613.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/rails/rails/blob/v5.0.0/activesupport/lib/active_support/core_ext/string/inflections.rb#L241-L243"><b><span
style='color:#D4072F'>String#foreign_key</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Creates a foreign key name from a class name. Pass <b><span
style='font-size:9.0pt;line-height:112%;color:blue;background:#FAFAFA'>false</span></b>
param to disable adding <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>_</span> between name and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>id</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image614.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324107">Chapter 39: Form Helpers</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:213.15pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>Rails provides view helpers for
generating form markup.</p>

<h2 style='margin-top:0in;margin-right:213.15pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324108">Section 39.1:
Creating a search form</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>To create a search form, enter the following code</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;%= form_tag(</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;/search&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>, method: </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;get&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>) do %</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>  </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;%= label_tag(:q, </span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;Search for:&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>) %</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>  </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;%= text_field_tag(:q) %</span><b><span style='font-size:
9.0pt;line-height:110%'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>  </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;%= submit_tag(</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;Search&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>) %</span><b><span style='font-size:9.0pt;
line-height:110%'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.45pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;% end %</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>/</span></b><span style='font-size:
  9.0pt;line-height:107%'>search</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;label&gt;</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'><span style='position:relative;z-index:-1895708672'><span
style='left:0px;position:absolute;left:0px;top:-108021px;width:718px;
height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image615.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>form_tag</span>:
This is the default helper for creating a form. It's first parameter,  is the
action and the second parameter specifies the HTTP method. For search forms, it
is important to always use the method <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>get label_tag</span>: This helper creates an html 
tag.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:206.95pt;margin-bottom:
.25pt;margin-left:.55pt;text-align:justify;text-justify:inter-ideograph;
text-indent:30.0pt;line-height:133%'><span style='font-size:9.0pt;line-height:
133%;background:#FAFAFA'>text_field_tag</span>: This will create an input
element with type <span style='font-size:9.0pt;line-height:133%;background:
#FAFAFA'>text submit_tag</span>: This creates an input element with type <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>submit</span></p>

<h2 style='margin-top:0in;margin-right:206.95pt;margin-bottom:.25pt;margin-left:
.55pt;text-align:justify;text-justify:inter-ideograph;text-indent:30.0pt;
line-height:133%'><a name="_Toc324109">Section 39.2: Dropdown</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Standard example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image616.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This will generate the following HTML: David</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The last argument are options, which accepts the following:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=126
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image617.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'>More examples can be
found: <a
href="http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag"><span
style='color:#D4072F'>http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag</span></a></p>

<h2 style='margin-top:0in;margin-right:1.45pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc324110">Section 39.3: Helpers for form
elements</a></h2>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:10.0pt;line-height:107%;color:black'>Checkboxes</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image618.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will generate the following html</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=73
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image619.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image620.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:10.0pt;line-height:107%;color:black'>Radio Buttons</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image621.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This generates the following HTML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.55pt;margin-bottom:
.1pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%'>&lt;input</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#000066'>id</span><span
style='font-size:9.0pt;line-height:110%'>=</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;age_child&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#000066'>name</span><span style='font-size:9.0pt;line-height:110%'>=</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;age&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#000066'>type</span><span style='font-size:9.0pt;
line-height:110%'>=</span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;radio&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#000066'>value</span><span
style='font-size:9.0pt;line-height:110%'>=</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;child&quot;</span><span style='font-size:
9.0pt;line-height:110%'> <b>/&gt; &lt;label</b> </span><span style='font-size:
9.0pt;line-height:110%;color:#000066'>for</span><span style='font-size:9.0pt;
line-height:110%'>=</span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;age_child&quot;</span><b><span style='font-size:9.0pt;
line-height:110%'>&gt;</span></b><span style='font-size:9.0pt;line-height:110%'>I
am younger than 18<b>&lt;/label&gt;</b></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.55pt;margin-bottom:
21.25pt;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:110%'><span style='position:relative;z-index:
-1895707648'><span style='left:0px;position:absolute;left:0px;top:-108972px;
width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>&lt;input</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#000066'>id</span><span style='font-size:9.0pt;
line-height:110%'>=</span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;age_adult&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#000066'>name</span><span
style='font-size:9.0pt;line-height:110%'>=</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;age&quot;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#000066'>type</span><span style='font-size:9.0pt;line-height:110%'>=</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;radio&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#000066'>value</span><span style='font-size:9.0pt;
line-height:110%'>=</span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;adult&quot;</span><span style='font-size:9.0pt;line-height:
110%'> <b>/&gt; &lt;label</b> </span><span style='font-size:9.0pt;line-height:
110%;color:#000066'>for</span><span style='font-size:9.0pt;line-height:110%'>=</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;age_adult&quot;</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;</span></b><span style='font-size:
9.0pt;line-height:110%'>I</span><span style='font-size:9.0pt;line-height:110%;
color:red'>'m over 18&lt;/label&gt;</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Text Area</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.35pt;
margin-left:.25pt'>To create a larger text box, it is recommended to use the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>text_area_tag</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895706624'><span style='left:0px;position:absolute;
left:0px;top:-109110px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;%=
text_area_tag(:message, </span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;This is a longer text field&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>, size: </span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;25x6&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>) %</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>This will create the following HTML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:21.35pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895705600'><span style='left:0px;position:absolute;
left:0px;top:-109189px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>&lt;textarea</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#000066'>id</span><span style='font-size:9.0pt;
line-height:110%'>=</span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;message&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#000066'>name</span><span
style='font-size:9.0pt;line-height:110%'>=</span><span style='font-size:9.0pt;
line-height:110%;color:red'>&quot;message&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#000066'>cols</span><span style='font-size:9.0pt;line-height:110%'>=</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;25&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#000066'>rows</span><span style='font-size:9.0pt;
line-height:110%'>=</span><span style='font-size:9.0pt;line-height:110%;
color:red'>&quot;6&quot;</span><b><span style='font-size:9.0pt;line-height:
110%'>&gt;</span></b><span style='font-size:9.0pt;line-height:110%'>This is a
longer text field<b>&lt;/textarea&gt;</b></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Number Field</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>input</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>&lt;</span></b>&nbsp;</p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>type=</span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>&quot;number&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create an <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>&gt;</span></b> element</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image622.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>in</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To specify a range of values, we can use the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>:</span> option</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image623.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Password
Field</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Sometimes you want the characters typed by the user to be
masked. This will generate an <b><span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>&lt;input</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#000066'>type</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>=</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;password&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:80.75pt;text-indent:-.5pt;line-height:107%'><b><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image624.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Email Field</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;input</span></b><span style='font-size:9.0pt;
  line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
  color:#000066'>type</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>=</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;email&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create an <b><span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image625.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Telephone
Field</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%'>&lt;input</span></b><span style='font-size:9.0pt;
  line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
  color:#000066'>type</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:red'>&quot;tel&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>This will create an <b><span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>&gt;</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image626.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:10.0pt;line-height:107%;color:black'>Date Helpers</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:20.9pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=690 height=300
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image627.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324111">Chapter 40: ActiveRecord Transactions</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324112">Section 40.1: Basic example</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image628.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>This example will only take money from David and give it to
Mary if neither withdrawal nor deposit raise an exception. Exceptions will
force a ROLLBACK that returns the database to the state before the transaction
began. Be aware, though, that the objects will not have their instance data
returned to their pre-transactional state.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324113">Section 40.2: Di&#57379;erent ActiveRecord classes
in a single transaction</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Though the transaction class method is called on some
ActiveRecord class, the objects within the transaction block need not all be
instances of that class. This is because transactions are per-database
connection, not per-model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In this example a balance record is transactionally saved
even though transaction is called on the Account class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image629.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The transaction method is also available as a model instance
method. For example, you can also do this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image630.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324114">Section 40.3: Multiple database connections</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A transaction acts on a single database connection. If you
have multiple class-specific databases, the transaction will not protect
interaction among them. One workaround is to begin a transaction on each class
whose models you alter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image631.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>This is a poor solution, but fully distributed transactions
are beyond the scope of ActiveRecord.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324115">Section 40.4: save and destroy are automatically
wrapped in a transaction</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>after_</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Both #save and #destroy come wrapped in a transaction that
ensures that whatever you do in validations or callbacks will happen under its
protected cover. So you can use validations to check for values that the
transaction depends on or you can raise exceptions in the callbacks to
rollback, including <b><span style='font-size:9.0pt;line-height:112%;
color:#006600;background:#FAFAFA'>*</span></b> callbacks.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:13.65pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>As a consequence changes to the database
are not seen outside your connection until the operation is complete. For
example, if you try to update the index of a search engine in <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>after_save</span>
the indexer won't see the updated record. The <span style='font-size:9.0pt;
line-height:133%;background:#FAFAFA'>after_commit</span> callback is the only
one that is triggered once the update is committed.</p>

<h2 style='margin-top:0in;margin-right:13.65pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324116">Section 40.5: Callbacks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.85pt;
margin-left:.25pt'>There are two types of callbacks associated with committing
and rolling back transactions: <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>after_commit</span> and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>after_rollback</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>after_commit</span> callbacks are called on every record saved or
destroyed within a transaction immediately after the transaction is committed. <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>after_rollback</span>
callbacks are called on every record saved or destroyed within a transaction
immediately after the transaction or savepoint is rolled back.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:17.95pt;
margin-left:.25pt'>These callbacks are useful for interacting with other
systems since you will be guaranteed that the callback is only executed when
the database is in a permanent state. For example, <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>after_commit</span> is a good spot to put
in a hook to clearing a cache since clearing it from within a transaction could
trigger the cache to be regenerated before the database is updated.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324117">Section 40.6: Rolling back a transaction</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#6666FF'>ActiveRecord::Base</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>transaction</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:.45pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'> uses the <b><span style='font-size:9.0pt;line-height:107%;
color:#6666FF;background:#FAFAFA'>ActiveRecord::Rollback</span></b> exception
to distinguish a deliberate rollback</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>transaction</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>from other exceptional situations. Normally, raising an
exception will cause the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>.</span> method to rollback the database transaction and
pass on the exception. But if you raise an <b><span style='font-size:9.0pt;
line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveRecord::Rollback</span></b>
exception, then the database transaction will be rolled back, without passing
on the exception.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example, you could do this in your controller to
rollback a transaction:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=306
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image632.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324118">Chapter 41: RSpec and Ruby on Rails</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324119">Section 41.1: Installing RSpec</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://rubygems.org/gems/rspec-rails"><span style='font-size:9.0pt;
  line-height:107%;color:#D4072F'>rspec</span></a></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://rubygems.org/gems/rspec-rails"><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></a></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://rubygems.org/gems/rspec-rails"><span style='font-size:9.0pt;
  line-height:107%;color:#D4072F'>rails</span></a></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.15pt;
margin-left:.25pt'>If you want to use RSpec for a Rails project, you should use
the  gem, which can generate helpers and spec files for you automatically (for
example, when you create models, resources or scaffolds using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rails generate</span>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rspec</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add  to both the <b><span style='font-size:9.0pt;line-height:
112%;color:#FF3333;background:#FAFAFA'>:development</span></b> and <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:test</span></b>
groups in the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Gemfile</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image633.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>Run <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>bundle</span> to install the dependencies.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Initialize it with:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image634.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>spec</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>This will create a <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>/</span></b> folder for your
tests, along with the following configuration files:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>rspec</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>spec</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>spec_helper.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>spec</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails_helper.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:26.4pt;margin-bottom:
1.25pt;margin-left:123.5pt;text-indent:-102.6pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>.</span> contains default options for the command-line <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>rspec</span> tool 
includes basic RSpec configuration options  adds further configuration options
that are more specific to use RSpec and Rails</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:30.0pt'>together.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>All these files are written with sensible defaults to get
you started, but you can add features and change configurations to suit your
needs as your test suite grows.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324120">Chapter 42: Decorator pattern</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324121">Section 42.1: Decorating a Model using Draper</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Draper automatically matches up models with their decorators
by convention.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image635.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Given a <b><span style='font-size:9.0pt;line-height:112%;
color:#0066FF;background:#FAFAFA'>@user</span></b> variable containing an
ActiveRecord object, you can access your decorator by calling <i><span
style='font-size:9.0pt;line-height:112%;color:green;background:#FAFAFA'>#decorate</span></i>
on the <b><span style='font-size:9.0pt;line-height:112%;color:#0066FF;
background:#FAFAFA'>@user</span></b>, or by specifying the Draper class if you
want to be specific.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image636.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324122">Section 42.2: Decorating a Model using
SimpleDelegator</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Most Rails developers start by modifying their model
information within the template itself:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:110%'>&lt;h1&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'>&lt;%= </span><span style='font-size:
9.0pt;line-height:110%;color:red'>&quot;#{ @user.first_name } #{
@user.last_name }&quot;</span><span style='font-size:9.0pt;line-height:110%'> %<b>&gt;&lt;/h1&gt;</b></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895703552'><span style='left:0px;position:absolute;
left:0px;top:-112934px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image195.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>&lt;h3&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'>joined: &lt;%=
@user.created_at.in_time_zone</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>(</span><span style='font-size:9.0pt;line-height:110%'>current_user.timezone</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>)</span><span
style='font-size:9.0pt;line-height:110%'>.strftime</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>(</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;%A, %d %b %Y %l:%M
%p&quot;</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>)</span><span
style='font-size:9.0pt;line-height:110%'> %<b>&gt;&lt;/h3&gt;</b></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>For models with a lot of data, this can quickly become
cumbersome and lead to copy-pasting logic from one template to another.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.95pt;
margin-left:.25pt'>This example uses <b><span style='font-size:9.0pt;
line-height:112%;color:#CC00FF;background:#FAFAFA'>SimpleDelegator</span></b>
from the stdlib.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>All requests to a <b><span style='font-size:9.0pt;
line-height:112%;color:#CC00FF;background:#FAFAFA'>SimpleDelegator</span></b>
object are passed to the parent object by default. You can override any method
with presentation logic, or you can add new methods that are specific to this
view.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;color:#CC00FF;
background:#FAFAFA'>SimpleDelegator</span></b> provides two methods: <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>__setobj__</span>
to set what object is being delegated to, and <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>__getobj__</span> to get that object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=180
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image637.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=169
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image638.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Some decorators rely on magic to wire-up this behavior, but
you can make it more obvious where the presentation logic is coming from by
initializing the object on the page.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image639.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>By passing a reference to the view object into the
decorator, we can still access all of the rest of the view helpers while
building the presentation logic without having to include it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Now the view template is only concerned with inserting data
into the page, and it is much more clear.<br clear=all style='page-break-before:
always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324123">Chapter 43: Elasticsearch</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324124">Section 43.1: Searchkick</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>If you want to setup quickly elasticsearch you can use the
searchkick gem :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image640.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add searchkick to models you want to search.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image641.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add data to the search index.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image642.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And to query, use:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image643.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Pretty quick, elasticsearch knowledge not required ;-)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:183.0pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'>More information
here : <a href="https://github.com/ankane/searchkick"><span style='color:#D4072F'>https://github.com/ankane/searchkick</span></a></p>

<h2 style='margin-top:0in;margin-right:183.0pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc324125">Section 43.2: Installation and
testing</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.9pt;
margin-left:.25pt'>The first thing you want to do for local development is
install ElasticSearch in your machine and test it to see if it is running. It
requires Java to be installed. The installation is pretty straightforward:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:2.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=245 valign=top style='width:2.55in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#C20CB9'>sudo</span></b><span style='font-size:
  9.0pt;line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:
  107%;color:#C20CB9'>apt-get install</span></b><span style='font-size:9.0pt;
  line-height:107%'> elasticsearch</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:281.2pt;margin-bottom:
12.3pt;margin-left:21.4pt;text-indent:-.5pt;line-height:109%'><img width=5
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>Mac OS X: <span style='font-size:9.0pt;line-height:109%;
background:#FAFAFA'>brew install elasticsearch </span>Ubuntu: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.25pt;
margin-left:.25pt'>Then start it:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=230 valign=top style='width:2.4in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#C20CB9'>sudo</span></b><span style='font-size:
  9.0pt;line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:
  107%;color:#C20CB9'>service</span></b><span style='font-size:9.0pt;
  line-height:107%'> elasticsearch </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#C20CB9'>start</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:243.4pt;margin-bottom:
12.35pt;margin-left:21.4pt;text-indent:-.5pt;line-height:109%'><img width=5
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>Mac OS X: <span style='font-size:9.0pt;line-height:109%;
background:#FAFAFA'>brew services start elasticsearch </span>Ubuntu: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.15pt;
margin-left:.25pt'>For testing it, the easiest way is with <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>curl</span>. It
might take a few seconds for it to start, so don't panic if you don't get any
response at first.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.95pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%;background:#FAFAFA'><span
style='font-size:9.0pt;line-height:107%'>curl localhost:</span><span
style='font-size:9.0pt;line-height:107%;color:#006666'>9200</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Example response:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=113
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image644.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=104
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image645.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324126">Section 43.3: Setting up tools for development</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="http://mobz.github.io/elasticsearch-head/"><span style='font-size:9.0pt;
  line-height:107%;color:#D4072F'>elasticsearch</span></a></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="http://mobz.github.io/elasticsearch-head/"><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></a></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="http://mobz.github.io/elasticsearch-head/"><span style='font-size:9.0pt;
  line-height:107%;color:#D4072F'>head</span></a></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>When you are getting started with ElasticSearch (ES) it
might be good to have a graphical tool that helps you explore your data. A
plugin called  does just that. To install it, do the following:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ls </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>l $</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>which elasticsearch</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=238 style='width:178.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>elasticsearch</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>plugin </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>install</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=166 style='width:124.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>mobz</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>elasticsearch</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>head</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:2.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>http:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>//</span></b><span style='font-size:9.0pt;
  line-height:107%'>localhost:</span><span style='font-size:9.0pt;line-height:
  107%;color:#006666'>9200</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>_plugin</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>head</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:165.9pt;margin-bottom:
2.55pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>Find out in which folder ES is installed: <b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>) </span></b><span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>cd</span> into this
folder and run the plugin installation binary: </p>

<p class=MsoNormal style='margin-top:4.55pt;margin-right:.65pt;margin-bottom:
12.6pt;margin-left:20.9pt'>Open <b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>/</span></b> in your browser</p>

<p class=MsoNormal style='margin-top:0in;margin-right:11.55pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>If everything worked as expected you
should be seeing a nice GUI where you can explore your data.</p>

<h2 style='margin-top:0in;margin-right:11.55pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324127">Section 43.4:
Introduction</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>ElasticSearch has a well-documented JSON API, but you'll
probably want to use some libraries that handle that for you:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://github.com/elastic/elasticsearch-rails"><span style='font-size:
  9.0pt;line-height:107%;color:#D4072F'>Elasticsearch</span></a></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://github.com/elastic/elasticsearch-rails"><b><span
  style='font-size:9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></a></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><a
  href="https://github.com/elastic/elasticsearch-rails"><span style='font-size:
  9.0pt;line-height:107%;color:#D4072F'>rails</span></a></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.05pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image646.gif"
align=left hspace=12><a href="https://github.com/elastic/elasticsearch-ruby"><span
style='font-size:9.0pt;line-height:112%;color:#D4072F;background:#FAFAFA'>Elasticsearch</span></a>
- the official low level wrapper for the HTTP API</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:18.35pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'> - the official high level Rails integration that helps you
to connect your Rails models</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:8.9pt;
margin-left:30.0pt'>with ElasticSearch using either ActiveRecord or Repository
pattern</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:19.7pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:112%'><img border=0 width=5 height=5 id="Group 307366"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span><u><span
style='font-size:9.0pt;line-height:112%;color:#D4072F;background:#FAFAFA'> </span></u><a
href="https://github.com/toptal/chewy"><span style='font-size:9.0pt;line-height:
112%;color:#D4072F;background:#FAFAFA'>Chewy</span></a> - An alternative,
non-official high level Rails integration that is very popular and arguably has
better documentation</p>

<p class=MsoNormal style='margin-top:0in;margin-right:284.95pt;margin-bottom:
1.25pt;margin-left:.25pt;line-height:219%'>Let's use the first option for
testing the connection: <span style='font-size:9.0pt;line-height:219%;
background:#FAFAFA'>gem install elasticsearch</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then fire up the ruby terminal and try it out:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image647.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324128">Chapter 44: React with Rails using reactrails gem</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324129">Section 44.1: React installation for Rails using
rails_react gem</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add react-rails to your Gemfile:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image648.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>And install:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image649.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Next, run the installation script:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image650.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This will:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>create a components.js manifest file and a
app/assets/javascripts/components/ directory, where you will put your
components place the following in your application.js:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image651.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324130">Section 44.2: Using react_rails within your
application</a></h2>

<h4 style='margin-left:.75pt'>React.js builds</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can pick which React.js build (development, production,
with or without add-ons) to serve in each environment by adding a config. Here
are the defaults:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image652.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To include add-ons, use this config:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image653.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>After restarting your Rails server, //= require react will
provide the build of React.js which was specified by the configurations.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>react-rails offers a few other options for versions &amp;
builds of React.js. See VERSIONS.md for more info about using the react-source
gem or dropping in your own copies of React.js.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>JSX</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>After installing react-rails, restart your server. Now,
.js.jsx files will be transformed in the asset pipeline.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>BabelTransformer options</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.9pt;
margin-left:.25pt'>You can use babel's transformers and custom plugins, and
pass options to the babel transpiler adding following configurations:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:88.5pt;margin-bottom:
17.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895698432'><span style='left:0px;position:
absolute;left:0px;top:-116593px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image238.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>config.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>react</span><span style='font-size:9.0pt;
line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>jsx_transform_options</span><span style='font-size:9.0pt;
line-height:110%'> = </span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>{ </span></b><span style='font-size:9.0pt;line-height:110%'>  blacklist:
</span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>[</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>'spec.functionName'</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'validation.react'</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>'strict'</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>]</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># default options </span></i><span style='font-size:9.0pt;
line-height:110%'>  optional: </span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>[</span></b><span style='font-size:9.0pt;
line-height:110%;color:#996600'>&quot;transformerName&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>]</span></b><span
style='font-size:9.0pt;line-height:110%'>,  </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># pass extra babel options </span></i><span
style='font-size:9.0pt;line-height:110%'>  whitelist: </span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>[</span></b><span
style='font-size:9.0pt;line-height:110%;color:#996600'>&quot;useStrict&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>]</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'># even more options[enter link description
here][1] </span></i><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>}</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>Under the hood, react-rails uses <a
href="https://github.com/babel/ruby-babel-transpiler"><span style='color:#D4072F'>ruby-babel-transpiler</span></a>,
for transformation.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324131">Section 44.3: Rendering &amp; mounting</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=339 style='width:254.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>react</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>rails</span></p>
  </td>
  <td width=151 valign=top style='width:113.6pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> includes a view helper <b><span
  style='font-size:9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>react_component</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:.45pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'><b><span style='font-size:9.0pt;line-height:107%;color:#006600;
background:#FAFAFA'>)</span></b> and an unobtrusive JavaScript driver
(react_ujs) which work</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>together to put React components on the page. You should
require the UJS driver in your manifest after react (and after turbolinks if
you use Turbolinks).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>The view helper puts a div on the page with the requested
component class &amp; props. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;%= react_component(</span><span
style='font-size:9.0pt;line-height:110%;color:red'>'HelloMessage'</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>, name: </span><span
style='font-size:9.0pt;line-height:110%;color:red'>'John'</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>) %</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.75pt;text-indent:0in;line-height:107%'><i><span style='font-size:
9.0pt;line-height:107%;color:gray'>&lt;!-- becomes: --&gt;</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:110%'><span style='position:relative;z-index:-1895697408'><span
style='left:0px;position:absolute;left:0px;top:-116899px;width:718px;
height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image195.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%'>&lt;div</span></b><span
style='font-size:9.0pt;line-height:110%;color:#666666'> </span><span
style='font-size:9.0pt;line-height:110%;color:#000066'>data-react-class</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;HelloMessage&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'> </span><span
style='font-size:9.0pt;line-height:110%;color:#000066'>data-react-props</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:red'>&quot;{&amp;quot;name&amp;quot;:&amp;quot;John&amp;quot;}&quot;</span><b><span
style='font-size:9.0pt;line-height:110%'>&gt;&lt;/div&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>On page load, the react_ujs driver will scan the page and
mount components using data-react-class and data-reactprops.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>If Turbolinks is present components are mounted on the
page:change event, and unmounted on page:beforeunload. Turbolinks &gt;= 2.4.0
is recommended because it exposes better events.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>In case of Ajax calls, the UJS mounting can be triggered
manually by calling from javascript:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>ReactRailsUJS.mountComponents() The view helper's signature
is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image654.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.85pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>component_class_name</span> is a string which names a
globally-accessible component class. It may have dots (eg,
&quot;MyApp.Header.MenuItem&quot;).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.35pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895696384'><span style='left:0px;position:absolute;
left:0px;top:-117193px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image129.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>   </span><span style='font-size:9.0pt;
line-height:110%;color:#996600'>`props`</span><span style='font-size:9.0pt;
line-height:110%'> is either an object that responds to </span><span
style='font-size:9.0pt;line-height:110%;color:#996600'>`#to_json`</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#9966CC'>or</span></b><span style='font-size:9.0pt;
line-height:110%'> an    already</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>stringified JSON object </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>eg, made with Jbuilder, see note    below</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>html_options</span> may include: <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>tag:</span> to use an element other than a
div to embed data-react-class and data-react-</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=412 style='width:309.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>prerender: </span><b><span style='font-size:9.0pt;
  line-height:107%;color:blue'>true</span></b></p>
  </td>
  <td width=254 valign=top style='width:190.25pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> to render the component on
  the server. </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600'>**</span></b><span style='font-size:
  9.0pt;line-height:107%'>other</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>props.  Any other arguments (eg class:, id:) are passed
through to content_tag.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324132">Chapter 45: Rails Cookbook - Advanced rails
recipes/learnings and coding techniques</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324133">Section 45.1: Playing with Tables using rails
console</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>View
tables</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image655.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>Delete any table</b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=110
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image656.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;margin-left:
.75pt'>Remove index from existing column</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:20.7pt;margin-bottom:
0in;margin-left:.25pt;text-indent:3.75pt;line-height:243%'><span
style='position:relative;z-index:-1895695360'><span style='left:0px;position:
absolute;left:0px;top:-117683px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:243%'> </span><b><span style='font-size:
9.0pt;line-height:243%;color:#6666FF'>ActiveRecord::Migration</span></b><span
style='font-size:9.0pt;line-height:243%'>.</span><span style='font-size:9.0pt;
line-height:243%;color:#9900CC'>remove_index</span><b><span style='font-size:
9.0pt;line-height:243%;color:#006600'>(</span></b><b><span style='font-size:
9.0pt;line-height:243%;color:#FF3333'>:users</span></b><span style='font-size:
9.0pt;line-height:243%'>, </span><b><span style='font-size:9.0pt;line-height:
243%;color:#FF3333'>:name</span></b><span style='font-size:9.0pt;line-height:
243%'> </span><b><span style='font-size:9.0pt;line-height:243%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:243%'> </span><span style='font-size:9.0pt;
line-height:243%;color:#996600'>'index_users_on_country'</span><b><span
style='font-size:9.0pt;line-height:243%;color:#006600'>) </span></b>where <span
style='font-size:9.0pt;line-height:243%;background:#FAFAFA'>country</span> is a
column name in the migration file with <b>already</b> added index in <span
style='font-size:9.0pt;line-height:243%;background:#FAFAFA'>users</span> table
as shown below:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image657.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;margin-left:
.75pt'>Remove foreign key constraint</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:151.3pt;margin-bottom:
.25pt;margin-left:.55pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:231%'><span style='position:relative;z-index:
-1895694336'><span style='left:0px;position:absolute;left:0px;top:-117855px;
width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:231%;color:#6666FF'>ActiveRecord::Base</span></b><span
style='font-size:9.0pt;line-height:231%'>.</span><span style='font-size:9.0pt;
line-height:231%;color:#9900CC'>connection</span><span style='font-size:9.0pt;
line-height:231%'>.</span><span style='font-size:9.0pt;line-height:231%;
color:#9900CC'>remove_foreign_key</span><b><span style='font-size:9.0pt;
line-height:231%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:231%;color:#996600'>'food_items'</span><span style='font-size:9.0pt;
line-height:231%'>, </span><span style='font-size:9.0pt;line-height:231%;
color:#996600'>'menus'</span><b><span style='font-size:9.0pt;line-height:231%;
color:#006600'>) </span></b>where <span style='font-size:9.0pt;line-height:
231%;background:#FAFAFA'>menus has_many food_items</span> and their respective
migrations too. <b>Add column</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image658.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895693312'><span style='left:0px;position:absolute;
left:0px;top:-118022px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#6666FF'>ActiveRecord::Migration</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>add_column</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:#FF3333'>:profiles</span></b><span style='font-size:9.0pt;line-height:
110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;color:#FF3333'>:profile_likes</span></b><span
style='font-size:9.0pt;line-height:110%'>, :</span><b><span style='font-size:
9.0pt;line-height:110%;color:#CC0066'>integer</span></b><span style='font-size:
9.0pt;line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:
110%;color:#FF3333'>:default</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><b><span style='font-size:9.0pt;line-height:110%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#006666'>0</span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324134">Section 45.2: Rails methods - returning boolean
values</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>Any method in Rails model can return boolean value.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>simple
method-</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image659.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;margin-left:
.75pt'>Again simple method returning boolean value-</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:185.5pt;margin-bottom:
.15pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>  </span><i><span style='font-size:
9.0pt;line-height:110%;color:green'>##this method return Boolean(NOTE THE !!
signs before result) </span></i><span style='font-size:9.0pt;line-height:110%'>  </span><b><span
style='font-size:9.0pt;line-height:110%;color:#9966CC'>def</span></b><span
style='font-size:9.0pt;line-height:110%'> check_if_user_profile_is_complete</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:32.55pt;margin-bottom:
17.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895692288'><span style='left:0px;position:
absolute;left:0px;top:-118312px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image254.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>    !!User.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>includes</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>(</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#FF3333'>:profile_pictures</span></b><span
style='font-size:9.0pt;line-height:110%'>,:address,:contact_detail</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>where</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%;color:#996600'>&quot;user.id = ?&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>self</span></b><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>) </span></b><span style='font-size:9.0pt;
line-height:110%'>  </span><b><span style='font-size:9.0pt;line-height:110%;
color:#9966CC'>end</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>So,the same method will now return boolean instead of
anything else :).</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324135">Section 45.3: Handling the error - undefined
method `where' for #&lt;Array:0x000000071923f8&gt;</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Sometimes we want to use a <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>where</span> query on a a collection of
records returned which is not</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.95pt;
margin-left:.25pt'><b><span style='font-size:9.0pt;line-height:112%;color:#6666FF;
background:#FAFAFA'>ActiveRecord::Relation</span></b>.Hence we get the above
error as <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Where</span>
clause is know to <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>ActiveRecord</span> and not to <b><span style='font-size:9.0pt;
line-height:112%;color:#CC0066;background:#FAFAFA'>Array</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.3pt;
margin-left:.25pt'>There is a precise solution for this by using <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Joins</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image660.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.2pt;
margin-left:.25pt'>So above query will fail after <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>map</span> as <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>map</span> will return an <b><span
style='font-size:9.0pt;line-height:112%;color:#CC0066;background:#FAFAFA'>array</span></b>
which will <b>not</b> work with <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>where</span> clause.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>But
using joins,will make it work,</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.5pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image661.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>As <span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>joins</span> will output similar records like <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>map</span> but they will be <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ActiveRecord</span>
and <b>not</b> an <b><span style='font-size:9.0pt;line-height:112%;color:#CC0066;
background:#FAFAFA'>Array</span></b>.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324136">Chapter 46: Multipurpose ActiveRecord columns</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324137">Section 46.1: Saving an object</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>If you have an attribute that needs to be saved and
retrieved to database as an object, then specify the name of that attribute
using the <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>serialize</span>
method and it will be handled automatically.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>The attribute must be declared as a <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>text</span> field.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>In the model you must declare the type of the field (<b><span
style='font-size:9.0pt;line-height:112%;color:#CC00FF;background:#FAFAFA'>Hash</span></b>
or <b><span style='font-size:9.0pt;line-height:112%;color:#CC0066;background:
#FAFAFA'>Array</span></b>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:298.55pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'>More info at: <a
href="http://apidock.com/rails/ActiveRecord/Base/serialize/class"><span
style='color:#D4072F'>serialize &gt;&gt; apidock.com</span></a></p>

<h2 style='margin-top:0in;margin-right:298.55pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc324138">Section 46.2: How To</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>In
your migration</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image662.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>In
your model</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image663.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324139">Chapter 47: Class Organization</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324140">Section 47.1: Service Class</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Controller is an entry point to our application. However, it<span
style='font-family:"Arial",sans-serif'>’</span>s not the only possible entry
point. I would like to have my logic accessible from:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:430.7pt;margin-bottom:
12.45pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>Rake tasks background jobs console tests</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.5pt;
margin-left:.25pt'>If I throw my logic into a controller it won<span
style='font-family:"Arial",sans-serif'>’</span>t be accessible from all these
places. So let<span style='font-family:"Arial",sans-serif'>’</span>s try <span
style='font-family:"Arial",sans-serif'>“</span>skinny controller, fat model<span
style='font-family:"Arial",sans-serif'>”</span> approach and move the logic to
a model. But which one? If a given piece of logic involves <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>User</span>, <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Cart</span> and <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Product</span>
models <span style='font-family:"Arial",sans-serif'>–</span> where should it
live?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.2pt;
margin-left:.25pt'>A class which inherits from <b><span style='font-size:9.0pt;
line-height:112%;color:#6666FF;background:#FAFAFA'>ActiveRecord::Base</span></b>
already has a lot of responsibilities. It handles query interface, associations
and validations. If you add even more code to your model it will quickly become
an unmaintainable mess with hundreds of public methods.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>A service is just a regular Ruby object. Its class does not
have to inherit from any specific class. Its name is a verb phrase, for example
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>CreateUserAccount</span>
rather than <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>UserCreation</span>
or <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>UserCreationService</span>.
It lives in app/services directory. You have to create this directory by
yourself, but Rails will autoload classes inside for you.</p>

<h4 style='margin-left:.75pt'>A service object does one thing</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A service object (aka method object) performs one action. It
holds the business logic to perform that action. Here is an example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image664.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>The three conventions I follow are:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>services directory</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Services go under the . I encourage you to use
subdirectories for business logic-heavy domains. For instance:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=628 style='width:471.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>services</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>invite</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>accept.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
  <td width=211 valign=top style='width:157.95pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> will define <b><span
  style='font-size:9.0pt;line-height:107%;color:#6666FF;background:#FAFAFA'>Invite::Accept</span></b>
  while </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>services</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>invite</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>create.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image665.gif"
align=left hspace=12>The file </p>

<p class=MsoNormal style='margin-top:0in;margin-right:98.55pt;margin-bottom:
2.65pt;margin-left:21.4pt;text-indent:-.5pt;line-height:107%'>will define <b><span
style='font-size:9.0pt;line-height:107%;color:#6666FF;background:#FAFAFA'>Invite::Create</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Services start with a verb (and do not end with Service): <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ApproveTransaction</span>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>SendTestNewsletter</span>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>ImportUsersFromCsv</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Services respond to the <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>call</span> method. I found using another
verb makes it a bit redundant:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>ApproveTransaction.</span><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>approve</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:36.55pt;
margin-bottom:2.05pt;margin-left:21.4pt;text-align:right;text-indent:-.5pt;
line-height:107%'><b><span style='font-size:9.0pt;line-height:107%;color:#006600;
background:#FAFAFA'>()</span></b> does not read well. Also, the <span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>call</span> method
is the de facto method for</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.05pt;
margin-left:30.0pt'><b><span style='font-size:9.0pt;line-height:112%;
color:#CC0066;background:#FAFAFA'>lambda</span></b>, <span style='font-size:
9.0pt;line-height:112%;background:#FAFAFA'>procs</span>, and method objects.</p>

<h4 style='margin-left:.75pt'>Benefits</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.1pt;
margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>Service objects
show what my application does</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:10.85pt;
margin-left:.25pt;line-height:133%'>I can just glance over the services
directory to see what my application does: <span style='font-size:9.0pt;
line-height:133%;background:#FAFAFA'>ApproveTransaction</span>, <span
style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>CancelTransaction</span>,
<span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>BlockAccount</span>,
<span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>SendTransactionApprovalReminder</span><span
style='font-family:"Arial",sans-serif'>…</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.5pt;
margin-left:.25pt'>A quick look into a service object and I know what business
logic is involved. I don<span style='font-family:"Arial",sans-serif'>’</span>t
have to go through the controllers, <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>ActiveRecord</span> model callbacks and observers to
understand what <span style='font-family:"Arial",sans-serif'>“</span>approving
a transaction<span style='font-family:"Arial",sans-serif'>”</span> involves.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
13.1pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><b><i>Clean-up
models and controllers</i></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Controllers turn the request (params, session, cookies) into
arguments, pass them down to the service and redirect or render according to
the service response.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image666.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Models only deal with associations, scopes, validations and
persistence.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image667.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>This makes models and controllers much easier to test and
maintain!</p>

<h4 style='margin-left:.75pt'>When to use Service Class</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Reach for Service Objects when an action meets one or more
of these criteria:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>The action is complex (e.g. closing the books at the end
of an accounting period)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>The action reaches across multiple models (e.g. an
e-commerce purchase using Order, CreditCard and Customer objects)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>The action interacts with an external service (e.g. posting
to social networks)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>The action is not a core concern of the underlying model
(e.g. sweeping up outdated data after a certain time period).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:20.9pt'>There are multiple ways of performing the action (e.g.
authenticating with an access token or password).</p>

<h4 style='margin-left:.75pt'>Sources</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="http://blog.sundaycoding.com/blog/2014/11/25/my-take-on-services-in-rails/"><span
style='color:#D4072F'>Adam Niedzielski Blog</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="http://brewhouse.io/blog/2014/04/30/gourmet-service-objects.html"><span
style='color:#D4072F'>Brew House Blog</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/"><span
style='color:#D4072F'>Code Climate Blog</span></a></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324141">Section 47.2: Model Class</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=503
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image668.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Models are typically responsible for:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:354.05pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>setting up relationships validating data</p>

<p class=MsoNormal style='margin-top:0in;margin-right:228.45pt;margin-bottom:
12.25pt;margin-left:20.9pt'>providing access to data via scopes and methods
Performing actions around persistence of data.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>At the highest level, models describe domain concepts and
manages their persistence.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324142">Chapter 48: Shallow Routing</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324143">Section 48.1: Use of shallow</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>One way to avoid deep nesting (as recommended above) is to
generate the collection actions scoped under the parent, so as to get a sense
of the hierarchy, but to not nest the member actions. In other words, to only
build routes with the minimal amount of information to uniquely identify the
resource, like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image669.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>The shallow method of the DSL creates a scope inside of
which every nesting is shallow. This generates the same routes as the previous
example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image670.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>There exist two options for scope to customize shallow
routes. :shallow_path prefixes member paths with the specified parameter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image671.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Use Rake Command for get generated routes as define below:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image672.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324144">Chapter 49: Model states: AASM</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324145">Section 49.1: Basic state with AASM</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Usually you'll end up creating models which will contain a
state, and that state will be changing during the lifespan of the object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'><a href="https://github.com/aasm/aasm"><span
style='color:#D4072F'>AASM</span></a> is a finite state machine enabler library
that can help you out with dealing with having an easy passing through the
process design of your objects.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Having something like this in your model goes pretty aligned
with the Fat Model, Skinny Controller idea, one of Rails best practices. The
model is the sole responsible of managing its state, its changes and of
generating the events triggered by those changes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To install, in Gemfile</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image673.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Consider an App where the user Quotes a product for a price.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=618
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image674.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>The Quote class' states can go however it's best for your
process.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>You can think of the states as being past, like in the
previous example or algo in other tense, for example: pricing, paying,
delivering, etc. The naming of the states depends on you. From a personal point
a view, past states work better because your end state will surely be a past
action and links up better with the event names, which will be explained later.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'><b>NOTE:</b> Be careful what names you use, you have to
worry about not using Ruby or Ruby on Rails reserved keywords, like <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>valid</span>, <b><span
style='font-size:9.0pt;line-height:112%;color:#9966CC;background:#FAFAFA'>end</span></b>,
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>being</span>,
etc.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Having defined the states and transitions we can now access
some methods created by AASM.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:105.2pt;margin-bottom:
17.2pt;margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span
style='position:relative;z-index:-1895687168'><span style='left:0px;position:
absolute;left:0px;top:-123965px;width:718px;height:1px'><img width=718
height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image195.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>Quote.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>priced</span><span style='font-size:9.0pt;
line-height:110%'>  </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># Shows all Quotes with priced events </span></i><span
style='font-size:9.0pt;line-height:110%'>quote.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>priced</span><span style='font-size:9.0pt;
line-height:110%'>? </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># Indicates if that specific quote has been priced </span></i><span
style='font-size:9.0pt;line-height:110%'>quote.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>price</span><span style='font-size:9.0pt;
line-height:110%'>!  </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'># Triggers the event the would transition from requested to
priced.</span></i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>As you can see the event has transitions, this transitions
determine the way the state will change upon the event call. If the event is
invalid due to the current state an Error will be raised.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The events and transitions also have some other callbacks,
for example</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image675.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Will call the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>product_delivered?</span> method which will return a
boolean. If it turns out false, the transition will not be applied and if the
no other transitions are available, the state won't change.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image676.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>If that translation successfully happens the <b><span
style='font-size:9.0pt;line-height:112%;color:#FF3333;background:#FAFAFA'>:reverse_charges</span></b>
method will be invoked.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>There are several other methods in AASM with more callbacks
in the process but this will help you creating your first models with finite
states.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324146">Chapter 50: Rails 5 API Authetication</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324147">Section 50.1: Authentication with Rails
authenticate_with_http_token</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image677.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.25pt;
margin-left:.25pt'>You can test this endpoint with <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>curl</span> by making a request like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.1pt;margin-bottom:0in;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895686144'><span style='left:0px;position:absolute;
left:0px;top:-124513px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>curl </span><b><span style='font-size:
9.0pt;line-height:110%;color:#006600'>-</span></b><span style='font-size:9.0pt;
line-height:110%'>IH </span><span style='font-size:9.0pt;line-height:110%;
color:#996600'>&quot;Authorization: Token token=my-token&quot;</span><span
style='font-size:9.0pt;line-height:110%'> http:</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>//</span></b><span
style='font-size:9.0pt;line-height:110%'>localhost:</span><span
style='font-size:9.0pt;line-height:110%;color:#006666'>3000</span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324148">Chapter 51: Testing Rails Applications</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324149">Section 51.1: Unit Test</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Unit tests test parts of the application in isolation.
usually a unit under test is a class or module.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image678.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/24pullrequests/24pullrequests/blob/master/spec/models/gift_spec.rb#L14-L17"><span
style='color:#D4072F'>source</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:238.2pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>This kind if test is as direct and
specific as possible.</p>

<h2 style='margin-top:0in;margin-right:238.2pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324150">Section 51.2:
Request Test</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Request tests are end to end tests that imitate the behavior
of a user.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image679.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
13.2pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/24pullrequests/24pullrequests/blob/master/spec/requests/dashboard_spec.rb#L53-L58"><span
style='color:#D4072F'>source</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This kind of test focuses on user flows and runs through all
layers of the system sometimes even rendering javascript.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324151">Chapter 52: Active Jobs</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324152">Section 52.1: Introduction</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>Available since Rails 4.2, Active Job is a framework for
declaring jobs and making them run on a variety of queuing backends. Recurring
or punctual tasks that are not blocking and can be run in parallel are good use
cases for Active Jobs.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324153">Section 52.2: Sample Job</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image680.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324154">Section 52.3: Creating an Active Job via the generator</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image681.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324155">Chapter 53: Rails frameworks over the years</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>When you're new to Rails and working on legacy Rails
applications, it can be confusing to understand which framework was introduced
when. This topic is designed to be the <i>definitive</i> list of all frameworks
across Rails versions.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324156">Section 53.1: How to find what frameworks are
available in the current version of Rails?</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.3pt;
margin-left:.25pt'>Use the</p>

<p class=MsoNormal style='margin-bottom:11.95pt;text-indent:0in'><span
style='font-size:11.0pt;line-height:112%'>        <img border=0 width=3
height=51 id="Group 286671"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image682.gif"></span>     config.frameworks</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.4pt;
margin-left:.25pt'>option to get an array of <b><span style='font-size:9.0pt;
line-height:112%;color:#CC00FF;background:#FAFAFA'>Symbol</span></b>s that
represent each framework.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324157">Section 53.2: Rails versions in Rails 1.x</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12>ActionMailer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActionPack</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActionWebService</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveRecord</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveSupport</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:20.9pt'>Railties</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324158">Section 53.3: Rails frameworks in Rails 2.x</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12>ActionMailer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActionPack</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveRecord</p>

<p class=MsoNormal style='margin-top:0in;margin-right:9.0pt;margin-bottom:1.5pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:107%'>ActiveResource (<i>ActiveWebService
was replaced by ActiveResource, and with that, Rails moved from SOAP to REST by
default</i>) ActiveSupport</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:20.9pt'>Railties</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324159">Section 53.4: Rails frameworks in Rails 3.x</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image215.gif"
align=left hspace=12>ActionMailer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActionPack</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveModel</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveRecord</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveResource</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveSupport</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Railties</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324160">Chapter 54: Nested form in Ruby on Rails</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324161">Section 54.1: How to setup a nested form in Ruby
on Rails</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The first to thing to have: a model that contains a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>has_many</span>
relation with another model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=159
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image683.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image684.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In a nested form, you can create child objects with a parent
object at the same time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image685.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Project.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>new</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:13.15pt;
margin-left:.25pt'>As we initialized <b><span style='font-size:9.0pt;
line-height:112%;color:#0066FF;background:#FAFAFA'>@project</span></b> with  to
have something for creating a new <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>Project</span> object, same way for creating a <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Todo</span> object,
we have to have something like this, and there are multiple ways to do so:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=272 style='width:204.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#0066FF'>@todo</span></b><span style='font-size:
  9.0pt;line-height:107%'> = </span><b><span style='font-size:9.0pt;line-height:
  107%;color:#0066FF'>@project</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>todos</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>build</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#0066FF'>@todo</span></b><span style='font-size:
  9.0pt;line-height:107%'> =</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:25.75pt;margin-bottom:
1.25pt;margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>In <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Projectscontroller</span>,
in <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>new</span>
method, you can write: </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#0066FF'>@project</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>todos</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>new</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.5pt;
margin-left:30.0pt'> to instantiate a new <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Todo</span> object.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=338 style='width:253.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=338 valign=top style='width:253.85pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>&lt;%= f.fields_for :todos,
  @project.todos.build %</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:25.75pt;margin-bottom:
20.1pt;margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>You
can also do this in view: <b><span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For strong params, you can include them in the following
way:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image686.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Since, the <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>Todo</span> objects will be created through the creation of
a <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Project</span>
object, so you have to specify this thing in <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Project</span> model by adding the
following line:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image687.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324162">Chapter 55: Factory Girl</a></h1>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324163">Section 55.1: Defining Factories</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you have a ActiveRecord User class with name and email
attributes, you could create a factory for it by making the FactoryGirl guess
it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image688.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Or you can make it explicit and even change its name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image689.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then in your spec you can use the FactoryGirl's methods with
these, like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image690.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The most common methods are:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image691.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324164">Chapter 56: Import whole CSV files from specific
folder</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>In this example, lets say we have many product CSV
files in a folder. Each CSV file need to upload our database from our console
write a command. Run the following command in a new or existing project to
create this model.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324165">Section 56.1: Uploads CSV from console command</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Terminal Commands:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image692.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Lates create controller.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Terminal Commands:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image693.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Controller Code:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image694.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image695.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>routes.rb</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image696.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>app/config/application.rb</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image697.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.2in;
margin-left:.25pt'>Now open your development <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>console</span> &amp; <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>run</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895682048'><span style='left:0px;position:absolute;
left:0px;top:-128914px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>=&gt;</span></b><span
style='font-size:9.0pt;line-height:110%'> ProductsController.</span><span
style='font-size:9.0pt;line-height:110%;color:#9900CC'>new</span><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>create</span><span style='font-size:9.0pt;
line-height:110%'> </span><i><span style='font-size:9.0pt;line-height:110%;
color:green'>#=&gt; Uploads your whole CSV files from your folder directory</span></i></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324166">Chapter 57: Tools for Ruby on Rails code
optimization and cleanup</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>Keeping your code clean and organized while developing a
large Rails application can be quite a challenge, even for an experienced
developer. Fortunately, there is a whole category of gems that make this job
much easier.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324167">Section 57.1: If you want to keep your code
maintainable, secure and optimized, look at some gems for code optimization and
cleanup :</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/flyerhzm/bullet"><b><span style='color:#D4072F'>Bullet</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>This one particularly blew my mind. The bullet gem helps you
kill all the N+1 queries, as well as unnecessarily eager loaded relations. Once
you install it and start visiting various routes in development, alert boxes
with warnings indicating database queries that need to be optimized will pop
out. It works right out of the box and is extremely helpful for optimizing your
application.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/railsbp/rails_best_practices"><b><span
style='color:#D4072F'>Rails Best Practices</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Static code analyzer for finding Rails specific code smells.
It offers a variety of suggestions; use scope access, restrict auto-generated
routes, add database indexes, etc. Nevertheless, it contains lots of nice
suggestions that will give you a better perspective on how to re-factor your
code and learn some best practices.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.25pt;margin-bottom:
13.5pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'><a
href="https://github.com/bbatsov/rubocop#cops"><b><span style='color:#D4072F'>Rubocop</span></b></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>A Ruby static code analyzer which you can use to check if
your code complies with the Ruby community code guidelines. The gem reports
style violations through the command line, with lots of useful code refactoring
goodies such as useless variable assignment, redundant use of Object#to_s in
interpolation or even unused method argument.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>A good thing is that it's highly configurable, since the
analyzer can be quite irritating if you're not following the Ruby style guide
100% (i.e. you have lots of trailing whitespaces or you double quote your
strings even when not interpolating, etc.).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>It's divided into 4 sub-analyzers (called cops): Style,
Lint, Metrics and Rails.</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324168">Chapter 58: ActiveJob</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>Active Job is a framework for declaring jobs and making them
run on a variety of queuing backends. These jobs can be everything from
regularly scheduled clean-ups, to billing charges, to mailings. Anything that
can be chopped up into small units of work and run in parallel, really.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324169">Section 58.1: Create the Job</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image698.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324170">Section 58.2: Enqueue the Job</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image699.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324171">Chapter 59: Active Model Serializers</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.25in;
margin-left:.25pt'>ActiveModelSerializers, or AMS for short, bring 'convention
over configuration' to your JSON generation. ActiveModelSerializers work
through two components: serializers and adapters. Serializers describe which
attributes and relationships should be serialized. Adapters describe how
attributes and relationships should be serialized.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324172">Section 59.1: Using a serializer</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image700.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324173">Chapter 60: Rails Engine - Modular Rails</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Quick
overview of Rails engines</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:15.05pt;margin-bottom:
12.4pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Engines are small Rails applications that
can be used to add functionalities to the application hosting them. The class
defining a Ruby on Rails application is <b><span style='font-size:9.0pt;
line-height:133%;color:#6666FF;background:#FAFAFA'>Rails::Application</span></b>
which actually inherits a lot of its behavior from <b><span style='font-size:
9.0pt;line-height:133%;color:#6666FF;background:#FAFAFA'>Rails::Engine</span></b>,
the class defining an engine. We can say that a regular Rails application is
simply an engine with more features.</p>

<h2 style='margin-top:0in;margin-right:15.05pt;margin-bottom:12.4pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324174">Section 60.1: Create a modular app</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:27.85pt;
margin-left:.25pt'># Getting started</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>First, let<span style='font-family:"Arial",sans-serif'>’</span>s
generate a new Ruby on Rails application:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image701.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The next step is to generate an engine!</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image702.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>We will also create an <span style='font-family:"Arial",sans-serif'>‘</span>engines<span
style='font-family:"Arial",sans-serif'>’</span> folder to store the engines
(even if we just have one!).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image703.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Engines, just like gems, come with a gemspec file. Let<span
style='font-family:"Arial",sans-serif'>’</span>s put some real values to avoid
warnings.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:18.8pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=339
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image704.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now we need to add the Todo engine to the parent application
Gemfile.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image705.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Let<span style='font-family:"Arial",sans-serif'>’</span>s
run <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>bundle
install</span>. You should see the following in the list of gems:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image706.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Great, our Todo engine is loaded correctly! Before we start
coding, we have one last thing to do: mount the Todo engine. We can do that in
the routes.rb file in the parent app.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image707.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>todo</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.6pt;
margin-left:.25pt'>We are mounting it at <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>/</span> but we could also make it
accessible at <b><span style='font-size:9.0pt;line-height:112%;color:#006600;
background:#FAFAFA'>/</span></b>. Since we have only one module, <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>/</span> is fine.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>Now you can fire up your server and check it in your
browser. You should see the default Rails view because we didn<span
style='font-family:"Arial",sans-serif'>’</span>t define any controllers/views
yet. Let<span style='font-family:"Arial",sans-serif'>’</span>s do that now!</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Building the
Todo list</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>engine.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>We are going to scaffold a model named <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Task</span> inside
the Todo module but to correctly migrate the database from the parent
application, we need to add a small initializer to the  file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image708.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:27.65pt;
margin-left:.25pt'>That<span style='font-family:"Arial",sans-serif'>’</span>s
it, now when we run migrations from the parent application, the migrations in
the Todo engine will be loaded too.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:106.15pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:247%'><span style='position:relative;z-index:
-1895681024'><span style='left:0px;position:absolute;left:0px;top:-131879px;
width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span>Let<span
style='font-family:"Arial",sans-serif'>’</span>s create the <span
style='font-size:9.0pt;line-height:247%;background:#FAFAFA'>Task</span> model.
The <span style='font-size:9.0pt;line-height:247%;background:#FAFAFA'>scaffold</span>
command needs to be run from the engine folder. <b><span style='font-size:9.0pt;
line-height:247%;color:#7A0874'>cd</span></b><span style='font-size:9.0pt;
line-height:247%'> engines<b>/</b>todo <b>&amp;&amp;</b> rails g scaffold Task
title:string content:text </span>Run the migrations from the parent folder:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image709.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Now, we just need to define the root route inside the Todo
engine:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image710.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>js</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You can play with it, create tasks, delete them<span
style='font-family:"Arial",sans-serif'>…</span> Oh wait, the delete is not
working! Why?! Well, it seems JQuery is not loaded, so let<span
style='font-family:"Arial",sans-serif'>’</span>s add it to the  file inside the
engine!</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image711.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Yay, now we can destroy tasks!<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324175">Chapter 61: Single Table Inheritance</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.4pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Single Table Inheritance (STI) is a design
pattern which is based on the idea of saving the data of multiple models which
are all inheriting from the same Base model, into a single table in the
database.</p>

<h2 style='margin-top:0in;margin-right:15.4pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324176">Section 61.1: Basic example</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>First we need a table to hold our data</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image712.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Then lets create some models</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image713.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Guest.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>create</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>name: </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'Bob'</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>type: </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'Guest'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>When you do a <b><span style='font-size:9.0pt;line-height:
112%;color:#006600;background:#FAFAFA'>)</span></b> ActiveRecord will translate
this to create an entry in the Users table with .</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bob = User.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>where</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>name: </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'Bob'</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>)</span></b><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>first</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bob.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>becomes</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>(</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>User</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.3pt;
margin-left:.25pt'>When you retrieve the record  the object returned will be an
instance of <span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Guest</span>,
which can be forcibly treated as a User with <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>)</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:21.65pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>becomes is most useful when dealing with
shared partials or routes/controllers of the superclass instead of the
subclass.</p>

<h2 style='margin-top:0in;margin-right:21.65pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324177">Section 61.2: Custom inheritance column</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By default STI model class name is stored in a column named <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>type</span>. But
its name can be changed by overriding <span style='font-size:9.0pt;line-height:
112%;background:#FAFAFA'>inheritance_column</span> value in a base class. E.g.:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=50
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image714.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image715.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Migration in this case will look as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image716.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=538 style='width:403.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>Admin.</span><span style='font-size:9.0pt;line-height:
  107%;color:#9900CC'>create</span></p>
  </td>
  <td width=301 valign=top style='width:225.55pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>, this record will be saved
  in the users table with </p>
  </td>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  .9pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>entity_type = </span><span style='font-size:9.0pt;
  line-height:107%;color:#996600'>&quot;Admin&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:34.85pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'>When you do </p>

<h2 style='margin-top:0in;margin-right:34.85pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc324178">Section 61.3: Rails model with
type column and without STI</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Having <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>type</span> column in a Rails model without invoking STI
can be achieved by assigning <b><span style='font-size:9.0pt;line-height:112%;
color:#FF3333;background:#FAFAFA'>:_type_disabled</span></b> to <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>inheritance_column</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image717.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324179">Chapter 62: ActiveRecord Transactions</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:10.35pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>ActiveRecord Transactions are protective
blocks where sequence of active record queries are only permanent if they can
all succeed as one atomic action.</p>

<h2 style='margin-top:0in;margin-right:10.35pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324180">Section 62.1: Getting Started with Active Record Transactions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Active Record Transactions can be applied to Model classes
as well as Model instances, the objects within the transaction block need not
all be instances of same class. This is because transactions are per-database
connection, not per-model. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image718.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.4pt;
margin-left:.25pt'>Using save with a bang ensures that transaction will be
automatically rolled back when the exception is thrown and after the rollback,
control goes to the rescue block for the exception. <b>Make sure you rescue the
exceptions thrown from the save! in Transaction Block.</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=202 style='width:2.1in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=202 valign=top style='width:2.1in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0066'>raise</span></b><span style='font-size:
  9.0pt;line-height:107%'> </span><b><span style='font-size:9.0pt;line-height:
  107%;color:#6666FF'>ActiveRecord::Rollback</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If you don't want to use save!, you can manually raise  when
the save fails. You</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>need not handle this exception. It will then rollback the
transaction and take the control to the next statement after transaction block.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image719.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324181">Chapter 63: Turbolinks</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:20.75pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Turbolinks is a javascript library that
makes navigating your web application faster. When you follow a link,
Turbolinks automatically fetches the page, swaps in its &lt;body&gt;, and
merges its &lt;head&gt;, all without incurring the cost of a full page load.</p>

<h2 style='margin-top:0in;margin-right:20.75pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324182">Section 63.1: Binding to turbolink's concept of a page load</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>With turbolinks, the traditional approach to using:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image720.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>document</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>)</span></b><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%;color:#9900CC'>ready</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>won't work. While using turbolinks, the <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>$</span><b><span
style='font-size:9.0pt;line-height:112%;color:#006600;background:#FAFAFA'>(()</span></b>
event will only fire once: on the initial page load.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>document.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>ready</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>From that point on, whenever a user clicks a link on your
website, turbolinks will intercept the link click event and make an ajax
request to replace the &lt;body&gt; tag and to merge the &lt;head&gt; tags. The
whole process triggers the notion of a &quot;visit&quot; in turbolinks land.
Therefore, instead of using the traditional <b><span style='font-size:9.0pt;
line-height:112%;color:#006600;background:#FAFAFA'>()</span></b> syntax above,
you'll have to bind to turbolink's visit event like so:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image721.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324183">Section 63.2: Disable turbolinks on specific links</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>It is very easy to disable turbolinks on specific links.
According to <a href="http://github.com/turbolinks/turbolinks"><span
style='color:#D4072F'>the official turbolinks documentation</span></a>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=346
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image722.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324184">Section 63.3: Understanding Application Visits</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Application visits are initiated by clicking a
Turbolinks-enabled link, or programmatically by calling</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image723.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>history.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>pushState</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>By default, the visit function uses the 'advance' action.
More understandably, the default behavior for the visit function is to advance
to the page indicated by the &quot;location&quot; parameter. Whenever a page is
visited, turbolinks pushes a new entry onto the browser's history using . The
history is important because</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>turbolinks will try to use the history to load pages from
cache whenever possible. This allows for extremely fast page rendering for
frequently visited pages.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>However, if you want to visit a location without pushing any
history onto the stack, you can use the 'replace' action on the visit function
like so:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image724.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>This will replace the top of the history stack with the new
page so that the total number of items on the stack remains unchanged.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.15in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>There is also a &quot;restore&quot; action that aids in
<a href="https://github.com/turbolinks/turbolinks#restoration-visits"><span
style='color:#D4072F'>restoration vists</span></a>, the visits that occur as a
result of the user clicking the forward button or back button on their browser.
Turbolinks handles these types of events internally and recommends that users
don't manually tamper with the default behavior.</p>

<h2 style='margin-top:0in;margin-right:.15in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324185">Section 63.4: Cancelling visits before they begin</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=166 style='width:124.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>turbolinks:before</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>visit</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:64.25pt;margin-bottom:
12.25pt;margin-left:124.45pt;text-indent:-124.2pt'>Turbolinks provides an event
listener that can be used to stop visits from occurring. Listen to the  event
to be notified when a visit is about to commence.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>In the event handler, you can use:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image725.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>or</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image726.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>to retrieve the location of the visit. The visit can then be
cancelled by calling:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image727.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;
margin-left:.75pt;text-indent:-.5pt;line-height:107%'><b>NOTE:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.45pt;margin-bottom:
9.8pt;margin-left:-.25pt;text-indent:-.5pt;line-height:107%'>According to the <a
href="https://github.com/turbolinks/turbolinks#canceling-visits-before-they-start"><span
style='color:#D4072F'>official turbolinks docs</span></a>:</p>

<p class=MsoNormal style='text-indent:0in'><span style='font-size:11.0pt;
line-height:112%'>        <img border=0 width=3 height=51 id="Group 295716"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image728.gif"></span>             Restoration
visits cannot be canceled and do not fire turbolinks:before-visit.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324186">Section 63.5: Persisting elements across page
loads</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Consider the following situation: Imagine that you are the
developer of a social media website that allows users to be friends with other
users and that employs turbolinks to make page loading faster. In the top right
of every page on the site, there is a number indicating the total number of
friends that a user currently has. Imagine you are using your site and that you
have 3 friends. Whenever a new friend is added, you have some javascript that
runs which updates the friend counter. Imagine that you just added a new friend
and that your javascript ran properly and updated the friend count in the top
right of the page to now render 4. Now, imagine that you click the browser's
back button. When the page loads, you notice that the friend counter says 3 even
though you have four friends.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>This is a relatively common problem and one that turbolinks
has provided a solution for. The reason the problem occurs is because
turbolinks automatically loads pages from the cache when a user clicks the back
button. The cached page won't always be updated with the database.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>To solve this issue, imagine that you render the friend
count inside a &lt;div&gt; tag with an id of &quot;friend-count&quot;:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image729.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:135.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>turbolinks</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>permanent</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:23.45pt;
margin-left:.25pt'>By adding the  attribute, you're telling turbolinks to
persist certain elements across page loads. The <a
href="https://github.com/turbolinks/turbolinks#persisting-elements-across-page-loads"><span
style='color:#D4072F'>official docs say</span></a>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:16.95pt;margin-bottom:
1.25pt;margin-left:24.0pt'><img width=3 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image279.gif"
align=left hspace=12>Designate permanent elements by giving them an HTML id and
annotating them with data-turbolinkspermanent. Before each render, Turbolinks
matches all permanent elements by id and transfers them from the original page
to the new page, preserving their data and event listeners.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324187">Chapter 64: Friendly ID</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>FriendlyId is the &quot;Swiss Army bulldozer&quot; of
slugging and permalink plugins for Active Record. It lets you create pretty
URLs and work with human-friendly strings as if they were numeric ids. With
FriendlyId, it's easy to make your application use URLs like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:289.25pt;margin-bottom:
0in;margin-left:-.25pt;text-indent:-.5pt;line-height:145%'><a
href="http://example.com/states/washington"><span style='color:#D4072F'>http://example.com/states/washington</span></a></p>

<h2 style='margin-top:0in;margin-right:289.25pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc324188">Section 64.1: Rails Quickstart</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image730.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.05pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><b>Gemfile </b><span
style='font-size:11.0pt;line-height:110%'><img border=0 width=718 height=76
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image731.gif"></span><span
style='font-size:9.0pt;line-height:110%'>rake db:migrate</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:10.0pt;line-height:107%;color:black'>edit app/models/user.rb</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image732.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image733.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=223
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image734.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>A new &quot;candidates&quot; functionality which makes it
easy to set up a list of alternate slugs that can be used to uniquely
distinguish records, rather than appending a sequence. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=127
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image735.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=136
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image736.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Set slug limit length using friendly_id gem?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image737.gif"></span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324189">Chapter 65: Securely storing authentication keys</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>Many third-party APIs require a key, allowing them to
prevent abuse. If they issue you a key, it's very important that you not commit
the key into a public repository, as this will allow others to steal your key.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324190">Section 65.1: Storing authentication keys with Figaro</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=597 style='width:447.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gem </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'figaro'</span></p>
  </td>
  <td width=324 valign=top style='width:242.75pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'> to your Gemfile and run <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>bundle install</span>.
  Then run </p>
  </td>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>bundle </span><b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0066'>exec</span></b><span style='font-size:9.0pt;
  line-height:107%'> figaro install</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Add ; this will</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>create config/application.yml and add it to your .gitignore
file, preventing it from being added to version control.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>You can store your keys in application.yml in this format:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image738.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>where SECRET_NAME and secret_value are the name and value of
your API key.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>You also need to name these secrets in config/secrets.yml.
You can have different secrets in each environment. The file should look like
this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image739.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>How you use these keys varies, but say for example <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>some_component</span>
in the development environment needs access to <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>secret_name</span>. In
config/environments/development.rb, you'd put:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image740.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Finally, let's say you want to spin up a production
environment on Heroku. This command will upload the values in
config/environments/production.rb to Heroku:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image741.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324191">Chapter 66: Authenticate Api using Devise</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;text-indent:
-.5pt;line-height:133%'>Devise is authentication solution for Rails. Before
going any further i would like to add quick note on API. So API does not handle
sessions (is stateless) which means one that provide response after you
request, and then requires no further attention, which means no previous or
future state is required for the system to work hence whenever we requesting to
the server need to pass authentication details with all API and should tell
Devise not to store authentication details.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324192">Section 66.1: Getting Started</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:272.4pt;margin-bottom:
0in;margin-left:.25pt;line-height:215%'>So first we will create rails project
and setup device create a rails application</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image742.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.3pt;
margin-left:.25pt'>now add devise to gem list</p>

<p class=MsoNormal style='margin-bottom:12.45pt;text-indent:0in'><span
style='font-size:11.0pt;line-height:112%'>        <img border=0 width=3
height=51 id="Group 290736"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image728.gif"></span>          you
can find a file named 'Gemfile' at the root of rails project</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.35pt;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'>Then run <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>bundle install</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Next, you need to run the generator:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image743.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Now on console you can find few instructions just follow it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Generate devise model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.55pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image744.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.35pt;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'>Then run <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>rake db:migrate</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:27.85pt;
margin-left:.25pt'>For more details go to: <a
href="https://github.com/plataformatec/devise#getting-started"><span
style='color:#D4072F'>Devise Gem</span></a></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>Authentication
Token</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.35pt;
margin-left:.25pt'>Authentication token is used to authenticate a user with a
unique token, So Before we proceed with the logic first we need to add <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>auth_token</span>
field to a Devise model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Hence,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image745.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.55pt;
margin-left:.75pt;text-indent:-.5pt;line-height:109%'>Then run <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>rake db:migrate</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=302 style='width:3.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>app</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>controllers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>application_controllers.</span><span
  style='font-size:9.0pt;line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:263.1pt;margin-bottom:
0in;margin-left:.25pt;line-height:216%'>Now we are all set to do authentication
using <span style='font-size:9.0pt;line-height:216%;background:#FAFAFA'>auth_token
</span>In </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>First this line to it</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image746.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:225.9pt;margin-bottom:
0in;margin-left:.25pt;line-height:215%'>this will help rails application
respond with both html and json Then</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image747.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>will change this <b><span style='font-size:9.0pt;line-height:
112%;color:#FF3333;background:#FAFAFA'>:null</span></b> as we are not dealing
with sessions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>now we will add authentication method in
application_controller</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>So, by default Devise uses email as unique field we can also
use custom fields, for this case we will be authenticating using user_email and
auth_token.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=207
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image748.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>store: </span><b><span style='font-size:9.0pt;
  line-height:107%;color:blue'>false</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>On line 6 in the above code you can see that i have set 
which will prevent from creating a session on each requests hence we achieved
stateless re</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324193">Chapter 67: Integrating React.js with Rails Using
Hyperloop</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>This topic covers integrating React.js with Rails using the <a
href="http://ruby-hyperloop.io/"><span style='color:#D4072F'>Hyperloop</span></a>
gem</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>Other approaches not covered here are using the react-rails
or react_on_rails gems.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324194">Section 67.1: Adding a simple react component
(written in ruby) to your Rails app</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add
the hyperloop gem to your rails (4.0 - 5.1) Gemfile</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.85pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:109%'><span
style='line-height:109%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>bundle
install</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Add
the hyperloop manifest to the application.js file: //
app/assets/javascripts/application.js ... //= hyperlooploader</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>hyperloop</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#006600'>/</span></b><span style='font-size:9.0pt;
  line-height:107%'>components</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Create
your react components, and place them in the  directory #</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>app/hyperloop/components/hello_world.rb class HelloWorld
&lt; Hyperloop::Component after_mount do every(1.second) {
mutate.current_time(Time.now) } end render do &quot;Hello World! The time is
now: #{state.current_time}&quot; end end</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:15.9pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:133%'><span
style='line-height:133%'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Components act just like views. They are &quot;mounted&quot;
using the <span style='font-size:9.0pt;line-height:133%;background:#FAFAFA'>render_component</span>
method in a controller: # somewhere in a controller: ... def hello_world
render_component # renders HelloWorld based on method name end</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324195">Section 67.2: Callbacks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image749.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324196">Section 67.3: Declaring component parameters (props)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=200
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image750.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image751.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324197">Section 67.4: HTML Tags</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image752.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324198">Section 67.5: Event Handlers</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image753.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc324199">Section 67.6: States</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=256
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image754.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Note that states can be shared between components using <a
href="http://ruby-hyperloop.io/start/stores/"><span style='color:#D4072F'>Hyperloop::Stores</span></a></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324200">Chapter 68: Change a default Rails application
enviornment</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:16.5pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>This will discuss how to change the
environment so when someone types <span style='font-size:9.0pt;line-height:
133%;background:#FAFAFA'>rails s</span> they boot in not development but in the
environment they want.</p>

<h2 style='margin-top:0in;margin-right:16.5pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324201">Section 68.1: Running on a local machine</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Normally when rails environment is run by typing. This just
runs the default environment which is usually <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>development</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image755.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The specific environment can be selected by using the flag <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>-e</span> for
example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image756.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Which will run the test environment.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>~</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#006600'>/</span></b><span style='font-size:9.0pt;line-height:
  107%'>.</span><span style='font-size:9.0pt;line-height:107%;color:#9900CC'>bashrc</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>The default environment can be changed in terminal by
editing the  file, and adding the following line:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image757.gif"></span></p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324202">Section 68.2: Running on a server</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>If running on a remote server that is using Passenger change
apache.conf to to the environment you want to use.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>For example this case you see <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>RailsEnv production</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image758.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324203">Chapter 69: Rails -Engines</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.35pt;margin-left:
0in;text-indent:0in'><span style='font-size:10.0pt;line-height:107%;color:black'>Parameters                                                                                                     Purpose</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:.05in;
margin-left:.25pt'><b>--mountable </b>option tells the generator that you want
to create a &quot;mountable&quot; and namespace-isolated engine</p>

<p class=MsoNormal style='margin-bottom:14.8pt;text-indent:0in'><b>--full                                 </b>option
tells the generator that you want to create an engine, including a skeleton
structure</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>Engines can be considered miniature applications that
provide functionality to their host applications. A Rails application is
actually just a &quot;supercharged&quot; engine, with the Rails::Application
class inheriting a lot of its behavior from Rails::Engine.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:19.55pt;margin-bottom:
.25pt;margin-left:1.05pt;text-align:justify;text-justify:inter-ideograph;
text-indent:-.5pt;line-height:133%'>Engines are the reusable rails
applications/plugins. It works like a Gem. Famous engines are Device, Spree
gems which can be integrated with rails applications easily.</p>

<h2 style='margin-top:0in;margin-right:19.55pt;margin-bottom:.25pt;margin-left:
1.05pt;text-align:justify;text-justify:inter-ideograph;line-height:133%'><a
name="_Toc324204">Section 69.1: Famous examples are</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Generating simple blog engine</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image759.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Famous engines examples are</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'><a href="https://github.com/plataformatec/devise"><span
style='color:#D4072F'>Device</span></a> (authentication gem for rails)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><a href="https://github.com/spree/spree"><span
style='color:#D4072F'>Spree</span></a> (Ecommerce)<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324205">Chapter 70: Adding an Amazon RDS to your rails
application</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>Steps to create an AWS RDS instance and configure your
database.yml file by installing the required connectors.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324206">Section 70.1: Consider we are connecting MYSQL RDS
with your rails application</a></h2>

<h4 style='margin-left:.75pt'>Steps to create MYSQL database</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Login
to amazon account and select RDS service</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Select
<span style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Launch DB
Instance</span> from the instance tab</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>By
defaul MYSQL Community Edition will be selected, hence click the <b><span
style='font-size:9.0pt;line-height:112%;color:blue;background:#FAFAFA'>SELECT</span></b>
button</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>next</span></b><span style='font-size:
  9.0pt;line-height:107%'> step</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Select
the database purpose, say <span style='font-size:9.0pt;line-height:112%;
background:#FAFAFA'>production</span> and click </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=583 style='width:437.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=583 valign=top style='width:437.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>mysql version, storage size, DB Instance Identifier,
  Master Username </span><b><span style='font-size:9.0pt;line-height:107%;
  color:#9966CC'>and</span></b><span style='font-size:9.0pt;line-height:107%'>
  Password</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#9966CC'>next</span></b><span style='font-size:
  9.0pt;line-height:107%'> step</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Provide
the and click </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:2.85pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:109%'><span
style='line-height:109%'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Enter <span style='font-size:9.0pt;line-height:109%;background:
#FAFAFA'>Database Name</span> and click <span style='font-size:9.0pt;
line-height:109%;background:#FAFAFA'>Launch DB Instance</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:112%'>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Please
wait until all the instance gets created. Once the instance gets created you
will find an Endpoint, copy this entry point (which is referred as hostname)</p>

<h4 style='margin-left:.75pt'>Installing connectors</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add the MySQL database adapter to your project's gemfile,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image760.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Install your added gems,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image761.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>Some other database adapters are,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gem </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'pg'</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=302 style='width:3.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=302 valign=top style='width:3.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gem </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'activerecord-oracle_enhanced-adapter'</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>gem </span><span style='font-size:9.0pt;line-height:
  107%;color:#996600'>'sql_server'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:232.65pt;margin-bottom:
12.45pt;margin-left:64.1pt;text-indent:-.6in'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12> for PostgreSQL  for Oracle  for SQL Server</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Configure
your project's database.yml file<span style='font-weight:normal'> Open your
config/database.yml file</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image762.gif"></span></p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324207">Chapter 71: Payment feature in rails</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.25pt;
margin-left:.25pt'>This document pretend to introduce you, with a complete
example, how you can implement different payment methods with Ruby on Rails.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:51.7pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>In the example, we will cover Stripe
and Braintree two very well-known payment platforms.</p>

<h2 style='margin-top:0in;margin-right:51.7pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324208">Section 71.1: How
to integrate with Stripe</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>Add Stripe gem to our <span style='font-size:9.0pt;
line-height:112%;background:#FAFAFA'>Gemfile</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image763.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>initializers</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>/</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>stripe.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>rb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:7.9pt;
margin-left:.25pt'>Add  file. This file contains the necessary keys for
connecting with your stripe account.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.8pt;
margin-left:.5pt;text-indent:-.5pt;line-height:110%'><span style='font-size:
11.0pt;line-height:110%'><img border=0 width=718 height=142
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image764.gif"></span><span
style='font-size:9.0pt;line-height:110%'>Stripe.</span><span style='font-size:
9.0pt;line-height:110%;color:#9900CC'>api_key</span><span style='font-size:
9.0pt;line-height:110%'> = Rails.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>configuration</span><span style='font-size:
9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;line-height:110%;
color:#9900CC'>stripe</span><b><span style='font-size:9.0pt;line-height:110%;
color:#006600'>[</span></b><b><span style='font-size:9.0pt;line-height:110%;
color:#FF3333'>:secret_key</span></b><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>]</span></b></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:3.75pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>How to
create a new customer to Stripe</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895677952'><span style='left:0px;position:absolute;
left:0px;top:-144526px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#6666FF'>Stripe::Customer</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>create</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>({</span></b><span style='font-size:9.0pt;
line-height:110%'>email: email, source: payment_token</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>})</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.7pt;
margin-left:.25pt'>This code creates a new customer on Stripe with given email
address and source.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'><span style='font-size:9.0pt;line-height:112%;background:
#FAFAFA'>payment_token</span> is the token given from the client-side that
contains a payment method like a credit card or bank account. More info: <a
href="https://stripe.com/docs/stripe.js"><span style='color:#D4072F'>Stripe.js
client-side</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=42
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image765.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:.25pt'>This code retrieves a plan from Stripe by its id.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>How to
create a subscription</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:0in;
margin-left:.25pt'>When we have a customer and a plan we can create a new
subscription on Stripe.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image766.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.45pt;
margin-left:.25pt'>It will create a new subscription and will charge our User.
It's important to know what really happens on Stripe when we subscribe a user
to a plan, you will find more info here: <a
href="https://stripe.com/docs/subscriptions/lifecycle"><span style='color:#D4072F'>Stripe
Subscription lifecycle</span></a>.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.5pt;margin-left:
.75pt'><span style='font-size:10.0pt;line-height:107%;color:black'>How to
charge a user with a single payment</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:14.2pt;
margin-left:.25pt'>Sometimes we want to charge our users just a single time,
for do that we will do the next.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;text-indent:-.5pt;line-height:110%'><span style='position:
relative;z-index:-1895676928'><span style='left:0px;position:absolute;
left:0px;top:-144979px;width:718px;height:1px'><img width=718 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image127.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:#6666FF'>Stripe::Charge</span></b><span
style='font-size:9.0pt;line-height:110%'>.</span><span style='font-size:9.0pt;
line-height:110%;color:#9900CC'>create</span><b><span style='font-size:9.0pt;
line-height:110%;color:#006600'>(</span></b><span style='font-size:9.0pt;
line-height:110%'>amount:   amount, customer: customer, currency: currency</span><b><span
style='font-size:9.0pt;line-height:110%;color:#006600'>)</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.55pt;
margin-left:.25pt'>In that case, we are charging our user one time for given
amount.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Common errors:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:8.85pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image646.gif"
align=left hspace=12>The amount must be sent in integer form, that means, 2000
will be 20 units of currency. <a href="https://stripe.com/docs/charges"><span
style='color:#D4072F'>Check this example</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:9.05pt;
margin-left:20.9pt'>You cannot charge a user in two currencies. If the user was
charged in EUR at any moment in the past you cannot charge the user in USD.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><span style='font-size:11.0pt;line-height:112%'><img
border=0 width=5 height=5 id="Group 292054"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image031.gif"></span> You
cannot charge user without source (payment method).<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324209">Chapter 72: Rails on docker</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:178.35pt;margin-bottom:
0in;margin-left:.25pt;line-height:145%'>This tutorial will start with Docker
installed and with a Rails app</p>

<h2 style='margin-top:0in;margin-right:178.35pt;margin-bottom:0in;margin-left:
.25pt;text-indent:.5pt;line-height:145%'><a name="_Toc324210">Section 72.1:
Docker and docker-compose</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.65pt;
margin-left:.25pt'>First of all, we will need to create our <span
style='font-size:9.0pt;line-height:112%;background:#FAFAFA'>Dockerfile</span>.
A good example can be found on this <a
href="https://nickjanetakis.com/blog/dockerize-a-rails-5-postgres-redis-sidekiq-action-cable-app-with-docker-compose"><span
style='color:#D4072F'>blog</span></a> by Nick Janetakis.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>This code contains the script that will be executed on our
docker machine at the moment of start.For this reason, we are installing all
the required libraries and ends with the start of Puma (RoR dev server)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=782
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image767.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>docker</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>compose.</span><span style='font-size:9.0pt;
  line-height:107%;color:#9900CC'>yml</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Also, we will use docker-compose, for that, we will create .
The explanation of this file will be more a docker-compose tutorial than an
integration with Rails and I will not cover here.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.1pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=306
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image768.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>docker</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><b><span style='font-size:
  9.0pt;line-height:107%;color:#006600;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'><span style='font-size:
  9.0pt;line-height:107%'>compose up</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:.25pt'>Just with these two files you will have enough to run  and
wake up your docker<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324211">Appendix A: Reserved Words</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:18.3pt;
margin-left:.25pt'>You should be careful using these words for variable, model
name, method name or etc.</p>

<h2 style='margin-top:0in;margin-right:.8pt;margin-bottom:2.75pt;margin-left:
-.25pt'><a name="_Toc324212">Section A.1: Reserved Word List</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>ADDITIONAL_LOAD_PATHS</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ARGF</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ARGV</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActionController</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActionView</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ActiveRecord</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ArgumentError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Array</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>BasicSocket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Benchmark</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Bignum</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Binding</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>CGI</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>CGIMethods</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>CROSS_COMPILING</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Class</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ClassInheritableAttributes</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Comparable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ConditionVariable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Config</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Continuation</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>DRb</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>DRbIdConv</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>DRbObject</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>DRbUndumped</p>

<p class=MsoNormal style='margin-top:0in;margin-right:464.55pt;margin-bottom:
1.25pt;margin-left:20.9pt'>Data Date</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>DateTime</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Delegater</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Delegator</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Digest</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Dir</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ENV</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>EOFError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ERB</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Enumerable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Errno</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Exception</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>FALSE</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>FalseClass</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Fcntl</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>File</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>FileList</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>FileTask</p>

</div>

<span style='font-size:10.0pt;line-height:112%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection3>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>FileTest</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>FileUtils</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Fixnum</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Float</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>FloatDomainError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>GC</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Gem</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>GetoptLong</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Hash</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>IO</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>IOError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>IPSocket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>IPsocket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>IndexError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Inflector</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Integer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Interrupt</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Kernel</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>LN_SUPPORTED</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>LoadError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>LocalJumpError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Logger</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Marshal</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>MatchData</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>MatchingData</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Math</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Method</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Module</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Mutex</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Mysql</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>MysqlError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>MysqlField</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>MysqlRes</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NIL</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NameError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NilClass</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NoMemoryError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NoMethodError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NoWrite</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>NotImplementedError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Numeric</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>OPT_TABLE</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Object</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ObjectSpace</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Observable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Observer</p>

<p class=MsoNormal style='margin-top:0in;margin-right:30.7pt;margin-bottom:
1.25pt;margin-left:30.0pt'>PGError PGconn PGlarge</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>PGresult</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>PLATFORM</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>PStore</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>ParseDate</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Precision</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Proc</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Process</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Queue</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>RAKEVERSION</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>RELEASE_DATE</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>RUBY</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>RUBY_PLATFORM</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RUBY_RELEASE_DATE</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RUBY_VERSION</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Rack</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Rake</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RakeApp</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RakeFileUtils</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Range</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RangeError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Rational</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Regexp</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RegexpError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Request</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>RuntimeError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>STDERR</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>STDIN</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>STDOUT</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ScanError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>ScriptError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>SecurityError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Signal</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>SignalException</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>SimpleDelegater SimpleDelegator</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Singleton</p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.2pt;margin-bottom:
1.25pt;margin-left:20.9pt'>SizedQueue Socket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>SocketError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:9.9pt;margin-bottom:1.25pt;
margin-left:20.9pt'>StandardError String</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>StringScanner</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Struct</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Symbol</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>SyntaxError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>SystemCallError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>SystemExit</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>SystemStackError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:8.05pt;margin-bottom:
1.25pt;margin-left:30.0pt'>TCPServer TCPSocket TCPserver</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>TCPsocket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>TOPLEVEL_BINDING TRUE</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Task</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Text</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Thread</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>ThreadError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>ThreadGroup</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Time</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>Transaction</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>TrueClass</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>TypeError</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>UDPSocket UDPsocket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>UNIXServer UNIXSocket UNIXserver</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>UNIXsocket</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>UnboundMethod</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Url</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>VERSION</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>Verbose</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>YAML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:21.5pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image200.gif"
align=left hspace=12>ZeroDivisionError @base_path accept Acces Axi action
attributes application2 callback category connection database dispatcher
display1 drive errors format host key layout load link new notify open public
quote render request records responses save scope send session system template
test timeout to_s type URI</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'>visits</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:12.8pt;
margin-left:20.9pt'>Observer</p>

<h4 style='margin-left:.75pt'>Database Field Names</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:35.7pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image769.gif"
align=left hspace=12>created_at created_on updated_at updated_on deleted_at
(paranoia gem)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:46.4pt;margin-bottom:
1.25pt;margin-left:20.9pt'>lock_version type id</p>

<p class=MsoNormal style='margin-top:0in;margin-right:4.05pt;margin-bottom:
1.25pt;margin-left:20.9pt'>#{table_name}_count position parent_id</p>

<p class=MsoNormal style='margin-top:0in;margin-right:46.85pt;margin-bottom:
12.45pt;margin-left:20.9pt'>lft rgt quote_value</p>

<h4 style='margin-left:.75pt'>Ruby Reserved Words</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image469.gif"
align=left hspace=12>alias</p>

<p class=MsoNormal style='margin-top:0in;margin-right:63.8pt;margin-bottom:
1.25pt;margin-left:20.9pt'>and BEGIN begin break case class def defined? do</p>

<p class=MsoNormal style='margin-top:0in;margin-right:66.3pt;margin-bottom:
1.25pt;margin-left:30.0pt'>else elsif</p>

<p class=MsoNormal style='margin-top:0in;margin-right:65.35pt;margin-bottom:
1.25pt;margin-left:30.0pt'>END end ensure false</p>

</div>

<span style='font-size:10.0pt;line-height:112%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection4>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>for</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.65pt;margin-bottom:1.25pt;
margin-left:30.0pt'>if</p>

<p class=MsoNormal style='margin-top:0in;margin-right:427.65pt;margin-bottom:
1.25pt;margin-left:30.0pt'>module next</p>

<p class=MsoNormal style='margin-top:0in;margin-right:452.45pt;margin-bottom:
1.25pt;margin-left:20.9pt'><img width=5 height=1
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image646.gif"
align=left hspace=12>nil not or redo rescue retry return self super then true
undef unless until when while yield _ <i>FILE</i> _</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
margin-left:21.4pt;text-indent:-.5pt;line-height:107%'>_ <i>LINE</i> _<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc324213">Credits</a></h1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:-8.95pt;
margin-bottom:1.95pt;margin-left:3.7pt;text-align:center;text-indent:-.5pt;
line-height:107%'>Thank you greatly to all the people from Stack Overflow
Documentation who helped provide this content, more changes can be sent to <u><span
style='color:#D4072F'>web@petercv.com</span></u> for new content to be
published or updated</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=414
 style='width:310.7pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4089357/"><span style='color:#D4072F'>Abdullah</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  7, 12 and 13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1051778/"><span style='color:#D4072F'>abhas</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  40</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2545197/"><span style='color:#D4072F'>Abhinay</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  10</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1249/"><span style='color:#D4072F'>Adam
  Lassek</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Chapters 2, 5, 6, 9, 12,
  13, 38, 40 and 42</p>
  </td>
 </tr>
 <tr style='height:14.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7262470/"><span style='color:#D4072F'>Ahsan
  Mahmood</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  25</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1425596/"><span style='color:#D4072F'>Aigars
  Cibu</span></a><a href="https://stackoverflow.com/users/1425596/"><span
  style='font-family:"Arial",sans-serif;color:#D4072F'>&#316;</span></a><a
  href="https://stackoverflow.com/users/1425596/"><span style='color:#D4072F'>skis</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2681997/"><span style='color:#D4072F'>Ajay
  Barot</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4723393/"><span style='color:#D4072F'>Akshay
  Borade</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  57</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/713916/"><span style='color:#D4072F'>Ali
  MasudianPour</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  16</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5586783/"><span style='color:#D4072F'>Andy
  Gauge</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5227053/"><span style='color:#D4072F'>AnoE</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/504963/"><span style='color:#D4072F'>Antarr
  Byrd</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  10</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2202702/"><span style='color:#D4072F'>Arslan
  Ali</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  54</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3160466/"><span style='color:#D4072F'>ArtOfCode</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1166183/"><span style='color:#D4072F'>Ashish
  Bista</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1718986/"><span style='color:#D4072F'>Aswathy</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2945616/"><span style='color:#D4072F'>Atul
  Khanduri</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  7 and 14</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1411047/"><span style='color:#D4072F'>Avdept</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2779976/"><span style='color:#D4072F'>Awais
  Shafqat</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  35</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5733972/"><span style='color:#D4072F'>B
  Liu</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  37</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2263652/"><span style='color:#D4072F'>B8vrede</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  33</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7017933/"><span style='color:#D4072F'>Bijal
  Gajjar</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/848668/"><span style='color:#D4072F'>br3nt</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  7 and 13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4638378/"><span style='color:#D4072F'>Brian</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  58</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/955366/"><span style='color:#D4072F'>buren</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/849105/"><span style='color:#D4072F'>cl3m</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5950320/"><span style='color:#D4072F'>Cuisine
  Hacker</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2832282/"><span style='color:#D4072F'>Cyril
  Duchon</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 17</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2076787/"><span style='color:#D4072F'>D</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/667773/"><span style='color:#D4072F'>Dénes
  Papp</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2033517/"><span style='color:#D4072F'>danirod</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  4</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6318514/"><span style='color:#D4072F'>Darpan
  Chhatravala</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 48</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3131537/"><span style='color:#D4072F'>Darshan
  Patel</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1805453/"><span style='color:#D4072F'>DawnPaladin</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  65</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4207394/"><span style='color:#D4072F'>Deep</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  21, 27 and 47</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4247633/"><span style='color:#D4072F'>Deepak
  Kabbur</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  69</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4758119/"><span style='color:#D4072F'>Deepak
  Mahakale</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1, 2, 5 and 12</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/488195/"><span style='color:#D4072F'>dgilperez</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  10, 12 and 25</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/115159/"><span style='color:#D4072F'>Dharam
  Gollapudi</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 15 and 32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3079520/"><span style='color:#D4072F'>dnsh</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6266499/"><span style='color:#D4072F'>dodo121</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  12</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1020137/"><span style='color:#D4072F'>Don
  Giovanni</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  43</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1794026/"><span style='color:#D4072F'>elasticman</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  4</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4841209/"><span style='color:#D4072F'>Emre
  Kurt</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  73</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1886853/"><span style='color:#D4072F'>esthervillars</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5244450/"><span style='color:#D4072F'>Fabio
  Ros</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 13 and 46</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2066546/"><span style='color:#D4072F'>fiedl</span></a></p>
  </td>
  <td width=244 valign=top style='width:183.2pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  18</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:240.9pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=363
 style='width:272.0pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/312907/"><span style='color:#D4072F'>Fire</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/167996/"><span style='color:#D4072F'>Flambino</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  7</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4172515/"><span style='color:#D4072F'>fool</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  56</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2454151/"><span style='color:#D4072F'>Francesco
  Lupo Renzi</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 5, 13, 17 and 21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6924999/"><span style='color:#D4072F'>fybw
  id</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/96737/"><span style='color:#D4072F'>Gaston</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/610351/"><span style='color:#D4072F'>Geoffroy</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3588909/"><span style='color:#D4072F'>glapworth</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7671538/"><span style='color:#D4072F'>gwcodes</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  17</p>
  </td>
 </tr>
 <tr style='height:14.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/325068/"><span style='color:#D4072F'>hadees</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  47</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4423221/"><span style='color:#D4072F'>Hardik
  Kanjariya</span></a><a href="https://stackoverflow.com/users/4423221/"><span
  style='color:#D4072F'> </span></a><a
  href="https://stackoverflow.com/users/4423221/"><span style='font-family:
  "Arial",sans-serif;color:#D4072F'>&#12484;</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6270554/"><span style='color:#D4072F'>Hardik
  Upadhyay</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  6, 11, 12 and 15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3458314/"><span style='color:#D4072F'>hgsongra</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  7 and 34</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5809075/"><span style='color:#D4072F'>Hizqeel</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1609040/"><span style='color:#D4072F'>HParker</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  47, 50 and 51</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2931685/"><span style='color:#D4072F'>hschin</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5, 27, 36 and 37</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/383912/"><span style='color:#D4072F'>HungryCoder</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1271437/"><span style='color:#D4072F'>Ich</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  8</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2144445/"><span style='color:#D4072F'>inye</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1499260/"><span style='color:#D4072F'>jackerman09</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  14, 15 and 21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2266827/"><span style='color:#D4072F'>jeffdill2</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5 and 13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/631187/"><span style='color:#D4072F'>Jeremy
  Green</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3345375/"><span style='color:#D4072F'>jkdev</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6660632/"><span style='color:#D4072F'>Joel
  Drapper</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/25258/"><span style='color:#D4072F'>Jon
  Wood</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1060541/"><span style='color:#D4072F'>Jorge
  Najera T</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  17</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3448554/"><span style='color:#D4072F'>Kelseydh</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/259900/"><span style='color:#D4072F'>Kevin
  Sylvestre</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/705131/"><span style='color:#D4072F'>kfrz</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4344085/"><span style='color:#D4072F'>Khanh
  Pham</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  11 and 20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/359736/"><span style='color:#D4072F'>Kieran
  Andrews</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 10 and 22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2335820/"><span style='color:#D4072F'>Kimmo
  Hintikka</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  44</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1012097/"><span style='color:#D4072F'>Kirti
  Thorat</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1, 2 and 5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1765499/"><span style='color:#D4072F'>KULKING</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 5 and 22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1616697/"><span style='color:#D4072F'>Lahiru</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  17</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/652779/"><span style='color:#D4072F'>Lomefin</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  49</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1244089/"><span style='color:#D4072F'>Lorenzo
  Baracchi</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1607015/"><span style='color:#D4072F'>Luc
  Boissaye</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  43</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6523193/"><span style='color:#D4072F'>Luka
  Kerr</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Chapters 1, 3, 4, 6, 7, 10
  and 11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2087204/"><span style='color:#D4072F'>maartenvanvliet</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3 and 5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4432024/"><span style='color:#D4072F'>Manish
  Agarwal</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5 and 11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/91970/"><span style='color:#D4072F'>marcamillion</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3 and 15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/326984/"><span style='color:#D4072F'>Mario
  Uher</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5781737/"><span style='color:#D4072F'>Mark</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  63</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/877579/"><span style='color:#D4072F'>Marko
  Kacanski</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  7</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5830036/"><span style='color:#D4072F'>Mayur
  Shah</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  60</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1257094/"><span style='color:#D4072F'>ma_il</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  6 and 27</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4087357/"><span style='color:#D4072F'>michaelpri</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 30</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4304188/"><span style='color:#D4072F'>Mihai</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  28</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2892022/"><span style='color:#D4072F'>MikeAndr</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1482055/"><span style='color:#D4072F'>Milind</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 45</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2917523/"><span style='color:#D4072F'>Milo
  P</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/859491/"><span style='color:#D4072F'>Mitch
  VanDuyn</span></a></p>
  </td>
  <td width=193 valign=top style='width:144.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  67</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:213.0pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=400
 style='width:299.9pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2509777/"><span style='color:#D4072F'>mlabarca</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  25</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2102463/"><span style='color:#D4072F'>MMachinegun</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  4 and 27</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/461294/"><span style='color:#D4072F'>mmichael</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  12</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5224982/"><span style='color:#D4072F'>Muaaz
  Rafi</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  6 and 31</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2672566/"><span style='color:#D4072F'>nifCody</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2694238/"><span style='color:#D4072F'>Niyanta</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/76710/"><span style='color:#D4072F'>nomatteus</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5 and 15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3559682/"><span style='color:#D4072F'>nuclearpidgeon</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/636799/"><span style='color:#D4072F'>olive_tree</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/383819/"><span style='color:#D4072F'>Omar
  Ali</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  58 and 59</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2781602/"><span style='color:#D4072F'>pablofullana</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  12</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1490947/"><span style='color:#D4072F'>pastullo</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4687343/"><span style='color:#D4072F'>powerup7</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3, 6, 13 and 15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2066608/"><span style='color:#D4072F'>ppascualv</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  71 and 72</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1621998/"><span style='color:#D4072F'>Pragash</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  4</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2768322/"><span style='color:#D4072F'>RADan</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7219974/"><span style='color:#D4072F'>Rafael
  Costa</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  55</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1715409/"><span style='color:#D4072F'>Rahul
  Singh</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4280391/"><span style='color:#D4072F'>Raynor
  Kuang</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3137549/"><span style='color:#D4072F'>rdnewman</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2680864/"><span style='color:#D4072F'>Reboot</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5 and 13</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6006050/"><span style='color:#D4072F'>Reub</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  15</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4703663/"><span style='color:#D4072F'>Richard
  Hamilton</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Chapters 1, 2, 5, 12, 14,
  15, 22 and 39</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/664675/"><span style='color:#D4072F'>rii</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/371530/"><span style='color:#D4072F'>Robin</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 5, 13 and 29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4316935/"><span style='color:#D4072F'>Rodrigo
  Argumedo</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5 and 14</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/32453/"><span style='color:#D4072F'>rogerdpack</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1682038/"><span style='color:#D4072F'>rony36</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  5 and 6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/578288/"><span style='color:#D4072F'>Rory
  O'Kane</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6388521/"><span style='color:#D4072F'>Ruslan</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  61</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2884225/"><span style='color:#D4072F'>Ryan
  Hilbert</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/733721/"><span style='color:#D4072F'>Ryan
  K</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2, 23 and 26</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/822256/"><span style='color:#D4072F'>sa77</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1, 13 and 32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/409517/"><span style='color:#D4072F'>saadlulu</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5805728/"><span style='color:#D4072F'>Sapna
  Jindal</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  11 and 62</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4745028/"><span style='color:#D4072F'>Sathishkumar
  Jayaraj</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 70</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1326518/"><span style='color:#D4072F'>Scott
  Matthewman</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1296980/"><span style='color:#D4072F'>Sebastialonso</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  3</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5365389/"><span style='color:#D4072F'>Sergey
  Khmelevskoy</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  19</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/9195/"><span style='color:#D4072F'>Shivasubramanian
  A</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  53</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2624835/"><span style='color:#D4072F'>Silviu
  Simeria</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6782482/"><span style='color:#D4072F'>Simon
  Tsang</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  39</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/123527/"><span style='color:#D4072F'>Simone
  Carletti</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3 and 41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4778326/"><span style='color:#D4072F'>Sladey</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  8</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7362128/"><span style='color:#D4072F'>Slava.K</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  61</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3619384/"><span style='color:#D4072F'>sohail
  khalil</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3739043/"><span style='color:#D4072F'>Sven
  Reuter</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  3, 7 and 21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2813483/"><span style='color:#D4072F'>tes</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  26</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1881769/"><span style='color:#D4072F'>tessi</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5452786/"><span style='color:#D4072F'>Thang
  Le Sy</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  64</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5859685/"><span style='color:#D4072F'>theoretisch</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1766843/"><span style='color:#D4072F'>thiago
  araujo</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  24</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3102766/"><span style='color:#D4072F'>tirdadc</span></a></p>
  </td>
  <td width=230 valign=top style='width:172.4pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  52</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:289.7pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=298
 style='width:3.1in;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1571115/"><span style='color:#D4072F'>titan</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1376201/"><span style='color:#D4072F'>toobulkeh</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  61</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2072436/"><span style='color:#D4072F'>Umar
  Khan</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  33</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1849664/"><span style='color:#D4072F'>Undo</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 8</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3786332/"><span style='color:#D4072F'>uzaif</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3422357/"><span style='color:#D4072F'>Vishal
  Taj PM</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapters
  13 and 66</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2349546/"><span style='color:#D4072F'>Volodymyr
  Balytskyy</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-align:justify;text-justify:
  inter-ideograph;text-indent:0in;line-height:107%'>Chapters 1, 4 and 11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/659634/"><span style='color:#D4072F'>Whitecat</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5424678/"><span style='color:#D4072F'>William
  Romero</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  14</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2226315/"><span style='color:#D4072F'>Xinyang
  Li</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  7</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3034747/"><span style='color:#D4072F'>Yana</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4613236/"><span style='color:#D4072F'>Zoran</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2936733/"><span style='font-family:
  "Arial",sans-serif;color:#D4072F'>&#23385;</span></a><a
  href="https://stackoverflow.com/users/2936733/"><span style='font-family:
  "Arial",sans-serif;color:#D4072F'>&#24735;</span></a><a
  href="https://stackoverflow.com/users/2936733/"><span style='font-family:
  "Arial",sans-serif;color:#D4072F'>&#31354;</span></a></p>
  </td>
  <td width=128 valign=top style='width:95.7pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin-bottom:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
</table>

</div>

<span style='font-size:10.0pt;line-height:112%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection5>

<h1 style='margin-top:0in;margin-right:.4pt;margin-bottom:.15pt;margin-left:
-43.15pt'><a name="_Toc324214">You may also like</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:-45.95pt;margin-bottom:
0in;margin-left:-47.25pt;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=726 height=992
id="Group 295825"
src="Ruby%20on%20Rails%20Notes%20for%20Professionals_files/image770.gif"></span></p>

</div>

</body>

</html>
