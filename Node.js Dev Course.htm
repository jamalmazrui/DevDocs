<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Aptos Display";}
@font-face
	{font-family:Aptos;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.45pt;
	margin-left:15.15pt;
	text-indent:-.5pt;
	line-height:112%;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:23.9pt;
	margin-left:15.15pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	background:#5283CD;
	font-size:20.0pt;
	font-family:"Calibri",sans-serif;
	color:white;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.3pt;
	margin-left:15.15pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri",sans-serif;
	color:#3D3D3E;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.3pt;
	margin-left:15.15pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri",sans-serif;
	color:#3D3D3E;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:16.2pt;
	margin-bottom:2.55pt;
	margin-left:15.9pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-.5pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:16.2pt;
	margin-bottom:2.55pt;
	margin-left:27.9pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-.5pt;
	line-height:107%;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri",sans-serif;
	color:#3D3D3E;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Calibri",sans-serif;
	color:white;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Calibri",sans-serif;
	color:#3D3D3E;
	font-weight:bold;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:#65B4B4;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:#FF4B4B;}
.MsoChpDefault
	{font-size:12.0pt;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:8.5in 11.0in;
	margin:13.0pt 56.25pt 1.0in 57.35pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%;color:#585858'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:8.45pt;margin-left:4.0pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:18.0pt;line-height:107%;color:#585858'> </span></b></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:52.3pt;margin-left:8.7pt;text-align:center;text-indent:0in;
line-height:107%'><img width=846 height=255
src="Node.js%20Dev%20Course_files/image001.gif"><br clear=ALL>
<span style='font-size:36.0pt;line-height:107%;color:#585858'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-48.95pt;text-indent:0in;line-height:107%'><span style='font-size:
32.0pt;line-height:107%;color:#585858'>      </span><span style='font-size:
22.0pt;line-height:107%;color:#585858'>A PDF Reference for </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:28.5pt;
margin-left:-48.95pt;text-indent:0in;line-height:107%'><b><span
style='font-size:32.0pt;line-height:107%;color:#585858'>      The Complete
Node.js Dev Course </span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-48.95pt;text-indent:0in;line-height:107%'><b><span
style='font-size:32.0pt;line-height:107%;color:#585858'>            </span></b><span
style='font-size:18.0pt;line-height:107%;color:gray'>Version 3</span><b><span
style='font-size:32.0pt;line-height:107%;color:#585858'>                  </span></b><sub><span
style='font-size:27.5pt;line-height:107%;color:gray'>.0        </span></sub><b><sub><span
style='font-size:27.5pt;line-height:107%;color:white'> </span></sub></b></p>

<p class=MsoToc1><a href="#_Toc222387"><b><span style='color:black;text-decoration:
none'>Section 1: Welcome</span></b><span style='color:black;text-decoration:
none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'><b>8 </b></span></a></p>

<p class=MsoToc1><a href="#_Toc222388"><b><span style='color:black;text-decoration:
none'>Section 2: Installing and Exploring Node.js</span></b><span
style='color:black;text-decoration:none'>......................................................................................... </span><span style='color:black;text-decoration:none'><b>8 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222389"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro..................................................................................................................... </span><span style='color:black;text-decoration:none'>8 </span></a></p>

<p class=MsoToc2><a href="#_Toc222390"><span style='color:black;text-decoration:
none'>Lesson 2: Installing Node.js and Visual Studio Code........................................................................ </span><span style='color:black;text-decoration:none'>8 </span></a></p>

<p class=MsoToc2><a href="#_Toc222391"><span style='color:black;text-decoration:
none'>Lesson 3: What is Node.js?............................................................................................................... </span><span style='color:black;text-decoration:none'>8 </span></a></p>

<p class=MsoToc2><a href="#_Toc222392"><span style='color:black;text-decoration:
none'>Lesson 4: Why Should I Use Node.js?.............................................................................................. </span><span style='color:black;text-decoration:none'>9 </span></a></p>

<p class=MsoToc2><a href="#_Toc222393"><span style='color:black;text-decoration:
none'>Lesson 5: Your First Node.js Script................................................................................................... </span><span style='color:black;text-decoration:none'>9 </span></a></p>

<p class=MsoToc1><a href="#_Toc222394"><b><span style='color:black;text-decoration:
none'>Section 3: Node.js Module System</span></b><span style='color:black;
text-decoration:none'>................................................................................................... </span><span style='color:black;text-decoration:none'><b>10 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222395"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>10 </span></a></p>

<p class=MsoToc2><a href="#_Toc222396"><span style='color:black;text-decoration:
none'>Lesson 2: Importing Node.js Core Modules................................................................................... </span><span style='color:black;text-decoration:none'>10 </span></a></p>

<p class=MsoToc2><a href="#_Toc222397"><span style='color:black;text-decoration:
none'>Lesson 3: Importing Your Own Files............................................................................................... </span><span style='color:black;text-decoration:none'>11 </span></a></p>

<p class=MsoToc2><a href="#_Toc222398"><span style='color:black;text-decoration:
none'>Lesson 4: Importing npm Modules................................................................................................. </span><span style='color:black;text-decoration:none'>12 </span></a></p>

<p class=MsoToc2><a href="#_Toc222399"><span style='color:black;text-decoration:
none'>Lesson 5: Printing in Color.............................................................................................................. </span><span style='color:black;text-decoration:none'>14 </span></a></p>

<p class=MsoToc2><a href="#_Toc222400"><span style='color:black;text-decoration:
none'>Lesson 6: Global npm Modules and nodemon.............................................................................. </span><span style='color:black;text-decoration:none'>14 </span></a></p>

<p class=MsoToc1><a href="#_Toc222401"><b><span style='color:black;text-decoration:
none'>Section 4: File System and Command Line Args</span></b><span
style='color:black;text-decoration:none'>............................................................................... </span><span style='color:black;text-decoration:none'><b>15 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222402"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>15 </span></a></p>

<p class=MsoToc2><a href="#_Toc222403"><span style='color:black;text-decoration:
none'>Lesson 2: Getting Input from Users................................................................................................ </span><span style='color:black;text-decoration:none'>15 </span></a></p>

<p class=MsoToc2><a href="#_Toc222404"><span style='color:black;text-decoration:
none'>Lesson 3: Argument Parsing with Yargs: Part I............................................................................... </span><span style='color:black;text-decoration:none'>16 </span></a></p>

<p class=MsoToc2><a href="#_Toc222405"><span style='color:black;text-decoration:
none'>Lesson 4: Argument Parsing with Yargs: Part II.............................................................................. </span><span style='color:black;text-decoration:none'>17 </span></a></p>

<p class=MsoToc2><a href="#_Toc222406"><span style='color:black;text-decoration:
none'>Lesson 5: Storing Data with JSON................................................................................................... </span><span style='color:black;text-decoration:none'>18 </span></a></p>

<p class=MsoToc2><a href="#_Toc222407"><span style='color:black;text-decoration:
none'>Lesson 6: Adding a Note................................................................................................................. </span><span style='color:black;text-decoration:none'>19 </span></a></p>

<p class=MsoToc2><a href="#_Toc222408"><span style='color:black;text-decoration:
none'>Lesson 7: Removing a Note............................................................................................................ </span><span style='color:black;text-decoration:none'>19 </span></a></p>

<p class=MsoToc2><a href="#_Toc222409"><span style='color:black;text-decoration:
none'>Lesson 8: ES6 Aside: Arrow Functions............................................................................................ </span><span style='color:black;text-decoration:none'>20 </span></a></p>

<p class=MsoToc2><a href="#_Toc222410"><span style='color:black;text-decoration:
none'>Lesson 9: Refactoring to Use Arrow Functions............................................................................... </span><span style='color:black;text-decoration:none'>21 </span></a></p>

<p class=MsoToc2><a href="#_Toc222411"><span style='color:black;text-decoration:
none'>Lesson 10: Listing Notes................................................................................................................. </span><span style='color:black;text-decoration:none'>22 </span></a></p>

<p class=MsoToc2><a href="#_Toc222412"><span style='color:black;text-decoration:
none'>Lesson 11: Reading a Note............................................................................................................. </span><span style='color:black;text-decoration:none'>22 </span></a></p>

<p class=MsoToc1><a href="#_Toc222413"><b><span style='color:black;text-decoration:
none'>Section 5: Debugging Node.js</span></b><span style='color:black;
text-decoration:none'>........................................................................................................... </span><span style='color:black;text-decoration:none'><b>23 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222414"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>23 </span></a></p>

<p class=MsoToc2><a href="#_Toc222415"><span style='color:black;text-decoration:
none'>Lesson 2: Debugging Node.js......................................................................................................... </span><span style='color:black;text-decoration:none'>23 </span></a></p>

<p class=MsoToc2><a href="#_Toc222416"><span style='color:black;text-decoration:
none'>Lesson 3: Error Messages............................................................................................................... </span><span style='color:black;text-decoration:none'>24 </span></a></p>

<p class=MsoToc1><a href="#_Toc222417"><b><span style='color:black;text-decoration:
none'>Section 6: Asynchronous Node.js</span></b><span style='color:black;
text-decoration:none'>...................................................................................................... </span><span style='color:black;text-decoration:none'><b>26 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222418"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>26</span></a></p>

<p class=MsoToc2><a href="#_Toc222419"><span style='color:black;text-decoration:
none'>Lesson 2: Asynchronous Basics...................................................................................................... </span><span style='color:black;text-decoration:none'>26</span></a></p>

<p class=MsoToc2><a href="#_Toc222420"><span style='color:black;text-decoration:
none'>Lesson 3: Call Stack, Callback Queue, and Event Loop................................................................... </span><span style='color:black;text-decoration:none'>27</span></a></p>

<p class=MsoToc2><a href="#_Toc222421"><span style='color:black;text-decoration:
none'>Lesson 4: Making HTTP Requests................................................................................................... </span><span style='color:black;text-decoration:none'>27</span></a></p>

<p class=MsoToc2><a href="#_Toc222422"><span style='color:black;text-decoration:
none'>Lesson 5: Customizing HTTP Requests........................................................................................... </span><span style='color:black;text-decoration:none'>28</span></a></p>

<p class=MsoToc2><a href="#_Toc222423"><span style='color:black;text-decoration:
none'>Lesson 6: An HTTP Request Challenge........................................................................................... </span><span style='color:black;text-decoration:none'>29</span></a></p>

<p class=MsoToc2><a href="#_Toc222424"><span style='color:black;text-decoration:
none'>Lesson 7: Handling Errors............................................................................................................... </span><span style='color:black;text-decoration:none'>29</span></a></p>

<p class=MsoToc2><a href="#_Toc222425"><span style='color:black;text-decoration:
none'>Lesson 8: The Callback Function..................................................................................................... </span><span style='color:black;text-decoration:none'>30</span></a></p>

<p class=MsoToc2><a href="#_Toc222426"><span style='color:black;text-decoration:
none'>Lesson 9: Callback Abstraction....................................................................................................... </span><span style='color:black;text-decoration:none'>31</span></a></p>

<p class=MsoToc2><a href="#_Toc222427"><span style='color:black;text-decoration:
none'>Lesson 10: Callback Abstraction Challenge.................................................................................... </span><span style='color:black;text-decoration:none'>33 </span></a></p>

<p class=MsoToc2><a href="#_Toc222428"><span style='color:black;text-decoration:
none'>Lesson 11: Callback Chaining.......................................................................................................... </span><span style='color:black;text-decoration:none'>33 </span></a></p>

<p class=MsoToc2><a href="#_Toc222429"><span style='color:black;text-decoration:
none'>Lesson 12: ES6 Aside: Object Property Shorthand and Destructuring........................................... </span><span style='color:black;text-decoration:none'>34 </span></a></p>

<p class=MsoToc2><a href="#_Toc222430"><span style='color:black;text-decoration:
none'>Lesson 13: Destructuring and Property Shorthand Challenge....................................................... </span><span style='color:black;text-decoration:none'>37 </span></a></p>

<p class=MsoToc2><a href="#_Toc222431"><span style='color:black;text-decoration:
none'>Lesson 14: Bonus: HTTP Requests Without a Library..................................................................... </span><span style='color:black;text-decoration:none'>37 </span></a></p>

<p class=MsoToc1><a href="#_Toc222432"><b><span style='color:black;text-decoration:
none'>Section 7: Web Servers</span></b><span style='color:black;text-decoration:
none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'><b>38 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222433"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>38 </span></a></p>

<p class=MsoToc2><a href="#_Toc222434"><span style='color:black;text-decoration:
none'>Lesson 2: Hello Express!................................................................................................................. </span><span style='color:black;text-decoration:none'>38 </span></a></p>

<p class=MsoToc2><a href="#_Toc222435"><span style='color:black;text-decoration:
none'>Lesson 3: Serving up HTML and JSON............................................................................................ </span><span style='color:black;text-decoration:none'>40 </span></a></p>

<p class=MsoToc2><a href="#_Toc222436"><span style='color:black;text-decoration:
none'>Lesson 4: Serving up Static Assets.................................................................................................. </span><span style='color:black;text-decoration:none'>41 </span></a></p>

<p class=MsoToc2><a href="#_Toc222437"><span style='color:black;text-decoration:
none'>Lesson 5: Serving up CSS, JS, Images, and More............................................................................ </span><span style='color:black;text-decoration:none'>42 </span></a></p>

<p class=MsoToc2><a href="#_Toc222438"><span style='color:black;text-decoration:
none'>Lesson 6: Dynamic Pages with Templating..................................................................................... </span><span style='color:black;text-decoration:none'>43 </span></a></p>

<p class=MsoToc2><a href="#_Toc222439"><span style='color:black;text-decoration:
none'>Lesson 7: Customizing the Views Directory................................................................................... </span><span style='color:black;text-decoration:none'>44 </span></a></p>

<p class=MsoToc2><a href="#_Toc222440"><span style='color:black;text-decoration:
none'>Lesson 8: Advanced Templating..................................................................................................... </span><span style='color:black;text-decoration:none'>45 </span></a></p>

<p class=MsoToc2><a href="#_Toc222441"><span style='color:black;text-decoration:
none'>Lesson 9: 404 Pages........................................................................................................................ </span><span style='color:black;text-decoration:none'>46 </span></a></p>

<p class=MsoToc2><a href="#_Toc222442"><span style='color:black;text-decoration:
none'>Lesson 10: Styling the Application: Part I....................................................................................... </span><span style='color:black;text-decoration:none'>47 </span></a></p>

<p class=MsoToc2><a href="#_Toc222443"><span style='color:black;text-decoration:
none'>Lesson 11: Styling the Application: Part II...................................................................................... </span><span style='color:black;text-decoration:none'>47 </span></a></p>

<p class=MsoToc1><a href="#_Toc222444"><b><span style='color:black;text-decoration:
none'>Section 7: Accessing API from Browser</span></b><span style='color:black;
text-decoration:none'>............................................................................................. </span><span style='color:black;text-decoration:none'><b>47 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222445"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>47 </span></a></p>

<p class=MsoToc2><a href="#_Toc222446"><span style='color:black;text-decoration:
none'>Lesson 2: The Query String............................................................................................................. </span><span style='color:black;text-decoration:none'>47 </span></a></p>

<p class=MsoToc2><a href="#_Toc222447"><span style='color:black;text-decoration:
none'>Lesson 3: Building a JSON HTTP Endpoint...................................................................................... </span><span style='color:black;text-decoration:none'>48 </span></a></p>

<p class=MsoToc2><a href="#_Toc222448"><span style='color:black;text-decoration:
none'>Lesson 4: ES6 Aside: Default Function Parameters........................................................................ </span><span style='color:black;text-decoration:none'>48 </span></a></p>

<p class=MsoToc2><a href="#_Toc222449"><span style='color:black;text-decoration:
none'>Lesson 5: Browser HTTP Requests with Fetch................................................................................ </span><span style='color:black;text-decoration:none'>49 </span></a></p>

<p class=MsoToc2><a href="#_Toc222450"><span style='color:black;text-decoration:
none'>Lesson 6: Creating a Search Form.................................................................................................. </span><span style='color:black;text-decoration:none'>50 </span></a></p>

<p class=MsoToc2><a href="#_Toc222451"><span style='color:black;text-decoration:
none'>Lesson 7: Wiring up the User Interface.......................................................................................... </span><span style='color:black;text-decoration:none'>51 </span></a></p>

<p class=MsoToc1><a href="#_Toc222452"><b><span style='color:black;text-decoration:
none'>Section 7: Application Deployment</span></b><span style='color:black;
text-decoration:none'>.................................................................................................. </span><span style='color:black;text-decoration:none'><b>52 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222453"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>52</span></a></p>

<p class=MsoToc2><a href="#_Toc222454"><span style='color:black;text-decoration:
none'>Lesson 2: Joining Heroku and GitHub............................................................................................. </span><span style='color:black;text-decoration:none'>52</span></a></p>

<p class=MsoToc2><a href="#_Toc222455"><span style='color:black;text-decoration:
none'>Lesson 3: Version Control with Git................................................................................................. </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc222456"><span style='color:black;text-decoration:
none'>Lesson 4: Exploring Git................................................................................................................... </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc222457"><span style='color:black;text-decoration:
none'>Lesson 5: Integrating Git................................................................................................................. </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc222458"><span style='color:black;text-decoration:
none'>Lesson 6: Setting up SSH Keys........................................................................................................ </span><span style='color:black;text-decoration:none'>55</span></a></p>

<p class=MsoToc2><a href="#_Toc222459"><span style='color:black;text-decoration:
none'>Lesson 7: Pushing Code to GitHub................................................................................................. </span><span style='color:black;text-decoration:none'>56</span></a></p>

<p class=MsoToc2><a href="#_Toc222460"><span style='color:black;text-decoration:
none'>Lesson 8: Deploying Node.js to Heroku......................................................................................... </span><span style='color:black;text-decoration:none'>56</span></a></p>

<p class=MsoToc2><a href="#_Toc222461"><span style='color:black;text-decoration:
none'>Lesson 9: New Feature Deployment Workflow.............................................................................. </span><span style='color:black;text-decoration:none'>57</span></a></p>

<p class=MsoToc2><a href="#_Toc222462"><span style='color:black;text-decoration:
none'>Lesson 10: Avoiding Global Modules............................................................................................. </span><span style='color:black;text-decoration:none'>57 </span></a></p>

<p class=MsoToc1><a href="#_Toc222463"><b><span style='color:black;text-decoration:
none'>Section 10: MongoDB and Promises</span></b><span style='color:black;
text-decoration:none'>................................................................................................. </span><span style='color:black;text-decoration:none'><b>58 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222464"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>58 </span></a></p>

<p class=MsoToc2><a href="#_Toc222465"><span style='color:black;text-decoration:
none'>Lesson 2: MongoDB and NoSQL Databases................................................................................... </span><span style='color:black;text-decoration:none'>58 </span></a></p>

<p class=MsoToc2><a href="#_Toc222466"><span style='color:black;text-decoration:
none'>Lesson 3: Installing MongoDB on macOS and Linux....................................................................... </span><span style='color:black;text-decoration:none'>58 </span></a></p>

<p class=MsoToc2><a href="#_Toc222467"><span style='color:black;text-decoration:
none'>Lesson 4: Installing MongoDB on Windows................................................................................... </span><span style='color:black;text-decoration:none'>59 </span></a></p>

<p class=MsoToc2><a href="#_Toc222468"><span style='color:black;text-decoration:
none'>Lesson 5: Installing Database GUI Viewer...................................................................................... </span><span style='color:black;text-decoration:none'>59 </span></a></p>

<p class=MsoToc2><a href="#_Toc222469"><span style='color:black;text-decoration:
none'>Lesson 6: Connecting and Inserting Documents............................................................................ </span><span style='color:black;text-decoration:none'>60 </span></a></p>

<p class=MsoToc2><a href="#_Toc222470"><span style='color:black;text-decoration:
none'>Lesson 7: Inserting Documents...................................................................................................... </span><span style='color:black;text-decoration:none'>61 </span></a></p>

<p class=MsoToc2><a href="#_Toc222471"><span style='color:black;text-decoration:
none'>Lesson 8: The ObjectID................................................................................................................... </span><span style='color:black;text-decoration:none'>62 </span></a></p>

<p class=MsoToc2><a href="#_Toc222472"><span style='color:black;text-decoration:
none'>Lesson 9: Querying Documents...................................................................................................... </span><span style='color:black;text-decoration:none'>62 </span></a></p>

<p class=MsoToc2><a href="#_Toc222473"><span style='color:black;text-decoration:
none'>Lesson 10: Promises....................................................................................................................... </span><span style='color:black;text-decoration:none'>63 </span></a></p>

<p class=MsoToc2><a href="#_Toc222474"><span style='color:black;text-decoration:
none'>Lesson 11: Updating Documents.................................................................................................... </span><span style='color:black;text-decoration:none'>63 </span></a></p>

<p class=MsoToc2><a href="#_Toc222475"><span style='color:black;text-decoration:
none'>Lesson 12: Deleting Documents..................................................................................................... </span><span style='color:black;text-decoration:none'>65 </span></a></p>

<p class=MsoToc1><a href="#_Toc222476"><b><span style='color:black;text-decoration:
none'>Section 11: REST APIs and Mongoose</span></b><span style='color:black;
text-decoration:none'>............................................................................................... </span><span style='color:black;text-decoration:none'><b>66 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222477"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>66 </span></a></p>

<p class=MsoToc2><a href="#_Toc222478"><span style='color:black;text-decoration:
none'>Lesson 2: Setting up Mongoose..................................................................................................... </span><span style='color:black;text-decoration:none'>66 </span></a></p>

<p class=MsoToc2><a href="#_Toc222479"><span style='color:black;text-decoration:
none'>Lesson 3: Creating a Mongoose Model.......................................................................................... </span><span style='color:black;text-decoration:none'>67 </span></a></p>

<p class=MsoToc2><a href="#_Toc222480"><span style='color:black;text-decoration:
none'>Lesson 4: Data Validation and Sanitization: Part I.......................................................................... </span><span style='color:black;text-decoration:none'>68 </span></a></p>

<p class=MsoToc2><a href="#_Toc222481"><span style='color:black;text-decoration:
none'>Lesson 5: Data Validation and Sanitization: Part II......................................................................... </span><span style='color:black;text-decoration:none'>69 </span></a></p>

<p class=MsoToc2><a href="#_Toc222482"><span style='color:black;text-decoration:
none'>Lesson 6: Structuring a REST API.................................................................................................... </span><span style='color:black;text-decoration:none'>69 </span></a></p>

<p class=MsoToc2><a href="#_Toc222483"><span style='color:black;text-decoration:
none'>Lesson 7: Installing Postman.......................................................................................................... </span><span style='color:black;text-decoration:none'>69 </span></a></p>

<p class=MsoToc2><a href="#_Toc222484"><span style='color:black;text-decoration:
none'>Lesson 8: Resource Creation Endpoints: Part I............................................................................... </span><span style='color:black;text-decoration:none'>70 </span></a></p>

<p class=MsoToc2><a href="#_Toc222485"><span style='color:black;text-decoration:
none'>Lesson 9: Resource Creation Endpoints: Part II.............................................................................. </span><span style='color:black;text-decoration:none'>70 </span></a></p>

<p class=MsoToc2><a href="#_Toc222486"><span style='color:black;text-decoration:
none'>Lesson 10: Resource Reading Endpoints: Part I.............................................................................. </span><span style='color:black;text-decoration:none'>71 </span></a></p>

<p class=MsoToc2><a href="#_Toc222487"><span style='color:black;text-decoration:
none'>Lesson 11: Resource Reading Endpoints: Part II............................................................................. </span><span style='color:black;text-decoration:none'>71 </span></a></p>

<p class=MsoToc2><a href="#_Toc222488"><span style='color:black;text-decoration:
none'>Lesson 12: Promise Chaining.......................................................................................................... </span><span style='color:black;text-decoration:none'>72</span></a></p>

<p class=MsoToc2><a href="#_Toc222489"><span style='color:black;text-decoration:
none'>Lesson 13: Promise Chaining Challenge......................................................................................... </span><span style='color:black;text-decoration:none'>73</span></a></p>

<p class=MsoToc2><a href="#_Toc222490"><span style='color:black;text-decoration:
none'>Lesson 14: Async/Await.................................................................................................................. </span><span style='color:black;text-decoration:none'>73</span></a></p>

<p class=MsoToc2><a href="#_Toc222491"><span style='color:black;text-decoration:
none'>Lesson 15: Async/Await: Part II...................................................................................................... </span><span style='color:black;text-decoration:none'>74</span></a></p>

<p class=MsoToc2><a href="#_Toc222492"><span style='color:black;text-decoration:
none'>Lesson 16: Integrating Async/Await............................................................................................... </span><span style='color:black;text-decoration:none'>74</span></a></p>

<p class=MsoToc2><a href="#_Toc222493"><span style='color:black;text-decoration:
none'>Lesson 17: Resource Updating Endpoints: Part I............................................................................ </span><span style='color:black;text-decoration:none'>75</span></a></p>

<p class=MsoToc2><a href="#_Toc222494"><span style='color:black;text-decoration:
none'>Lesson 18: Resource Updating Endpoints: Part II........................................................................... </span><span style='color:black;text-decoration:none'>76</span></a></p>

<p class=MsoToc2><a href="#_Toc222495"><span style='color:black;text-decoration:
none'>Lesson 19: Resource Deleting Endpoints....................................................................................... </span><span style='color:black;text-decoration:none'>76</span></a></p>

<p class=MsoToc2><a href="#_Toc222496"><span style='color:black;text-decoration:
none'>Lesson 20: Separate Route Files..................................................................................................... </span><span style='color:black;text-decoration:none'>77</span></a></p>

<p class=MsoToc1><a href="#_Toc222497"><b><span style='color:black;text-decoration:
none'>Section 12: API Authentication and Security</span></b><span
style='color:black;text-decoration:none'>.................................................................................... </span><span style='color:black;text-decoration:none'><b>78 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222498"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>78 </span></a></p>

<p class=MsoToc2><a href="#_Toc222499"><span style='color:black;text-decoration:
none'>Lesson 2: Securely Storing Passwords: Part I................................................................................. </span><span style='color:black;text-decoration:none'>78 </span></a></p>

<p class=MsoToc2><a href="#_Toc222500"><span style='color:black;text-decoration:
none'>Hashing Passwords with Bcrypt...................................................................................................... </span><span style='color:black;text-decoration:none'>78 </span></a></p>

<p class=MsoToc2><a href="#_Toc222501"><span style='color:black;text-decoration:
none'>Lesson 3: Securely Storing Passwords: Part II................................................................................ </span><span style='color:black;text-decoration:none'>79 </span></a></p>

<p class=MsoToc2><a href="#_Toc222502"><span style='color:black;text-decoration:
none'>Lesson 4: Logging in Users.............................................................................................................. </span><span style='color:black;text-decoration:none'>80 </span></a></p>

<p class=MsoToc2><a href="#_Toc222503"><span style='color:black;text-decoration:
none'>Lesson 5: JSON Web Tokens........................................................................................................... </span><span style='color:black;text-decoration:none'>81 </span></a></p>

<p class=MsoToc2><a href="#_Toc222504"><span style='color:black;text-decoration:
none'>Lesson 6: Generating Authentication Tokens................................................................................. </span><span style='color:black;text-decoration:none'>82 </span></a></p>

<p class=MsoToc2><a href="#_Toc222505"><span style='color:black;text-decoration:
none'>Lesson 7: Express Middleware....................................................................................................... </span><span style='color:black;text-decoration:none'>83 </span></a></p>

<p class=MsoToc2><a href="#_Toc222506"><span style='color:black;text-decoration:
none'>Lesson 8: Accepting Authentication Tokens................................................................................... </span><span style='color:black;text-decoration:none'>84 </span></a></p>

<p class=MsoToc2><a href="#_Toc222507"><span style='color:black;text-decoration:
none'>Lesson 9: Advanced Postman......................................................................................................... </span><span style='color:black;text-decoration:none'>85 </span></a></p>

<p class=MsoToc2><a href="#_Toc222508"><span style='color:black;text-decoration:
none'>Lesson 10: Logging Out.................................................................................................................. </span><span style='color:black;text-decoration:none'>85 </span></a></p>

<p class=MsoToc2><a href="#_Toc222509"><span style='color:black;text-decoration:
none'>Lesson 11: Hiding Private Data....................................................................................................... </span><span style='color:black;text-decoration:none'>86 </span></a></p>

<p class=MsoToc2><a href="#_Toc222510"><span style='color:black;text-decoration:
none'>Lesson 12: Authenticating User Endpoints.................................................................................... </span><span style='color:black;text-decoration:none'>86 </span></a></p>

<p class=MsoToc2><a href="#_Toc222511"><span style='color:black;text-decoration:
none'>Lesson 13: The User/Task Relationship.......................................................................................... </span><span style='color:black;text-decoration:none'>86 </span></a></p>

<p class=MsoToc2><a href="#_Toc222512"><span style='color:black;text-decoration:
none'>Lesson 14: Authenticating Task Endpoints..................................................................................... </span><span style='color:black;text-decoration:none'>87 </span></a></p>

<p class=MsoToc2><a href="#_Toc222513"><span style='color:black;text-decoration:
none'>Lesson 15: Cascade Delete Tasks.................................................................................................... </span><span style='color:black;text-decoration:none'>88 </span></a></p>

<p class=MsoToc1><a href="#_Toc222514"><b><span style='color:black;text-decoration:
none'>Section 13: Sorting, Pagination, and Filtering</span></b><span
style='color:black;text-decoration:none'>................................................................................... </span><span style='color:black;text-decoration:none'><b>88 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222515"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>88 </span></a></p>

<p class=MsoToc2><a href="#_Toc222516"><span style='color:black;text-decoration:
none'>Lesson 2: Working with Timestamps.............................................................................................. </span><span style='color:black;text-decoration:none'>88 </span></a></p>

<p class=MsoToc2><a href="#_Toc222517"><span style='color:black;text-decoration:
none'>Lesson 3: Filtering Data.................................................................................................................. </span><span style='color:black;text-decoration:none'>89 </span></a></p>

<p class=MsoToc2><a href="#_Toc222518"><span style='color:black;text-decoration:
none'>Lesson 4: Paginating Data............................................................................................................... </span><span style='color:black;text-decoration:none'>90 </span></a></p>

<p class=MsoToc2><a href="#_Toc222519"><span style='color:black;text-decoration:
none'>Lesson 5: Sorting Data.................................................................................................................... </span><span style='color:black;text-decoration:none'>90 </span></a></p>

<p class=MsoToc1><a href="#_Toc222520"><b><span style='color:black;text-decoration:
none'>Section 14: File Uploads</span></b><span style='color:black;text-decoration:
none'>.................................................................................................................... </span><span style='color:black;text-decoration:none'><b>91 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222521"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>91 </span></a></p>

<p class=MsoToc2><a href="#_Toc222522"><span style='color:black;text-decoration:
none'>Lesson 2: Adding Support for File Uploads.................................................................................... </span><span style='color:black;text-decoration:none'>92 </span></a></p>

<p class=MsoToc2><a href="#_Toc222523"><span style='color:black;text-decoration:
none'>Lesson 3: Validating File Uploads................................................................................................... </span><span style='color:black;text-decoration:none'>92</span></a></p>

<p class=MsoToc2><a href="#_Toc222524"><span style='color:black;text-decoration:
none'>Lesson 4: Validation Challenge....................................................................................................... </span><span style='color:black;text-decoration:none'>93</span></a></p>

<p class=MsoToc2><a href="#_Toc222525"><span style='color:black;text-decoration:
none'>Lesson 5: Handling Express Errors.................................................................................................. </span><span style='color:black;text-decoration:none'>93</span></a></p>

<p class=MsoToc2><a href="#_Toc222526"><span style='color:black;text-decoration:
none'>Lesson 6: Adding Images to the User Profile.................................................................................. </span><span style='color:black;text-decoration:none'>94</span></a></p>

<p class=MsoToc2><a href="#_Toc222527"><span style='color:black;text-decoration:
none'>Lesson 7: Serving up Files............................................................................................................... </span><span style='color:black;text-decoration:none'>94</span></a></p>

<p class=MsoToc2><a href="#_Toc222528"><span style='color:black;text-decoration:
none'>Lesson 8: Auto-Cropping and Image Formatting............................................................................ </span><span style='color:black;text-decoration:none'>95</span></a></p>

<p class=MsoToc1><a href="#_Toc222529"><b><span style='color:black;text-decoration:
none'>Section 15: Sending Emails</span></b><span style='color:black;text-decoration:
none'>................................................................................................................ </span><span style='color:black;text-decoration:none'><b>96 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222530"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>96 </span></a></p>

<p class=MsoToc2><a href="#_Toc222531"><span style='color:black;text-decoration:
none'>Lesson 2: Exploring SendGrid......................................................................................................... </span><span style='color:black;text-decoration:none'>96 </span></a></p>

<p class=MsoToc2><a href="#_Toc222532"><span style='color:black;text-decoration:
none'>Lesson 3: Sending Welcome and Cancelation Emails..................................................................... </span><span style='color:black;text-decoration:none'>97 </span></a></p>

<p class=MsoToc2><a href="#_Toc222533"><span style='color:black;text-decoration:
none'>Lesson 4: Environment Variables................................................................................................... </span><span style='color:black;text-decoration:none'>97 </span></a></p>

<p class=MsoToc2><a href="#_Toc222534"><span style='color:black;text-decoration:
none'>Lesson 5: Creating a Production MongoDB Database.................................................................... </span><span style='color:black;text-decoration:none'>98 </span></a></p>

<p class=MsoToc2><a href="#_Toc222535"><span style='color:black;text-decoration:
none'>Lesson 6: Heroku Deployment....................................................................................................... </span><span style='color:black;text-decoration:none'>98 </span></a></p>

<p class=MsoToc1><a href="#_Toc222536"><b><span style='color:black;text-decoration:
none'>Section 16: Testing Node.js</span></b><span style='color:black;
text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'><b>99 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222537"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................... </span><span style='color:black;text-decoration:none'>99 </span></a></p>

<p class=MsoToc2><a href="#_Toc222538"><span style='color:black;text-decoration:
none'>Lesson 2: Jest Testing Framework.................................................................................................. </span><span style='color:black;text-decoration:none'>99 </span></a></p>

<p class=MsoToc2><a href="#_Toc222539"><span style='color:black;text-decoration:
none'>Lesson 3: Writing Tests and Assertions........................................................................................ </span><span style='color:black;text-decoration:none'>100 </span></a></p>

<p class=MsoToc2><a href="#_Toc222540"><span style='color:black;text-decoration:
none'>Lesson 4: Writing Your Own Tests................................................................................................ </span><span style='color:black;text-decoration:none'>101 </span></a></p>

<p class=MsoToc2><a href="#_Toc222541"><span style='color:black;text-decoration:
none'>Lesson 5: Testing Asynchronous Code.......................................................................................... </span><span style='color:black;text-decoration:none'>101 </span></a></p>

<p class=MsoToc2><a href="#_Toc222542"><span style='color:black;text-decoration:
none'>Lesson 6: Testing an Express Application: Part I........................................................................... </span><span style='color:black;text-decoration:none'>102 </span></a></p>

<p class=MsoToc2><a href="#_Toc222543"><span style='color:black;text-decoration:
none'>Lesson 7: Testing an Express Application: Part II.......................................................................... </span><span style='color:black;text-decoration:none'>103 </span></a></p>

<p class=MsoToc2><a href="#_Toc222544"><span style='color:black;text-decoration:
none'>Lesson 8: Jest Setup and Teardown.............................................................................................. </span><span style='color:black;text-decoration:none'>104 </span></a></p>

<p class=MsoToc2><a href="#_Toc222545"><span style='color:black;text-decoration:
none'>Lesson 9: Testing with Authentication.......................................................................................... </span><span style='color:black;text-decoration:none'>105 </span></a></p>

<p class=MsoToc2><a href="#_Toc222546"><span style='color:black;text-decoration:
none'>Lesson 10: Advanced Assertions.................................................................................................. </span><span style='color:black;text-decoration:none'>106 </span></a></p>

<p class=MsoToc2><a href="#_Toc222547"><span style='color:black;text-decoration:
none'>Lesson 11: Mocking Libraries....................................................................................................... </span><span style='color:black;text-decoration:none'>106 </span></a></p>

<p class=MsoToc2><a href="#_Toc222548"><span style='color:black;text-decoration:
none'>Lesson 12: Wrapping up User Tests.............................................................................................. </span><span style='color:black;text-decoration:none'>107 </span></a></p>

<p class=MsoToc2><a href="#_Toc222549"><span style='color:black;text-decoration:
none'>Lesson 13: Setup Task Test Suite.................................................................................................. </span><span style='color:black;text-decoration:none'>107 </span></a></p>

<p class=MsoToc2><a href="#_Toc222550"><span style='color:black;text-decoration:
none'>Lesson 14: Testing with Task Data................................................................................................ </span><span style='color:black;text-decoration:none'>107 </span></a></p>

<p class=MsoToc2><a href="#_Toc222551"><span style='color:black;text-decoration:
none'>Lesson 15: Bonus: Extra Test Ideas............................................................................................... </span><span style='color:black;text-decoration:none'>108 </span></a></p>

<p class=MsoToc1><a href="#_Toc222552"><b><span style='color:black;text-decoration:
none'>Section 17: Real-Time Web Applications with Socket.io</span></b><span
style='color:black;text-decoration:none'>................................................................ </span><span style='color:black;text-decoration:none'><b>108 </b></span></a></p>

<p class=MsoToc2><a href="#_Toc222553"><span style='color:black;text-decoration:
none'>Lesson 1: Section Intro................................................................................................................. </span><span style='color:black;text-decoration:none'>108 </span></a></p>

<p class=MsoToc2><a href="#_Toc222554"><span style='color:black;text-decoration:
none'>Lesson 2: Creating the Chat App Project...................................................................................... </span><span style='color:black;text-decoration:none'>108 </span></a></p>

<p class=MsoToc2><a href="#_Toc222555"><span style='color:black;text-decoration:
none'>Lesson 3: WebSockets.................................................................................................................. </span><span style='color:black;text-decoration:none'>108 </span></a></p>

<p class=MsoToc2><a href="#_Toc222556"><span style='color:black;text-decoration:
none'>Lesson 4: Getting Started with Socket.io...................................................................................... </span><span style='color:black;text-decoration:none'>109 </span></a></p>

<p class=MsoToc2><a href="#_Toc222557"><span style='color:black;text-decoration:
none'>Lesson 5: Socket.io Events............................................................................................................ </span><span style='color:black;text-decoration:none'>111 </span></a></p>

<p class=MsoToc2><a href="#_Toc222558"><span style='color:black;text-decoration:
none'>Lesson 6: Socket.io Events Challenge........................................................................................... </span><span style='color:black;text-decoration:none'>112</span></a></p>

<p class=MsoToc2><a href="#_Toc222559"><span style='color:black;text-decoration:
none'>Lesson 7: Broadcasting Events...................................................................................................... </span><span style='color:black;text-decoration:none'>112</span></a></p>

<p class=MsoToc2><a href="#_Toc222560"><span style='color:black;text-decoration:
none'>Lesson 8: Sharing Your Location................................................................................................... </span><span style='color:black;text-decoration:none'>113</span></a></p>

<p class=MsoToc2><a href="#_Toc222561"><span style='color:black;text-decoration:
none'>Lesson 9: Event Acknowledgements............................................................................................ </span><span style='color:black;text-decoration:none'>114</span></a></p>

<p class=MsoToc1><a href="#_Toc222562"><span style='color:black;text-decoration:
none'>Lesson 10: Form and Button States.................................................................................................. </span><span style='color:black;text-decoration:none'>115</span></a></p>

<p class=MsoToc1><a href="#_Toc222563"><span style='color:black;text-decoration:
none'>Lesson 11: Rendering Messages....................................................................................................... </span><span style='color:black;text-decoration:none'>116</span></a></p>

<p class=MsoToc1><a href="#_Toc222564"><span style='color:black;text-decoration:
none'>Lesson 12: Rendering Location Messages........................................................................................ </span><span style='color:black;text-decoration:none'>117 </span></a></p>

<p class=MsoToc1><a href="#_Toc222565"><span style='color:black;text-decoration:
none'>Lesson 13: Working with Time......................................................................................................... </span><span style='color:black;text-decoration:none'>117 </span></a></p>

<p class=MsoToc1><a href="#_Toc222566"><span style='color:black;text-decoration:
none'>Lesson 14: Timestamps for Location Messages............................................................................... </span><span style='color:black;text-decoration:none'>118 </span></a></p>

<p class=MsoToc1><a href="#_Toc222567"><span style='color:black;text-decoration:
none'>Lesson 15: Styling the Chat App....................................................................................................... </span><span style='color:black;text-decoration:none'>118 </span></a></p>

<p class=MsoToc1><a href="#_Toc222568"><span style='color:black;text-decoration:
none'>Lesson 16: Join Page......................................................................................................................... </span><span style='color:black;text-decoration:none'>119 </span></a></p>

<p class=MsoToc1><a href="#_Toc222569"><span style='color:black;text-decoration:
none'>Lesson 17: Socket.io Rooms............................................................................................................. </span><span style='color:black;text-decoration:none'>119 </span></a></p>

<p class=MsoToc1><a href="#_Toc222570"><span style='color:black;text-decoration:
none'>Lesson 18: Storing Users: Part I........................................................................................................ </span><span style='color:black;text-decoration:none'>120 </span></a></p>

<p class=MsoToc1><a href="#_Toc222571"><span style='color:black;text-decoration:
none'>Lesson 19: Storing Users: Part II....................................................................................................... </span><span style='color:black;text-decoration:none'>120 </span></a></p>

<p class=MsoToc1><a href="#_Toc222572"><span style='color:black;text-decoration:
none'>Lesson 20: Tracking Users Joining and Leaving................................................................................ </span><span style='color:black;text-decoration:none'>121 </span></a></p>

<p class=MsoToc1><a href="#_Toc222573"><span style='color:black;text-decoration:
none'>Lesson 21: Sending Messages to Rooms.......................................................................................... </span><span style='color:black;text-decoration:none'>122 </span></a></p>

<p class=MsoToc1><a href="#_Toc222574"><span style='color:black;text-decoration:
none'>Lesson 22: Rendering User List......................................................................................................... </span><span style='color:black;text-decoration:none'>123 </span></a></p>

<p class=MsoToc1><a href="#_Toc222575"><span style='color:black;text-decoration:
none'>Lesson 23: Automatic Scrolling........................................................................................................ </span><span style='color:black;text-decoration:none'>124 </span></a></p>

<p class=MsoToc1><a href="#_Toc222576"><span style='color:black;text-decoration:
none'>Lesson 24: Deploying the Chat Application...................................................................................... </span><span style='color:black;text-decoration:none'>125 </span></a></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.25pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.25pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.25pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.25pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.25pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
20.0pt;line-height:107%;color:white'> </span></p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:20.3pt;margin-left:
.2in'><a name="_Toc222387">Section 1: Welcome </a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Welcome to the course! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:24.85pt;margin-bottom:
40.35pt;margin-left:.2in'>This first section contains a brief overview of the
class. There are no lecture notes for this first section as its an
introduction to the rest of the class. This section is still important though,
so make sure to watch the lecture videos to learn how to get the most out of
the class. Enjoy! </p>

<h1 style='margin-left:.2in'><a name="_Toc222388">Section 2: Installing and
Exploring Node.js </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222389">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>In this section, youre going to set up your machine
for the rest of the course. This includes installing Node.js and Visual Studio
Code. This section also dives into what Node.js is, how Node.js works, and why
Node.js is a tool worth learning. </p>

<h2 style='margin-left:.2in'><a name="_Toc222390">Lesson 2: Installing Node.js
and Visual Studio Code </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll install Node.js and Visual
Studio Code. Both are free, open source, and available for all operating
system. Theyre the only tools needed to get started with Node! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Below are links to both tools. Take a moment to
install them before continuing on with the class. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://nodejs.org/"><span style='color:#4F81BC;text-decoration:
none'>Node.js</span></a><a href="https://nodejs.org/"><span style='color:black;
text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://code.visualstudio.com/"><span style='color:#4F81BC;
text-decoration:none'>Visual Studio Code</span></a><a
href="https://code.visualstudio.com/"><span style='color:black;text-decoration:
none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222391">Lesson 3: What is Node.js? </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore what Node.js is. This
includes a brief tour of the V8 JavaScript engine, non-blocking I/O, and more! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>This lesson contains a presentation that covers what
Node.js is. There are no notes for presentation lectures. Please refer to the
video for details. </p>

<h2 style='margin-left:.2in'><a name="_Toc222392">Lesson 4: Why Should I Use
Node.js? </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>Why should you use Node.js? In this lesson, youll
learn what makes Node.js a tool worth using. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>This lesson contains a presentation that covers the
major advantages of Node.js. There are no notes for presentation lectures.
Please refer to the video for details. </p>

<h2 style='margin-left:.2in'><a name="_Toc222393">Lesson 5: Your First Node.js
Script </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Its time. In this lesson, youll be creating and
running your very first Node.js app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Creating a
Script </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Node.js scripts are created with the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>js</span></sub>
file extension. Remember that Node.js is not a programming language. All the
code in this course is JavaScript code, which is why the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>js</span></sub>
extension is used. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.55pt;margin-left:.2in'>Below is an example script stored in a file named <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>index.js</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>console</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Hello
Node.js!'</span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas'>)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Running a Script
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>You can run a Node.js script using the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>node</span></sub>
command. Open up a new terminal window and navigate to the directory where the
script lives. From the terminal, you can use the <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>node</span> command
to provide the path to the script that should run. You can see an example of
this command in the terminal below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.15pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node index.js</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>Hello Node.js!</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:.2in'>When a Node.js script calls <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>console.log</span></sub>,
the logged values will show up in the terminal. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>This is a great way to get output from your Node.js
application </p>

<h1 style='margin-left:.2in'><a name="_Toc222394">Section 3: Node.js Module
System </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222395">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>The best way to get started with Node.js is to explore
its module system. The module system lets you load external libraries into your
application. Thatll enable you to take advantage of built-in Node.js modules
as well as third-party npm modules. This includes libraries for connecting to
database, creating web servers, and more! </p>

<h2 style='margin-left:.2in'><a name="_Toc222396">Lesson 2: Importing Node.js
Core Modules </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Node.js comes with dozens of built-in modules. These
built-in modules, sometimes referred to as core modules, give you access to
tools for working with the file system, making http requests, creating web
servers, and more! In this lesson, youll learn how to load in those core
modules and use them in your code. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Importing
Node.js Core Modules </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>To get started, lets work with some built-in Node.js
modules. These are modules that come with Node, so theres no need to install
them. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The module system is built around the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
function. This function is used to load in a module and get access to its
contents. <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>require</span></sub> is a global variable provided to all
your Node.js scripts, so you can use it anywhere you like! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>Lets look at an example. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:87.15pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> fs </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'fs'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:87.15pt;margin-bottom:
20.25pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>fs</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>writeFileSync</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'notes.txt'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'I
live in Philadelphia'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The script above uses require to load in the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>fs</span></sub>
module. This is a built-in Node.js module that provides functions you can use
to manipulate the file system. The script uses <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>writeFileSync</span>
to write a message to <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>notes.txt</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>After you run the script, youll notice a new <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>notes.txt</span></sub>
file in your directory. Open it up and youll see, I live in Philadelphia!. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://nodejs.org/dist/latest-v11.x/docs/api/"><span
style='color:#4F81BC;text-decoration:none'>Node.js documentation</span></a><a
href="https://nodejs.org/dist/latest-v11.x/docs/api/"><span style='color:black;
text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://nodejs.org/dist/latest-v11.x/docs/api/fs.html"><span
style='color:#4F81BC;text-decoration:none'>Node.js fs documentation</span></a><a
href="https://nodejs.org/dist/latest-v11.x/docs/api/fs.html"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222397">Lesson 3: Importing Your Own
Files </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Putting all your code in a single file makes it easy
to get started with Node.js. As you add more code, youll want to stay
organized and break your Node.js app into multiple scripts that all work
together. In this lesson, youll learn how to create a Node.js application
thats spread out across multiple files. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Importing Your
Own Files </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
29.2pt;margin-left:.2in'>You know how to use <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
to load in built-in modules. <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>require</span></sub> can also be
used to load in JavaScript files youve created. All you need to do is provide <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
with a relative path to the script you want to load. This path should start
with <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>./</span></sub> and then link to the file that needs to be
loaded in. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:250.3pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> checkUtils </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'./src/utils.js'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:250.3pt;margin-bottom:
21.25pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#7C9029'>checkUtils</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The code above uses <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
to load in a file called <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>utils.js</span></sub> in the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>src</span></sub>
directory. It stores the module contents in a variable, and then uses the
contents in the script. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Exporting from
Files </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
5.75pt;margin-left:.2in'>Node.js runs the scripts that you require. That means
the <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>require</span></sub> call above will cause <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>utils.js</span>
to run. Node.js provides the required script with a place to store values that
should be exported as part of the library. This is on <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>module.exports</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.5pt;margin-left:.2in'>You can see <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>utils.js</span> below. A function
is defined and then assigned to <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>module.exports</span>. The value
stored on <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>module.exports</span></sub> will be the return value for <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
when the script is imported. That means other scripts could load in the
utilities to access the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>check</span></sub> function. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:74.5pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:74.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> check </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>function</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Doing
  some work...'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>module</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>exports</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> check</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in;line-height:147%'>If you run the original script,
youll see the message that logged from the <sub><span style='font-size:17.0pt;
line-height:147%;font-family:Consolas;background:#FAFAFA'>check</span></sub>
function in <span style='font-size:11.0pt;line-height:147%;font-family:Consolas;
background:#FAFAFA'>utils.js</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:368.25pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>Doing some work...</span><span style='font-family:
Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.5pt;margin-left:.2in'>Your Node.js scripts dont share a global score. This
means variables created in one scripts are not accessible in a different
script. The only way to share values between scripts is by using <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span>
with <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>module.exports</span>. </p>

<h2 style='margin-left:.2in'><a name="_Toc222398">Lesson 4: Importing npm
Modules </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>When you install Node.js, you also get npm. npm is a
package manager that allows you to install and use third-party npm libraries in
your code. This opens up a world of possibilities, as there are npm packages
for everything from email sending to file uploading. In this lesson, youll
learn how to integrate npm into your Node.js app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Initializing npm
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Your Node.js application needs to initialize npm
before npm can be used. You can run <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>npm</span></sub><sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas'> </span></sub><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>init</span>
from the root of your project to get that done. That command will ask you a
series of questions about the project and itll use the information to generate
a <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>package.json</span></sub> file in the root of your project.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.5pt;margin-left:.2in'>Heres an example. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.55pt;
margin-left:.2in;line-height:102%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>&quot;name&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;notes-app&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;version&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;1.0.0&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;description&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.55pt;
margin-left:.2in;line-height:102%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>&quot;main&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;app.js&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;scripts&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.55pt;
margin-left:.2in;line-height:102%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>&quot;test&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;echo
\&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>},</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;author&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>  </span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;license&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;ISC&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.15pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Installing an
npm Module </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Youre now ready to install an npm module. This is
done using the <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>npm</span></sub> command which was set up when
Node.js was installed. You can use <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>npm install</span></sub>
to install a new module in your project. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm install
validator@10.8.0</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>The command above installs version 10.8.0 of
validator. If you want to install the latest version of a module, you can leave
off the version number as shown below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm install
validator</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>This command does three important things: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>First, it creates a <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>node_modules</span></sub>
directory. npm uses this directory to store all the code for the npm modules
you have installed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in;line-height:90%'>Second, npm adds the module as a
dependency by listing it in the <sub><span style='font-size:17.0pt;line-height:
90%;font-family:Consolas;background:#FAFAFA'>dependencies</span></sub> property
in <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>package.</span></sub><sub><span style='font-size:17.0pt;
line-height:90%;font-family:Consolas;color:#7C9029;background:#FAFAFA'>json</span></sub>.
This allows you to track and manage the module you have installed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Third, npm creates a <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>package-lock.json</span></sub>
file. This includes detailed information about the modules youve installed
which helps keep things fast and secure. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You should never make changes to <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>node_modules</span>
or <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>package-lock.json</span>. Both are managed by npm and will
get changed as you run npm commands from the terminal. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Importing an npm
Module </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.5pt;margin-left:.2in;line-height:91%'>npm modules can be imported into your
script using <sub><span style='font-size:17.0pt;line-height:91%;font-family:
Consolas;background:#FAFAFA'>require</span></sub>. To load in an npm module,
pass the npm module name to <sub><span style='font-size:17.0pt;line-height:
91%;font-family:Consolas;background:#FAFAFA'>require</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.7pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> validator </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'validator'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.7pt;margin-bottom:
20.3pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>validator</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>isURL</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'https/mead.io'</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)) </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
Print: true</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The script above uses <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
to load in validator. The script then uses the <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>isURL</span></sub>
function provided by validator to check if a given string contains a valid URL.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.85pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://www.npmjs.com/"><span style='color:#4F81BC;text-decoration:
none'>npm</span></a><a href="https://www.npmjs.com/"><span style='color:black;
text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://www.npmjs.com/package/validator"><span
style='color:#4F81BC;text-decoration:none'>npm: validator</span></a><a
href="https://www.npmjs.com/package/validator"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222399">Lesson 5: Printing in Color </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>There are npm modules for pretty much anything youd
want to do with Node.js. In this lesson, its up to you to install and use a
new one! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/chalk"><span style='color:#4F81BC;
text-decoration:none'>npm: chalk</span></a><a
href="https://www.npmjs.com/package/chalk"><span style='color:black;text-decoration:
none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222400">Lesson 6: Global npm Modules
and nodemon </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can use npm modules from outside of your scripts
by installing them globally. Globally installed modules are designed to be used
from the terminal and provide you with new commands you can run. In this
lesson, youll learn how to install and work with global modules. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.4pt;margin-bottom:
9.25pt;margin-left:.2in'><span style='color:#3D3D3E'>Installing an npm Module
Globally </span>npm modules can be installed globally by adding a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>-g</span></sub>
flag to the installation command. Not all modules are designed to be installed
globally, so be sure to refer to the module documentation to learn how its
supposed to be used. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>The command below installs version 1.18.5 of nodemon
as a global module. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm install -g
nodemon@1.18.5</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>A globally installed module is not added as a
dependency to your project. That means you wont see it listed in <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>package.json</span>
or <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>package-lock.json</span>. You also wont find its code in <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>node_modules</span>.
Globally installed modules are located in a special directory in your machine
which is created and managed by npm. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>When you install nodemon globally, you get access a
new <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>nodemon</span></sub> command from the terminal. This can be
used to start and Node.js application and then restart the application any of
the app scripts change. This means you wont need to switch between the
terminal and text editor to restart your application every time you make a
change. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The command below runs <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>app.js</span></sub>
through nodemon. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>nodemon app.js</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
5.15pt;margin-left:.2in'>P.S. You can stop nodemon by using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>ctrl
</span></sub><sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;color:#666666;background:#FAFAFA'>+</span></sub><sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>
c</span></sub> from the terminal! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:41.2pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/nodemon"><span style='color:#4F81BC;
text-decoration:none'>npm: nodemon</span></a><a
href="https://www.npmjs.com/package/nodemon"><span style='color:black;
text-decoration:none'> </span></a></p>

<h1 style='margin-left:.2in'><a name="_Toc222401">Section 4: File System and
Command Line Args </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222402">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>Its time to start building your first Node.js
application. In this section, youll learn how to use the file system and
command line arguments to create a note taking app. Along the way, youll learn
how to get input from the user, work with JSON, and create a place to store
user data. </p>

<h2 style='margin-left:.2in'><a name="_Toc222403">Lesson 2: Getting Input from
Users </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>I cant think of a single useful application that
doesnt get input from the users. Whether its their email, location, or age,
getting input is essential for creating real-world apps. In this lesson, youll
learn how to set up command line arguments that allow users to pass data into
your application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Accessing
Command Line Arguments </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.25pt;margin-left:.2in'>Command line arguments are values passed into your
application from the terminal. Your Node.js application can access the command
line arguments that were provided using <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>process.argv</span>.
This array contains at least two items. The first is the path to the Node.js
executable. The second is the path to the JavaScript file that was executed.
Everything after that is a command line argument. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Take a look at the example below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.85pt;
margin-left:6.65pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=646 height=135
src="Node.js%20Dev%20Course_files/image002.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
5.15pt;margin-left:.2in'>That script grabs the third item in <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>process.argv</span></sub>.
Since the first two are always provided, the third item is the first command
line argument that was passed in. The script uses the value of that argument to
figure out what it should do. A user could provide <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>add</span></sub>
to add a note or <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>remove</span></sub> to remove a note. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.4pt;margin-left:.2in'>The command below runs the script and provides <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>add</span></sub>
as the command line argument. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:337.95pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js
add</span><span style='font-family:Consolas'> </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>Adding note!</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://nodejs.org/api/process.html#process_process_argv"><span
style='color:#4F81BC;text-decoration:none'>process.argv</span></a><a
href="https://nodejs.org/api/process.html#process_process_argv"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222404">Lesson 3: Argument Parsing
with Yargs: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Node.js provides a bare-bones way to access command
line arguments. While its a good start, it doesnt provide any way to parse
more complex command line arguments. In this lesson, youll learn how to use
Yargs to easily set up a more complex set of arguments for your application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting Up Yargs
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>First, install Yargs in your project. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm install
yargs@12.0.2</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Now, yargs can be used to make it easier to work with
command line arguments. The example below shows how this can be done. First, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>yargs.version</span></sub>
is used to set up a version for the command line tool. Next, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>yargs.command</span></sub>
is used to add support for a new command. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:179.95pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:179.95pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> yargs </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'yargs'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:330.55pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#18167B'>yargs</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas;color:#7C9029'>version</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>(</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'1.1.0'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:324.55pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>yargs</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>command</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>command</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'add'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:227.8pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>describe</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Add
  a new note'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>handler</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>function</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Adding
  a new note!'</span><span style='font-size:11.0pt;line-height:107%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>yargs</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>argv</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>Now, this command can be triggered by providing its
name as a command line argument. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:337.95pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js
add</span><span style='font-family:Consolas'> </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>Adding a new note!</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Yargs provides a couple useful commands by default.
The first, shown below, lets a user get the version of the command line tool
theyre running. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js
--version</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>1.1.0</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>The second, shown below, shows the user autogenerated
documentation that covers how the tool can be used. This would list out all
available commands as well as the available options for each command. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js
--help</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/yargs"><span style='color:#4F81BC;
text-decoration:none'>npm: yargs</span></a><a
href="https://www.npmjs.com/package/yargs"><span style='color:black;text-decoration:
none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222405">Lesson 4: Argument Parsing
with Yargs: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll continue to explore Yargs. The
goal is to allow users to pass in the title and body of their notes using
command line options. This same technique could be used to allow users to pass
in data such as their name, email, or address. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Adding Command
Options </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.7pt;margin-left:.2in;line-height:90%'>Options are additional pieces of
information passed along with the command. You can set up options for a command
using the <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>builder</span></sub> property as shown below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.6pt;margin-left:.2in'>Now, the add command can be used with two options. The
first is <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>title</span></sub> which is used for the title of the note
being added. The second is <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>body</span></sub> which is used for
the body of the note being added. Both options are required because <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>demandOption</span></sub>
is set to <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>true</span></sub>. Both are also set up to
accept string input because <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>type</span></sub> is set to <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#406F9F;
background:#FAFAFA'>'string'</span></sub>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:266.6pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:266.6pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:324.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>yargs</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>command</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>command</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'add'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:258.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>describe</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Add
  a new note'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>builder</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>title</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>describe</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Note
  title'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>demandOption</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'string'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:264.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>describe</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Note
  body'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>demandOption</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'string'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:397.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>handler</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>function</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (argv) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:94.7pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Title:
  '</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>argv</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>title</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Body:
  '</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>argv</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.6pt;margin-left:.2in'>The add command can now be used with <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>--title</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>--body</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js
add --title=</span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas;color:#406F9F'>&quot;Buy&quot;</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> --body=</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;Note body
here&quot;</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Title: Buy</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
23.4pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Body: Note body
here</span><span style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222406">Lesson 5: Storing Data with
JSON </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.35pt;margin-left:.2in'>In this lesson, youll learn how to work with JSON.
JSON, which stands for JavaScript Object Notation, is a lightweight data
format. JSON makes it easy to store or transfer data. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Youll be using it in this application to store users
notes in the file system. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Working with
JSON </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Since JSON is nothing more than a string, it can be
used to store data in a text file or transfer data via an HTTP requests between
two machines. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.5pt;margin-left:.2in'>JavaScript provides two methods for working with JSON.
The first is <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>JSON.stringify</span></sub> and the second is <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>JSON.parse</span>.
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:
#FAFAFA'>JSON.stringify</span> converts a JavaScript object into a JSON string,
while <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>JSON.parse</span></sub> converts a JSON string into a
JavaScript object. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:153.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:153.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:300.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> book </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>title</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Ego
  is the Enemy'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>author</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Ryan
  Holiday'</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:167.25pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// Covert
  JavaScript object into JSON string</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> bookJSON </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>JSON</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>stringify</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(book)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:233.8pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// Covert JSON
  string into object</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> bookObject </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>JSON</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>parse</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(bookJSON)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>bookObject</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>title</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Print: Ego is the Enemy</span><span style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>JSON looks similar to a JavaScript object, but there
are some differences. The most obvious is that all properties are wrapped in
double-quotes. Single-quotes cant be used here, as JSON only supports
double-quotes. You can see this in the example JSON below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.25pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>{</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;name&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;Gunther&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>,</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;planet&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;Earth&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>,</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&quot;age&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>54</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.json.org/"><span style='color:#4F81BC;text-decoration:none'>JSON
format</span></a><a href="https://www.json.org/"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222407">Lesson 6: Adding a Note </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be saving new notes to the
file system. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222408">Lesson 7: Removing a Note </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Its challenge time. In this lesson, youll be adding
the ability for users to remove notes theyve added. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222409">Lesson 8: ES6 Aside: Arrow
Functions </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use ES6 arrow
functions. Arrow functions come with a few great features, making them a nice
alternative to the standard ES5 function. Youll explore the new syntax and
learn when to use them! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Arrow Functions </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>Arrow functions offer up an alternative syntax from the
standard ES5 function. The snippet below shows an example of a standard
function and then an arrow function. While the syntax is obviously different,
you still have the two important pieces, an arguments list and a function body.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:127.25pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.45pt 8.0pt;height:127.25pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  const square function (x) {</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//    
  return x * x</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:439.45pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#5F9FAF'>// }</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:288.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> square </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (x) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> x </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>*</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> x</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>square</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>2</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>))    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Will print: 4</span><span style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Shorthand Syntax
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Arrow functions have an optional shorthand syntax.
This is useful when you have a function that immediately returns a value. The
example below shows how this can be used. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:123.55pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> squareAlt </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (x) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> x </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>*</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> x</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:123.55pt;margin-bottom:
20.65pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-family:Consolas'>  </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>squareAlt</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>2</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)) </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Will print: 4</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Notice that two important things are missing from the
function definition. First, the curly braces wrapping the function body have
been removed as well as the <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>return</span></sub> statement. In
place of both is the value to be returned. Theres no need for an explicit
return statement, as the value provide is implicitly returned. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>This Binding </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.55pt;margin-left:.2in'>Arrow functions dont bind their own <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>this</span></sub>
value. Instead, the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>this</span></sub> value of the scope
in which it was defined is accessible. This makes arrow functions bad
candidates for methods, as <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>this</span></sub> wont be a reference
to the object the method is defined on. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>For methods, ES6 provides a new method definition
syntax. You can see this in the definition of the <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>printGuestList</span></sub>
method below. That function is a standard function, just with a shorthand
syntax which allows for the removal of the colon and the function keyword. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>Because arrow functions dont bind this, they work
well for everything except methods. As shown below, the arrow function passed
to <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>forEach</span></sub> is able to access <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>this.name</span></sub>
correctly, as its defined as an arrow function and doesnt have a this binding
of its own. That code wouldnt work if you swapped out the arrow function for a
standard function. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:178.8pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.45pt 8.0pt;height:178.8pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> event </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Birthday
  Party'</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:118.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>guestList</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> [</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Jen'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Mike'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>]</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>printGuestList</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>() </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Guest
  list for '</span><span style='font-size:11.0pt;line-height:107%;font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:107%;font-family:
  Consolas;color:#666666'>+</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas;color:#006F1F'>this</span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>.</span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>name</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>this</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>guestList</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>forEach</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((guest) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:82.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(guest </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'
  is attending '</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>+</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>this</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>event</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>printGuestList</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions"><span
style='color:#4F81BC;text-decoration:none'>Arrow function</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222410">Lesson 9: Refactoring to Use
Arrow Functions </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>In this lesson, youll use what youve learned about
arrow functions to integrate them into the Node.js app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222411">Lesson 10: Listing Notes </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll create a new app feature that
allows users to list out their notes. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222412">Lesson 11: Reading a Note </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add a new app feature that
allows users to read a note. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Array Find
method </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>find</span></sub>
method allows you to find a single item in an array. Its similar to <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>filter</span></sub>,
though <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>find</span> returns a single element as
opposed to an array of elements. <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>find</span></sub>
will stop its search through the array after finding the first match. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>The example below shows how find can be used to locate
the user whose name is George Hudson. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:191.65pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:191.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:337.15pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> users </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> [</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew
  Mead'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>27</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>},{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:325.05pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>  </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'George
  Hudson'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>72</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>},{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:318.45pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>  </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Clay
  Klay'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>45</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:83.1pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:98%'><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>]</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>users</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>find</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>((user) </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>name</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>===</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'George
  Hudson'</span><span style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(user) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Will print the second object in the array</span><span style='font-family:
  Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find"><span
style='color:#4F81BC;text-decoration:none'>Array find method</span></a><a
href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find"><span
style='color:black;text-decoration:none'> </span></a></p>

<h1 style='margin-left:.2in'><a name="_Toc222413">Section 5: Debugging Node.js </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222414">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>Whats worse than getting an error when you run your
application? Not knowing how to fix it. In this section, youll learn how to
effectively debug your Node.js apps. Youll learn how to track down and fix
issues so you can get back to the important work. </p>

<h2 style='margin-left:.2in'><a name="_Toc222415">Lesson 2: Debugging Node.js </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to debug your
Node.js applications. Node comes with a great set of tools for getting to the
bottom of any bug or programming issue. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Console.log </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>While its nice to have advanced debugging tools at
the ready, theres nothing wrong with using <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>console.log</span></sub>
to debug your application. Its not the fanciest technique, but it works, and I
use it daily. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>When in doubt, use a few calls to <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>console.log</span></sub>
to figure out whats going on. Its great for dumping a variable to the
terminal so you can check its value. It also works for figuring out what order
your code is running in. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Node Debugger </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Printing values to the console with <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>console.log</span></sub>
is a good start, but there are often times where we need a more complete
debugging solution. For that, Node.js ships with a built-in debugger. It builds
off of the developer tools that Chrome and V8 use when debugging JavaScript
code in the browser. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.55pt;margin-left:.2in'>Start your application with <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>inspect</span></sub>
to use the debugger. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>node inspect
app.js</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Next, visit <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>chrome://inspect</span></sub>
in the Chrome browser. There, youll see a list of all the Node.js processes
that youre able to debug. Click inspect next to your Node.js process to open
up the developer tools. From there, you can click the blue play button near
the top-right of the sources tab to start up the application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>When running the app in debug mode, you can add
breakpoints into your application to stop it at a specific point in the code.
This gives you a chance to explore to the application state and figure out
whats going wrong. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>console</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Thing
one)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><b><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#006F1F'>debugger</span></b><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Debug tools will pause here until your click play again</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
20.15pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Thing
two)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>         </span><a
href="https://nodejs.org/api/debugger.html"><span style='color:#4F81BC;
text-decoration:none'>Node.js debugger documentation</span></a><a
href="https://nodejs.org/api/debugger.html"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222416">Lesson 3: Error Messages </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to read error
messages. Error messages contain useful information about what went wrong, but
they can be a pain to read. Learning how to read them will let you fix errors
fast. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Error Messages </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Error messages can be daunting to use at first. They
contain a lot of useful information, but only if you know what youre looking
at. Lets start with a complete error. Below is an error I generated by trying
to reference a variable that was never defined. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:254.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:254.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas'>/Users/Andrew/Downloads/n3-04-08-arrow-functions/playground/2-arrowfunction.js:21</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:101.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas'>            console.log(guest + </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'
  is attending '</span><span style='font-size:11.0pt;line-height:98%;
  font-family:Consolas'> + eventName)</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:98%;font-family:Consolas'>                                                   ^</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>ReferenceError:
  eventName is not defined</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:77.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    at guestList.forEach
  (/Users/Andrew/Downloads/n3-04-08-arrowfunctions/playground/2-arrow-function.js:21:52)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    at Array.forEach (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>&lt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>anonymous</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:96%'><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas'>    at
  Object.printGuestList
  (/Users/Andrew/Downloads/n3-04-08-arrowfunctions/playground/2-arrow-function.js:20:24)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.3pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas'>    at Object.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>&lt;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>anonymous</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>&gt;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>
  (/Users/Andrew/Downloads/n3-04-08-arrowfunctions/playground/2-arrow-function.js:26:7)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    at
  Module._compile (internal/modules/cjs/loader.js:707:30)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:10.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    at Object.Module._extensions..js
  (internal/modules/cjs/loader.js:718:10)</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    at
  Module.load (internal/modules/cjs/loader.js:605:32)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    at tryModuleLoad
  (internal/modules/cjs/loader.js:544:12)</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    at
  Function.Module._load (internal/modules/cjs/loader.js:536:3)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    at Function.Module.runMain
  (internal/modules/cjs/loader.js:760:12)</span><span style='font-family:Consolas'>
  </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The first few lines of the error contain the most
useful information. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The first line contains a path to the exact script
where the error was thrown. It also contains the line number. Using that line,
you could tell that the issue is on line 21 of <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>2</span></sub><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>arrow-function.js</span>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The second line shows the line of code that caused
the error. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>The third line just below uses the ^ character to
point to the specific part of the line that the error came from. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The fourth line is blank. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The fifth line contains the error message from V8. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.7pt;margin-left:.2in'>Everything after the fifth line is part of the stack
trace. This shows a list of all the functions that were running to get to the
point where the program crashed. The top of the stack trace starts with the
function which threw the error. Here, we can see that the error was thrown in a
callback function for a <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>forEach</span></sub> method call. If
you got down to the next line, youll figure out that the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>forEach</span></sub>
call happened inside of <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>printGuestList</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Itll take a few tries to get comfortable with error
messages. Each error you fix makes it easier to fix the next one. </p>

<h1 style='margin-left:.2in'><a name="_Toc222417">Section 6: Asynchronous
Node.js </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222418">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>Its time to connect your application with the outside
world. In this section, youll explore the asynchronous nature of Node.js.
Youll learn how to use asynchronous programming to make HTTP API requests to
third-party HTTP APIs. This will allow you to pull in data, like real-time
weather data, into your app. </p>

<h2 style='margin-left:.2in'><a name="_Toc222419">Lesson 2: Asynchronous Basics
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore the basics of
asynchronous development. Youll get a preview of what asynchronous code looks
like and how its different from synchronous code. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Async 101 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.0pt;margin-left:.2in;line-height:90%'>When running asynchronous code, your
code wont always execute in the order you might expect. To get started with
asynchronous development, lets use <sub><span style='font-size:17.0pt;
line-height:90%;font-family:Consolas;background:#FAFAFA'>setTimeout</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>setTimeout</span> is a function that
allows you to run some code after a specific amount of time has passed. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>setTimeout</span></sub>
accepts two arguments. The first is a callback function. This function will run
after the specified amount of time has passed. The second argument is the
amount of time in milliseconds to wait. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>Heres an example. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:114.35pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:114.35pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Starting'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:112.8pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Wait 2 seconds before running the function</span><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#7C9029'>setTimeout</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>(() </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'2
  Second Timer'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:415.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#409F6F'>2000</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Stopping'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Run the script and youll see the logs in the
following order. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Starting</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Stopping</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>2 Second Timer</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Notice that Stopping prints before 2 Second
Timer. Thats because <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>setTimeout</span></sub> is
asynchronous and non-blocking. The <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>setTimeout</span></sub>
call doesnt block Node.js from running other code while its waiting for the 2
seconds to pass. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>This asynchronous and non-blocking nature makes
Node.js ideal for backend development. Your server can wait for data from a
database while also processing an incoming HTTP request. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout"><span
style='color:#4F81BC;text-decoration:none'>setTimeout</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222420">Lesson 3: Call Stack,
Callback Queue, and Event Loop </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>In this lesson, youll visualize how Node.js and V8
manage your asynchronous code. This includes the call stack, callback queue,
event loop, and more! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>This lesson contains a detailed presentation. Please
refer to the video for a recap of how asynchronous programming works. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.2pt;margin-left:.2in'>You can grab the slides <a
href="https://links.mead.io/async-slides"><span style='color:#4F81BC;
text-decoration:none'>here</span></a><a
href="https://links.mead.io/async-slides"><span style='color:black;text-decoration:
none'>.</span></a> </p>

<h2 style='margin-left:.2in'><a name="_Toc222421">Lesson 4: Making HTTP
Requests </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to make HTTP
requests from Node. This will enable your app to communicate with other APIs
and servers to do a wide variety of things. Everything from fetching real-time
weather data to sending text messages to users. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Making HTTP
Requests </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>There are several libraries that make it easy to fire
off HTTP requests. My favorite is request. You can install it using the command
below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
request@2.88.0</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Before you use the library in your app, youll need
to figure out which URL youre trying to fetch. To fetch real-time weather
data, youll need to sign up for a free Dark Sky API account. You can do that <a
href="https://darksky.net/dev"><span style='color:#4F81BC;text-decoration:none'>here</span></a><a
href="https://darksky.net/dev"><span style='color:black;text-decoration:none'>.</span></a>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Below is an example URL that responds with forecast
data for San Francisco. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:9.8pt;
margin-left:.2in;line-height:110%'><a
href="https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,-122.4233"><span
style='color:#4F81BC;text-decoration:none'>https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,</span></a><a
href="https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,-122.4233"><span
style='color:#4F81BC;text-decoration:none'>-</span></a><a
href="https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,-122.4233"><span
style='color:#4F81BC;text-decoration:none'>122.4233</span></a><a
href="https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,-122.4233"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>If you visit that URL in the browser, youll see that
the response is JSON data. This same data can be fetched by our Node.js app
using the request library. The example below fetches the forecast data and
prints the current temperature to the console. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:179.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:179.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> request </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'request'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:403.7pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:101%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:101%;font-family:
  Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:
  101%;font-family:Consolas'> url </span><span style='font-size:11.0pt;
  line-height:101%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.5pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#406F9F'>'https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,122.4233'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:204.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#7C9029'>request</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>url</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> url </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> response) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:46.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#5F9FAF'>//
  Parse the response body from JSON string into JavaScript object</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> data </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>JSON</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>parse</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>body</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:131.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Will print the current temperature to the console</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>currently</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>temperature</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/request"><span style='color:#4F81BC;
text-decoration:none'>npm: request</span></a><a
href="https://www.npmjs.com/package/request"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222422">Lesson 5: Customizing HTTP
Requests </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore an option for the
request library that allows it to automatically parse JSON data into a
JavaScript object. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Request Options </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The request library comes with plenty of options to
make your life easier. One is the <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>json</span></sub>
option. Set <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>json</span></sub> to <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>true</span></sub>
and request will automatically parse the JSON into a JavaScript object for you.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:153.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:153.0pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> request </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'request'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:403.7pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:101%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:101%;font-family:
  Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:
  101%;font-family:Consolas'> url </span><span style='font-size:11.0pt;
  line-height:101%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.5pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#406F9F'>'https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/37.8267,122.4233'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>url</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> url</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>json</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> response) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:16.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>daily</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>data</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>summary</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'
  It is currently '</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>+</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>currently</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>temperature</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'
  degrees out. There is a '</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas;color:#666666'>+</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>currently</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>precipProbability</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'%
  chance of rain.'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>The above program would print the following. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Mostly cloudy
overnight. It is currently 51.49 degrees out. There is a 0% chance of rain.</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Theres a link below where you can explore all
available options. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://www.npmjs.com/package/request#requestoptions-callback"><span
style='color:#4F81BC;text-decoration:none'>npm: request options</span></a><a
href="https://www.npmjs.com/package/request#requestoptions-callback"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222423">Lesson 6: An HTTP Request
Challenge </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>Its challenge time. In this video, its on you to
integrate a geocoding API into the Node.js app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222424">Lesson 7: Handling Errors </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are plenty of reasons an HTTP request can fail.
Maybe your machine doesnt have an internet connection, or maybe the URL is
incorrect. Regardless of what goes wrong, in this lesson, youll learn how to
handle errors that occur when making HTTP requests. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Handling Errors </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Handling errors is important. It would be nice if we
could always provide the user with a forecast for their location, but thats
not going to happen. When things fail, you should aim to provide users with
clear and useful messages in plain English so they know whats going on. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The callback function you pass to <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>request</span></sub>
expects an <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>error</span></sub> and <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>response</span></sub>
argument to be provided. Either <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>error</span></sub> or <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>response</span></sub>
will have a value, never both. If <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>error</span></sub>
has a value, that means things went wrong. In this case, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>response</span></sub>
will be <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>undefined</span></sub>, as there is no response. If <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>response</span>
has a value, things went well. In this case, <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>error</span> will be <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>undefined</span>,
as no error occurred. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>The code below handles two different errors. The if
statement first checks if <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>error</span></sub> exists. If it does,
the program prints a message letting the user know it was unable to connect.
The second error occurs if theres no match for the given address. In that
case, the program prints a message instructing the user to try a different
search. Lastly, the coordinates are printed to the console if neither error
occurs. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:243.2pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:243.2pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> request </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'request'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:361.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:101%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:101%;font-family:
  Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:
  101%;font-family:Consolas'> geocodeURL </span><span style='font-size:11.0pt;
  line-height:101%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span></p>
  <p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
  margin-bottom:.75pt;margin-left:0in;text-align:center;text-indent:0in;
  line-height:99%'><span style='font-size:11.0pt;line-height:99%;font-family:
  Consolas;color:#406F9F'>'https://api.mapbox.com/geocoding/v5/mapbox.places/philadelphia.json?access_t
  oken=pk.eyJ1IjoiYW5kcmV3bWVhZDEiLCJhIjoiY2pvOG8ybW90MDFhazNxcnJ4OTYydzJlOSJ9.</span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>njY7HvaalLEVhEOIghPTlw&amp;limit=1'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:70.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>url</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> geocodeURL</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>json</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> response) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Unable
  to connect to location services!'</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>else</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>features</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>length</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>===</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Unable
  to find location. Try another search.'</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:101.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>else</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> latitude </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>features</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>center</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>]</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> longitude </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>features</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>center</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>1</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>]</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(latitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> longitude)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222425">Lesson 8: The Callback
Function </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>A callback function is a function thats passed as an
argument to another function. Thats it. This is something youve used before,
and in this lesson, youll dive a bit deeper into how they work. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>The Callback
Function </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>A callback function is a function thats passed as an
argument to another function. Imagine you have FunctionA which gets passed as
an argument to FunctionB. FunctionB will do some work and then call FunctionA
at some point in the future. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>Callback functions are at the core of asynchronous
development. When you perform an asynchronous operation, youll provide Node
with a callback function. Node will then call the callback when the async
operation is complete. This is how you get access to the results of the async
operation, whether its an HTTP request for JSON data or a query to a database
for a users profile. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>The example below shows how you can use the callback
pattern in your own code. The <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>geocode</span> function is set up to
take in two arguments. The first is the address to geocode. The second is the
callback function to run when the geocoding process is complete. The example
below simulates this request by using <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>setTimeout</span></sub>
to make the process asynchronous. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:191.65pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:191.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:228.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> geocode </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (address</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> callback) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>setTimeout</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(() </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> data </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>latitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>longitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:337.15pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>        </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#7C9029'>callback</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>(data)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>2000</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:149.2pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>geocode</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Philadelphia'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (data) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(data)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:.2in'>The call to <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>geocode</span></sub> provides
both arguments, the address and the callback function. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.25pt;margin-left:.2in'>Notice that the callback function is expecting a
single parameter which it has called <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>data</span></sub>. This
is where the callback function will get access to the results of the
asynchronous operation. You can see where <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>callback</span></sub>
is called with the data inside the <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>geocode</span></sub>
function. </p>

<h2 style='margin-left:.2in'><a name="_Toc222426">Lesson 9: Callback
Abstraction </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Callback functions can be used to abstract complex
asynchronous code into a simple reusable function. In this lesson, youll learn
how to use this pattern to create a reusable function for geocoding an address.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Callback
Abstraction </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Imagine you want to geocode an address from multiple
places in your application. You have two options. Option one, you can duplicate
the code responsible for making the request. This includes the call to request
along with all the code responsible for handling errors. However, this isnt
ideal. Duplicating code makes your application unnecessarily complex and
difficult to maintain. The solution is to create a single reusable function
that can be called whenever you need to geocode an address. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>You can see an example of this below. The function <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>geocode</span></sub>
was created to serve as a reusable way to geocode an address. It contains all
the logic necessary to make the request and process the response. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>geocode</span></sub>
accepts two arguments. The first is the address to geocode. The second is a
callback function which will run once the geocoding operation is complete. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:334.5pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 10.25pt 2.4pt 8.0pt;height:334.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> request </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'request'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> geocode </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (address</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> callback) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:99%'><span style='font-size:11.0pt;line-height:
  99%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> url </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'https://api.mapbox.com/geocoding/v5/mapbox.places/'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> address </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.5pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#406F9F'>'.json?access_token=pk.eyJ1IjoiYW5kcmV3bWVhZDEiLCJhIjoiY2pvOG8ybW90MDFhazNxcn
  J4OTYydzJlOSJ9.njY7HvaalLEVhEOIghPTlw&amp;limit=1'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:84.15pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>url</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> url</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>json</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> response) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Unable
  to connect to location services!'</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>undefined</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>else</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>features</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>length</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>===</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:54.45pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:96%'><span style='font-size:
  11.0pt;line-height:96%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas;color:#406F9F'>'Unable
  to find location. Try another search.'</span><span style='font-size:11.0pt;
  line-height:96%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas;color:#006F1F'>undefined</span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:96%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:96%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas;color:#006F1F'>else</span></b><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:96%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>undefined</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:23.75pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>                </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>latitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>features</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>center</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>]</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>                </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>longitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>features</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>center</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>1</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>]</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>                </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>features</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>[</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>place_name</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:453.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>module</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>exports</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> geocode</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Now, <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>geocode</span></sub> can be
called as many times as needed from anywhere in your application. The snippet
below imports <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>geocode</span></sub> and calls the function to get
the latitude and longitude for Boston. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:87.5pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:87.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> geocode </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'./utils/geocode'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:252.45pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>geocode</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Boston'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> data) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Error'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> error)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Data'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> data)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222427">Lesson 10: Callback
Abstraction Challenge </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>Its challenge time. In this lesson, its on you to
create a reusable function to fetch a weather forecast. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222428">Lesson 11: Callback Chaining </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to run one
asynchronous operation only after another asynchronous operation is complete.
Thatll allow you to use the output from geocoding as the input for fetching
the weather. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Callback
Chaining </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>When working with async code, youll often find out
that you need to use the results from one async operation as the input for
another async operation. This is something we need to do in the weather
application too. Step one is to geocode the address. Step two is to use the
coordinates to fetch the weather forecast. You cant start step two until step
one is complete. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can start one operation after another finishes by
using callback chaining. You can see an example of this in the code below. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:218.6pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:218.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Other lines hidden for brevity</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:239.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>geocode</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(address</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> data) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(error)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:433.4pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:28.15pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>forecast</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>latitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>longitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> forecastData) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(error)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:106.8pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(forecastData)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
1.25pt;margin-left:.2in'>First up is the call to <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>geocode</span></sub>.
The call to <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>geocode</span></sub> provides an address and a
callback function as it did before. Its the code inside the callback function
that looks a bit different. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.05pt;margin-left:.2in'>The callback function calls <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>forecast</span></sub>.
This means that <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>forecast</span></sub> wont get called until after
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:
#FAFAFA'>geocode</span> is complete. The latitude and longitude from the
geocoding operation is also provided as the input for the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>forecast</span></sub>
function call. </p>

<h2 style='margin-left:.2in'><a name="_Toc222429">Lesson 12: ES6 Aside: Object
Property Shorthand and Destructuring </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>ES6 has done wonders making JavaScript easier to use.
In this lesson, youll explore a couple of features that make it easier to work
with objects. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Property
Shorthand </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The property shorthand makes it easier to define
properties when creating a new object. It provides a shortcut for defining a
property whose value comes from a variable of the same name. You can see this
in the example below where a <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>user</span></sub> object is
created. The <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>name</span></sub> property gets its value from a
variable also called <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>name</span></sub>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:113.2pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.25pt 8.0pt;height:113.2pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:306.3pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> name </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userAge </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>27</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:348.75pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userAge</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:288.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Philadelphia'</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.45pt;margin-left:.2in'>The shorthand allows you to remove the colon and the
reference to the variable. When JavaScript sees this, itll get the property
value from the variable with the same name. The example below uses the property
shorthand to define <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>name</span></sub> on the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>user</span></sub>
object. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:140.15pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.45pt 8.0pt;height:140.15pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:306.3pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> name </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userAge </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>27</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:367.35pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    name</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userAge</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Philadelphia'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(user)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Object
Destructuring </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.25pt;margin-left:.2in'>The second ES6 feature is object destructuring. Object
destructuring gives you a syntax for pulling properties off of objects and into
standalone variables. This is useful when working with the same object
properties throughout your code. Instead of writing <span style='font-size:
11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>user.name</span>
a dozen times, you could destructure the property into a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>name</span></sub>
variable. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:.2in'>You can see an example of this below. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:153.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:153.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:348.7pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>27</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Philadelphia'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.6pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// The line below
  uses destructuring</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>address </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:245.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(age)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(address)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
6.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>user</span> is destructured on line 8
above. The <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>age</span></sub> property has been destructured
and stored in <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>age</span></sub>. The <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>location</span></sub>
property has also been destructured and stored in <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>address</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Destructuring
Function Arguments </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>Destructuring works with function parameters as well.
If an object is passed into a function, it can be destructured inside the
function definition. You can see this in the <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>transaction</span></sub>
function below. The function accepts an object as its second argument. The <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>label</span></sub>
and <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>stock</span> properties have both been destructured into
standalone variables that become available in the function. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:178.8pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.45pt 8.0pt;height:178.8pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:312.9pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> product </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>label</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Red
  notebook'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>price</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>3</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>stock</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>201</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>salePrice</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>undefined</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>rating</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>4.2</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:64.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> transaction </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> label</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> stock </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> label</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> stock)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>transaction</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'order'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> product)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.75pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"><span
style='color:#4F81BC;text-decoration:none'>Destructuring</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015"><span
style='color:#4F81BC;text-decoration:none'>Property shorthand</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222430">Lesson 13: Destructuring and
Property Shorthand Challenge </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this video, its on you to use the property
shorthand and object destructuring syntax in your Node.js app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222431">Lesson 14: Bonus: HTTP
Requests Without a Library </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>While the request library is great, its not
necessary if you want to make HTTP requests from Node. In this bonus lesson,
youll learn how to make an HTTP request without request. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>The HTTPS Module
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Node.js provides two core modules for making HTTP
requests. The <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>http</span></sub> module can be used to make http
requests and the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>https</span></sub> module can be used
to make https requests. One great feature about request is that it provides a
single module that can make both http and https requests. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:.2in'>The code below uses the https module to fetch the
forecast from the Dark Sky API. Notice theres a lot more required to get
things working. Separate callbacks are required for incoming chunks of data,
the end of the response, and the error for the request. This means youll
likely recreate your own function similar to <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>request</span></sub>
to make your life easier. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Its best to stick with a tested and popular library
like request. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:312.25pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:312.25pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:251.9pt;margin-bottom:
  .45pt;margin-left:0in;text-indent:0in;line-height:101%'><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> https </span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#406F9F'>'https'</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:101%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> url </span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'https://api.darksky.net/forecast/9d1465c6f3bb7a6c71944bdd8548d026/40,-75'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:143.05pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> request </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>https</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(url</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (response) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>let</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> data </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>''</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:240.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'data'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (chunk) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        data </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> data </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>chunk</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>toString</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:246.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'end'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> body </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>JSON</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>parse</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(data)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(body)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:179.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'error'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'An
  error'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'> error)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>request</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>end</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.75pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://nodejs.org/dist/latest-v11.x/docs/api/http.html"><span
style='color:#4F81BC;text-decoration:none'>Node.js http documentation</span></a><a
href="https://nodejs.org/dist/latest-v11.x/docs/api/http.html"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:41.2pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://nodejs.org/dist/latest-v11.x/docs/api/https.html"><span
style='color:#4F81BC;text-decoration:none'>Node.js https documentation</span></a><a
href="https://nodejs.org/dist/latest-v11.x/docs/api/https.html"><span
style='color:black;text-decoration:none'> </span></a></p>

<h1 style='margin-left:.2in'><a name="_Toc222432">Section 7: Web Servers </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222433">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>Node.js is commonly used as a web server to serve up
websites, JSON, and more. In this section, youll be creating your first Node
server with Express. This will allow users to interact with your application by
visiting a URL in the browser. </p>

<h2 style='margin-left:.2in'><a name="_Toc222434">Lesson 2: Hello Express! </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Serving up websites and JSON data is easy with
Express. In this lesson, youll learn how to create your first web server with
Express. Once the server is up and running, users will be able to interact with
your application via the browser. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Express 101 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>To get started, add Express to your project. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
express@4.16.4</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Next, you can require express. You get access to a
single function you can call to create a new Express application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:187.1pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> express </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'express'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:187.1pt;margin-bottom:
20.35pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> app </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>express</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.9pt;margin-left:.2in'>Now, <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>app</span></sub> can be used to
set up the server. Lets start by showing a message when someone visits the
home page at <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>localhost:3000</span></sub> and the weather page
at <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>localhost:3000/weather</span>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:100.3pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:100.3pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:209.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>''</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Hello
  express!'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:258.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'/weather'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Your
  weather'</span><span style='font-size:11.0pt;line-height:107%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The code above uses <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>app.get</span></sub> to
set up a handler for an HTTP GET request. The first argument is the path to set
up the handler for. The second argument is the function to run when that path
is visited. Calling <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>res.send</span></sub> in the route
handler allows you to send back a message as the response. This will get shown
in the browser. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The last thing to do is start the server. This is
done by calling <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>app.listen</span></sub> with the port you want to
listen on. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>This can be done using <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>app.listen</span></sub>
as shown below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.1pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>listen</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>3000</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> () </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.1pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>console</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Server
is up on port 3000.'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>) </span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>If you run the app, youll see the message printing
letting you know that the server is running. This process will stay running
until you shut it down. You can always use <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>ctrl +</span></sub><sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas'> </span></sub><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>c</span>
to terminate the process. Visit <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>localhost:3000</span> or <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>localhost:3000/weather</span>
to view the messages! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>$ node app.js</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Server is up on
port 3000.</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="http://expressjs.com/"><span style='color:#4F81BC;text-decoration:none'>Express</span></a><a
href="http://expressjs.com/"><span style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222435">Lesson 3: Serving up HTML and
JSON </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>With the basics out of the way, its time to serve up
HTML and JSON with Express. Thatll let you serve up a static website or create
an HTTP REST API designed to be consumed by a web or mobile application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Serving up HTML
and JSON </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Using <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>res.send</span></sub>, you can
send back more than just text. <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>res.send</span></sub> can be used
to send an HTML or JSON response. The root route below sends back some HTML to
be rendered in the browser. The weather route below sends back a JSON response.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:164.7pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:164.7pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>''</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:28.2pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Provide HTML to render in the browser</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'&lt;h1&gt;Weather&lt;/h1&gt;'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:228.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/weather'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#5F9FAF'>// Provide an object to
  send as JSON</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>forecast</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'It
  is snowing'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Philadelphia'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="http://expressjs.com/en/4x/api.html#res.send"><span style='color:#4F81BC;
text-decoration:none'>express </span></a><a
href="http://expressjs.com/en/4x/api.html#res.send"><span style='color:#4F81BC;
text-decoration:none'>- </span></a><a
href="http://expressjs.com/en/4x/api.html#res.send"><span style='color:#4F81BC;
text-decoration:none'>res.send</span></a><a
href="http://expressjs.com/en/4x/api.html#res.send"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222436">Lesson 4: Serving up Static
Assets </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Express can serve up all the assets needed for your
website. This includes HTML, CSS, JavaScript, images, and more. In this lesson,
youll learn how to serve up an entire directory with Express. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Serving up a
Static Directory </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.5pt;margin-left:.2in'>A modern website is more than just an HTML file. Its
styles, scripts, images, and fonts. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>Everything needs to be exposed via the web server so
the browser can load it in. With Express, its easy to serve up an entire
directory without needing to manually serve up each asset. All Express needs is
the path to the directory it should serve. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
6.1pt;margin-left:.2in'>The example below uses Nodes path module to generate
the absolute path. The call to <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>path.join</span> allows you to
manipulate a path by providing individual path segments. It starts with <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>__dirname</span></sub>
which is the directory path for the current script. From there, the second
segment moves out of the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>src</span></sub> folder and into the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>public</span></sub>
directory. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The path is then provided to <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>express.static</span></sub>
as shown below. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:245.5pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:245.5pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:264.0pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> path </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'path'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> express </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'express'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> app </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>express</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>
  publicDirectoryPath </span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>path</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>join</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(__dirname</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'../public'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:197.5pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#18167B'>app</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas;color:#7C9029'>use</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>(</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>express</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>static</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(publicDirectoryPath))</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:258.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/weather'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>forecast</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'It
  is snowing'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Philadelphia'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>listen</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>3000</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:179.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Server
  is up on port 3000.'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Start the server, and the browser will be able to
access all assets in the public directory. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://nodejs.org/dist/latest-v11.x/docs/api/path.html"><span
style='color:#4F81BC;text-decoration:none'>path</span></a><a
href="https://nodejs.org/dist/latest-v11.x/docs/api/path.html"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222437">Lesson 5: Serving up CSS, JS,
Images, and More </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll use the Express server to
serve up a webpage with images, styles, and scripts. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Serving up CSS,
JS, Images, and More </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>All files in <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>public</span></sub>
are exposed via the Express server. This is where your site assets need to
live. If theyre not in <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>public</span></sub>, then theyre not
public and the browser wont be able to load them correctly. The HTML file
below shows how you can use a CSS file, JavaScript file, and image in your
website. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:206.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:206.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&lt;!DOCTYPE
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas'>html</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:427.3pt;margin-bottom:
  .25pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>&lt;html&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;head&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;link
  rel=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#406F9F'>&quot;stylesheet&quot;</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'> href=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;/css/styles.css&quot;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;script
  src=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#406F9F'>&quot;/js/app.js&quot;</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&gt;&lt;/script&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/head&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;body&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;h1&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>About</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/h1&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;img
  src=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#406F9F'>&quot;/img/me.png&quot;</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/body&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/html&gt;</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222438">Lesson 6: Dynamic Pages with
Templating </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Your web pages dont have to be static. Express
supports templating engines that allow you to render dynamic HTML pages. In
this lesson, youll learn how to set up the Handlerbars templating engine with
Express. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting up
Handlebars </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>Start by installing Handlebars in your project. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
21.0pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i hbs@4.0.1</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.6pt;margin-left:.2in;line-height:90%'>From there, youll need to use <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>app.set</span></sub>
to set a value for the <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;color:#406F9F;background:#FAFAFA'>'view engine'</span></sub>
config option. The value is the name of the template engine module you
installed. Thats <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;color:#406F9F;background:#FAFAFA'>'hbs'</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>set</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'view
engine'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#666666'>,</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#406F9F'>'hbs'</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Rendering
Handlebars Templates </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>By default, Express expects your views to live in a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>views</span></sub>
directory inside of your project root. Youll learn how to customize the
location and directory name in the next lesson. Below is an example handlebars
view in <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>views/index.hbs</span></sub>. This looks like a normal HTML
document with a few new features. Notice <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;color:#901F00;background:#FAFAFA'>{{title}}</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#901F00;background:#FAFAFA'>{{name}}</span></sub>. This is a Handlerbars
syntax which allows you to inject variables inside of the template. This is
what allows you to generate dynamic pages. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;!DOCTYPE html&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;html&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;head&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;link rel=&quot;stylesheet&quot;
href=&quot;/css/styles.css&quot;&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;script src=&quot;/js/app.js&quot;&gt;&lt;/script&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/head&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;body&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;h1&gt;{{title}}&lt;/h1&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;p&gt;Created by {{name}}&lt;/p&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/body&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.25pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/html&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.4pt;margin-left:.2in'>Now, you can render the template. This is done by
defining a new route and calling <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>res.render</span> with the
template name. The .hbs file extension can be left off. The second argument
is an object that contains all the variables the template should have access to
when rendering. This is where values are provided for <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>title</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>name</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>get</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>''</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>res</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>render</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'index'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>title</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'My
title'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#666666'>,</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>name</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Andrew
Mead'</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="http://handlebarsjs.com/"><span style='color:#4F81BC;
text-decoration:none'>Handlebars documentation</span></a><a
href="http://handlebarsjs.com/"><span style='color:black;text-decoration:none'>
</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://www.npmjs.com/package/hbs"><span style='color:#4F81BC;
text-decoration:none'>npm: hbs</span></a><a
href="https://www.npmjs.com/package/hbs"><span style='color:black;text-decoration:
none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222439">Lesson 7: Customizing the
Views Directory </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to customize the
name and location of the views directory. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Customizing the
Views Directory </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in;line-height:92%'>You can customize the location of the
views directory by providing Express with the new path. Call <sub><span
style='font-size:17.0pt;line-height:92%;font-family:Consolas;background:#FAFAFA'>app.set</span></sub>
to set a new value for the <sub><span style='font-size:17.0pt;line-height:92%;
font-family:Consolas;color:#406F9F;background:#FAFAFA'>'views'</span></sub> option.
The example below configures Express to look for views in <sub><span
style='font-size:17.0pt;line-height:92%;font-family:Consolas;background:#FAFAFA'>templates/views/</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
23.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> viewsPath </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>path</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>join</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(__dirname</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'../templates/views'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>app</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>set</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'views'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> viewsPath)</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222440">Lesson 8: Advanced Templating
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to work with
Handlerbars partials. As the name suggests, partials are just part of a web
page. Partials are great for things you need to show on multiple pages like
headers, footers, and navigation bars. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting up
Partials </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>You can use partials by telling Handlebars where youd
like to store them. This is done with a call to <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>hbs.registerPartials</span></sub>.
It expects to get called with the absolute path to the partials directory. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> hbs </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'hbs'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Other lines hidden for brevity</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> partialsPath </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>path</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>join</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(__dirname</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'../templates/partials'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>hbs</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>registerPartials</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(partialsPath)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
20.4pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Other lines hidden for brevity</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Using Partials </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Partials are created with the hbs file extension.
Partials have access to all the same features as your Handlebars templates. The
header partial below renders the title followed by a list of navigation links
which can be shown at the top of every page. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>{{!-- header.hbs --}} </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;h1&gt;{{title}}&lt;/h1&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;div&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;a href=&quot;/&quot;&gt;Weather&lt;/a&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;a href=&quot;/about&quot;&gt;About&lt;/a&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;a href=&quot;/help&quot;&gt;Help&lt;/a&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.9pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/div&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.95pt;margin-left:.2in;line-height:90%'>The partial can then be rendered on a
page using <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
color:#901F00;background:#FAFAFA'>{{&gt;header}}</span></sub> where header
comes from the partial file name. If the partial was <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>footer.hbs</span></sub>,
it could be rendered using </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:30.5pt;
margin-left:14.65pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#901F00;background:#FAFAFA'>{{&gt;footer}}</span>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;!DOCTYPE html&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;html&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;head&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;link rel=&quot;stylesheet&quot;
href=&quot;/css/styles.css&quot;&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    &lt;script src=&quot;/js/app.js&quot;&gt;&lt;/script&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/head&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;body&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>    {{&gt;header}} </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/body&gt; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:22.9pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-family:
Consolas'>&lt;/html&gt; </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222441">Lesson 9: 404 Pages </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to set up a 404
page. The 404 page will show when a user tries to visit a page that doesnt
exist. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting up a 404
Page </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Express has support for <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>*</span></sub>
in route paths. This is a special character which matches anything. This can be
used to create a route handler that matches all requests. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The 404 page should be set up just before the call to
<sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>app.listen</span></sub>. This ensures that requests for
valid pages still get the correct response. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:99.2pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:99.2pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:300.85pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'*'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>render</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'404'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>title</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'404'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew
  Mead'</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#666666'>,</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>errorMessage</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Page
  not found.'</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222442">Lesson 10: Styling the
Application: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add some styles to the weather
application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:.2in;line-height:156%'>There are no notes for this styling
video, as no new Node.js features are covered. </p>

<h2 style='margin-top:0in;margin-right:15.7pt;margin-bottom:0in;margin-left:
.2in;line-height:156%'><a name="_Toc222443">Lesson 11: Styling the Application:
Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll finish styling the weather
application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
40.95pt;margin-left:.2in'>There are no notes for this styling video, as no new
Node.js features are covered. </p>

<h1 style='margin-left:.2in'><a name="_Toc222444">Section 7: Accessing API from
Browser </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222445">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>In this section, youll learn how to set up
communication between the client and the server. This will be done via HTTP
requests. By the end of the section, users will be able to type an address in
the browser to view their forecast. </p>

<h2 style='margin-left:.2in'><a name="_Toc222446">Lesson 2: The Query String </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use query strings
to pass data from the client to the server. This will be used to send the
address from the browser to Node.js. Node.js will then be able to fetch the
weather for the address and send the forecast back to the browser. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Working with
Query Strings </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The query string is a portion of the URL that allows
you to provide additional information to the server. For the weather
application, the query string will be used to pass the address from the browser
to the Node.js Express application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.35pt;margin-left:.2in;line-height:92%'>The query string comes after <sub><span
style='font-size:17.0pt;line-height:92%;font-family:Consolas;background:#FAFAFA'>?</span></sub>
in the URL. The example URL below uses the query string to set <sub><span
style='font-size:17.0pt;line-height:92%;font-family:Consolas;background:#FAFAFA'>address</span></sub>
equal to <sub><span style='font-size:17.0pt;line-height:92%;font-family:Consolas;
background:#FAFAFA'>boston</span></sub>. The key/value pair is separated by <sub><span
style='font-size:17.0pt;line-height:92%;font-family:Consolas;background:#FAFAFA'>=</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>http://localhost:3000/weather?address=boston</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>Below is one more example where two key/value pairs
are set up. The key/value pairs are separated by <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;color:#006F1F;background:#FAFAFA'>&amp;</span>.
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:
#FAFAFA'>address</span> equals <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>philadelphia</span> and <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>units</span>
equals <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>us</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>http://localhost:3000/weather?address=philadelphia</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&amp;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>units=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>us</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.45pt;margin-left:.2in'>The Express route handler can access the query string
key/value pairs on <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>req.query</span></sub>. The handler
below uses <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>req.query.address</span> to get the value provided for <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>address</span>.
This address can then be used to fetch the weather information. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.6pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>get</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/weather'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.6pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
All query string key/value pairs are on req.query</span><span style='font-family:
Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.6pt;margin-bottom:
20.1pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'You
provided &quot;'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>+</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>address</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>+</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'&quot;
as the address.)</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="http://expressjs.com/en/4x/api.html#req.query"><span style='color:#4F81BC;
text-decoration:none'>express </span></a><a
href="http://expressjs.com/en/4x/api.html#req.query"><span style='color:#4F81BC;
text-decoration:none'>- </span></a><a
href="http://expressjs.com/en/4x/api.html#req.query"><span style='color:#4F81BC;
text-decoration:none'>req.query</span></a><a
href="http://expressjs.com/en/4x/api.html#req.query"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222447">Lesson 3: Building a JSON
HTTP Endpoint </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>The weather application already has the code in place
to fetch the weather for a given address. In this lesson, its your job to wire
up the route handler to fetch the weather and send it back to the browser. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222448">Lesson 4: ES6 Aside: Default
Function Parameters </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>ES6 provides a new syntax to set default values for
function arguments. In this lesson, youll use this new syntax to improve and
clean up the application code. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Default Function
Parameters </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Function parameters are <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>undefined</span></sub>
unless an argument value is provided when the function is called. ES6 now
allows function parameters to be configured with a custom default value. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
24.75pt;margin-left:.2in'>You can see this in action for the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>greeter</span></sub>
function below. <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>name</span></sub> will be <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#406F9F;
background:#FAFAFA'>'user'</span></sub> if no value is provided. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>age</span></sub>
will be <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>undefined</span></sub> if no value is provided. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:211.55pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> greeter </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (name </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'user'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> age) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Hello
'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>+</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> name)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:211.55pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'>  </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#7C9029'>greeter</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas'>(</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Will print: Hello Andrew</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:211.55pt;margin-bottom:
20.75pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#7C9029'>greeter</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas'>() </span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// Will print: Hello
user</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.6pt;margin-left:.2in'>This syntax can also be used to provide default values
when using ES6 destructuring. The <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>transaction</span> function below
shows this off by providing a default value for <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>stock</span></sub>.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:74.5pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:74.5pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:10.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> transaction </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> label</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> stock </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> label</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> stock)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>transaction</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'order'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters"><span
style='color:#4F81BC;text-decoration:none'>mdn: default function parameters</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222449">Lesson 5: Browser HTTP
Requests with Fetch </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to make HTTP AJAX
requests from the browser. This will allow the web application to request the
forecast from the Node.js server. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>The Fetch API </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Web APIs provide you with a way to make HTTP requests
from JavaScript in the browser. This is done using the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>fetch</span></sub>
function. <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>fetch</span></sub> expects to be called with the URL as the
first argument. It sends off the HTTP request and gives you back the response. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>fetch</span></sub> call below is
used to fetch the weather for Boston. An if statement is then used to either
print the forecast or the error message. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:137.8pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:137.8pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:22.65pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>fetch</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'http://localhost:3000/weather?address=Boston'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((response) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>     </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>json</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>().</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((data) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>         </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>             </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:203.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>         </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>else</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>             </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>             </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>forecast</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>         </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>     </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><span
style='color:#4F81BC;text-decoration:none'>Fetch API</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="https://developers.google.com/web/updates/2015/03/introduction-to-fetch"><span
style='color:#4F81BC;text-decoration:none'>Fetch Tutorial</span></a><a
href="https://developers.google.com/web/updates/2015/03/introduction-to-fetch"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222450">Lesson 6: Creating a Search
Form </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up the weather search
form. This will allow a visitor to type in their address, click a button, and
then see their real-time forecast information. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>The Search Form </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.55pt;margin-left:.2in'>Below is an example HTML form. It contains a text
input and a button which can be used to submit the form. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;form&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;input
placeholder=</span><span style='font-size:11.0pt;line-height:107%;font-family:
Consolas;color:#406F9F'>&quot;Location&quot;</span><span style='font-size:11.0pt;
line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;button&gt;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>Search</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/button&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.2pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/form&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>Using client-side JavaScript, you can set up an event
listener that will allow you to run some code when the form is submitted. What
should that code do? It should grab the address from the text field, send off
an HTTP request to the Node server for the data, and then render the weather
data to the screen. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>For the moment, the data is logged to the console.
Thatll get fixed in the next lesson. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:270.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:270.1pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:130.95pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> weatherForm </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'form'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> search </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'input'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:185.9pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:98%'><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>weatherForm</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>addEventListener</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'submit'</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> (e) </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#18167B'>e</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>preventDefault</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> location </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>search</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>value</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:155.7pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>fetch</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'http://localhost:3000/weather?address='</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> location).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((response) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>json</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>().</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((data) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>               
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#18167B'>console</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#7C9029'>log</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:185.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>else</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>                </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>location</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>                </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>data</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>forecast</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222451">Lesson 7: Wiring up the User
Interface </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to manipulate the
text content of HTML elements from JavaScript. That will allow the weather
application to render the forecast data to the browser instead of the console. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Rendering
Dynamic textContent </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>Set up HTML elements for the messages you want to
render. Below is an example paragraph which can be used to render some text
from JavaScript. It contains no text by default. It will be updated to show
some text as the client-side JavaScript runs. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&lt;p
id=</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#406F9F'>&quot;message-1&quot;</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'>&gt;&lt;/p&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The code below can be used to change the text content
of the paragraph. First up, <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>document.querySelector</span> is used
to target the element. Its used with <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;color:#5F9FAF;background:#FAFAFA'>#</span>, which
searches for elements by their ID. The text content can be updated by setting a
value on the <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>textContent</span></sub> property. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
42.45pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> messageOne </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>document</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>querySelector</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'#message-1'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>messageOne</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>textContent</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'My
new text'</span><span style='font-family:Consolas'> </span></p>

<h1 style='margin-left:.2in'><a name="_Toc222452">Section 7: Application
Deployment </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222453">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>In this section, youll learn how to deploy your
Node.js applications to production. This will allow anyone with an internet
connection to view and interact with your Node.js app. Along the way, youll
learn how to use Git, GitHub, Heroku, and more! </p>

<h2 style='margin-left:.2in'><a name="_Toc222454">Lesson 2: Joining Heroku and
GitHub </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll join GitHub and Heroku. GitHub
is a development platform that makes it easy to manage software development
projects. Heroku is an application deployment platform which provides
everything needed to deploy your Node.js applications. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Joining Heroku
and GitHub </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.6pt;margin-left:.2in'>Make sure to sign up for an account with both GitHub
and Heroku. From there, install the <a
href="https://devcenter.heroku.com/articles/heroku-cli"><span style='color:
#4F81BC;text-decoration:none'>Heroku CLI</span></a><a
href="https://devcenter.heroku.com/articles/heroku-cli"><span style='color:
black;text-decoration:none'>.</span></a> After running the installer, you can
confirm the Heroku CLI was installed correctly by running <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>heroku
-v</span></sub> to print the installed version. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>The Heroku CLI gives you commands to deploy and
manage your Node.js applications. Before you can do that, youll need to log in
to your Heroku account. This makes sure that the command you run actually
changes your Heroku applications. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>heroku login</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://www.github.com/"><span style='color:#4F81BC;text-decoration:
none'>GitHub</span></a><a href="https://www.github.com/"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://www.heroku.com/"><span style='color:#4F81BC;text-decoration:
none'>Heroku</span></a><a href="https://www.heroku.com/"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://devcenter.heroku.com/articles/heroku-cli"><span
style='color:#4F81BC;text-decoration:none'>Heroku CLI download</span></a><a
href="https://devcenter.heroku.com/articles/heroku-cli"><span style='color:
black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222455">Lesson 3: Version Control
with Git </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn about version control.
Version control allows you to track changes to your project code over time.
This makes it easy to recover lost code and restore your project to a
previously working version. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Version Control
with Git </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>Version control lets you track changes to your
application code over time. Its an important tool, and it should be used for
all personal and professional projects. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>Imagine you have an application with 250 paying users.
You just finished work on a great new feature and you deploy it to production
so your customers can use it. Hours later, you discover a bug thats preventing
users from using the application. What do you do next? </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>Without version control, youre in trouble. The only
version of your app is the one you have on your machine. The buggy application
thats crashing for your users. You have no way of getting back to the old
version of your app that was working. Users are stuck with a broken application
until you can fix the bug and get a new version of the app deployed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>With version control, youre in the clear. You can
revert back to your applications previous working state and deploy that. This
means that users can continue to use the original version while you can take a
breath and get back to working on that new feature until its ready. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can grab the Git installer from <a
href="https://git-scm.com/"><span style='color:#4F81BC;text-decoration:none'>git</span></a><a
href="https://git-scm.com/"><span style='color:#4F81BC;text-decoration:none'>-</span></a><a
href="https://git-scm.com/"><span style='color:#4F81BC;text-decoration:none'>scm.com</span></a><a
href="https://git-scm.com/"><span style='color:black;text-decoration:none'>.</span></a>
After installing Git, run <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;color:#06287D;background:#FAFAFA'>git</span></sub><sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>
--version</span></sub> to print the version of Git installed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://git-scm.com/"><span style='color:#4F81BC;text-decoration:none'>Git</span></a><a
href="https://git-scm.com/"><span style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222456">Lesson 4: Exploring Git </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>Git is not the easiest tool in the world to get started
with. In this lesson, youll explore how Git works and how it can help you keep
track of code changes. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>This lesson contains a detailed presentation. Please
refer to the video for a recap of how Git works. </p>

<h2 style='margin-left:.2in'><a name="_Toc222457">Lesson 5: Integrating Git </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Its time to start using Git. In this lesson, youll
learn how to set up Git in your project. Youll also explore the commands
needed to get Git tracking your code. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Initializing Git
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Git needs to be initialized in your project before it
can be used. You can initialize Git in your project by running <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#06287D;
background:#FAFAFA'>git</span></sub><sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'> init</span></sub>
from the root of the project. All Git commands should be run from the root of
the project. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.45pt;margin-left:.2in'>Before going any further, Git needs to be configured
to ignore this <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>node_modules</span></sub> folder. This is a
generated directory which doesnt need to be under version control. You can
always regenerate <span style='font-size:11.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>node_modules</span> by running <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>npm
install</span>. Create a <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>.gitignore</span> file with the
following line to ignore the folder. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>node_modules/</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Committing
Changes </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Think of a commit as a save point. A commit lets you
create a save point that contains your project files exactly as they were when
the commit was created. Youll create new commits to track your changes as you
continue to build out your application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Before creating a commit, its a good idea to run <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#06287D;
background:#FAFAFA'>git</span></sub><sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'> status</span></sub>
to get a summary of the changes that are about to be committed. This will show
untracked files, unstaged changes, and staged files. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>Using <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;color:#06287D;background:#FAFAFA'>git</span><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>
add </span><span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
color:#666666;background:#FAFAFA'>&lt;</span><span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>path to file</span><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;color:#666666;
background:#FAFAFA'>&gt;</span>, you can add files to the staging area. Changes
to files in the staging area will be included in the next commit. The shortcut
below adds all untracked files and unstaged changes to the staging area. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>git</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> add .</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>You can now use the <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>git</span></sub><sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>
commit</span></sub> command to create a commit. Each commit requires a commit
message. The command below creates a commit and provides Initial commit as
the commit message. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>git</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> commit -m </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;Initial
commit&quot;</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>From here, you can continue to add new features to
the project and use the git commands to create new commits. </p>

<h2 style='margin-left:.2in'><a name="_Toc222458">Lesson 6: Setting up SSH Keys
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be setting up SSH on your
machine. SSH is the protocol used to securely transfer code between your
machine and GitHub/Heroku. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Creating SSH
Keys </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>Windows users wont have access to the necessary SSH
commands from the command prompt. Make sure to use Git Bash for the following
commands. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>SSH uses an SSH key pair to secure the connection
between your machine and the machine youre communicating with. You can check
if you already have an SSH key pair with the following command. You have a key
pair if you see <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>id_rsa</span></sub> and <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>id_rsa.pub</span></sub>
in the output. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>ls</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> -a -l ~/.ssh</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>You can create a new key pair using the following
command. Make sure to swap out the email for your email address. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>ssh-keygen</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> -t rsa -b 4096
-C </span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#406F9F'>&quot;youremail@domain.com&quot;</span><span style='font-family:
Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>The SSH key needs to be configured to be used for new
SSH connections. First, ensure that the SSH agent is running. You can do that
using the command below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.25pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>eval </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>$(</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#06287D'>ssh-agent</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> -s</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>)</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>Next, add the new SSH private key file to the SSH
agent. The following command is for macOS users. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>ssh-add</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> -K
~/.ssh/id_rsa</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The command below is for Linux users and Windows
users. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
23.5pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>ssh-add</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> ~/.ssh/id_rsa</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222459">Lesson 7: Pushing Code to
GitHub </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to push your code to
GitHub. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Configuring SSH
with GitHub </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In the last lesson, you generated the SSH key pair.
The files were <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>id_rsa</span></sub> and <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>id_rsa.pub</span></sub>.
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:
#FAFAFA'>id_rsa</span> is a private key file which should be kept secret. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>id_rsa.pub</span></sub>
is a public key file which should be shared with the services you plan to
communicate with. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>The command below will allow you to dump the contents
of the public key file to the terminal. Copy and paste the contents to the clip
board and register the SSH key with GitHub <span style='color:#4F81BC'>here</span>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>cat</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>
~/.ssh/id_rsa.pub</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Pushing Your
Code to GitHub </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You need to create a new GitHub repository before
youll be able to push your code. This is a remote Git repository thatll live
on the GitHub server. A remote repository is nothing more than a version of
your project hosted somewhere else. In this case, its a version of your
project stored on GitHub. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.7pt;margin-left:.2in;line-height:90%'>Once the repository is created, youll
need to set up the origin remote. Replace <sub><span style='font-size:17.0pt;
line-height:90%;font-family:Consolas;color:#666666;background:#FAFAFA'>&lt;</span></sub><sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>repo</span></sub><sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas'> </span></sub><span
style='font-size:11.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>url</span><sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;color:#666666;
background:#FAFAFA'>&gt;</span></sub> with the repository URL provided by
GitHub. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>git</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> remote add
origin </span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#666666'>&lt;</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>repo url</span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>&gt;</span><span style='font-family:
Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>You can now push your latest commits to the remote!
After pushing your commits, refresh the GitHub repository page in your browser
to see your project files and folder appear. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
23.5pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#06287D'>git</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> push -u origin
master</span><span style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222460">Lesson 8: Deploying Node.js
to Heroku </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll deploy your application to
Heroku. Anyone with an internet connection will be able to access and use your
application! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Preparing Your
Application </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Heroku makes it easy to deploy your application to
Node.js, but it does require a few small changes. First, Heroku needs to know
what command to run to start your app. Second, Heroku requires your app to
listen on a specific port. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in;line-height:92%'>The <sub><span style='font-size:17.0pt;
line-height:92%;font-family:Consolas;background:#FAFAFA'>start</span></sub>
script in <sub><span style='font-size:17.0pt;line-height:92%;font-family:Consolas;
background:#FAFAFA'>package.json</span></sub> is used to tell Heroku which
command to run. Set <sub><span style='font-size:17.0pt;line-height:92%;
font-family:Consolas;background:#FAFAFA'>start</span></sub> equal to <sub><span
style='font-size:17.0pt;line-height:92%;font-family:Consolas;background:#FAFAFA'>node
src/app.js</span></sub> to ensure that Heroku can start your app up correctly. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Heroku uses an environment variable to provide the
port value you need to listen on. The code below accesses the Heroku port value
and uses it to start up the server. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.7pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> port </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>process</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>env</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>PORT</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>||</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>3000</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.7pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.7pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>listen</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(port</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> () </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:68.7pt;margin-bottom:
20.1pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>console</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Server
is up on port '</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>+</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> port)</span><span style='font-family:
Consolas'> </span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas;color:#666666'>}</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Deploying Your
Application </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
11.8pt;margin-left:.2in'>Run <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>heroku create</span></sub> from
your application root to create a new application. This will create the new
application and set up a new <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>heroku</span></sub> Git remote.
Push your code to that remote to deploy the application! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
13.95pt;margin-left:.2in'>You can run <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>git</span><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>
pus heroku master</span> to deploy. From there, run <span style='font-size:
11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>heroku open</span>
to open your application in the browser. </p>

<h2 style='margin-left:.2in'><a name="_Toc222461">Lesson 9: New Feature
Deployment Workflow </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll go through the process of adding
a new feature to the application. This includes committing the changes, pushing
them to GitHub, and deploying them to Heroku. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222462">Lesson 10: Avoiding Global
Modules </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll refactor your application to
remove the use of global modules. This ensures that your application installs
all the dependencies you need to run. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Replacing Global
Modules with Local Modules </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Sick of typing out that long nodemon command? Me too.
Lets turn it into a script. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.45pt;margin-left:.2in'>You can create a <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>dev</span> script
with the value <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>nodemon src/app.js -e js,hbs</span>. This will start up the
dev server anytime you run <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>npm run dev</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
29.0pt;margin-left:.2in'>The dev script needs nodemon to be installed. The
issue is that nodemon isnt listed as a dependency in <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>package.json</span></sub>.
However, this can be fixed by uninstalling nodemon globally. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm uninstall -g
nodemon</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>Now, install it as a local dependency. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm install
nodemon</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
40.7pt;margin-left:.2in'>Now, <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>npm install</span></sub> will be
able to install all your application dependencies, including nodemon! </p>

<h1 style='margin-left:.2in'><a name="_Toc222463">Section 10: MongoDB and
Promises </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222464">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>In this section, youll learn how to connect to a
MongoDB database from your Node.js application. This will allow your
application to store data in a secure and reliable fashion. The task
application will use MongoDB to store user accounts as well as tasks. </p>

<h2 style='margin-left:.2in'><a name="_Toc222465">Lesson 2: MongoDB and NoSQL
Databases </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>In this lesson, youll explore NoSQL databases and
MongoDB. MongoDB and NoSQL database are a bit different than traditional SQL
databases such as MySQL, so this lesson will bring you up to speed on some key
ideas and terminologies related to NoSQL. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>This lesson contains a detailed presentation. Please
refer to the video for a recap of NoSQL and MongoDB. </p>

<h2 style='margin-left:.2in'><a name="_Toc222466">Lesson 3: Installing MongoDB
on macOS and Linux </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.5pt;margin-left:.2in'>In this lesson, youll learn how to install MongoDB on
macOS and Linux. Using Windows? </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Thats covered in the next lesson. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.6pt;margin-left:.2in'>You can download the MongoDB Community Server from the <a
href="https://www.mongodb.com/download-center/community"><span
style='color:#4F81BC;text-decoration:none'>MongoDB download page</span></a><a
href="https://www.mongodb.com/download-center/community"><span
style='color:black;text-decoration:none'>.</span></a> </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>The download is a zip file. Unzip the contents, change
the folder name to mongodb, and move it to your users home directory. From
there, create a mongodb-data directory in your user directory to store the
database data. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>You can start the server using the following command.
Make sure to swap out /Users/Andrew/ with the correct path to your users home
directory. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>/Users/Andrew/mongodb/bin/mongod
--dbpath=/Users/Andrew/mongodb-data</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://www.mongodb.com/download-center/community"><span
style='color:#4F81BC;text-decoration:none'>MongoDB download page</span></a><a
href="https://www.mongodb.com/download-center/community"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222467">Lesson 4: Installing MongoDB
on Windows </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>In this lesson, youll learn how to install MongoDB on
Windows. Using macOS or Linux? They were covered in the previous lesson. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.5pt;margin-left:.2in'>You can download the MongoDB Community Server from the <a
href="https://www.mongodb.com/download-center/community"><span
style='color:#4F81BC;text-decoration:none'>MongoDB download page</span></a><a
href="https://www.mongodb.com/download-center/community"><span
style='color:black;text-decoration:none'>.</span></a> </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>The download is a zip file. Unzip the contents, change
the folder name to mongodb, and move it to your users home directory. From
there, create a mongodb-data directory in your user directory to store the
database data. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>You can start the server using the following command.
Make sure to swap out /Users/Andrew/ with the correct path to your users home
directory. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>/Users/Andrew/mongodb/bin/mongod
--dbpath=/Users/Andrew/mongodb-data</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://www.mongodb.com/download-center/community"><span
style='color:#4F81BC;text-decoration:none'>MongoDB download page</span></a><a
href="https://www.mongodb.com/download-center/community"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222468">Lesson 5: Installing Database
GUI Viewer </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll set up Robo 3T. Robo 3T is a
MongoDB admin tool that makes it easy to manage and visualize the data in your
database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Robo 3T is a completely free MongoDB admin tool. Grab
the installer from <a href="https://robomongo.org/"><span style='color:#4F81BC;
text-decoration:none'>here</span></a><a href="https://robomongo.org/"><span
style='color:black;text-decoration:none'> </span></a>and get it installed on
your machine. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://robomongo.org/"><span style='color:#4F81BC;text-decoration:none'>Robo
3T download page</span></a><a href="https://robomongo.org/"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222469">Lesson 6: Connecting and
Inserting Documents </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be connecting to your MongoDB
database from your Node.js application. Youll also learn how to insert
documents into the database to save them for later. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Connecting to
MongoDB </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>MongoDB provides a native driver that allows you to
connect to your database from Node. You can grab the driver by installing the
mongodb npm module as shown below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
mongodb@3.1.10</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>With the driver installed, you can use the following
code to connect to the database. You just need to provide two pieces of
information. The first is the connection URL and the second is the name of the
database. You can pick any database name that you like. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:219.7pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 4.25pt 2.3pt 8.0pt;height:219.7pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:229.25pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> mongodb </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'mongodb'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> MongoClient </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongodb</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>MongoClient</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:175.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> connectionURL </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'mongodb://127.0.0.1:27017'</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> databaseName </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'task-manager'</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>MongoClient</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>connect</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(connectionURL</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>useNewUrlParser</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> client) </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:108.8pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'Unable
  to connect to database!'</span><span style='font-size:11.0pt;line-height:
  99%;font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> db </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>client</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>db</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(databaseName)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas'>    </span><span style='font-family:
  Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:199.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Start to interact with the database</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#666666'>}</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Inserting a
Document </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
26.7pt;margin-left:.2in'>With the connection open, youre ready to insert
documents into the database. Remember that a database is made up of
collections, and collections are used to store documents. The code below
inserts a new document into the users collection. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>db.collection</span></sub>
is used to get a reference to the collection youre trying to manipulate. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>insertOne</span></sub>
is used to insert a new document into that collection. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:278.1pt;margin-bottom:
20.0pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>db</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>collection</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'users'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>insertOne</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>name</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>age</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>27</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.75pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://www.npmjs.com/package/mongodb"><span style='color:#4F81BC;
text-decoration:none'>npm: mongodb</span></a><a
href="https://www.npmjs.com/package/mongodb"><span style='color:black;
text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="http://mongodb.github.io/node-mongodb-native/3.1/api/"><span
style='color:#4F81BC;text-decoration:none'>MongDB driver documentation</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222470">Lesson 7: Inserting Documents
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore another way to insert
documents into collections. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Inserting
Documents </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>You already know that <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>insertOne</span></sub>
can be used to insert a single document. You can also use <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>insertMany</span></sub>
to insert multiple documents at once. The example below inserts two documents
into tasks collection. <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>insertMany</span></sub> expects an
array of objects, an array of the documents you want to insert. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:203.35pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:203.35pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>db</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>collection</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>insertMany</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>([</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:167.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>description</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Clean
  the house'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>completed</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:161.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>description</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Renew
  inspection'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>,</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>completed</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>false</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:312.45pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>]</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> result) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:149.65pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Unable
  to insert tasks!'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>result</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>ops</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#insertOne"><span
style='color:#4F81BC;text-decoration:none'>insertOne</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#insertOne"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#insertMany"><span
style='color:#4F81BC;text-decoration:none'>insertMany</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#insertMany"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222471">Lesson 8: The ObjectID </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn about ObjectIDs. MongoDB
uses ObjectIDs to create unique identifiers for all the documents in the
database. Its different than the traditional autoincrementing integer ID, but
it comes with its own set of advantages. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Working with
ObjectIDs </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>MongoDB provides <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>ObjectID</span></sub>
which can be used to generate new ObjectIDs. The example below generates a new
ID and prints it to the console. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:169.25pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> MongoClient</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> ObjectID </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'mongodb'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> id </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>ObjectID</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(id) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#5F9FAF'>//
Print new id to the console </span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>An ObjectID is a GUID (Globally Unique Identifier).
GUIDs are generated randomly via an algorithm to ensure uniqueness. These IDs
can be generated on the server, but as seen in the snippet above, they can be
generated on the client as well. That means a client can generate the ID for a
document its about to insert in to the database. </p>

<h2 style='margin-left:.2in'><a name="_Toc222472">Lesson 9: Querying Documents </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to read data from
MongoDB. This will allow you to fetch the documents that you had previously
inserted. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Finding
Documents </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.55pt;margin-left:.2in;line-height:90%'>You can search for documents in a
given collection using <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;color:#06287D;background:#FAFAFA'>find</span></sub> or <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>findOne</span></sub>.
<sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>find</span></sub> can be used to fetch
multiple documents, while <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;background:#FAFAFA'>findOne</span></sub> can be used to
fetch a single document. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in;line-height:90%'>The example below uses <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;color:#06287D;
background:#FAFAFA'>find</span></sub> to search for documents in the tasks
collection. You can provide an object as the first argument to <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;color:#06287D;
background:#FAFAFA'>find</span></sub> to filter the documents. The example
below sets <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>completed</span></sub> equal to <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;color:#06287D;
background:#FAFAFA'>false</span></sub> to fetch only those tasks that havent
been completed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.25in;margin-bottom:21.15pt;
margin-left:14.65pt;text-align:justify;text-justify:inter-ideograph;text-indent:
0in;line-height:97%;background:#FAFAFA'><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#18167B'>db</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>collection</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>find</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>completed</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>false</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>toArray</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((error</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> tasks) </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(tasks)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.25pt;margin-left:.2in'>The next example uses <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>findOne</span></sub>
to find a single document by its ID. In this case, its necessary to pass the
string version of the ID to the <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>ObjectID</span></sub> constructor
function to convert it to an ObjectID. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:78.1pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>db</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>collection</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>findOne</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>_id</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:78.1pt;margin-bottom:
20.0pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>ObjectID</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;5c0fec243ef6bdfbe1d62e2f&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>},</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (error</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> task) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(task)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.85pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#find"><span
style='color:#4F81BC;text-decoration:none'>find</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#find"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#findOne"><span
style='color:#4F81BC;text-decoration:none'>findOne</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#findOne"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222473">Lesson 10: Promises </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>In this lesson, youll learn how to work with promises.
Promises provide a much needed alternative to the traditional callback pattern.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:164.7pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:164.7pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:107.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> doWorkPromise </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Promise</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((resolve</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> reject) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>setTimeout</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(() </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>resolve</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>([</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>7</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>4</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>1</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>])</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  reject('Things went wrong!')</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>2000</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:130.95pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>doWorkPromise</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((result) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Success!'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> result)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((error) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:257.95pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Error!'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> error)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222474">Lesson 11: Updating Documents
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to update documents
stored in MongoDB. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:9.05pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Updating
Documents </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can update documents in a collection using <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>updateOne</span>
or <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>updateMany</span>. The first argument for both <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>updateOne</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>updateMany</span></sub> is similar to the first argument
used with <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>find</span> or <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>findOne</span></sub>.
Its an object that allows you to filter down all the documents to just the
ones you want to update. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The update calls require a second argument as well.
This is an object where you define the updates you want to make. For this, you
need to use one of the supported <a
href="https://docs.mongodb.com/manual/reference/operator/update/#id1"><span
style='color:#4F81BC;text-decoration:none'>update </span></a><a
href="https://docs.mongodb.com/manual/reference/operator/update/#id1"><span
style='color:#4F81BC;text-decoration:none'>operators</span></a><a
href="https://docs.mongodb.com/manual/reference/operator/update/#id1"><span
style='color:black;text-decoration:none'>.</span></a> </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>updateOne</span></sub> call below
uses <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#18167B;background:#FAFAFA'>$inc</span></sub> to increment the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>age</span></sub>
field on the targeted document by 1. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:150.65pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.15pt 8.0pt;height:150.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>db</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>collection</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'users'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>updateOne</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>_id</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>ObjectID</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;5c0fe6634362c1fb75b9d6b5&quot;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:385.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>$inc</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>1</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:227.7pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><img width=178 height=1
  src="Node.js%20Dev%20Course_files/image003.gif" align=left hspace=12><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((result) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(result)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:133.1pt;text-indent:0in;line-height:107%'><span style='font-family:
  Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.65pt;margin-left:.2in'>The <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>updateMany</span> call below uses <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;color:#18167B;
background:#FAFAFA'>$set</span> to set the <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>completed</span>
field to <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>true</span> for all documents where the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>completed</span></sub>
field is currently <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;color:#06287D;background:#FAFAFA'>false</span></sub>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:137.8pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.45pt 8.0pt;height:137.8pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:191.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>db</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>collection</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>updateMany</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>completed</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>false</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:379.45pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>$set</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>completed</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((result) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>result</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>modifiedCount</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:203.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((error) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(error)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#updateOne"><span
style='color:#4F81BC;text-decoration:none'>updateOne</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#updateOne"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#updateMany"><span
style='color:#4F81BC;text-decoration:none'>updateMany</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#updateMany"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://docs.mongodb.com/manual/reference/operator/update/#id1"><span
style='color:#4F81BC;text-decoration:none'>Update operators</span></a><a
href="https://docs.mongodb.com/manual/reference/operator/update/#id1"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222475">Lesson 12: Deleting Documents
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to delete documents
stored in MongoDB. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Deleting
Documents </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can delete documents from MongoDB using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>deleteOne</span></sub>
or <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>deleteMany</span></sub>. Both accept an object as the first
argument. This object is used to filter just the documents you want to delete. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.6pt;margin-left:.2in'>The example below uses <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>deleteMany</span></sub>
to delete all users whose <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>age</span></sub> field is <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>27</span></sub>.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:99.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.15pt 8.0pt;height:99.1pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:227.8pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>db</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>collection</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'users'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>deleteMany</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>27</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:227.7pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><img width=178 height=1
  src="Node.js%20Dev%20Course_files/image004.gif" align=left hspace=12><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((result) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(result)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:133.1pt;text-indent:0in;line-height:107%'><span style='font-family:
  Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.8pt;margin-left:.2in'>This next example uses <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>deleteOne</span></sub>
to delete a single document, the first one with a <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>description</span> of
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;color:#406F9F;
background:#FAFAFA'>&quot;Clean the house&quot;</span>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:99.2pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.2pt 8.0pt;height:99.2pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:185.4pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>db</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>collection</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>deleteOne</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>description</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>&quot;Clean
  the house&quot;</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:221.75pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((result) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(result)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
  width=178 height=1 src="Node.js%20Dev%20Course_files/image005.gif"
  align=left hspace=12><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>).</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((error) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:133.1pt;text-indent:0in;line-height:107%'><span style='font-family:
  Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#deleteOne"><span
style='color:#4F81BC;text-decoration:none'>deleteOne</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#deleteOne"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#deleteMany"><span
style='color:#4F81BC;text-decoration:none'>deleteMany</span></a><a
href="http://mongodb.github.io/node-mongodb-native/3.1/api/Collection.html#deleteMany"><span
style='color:black;text-decoration:none'> </span></a></p>

<h1 style='margin-left:.2in'><a name="_Toc222476">Section 11: REST APIs and
Mongoose </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222477">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>In this section, youll be creating a REST API using
Express. Youll learn what exactly a REST API is and how it can be used as the
back-end for a web or mobile application. This section also covers data
validation, application architecture, async/await, and more. </p>

<h2 style='margin-left:.2in'><a name="_Toc222478">Lesson 2: Setting up Mongoose
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be setting up Mongoose.
Mongoose makes it easy to model and manage your application data. This includes
data sanitization, data validation, and more. Mongoose will serve as a
replacement for the native driver, providing you with a more object-oriented
interface. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting up
Mongoose </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>First up, install Mongoose. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
mongoose@5.3.16</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Like the MongoDB native driver, Mongoose provides a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>connect</span></sub>
function you can use to connect to your MongoDB database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> mongoose </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'mongoose'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>  </span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
20.0pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>mongoose</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>connect</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'mongodb://127.0.0.1:27017/task-manager-api'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>useNewUrlParser</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>true</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>useCreateIndex</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>true</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Modeling Your
Data </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The core feature of Mongoose is the ability to model
your data. A new model can be created for the different types of data your
application needs to store. You can create as many models as your application
needs. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>The code below defines a user model. The model
definition is where you define what makes up a user. This would include all the
pieces of data you want to store in the database. The user model below has just
two fields, a name and an age. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:111.95pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:111.95pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:209.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> User </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>model</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'User'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> String</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:403.15pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>age</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> Number</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
24.2pt;margin-left:.2in'>With the model defined, its time to start creating
and saving users. The <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>User</span></sub> variable above
stores the Mongoose model. This is a constructor function that can be used to
create new users. The snippet below creates a new user with the name <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#406F9F;
background:#FAFAFA'>'Andrew'</span></sub> and the age <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>27</span></sub>.
This alone wont save any data to the database, but its a step in the right
direction. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:356.75pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> me </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>User</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#901F00'>name</span><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#901F00'>age</span><span style='font-size:11.0pt;
line-height:107%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>27</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:107%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.4pt;margin-left:.2in'>The new model instance can be saved to the database
using the <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>save</span></sub> method. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:268.45pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>me</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>save</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>().</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>then</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(() </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(me)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>).</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>catch</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>((error) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:268.45pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>console</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Error!'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> error)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://mongoosejs.com/"><span style='color:#4F81BC;text-decoration:none'>Mongoose</span></a><a
href="https://mongoosejs.com/"><span style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222479">Lesson 3: Creating a Mongoose
Model </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to define a second
Mongoose model for tasks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222480">Lesson 4: Data Validation and
Sanitization: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up data validation and
sanitization for your models. Validation will allow you to restrict what data
can be stored in the database, while sanitization will allow you to store user
data in a uniform and standardized way. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Data Validation
and Sanitization </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>First up, install validator. While Mongoose provides
basic tools for performing validation, the validator library provides useful
methods for validating data such as email addresses, phone numbers, zip codes,
and more. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
validator@10.9.0</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Mongoose comes with support for basic validation and
sanitization. The user model below shows how this can be configured. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>required</span></sub>
is used to validate that a value is provided for a given field. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>trim</span></sub>
is used to remove extra spaces before or after data. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>lowercase</span></sub>
is used to convert the data to lowercase before saving it to the database. You
can find a complete list of options in the <a
href="https://mongoosejs.com/docs/schematypes.html"><span style='color:#4F81BC;
text-decoration:none'>schema documentation</span></a><a
href="https://mongoosejs.com/docs/schematypes.html"><span style='color:black;
text-decoration:none'>.</span></a> </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can also define custom validation for your
models. This is done using <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>validate</span></sub> as shown in the
example below. The method gets called with the value to validate, and it should
throw an error if the data is invalid. The example below uses the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>isEmail</span></sub>
method from validator to validate the email address is valid before saving it
to the database. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:280.6pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:280.6pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.6pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> mongoose </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'mongoose'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> validator </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'validator'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:246.4pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> User </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>model</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'User'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> String</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>required</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>trim</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:319.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>email</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> String</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>required</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>trim</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>lowercase</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>validate</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(value) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:161.75pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>validator</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>isEmail</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(value)) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>                </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>throw</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Email
  is invalid'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/validator"><span style='color:#4F81BC;
text-decoration:none'>npm: validator</span></a><a
href="https://www.npmjs.com/package/validator"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222481">Lesson 5: Data Validation and
Sanitization: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>In this lesson, its up to you to add validation and
sanitization to the task model. Youll also be defining a new field on the user
model with validation and sanitization of its own. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222482">Lesson 6: Structuring a REST
API </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>In this lesson, youll explore REST APIs. Youll learn
how to structure your API and how it can be used as the back-end for a web or
mobile application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>This lesson contains a detailed presentation. Please
refer to the video for a recap of how asynchronous programming works. </p>

<h2 style='margin-left:.2in'><a name="_Toc222483">Lesson 7: Installing Postman </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.25pt;margin-left:.2in'>In this lesson, youll set up Postman. Postman makes
it easy to test your REST API by providing you with a set of tools for making
HTTP requests. This is not meant to serve as a replacement for a web or mobile
application, its just a useful way to debug your endpoints as youre creating
them. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can grab Postman <a
href="https://www.getpostman.com/"><span style='color:#4F81BC;text-decoration:
none'>here</span></a><a href="https://www.getpostman.com/"><span
style='color:black;text-decoration:none'>.</span></a> Its free and available
for all operating systems. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.getpostman.com/"><span style='color:#4F81BC;text-decoration:
none'>Postman</span></a><a href="https://www.getpostman.com/"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222484">Lesson 8: Resource Creation
Endpoints: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to create REST API
endpoints for creating resources. This will allow users of the API to create
new users and new tasks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Resource
Creation Endpoints </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
1.9pt;margin-left:.2in'>Resource creation endpoints use the POST HTTP method.
The URL structure is </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>/resources</span>. If you wanted to
create a user, it would be <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>POST /users</span>. If you wanted to
create a task, it would be <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>POST /tasks</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The code below uses <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>app.post</span></sub>
to set up a POST request handler for <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>/users</span></sub>.
The handler function creates a new instance of the user model and saves it to
the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
24.65pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>express.json</span> is also setup to
parse incoming JSON into a JavaScript object which you can access on <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>req.body</span></sub>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>use</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>express</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>json</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>())</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>  </span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>post</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/users'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> user </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>User</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>body</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>save</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>().</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>then</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(() </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(user)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>).</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>catch</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>((e) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>status</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>400</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(e)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
23.35pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222485">Lesson 9: Resource Creation
Endpoints: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to set up a new endpoint
for creating tasks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222486">Lesson 10: Resource Reading
Endpoints: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to create REST API
endpoints for reading resources. This will allow users of the API to fetch
users and tasks from the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Resource Reading
Endpoints </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Resource reading endpoints use the GET HTTP method.
The URL structure is <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>/resources</span></sub> for a list of
resources and <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>/resources/:id</span></sub> for fetching an
individual resource by its ID. If you wanted to fetch all your tasks, it would
be <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>GET /tasks</span></sub>. If you wanted to fetch an
individual task with the ID of 198, it would be <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>GET /tasks/198</span>.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.5pt;margin-left:.2in'>The code below uses <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>app.get</span></sub>
to set up a GET request handler for <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>/users/:id</span></sub>.
<sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>:id</span></sub> serves as a placeholder for the ID of the
user to fetch. If the request is <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>GET /users/321</span></sub>, then
the ID will be 321. This is known as a URL parameter, and you can access the
value for URL parameters on <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>req.params</span>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:178.75pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:178.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'/users/:id'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:131.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> _id </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>params</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#5F9FAF'>//
  Access the id provided</span><span style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.65pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>findById</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(_id).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((user) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>user) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:209.6pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>404</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:337.15pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(user)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((e) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>500</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="http://expressjs.com/en/guide/routing.html#route-parameters"><span
style='color:#4F81BC;text-decoration:none'>Express route parameters</span></a><a
href="http://expressjs.com/en/guide/routing.html#route-parameters"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222487">Lesson 11: Resource Reading
Endpoints: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, its on you to create REST API
endpoints for fetching tasks out of the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222488">Lesson 12: Promise Chaining </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore promise chaining.
Promise chaining is a syntax that allows you to chain together multiple
asynchronous tasks in a specific order. This is great for complex code where
one asynchronous task needs to be performed after the completion of a different
asynchronous task. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Promise Chaining
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>To demonstrate promise chaining, the following
function will be used to simulate an asynchronous task. In reality, its just
adding up a couple of numbers, waiting two seconds, and fulfilling the promise
with the sum. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:151.85pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:151.85pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> add </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (a</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> b) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:2.75in;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Promise</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((resolve</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> reject) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>setTimeout</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(() </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (a </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>&lt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>||</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> b </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>&lt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:88.65pt;margin-bottom:
  .25pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>               
  </span><b><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#006F1F'>return</span></b><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas;color:#7C9029'>reject</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>(</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Numbers must be
  non-negative'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:312.9pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>            </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#7C9029'>resolve</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>(a </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> b)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>2000</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.55pt;margin-left:.2in;line-height:90%'>With the dummy asynchronous function
defined, promise chaining can be used to call <sub><span style='font-size:17.0pt;
line-height:90%;font-family:Consolas;background:#FAFAFA'>add</span></sub>
twice. The code below adds up <sub><span style='font-size:17.0pt;line-height:
90%;font-family:Consolas;background:#FAFAFA'>1</span></sub> and <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>2</span></sub>
for a total of <sub><span style='font-size:17.0pt;line-height:90%;font-family:
Consolas;background:#FAFAFA'>3</span></sub>. It then uses the sum of <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>3</span></sub>
as the input for another call to <sub><span style='font-size:17.0pt;line-height:
90%;font-family:Consolas;background:#FAFAFA'>add</span></sub>. The second call
to <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>add</span></sub> adds up <sub><span style='font-size:17.0pt;
line-height:90%;font-family:Consolas;background:#FAFAFA'>3</span></sub> and <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>4</span></sub>
for a total of <sub><span style='font-size:17.0pt;line-height:90%;font-family:
Consolas;background:#FAFAFA'>7</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Promise chaining occurs when the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#006F1F;
background:#FAFAFA'>then</span></sub> callback function returns a promise. This
allows you to chain on another <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;color:#006F1F;background:#FAFAFA'>then</span></sub>
call which will run when the second promise is fulfilled. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>catch</span></sub>
can still be called to handle any errors that might occur along the way. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:112.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.15pt 8.0pt;height:112.0pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>add</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>1</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>2</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((sum) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:245.85pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(sum)  </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Will print 3</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>add</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(sum</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>4</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((sum2) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(sum2) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Will print 7</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
  width=146 height=1 src="Node.js%20Dev%20Course_files/image006.gif"
  align=left hspace=12><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>).</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>((e) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:108.85pt;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222489">Lesson 13: Promise Chaining
Challenge </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to use promise chaining
to complete a programming challenge. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222490">Lesson 14: Async/Await </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use async and
await. These provide an improved syntax for working with promises. Youll be
able to write complex asynchronous code that looks like normal synchronous
code. This makes it much easier to write and maintain asynchronous code. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Exploring
Async/Await </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.05pt;margin-left:.2in'>The example below uses the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>add</span></sub>
function that was created two lessons ago. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The first step to using async and await is to create
an asynchronous function. This is done using the <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>async</span></sub>
keyword before the function definition. This can be seen in the definition of <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>doWork</span></sub>
below. Any function can be defined as an asynchronous function, not just arrow
functions. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>With an async function in place, you can now use the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>await</span></sub>
operator. The <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>await</span></sub> operator can only be used
inside of asynchronous functions. This removes the need for excess callbacks
and makes code much easier to read. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>await</span></sub> operator is
used with promises in asynchronous functions. You can see this used three times
in <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>doWork</span></sub>. The <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>await</span></sub>
operator allows you to work with promises in a way that looks like synchronous
code. If the promise is fulfilled, the fulfilled value can be accessed as the
return value from the function. If the promise is rejected, it would be as
though the function threw an error. <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>await</span></sub>
will pause the function execution until the promise is either fulfilled or
rejected. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>Its important to note that async and await are syntax
enhancements for working with promises. Promises are still at the core of
asynchronous code that uses async and await. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:164.7pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:164.7pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:258.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> doWork </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> sum </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>add</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>1</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>99</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> sum2 </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>add</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(sum</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>50</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> sum3 </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>add</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(sum2</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>3</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> sum3</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:173.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>doWork</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>().</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>then</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((result) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'result'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> result)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:264.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>catch</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((e) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'e'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> e)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.7pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><span
style='color:#4F81BC;text-decoration:none'>mdn: async function</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><span
style='color:black;text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await"><span
style='color:#4F81BC;text-decoration:none'>mdn: await operator</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222491">Lesson 15: Async/Await: Part
II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its up to you to use async and await
with the Mongoose library. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222492">Lesson 16: Integrating
Async/Await </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be integrating async and await
into the Express route handlers. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Integrating
Async/Await </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Below is a modified version of <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>GET
/users</span></sub>. The handler function was set up as an asynchronous
function which allows you to use await in the function. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>await</span></sub>
is used with the promise from <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>User.find</span></sub> to get a
list of all the users without needing to call <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;color:#006F1F;background:#FAFAFA'>then</span></sub>
and <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>catch</span> with handler functions. A try/catch statement
is also used to handle any errors that might occur. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>get</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/users'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>async</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><b><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'>try</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> users </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>User</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>find</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(users)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> </span><b><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'>catch</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (e) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>status</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>500</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
23.35pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222493">Lesson 17: Resource Updating
Endpoints: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to create REST API
endpoints for updating resources. This will allow users of the API to update
users and tasks that are already in the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Resource
Updating Endpoints </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:41.85pt;margin-bottom:
8.25pt;margin-left:.2in'>Resource updating endpoints use the PATCH HTTP method.
The URL structure is <span style='font-size:11.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>/resources</span><sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>/:id</span></sub> for
updating an individual resource by its ID. If you want to update an individual
task with the ID of 44, it would be <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>PATCH /tasks/44</span>. <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>app.patch</span>
is used to set up the Express route handler. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:47.65pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:47.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>app</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>patch</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'/users/:id'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:270.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Route handler code here</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>When working with updates, its a good idea to alert
the user if theyre trying to update something that they cant update. The code
below checks that the user is only updating fields that can be updated,
otherwise it will send back an error response. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> updates </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>Object</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>keys</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>body</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> allowedUpdates </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> [</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'name'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'email'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'password'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'age'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>]</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> isValidOperation </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>updates</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>every</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>((update) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>allowedUpdates</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>includes</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(update))</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>if</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>!</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>isValidOperation)
</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#666666'>{</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
20.1pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>return</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>status</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>400</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>error</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Invalid
updates!'</span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas'> </span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas;color:#666666'>}</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>If all goes well, the updates will be applied to the
user, then a response will be sent back. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>If the provided updates are valid, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>findByIdAndUpdate</span></sub>
can be used to update the document in the database. Try/catch is used here to
send back an error if something goes wrong when updating the user. This would
include the new data not passing the validation defined for the model. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:165.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 4.25pt 2.3pt 8.0pt;height:165.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:6.0pt;margin-bottom:
  .55pt;margin-left:0in;text-indent:0in;line-height:100%'><b><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#006F1F'>try</span></b><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:100%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:100%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>findByIdAndUpdate</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>params</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>body</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>runValidators</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>user) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:247.9pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>404</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(user)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>catch</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (e) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:295.8pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>400</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(e)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222494">Lesson 18: Resource Updating
Endpoints: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, its on you to create REST API
endpoints for deleting tasks out of the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222495">Lesson 19: Resource Deleting
Endpoints </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to set up a REST API
endpoint for deleting resources. This video covers deleting users as well as a
challenge for deleting tasks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Deleting
Resources </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.5pt;margin-bottom:
10.45pt;margin-left:.2in;line-height:135%'>Resource deleting endpoints use the
DELETE HTTP method. The URL structure is <span style='font-size:11.0pt;
line-height:135%;font-family:Consolas;background:#FAFAFA'>/resources</span><sub><span
style='font-size:17.0pt;line-height:135%;font-family:Consolas;background:#FAFAFA'>/:id</span></sub>
for deleting an individual resource by its ID. If you want to delete an
individual task with the ID of 897, it would be <span style='font-size:11.0pt;
line-height:135%;font-family:Consolas;background:#FAFAFA'>DELETE /tasks/897</span>.
<span style='font-size:11.0pt;line-height:135%;font-family:Consolas;background:
#FAFAFA'>app.delete</span> is used to set up the Express route handler. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:208.0pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>delete</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/users/:id'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>async</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:208.0pt;margin-bottom:
22.05pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Route handler    </span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.65pt;margin-left:.2in'>The handler itself can delete the resource using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>findByIdAndDelete</span></sub>.
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:153.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:153.0pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>try</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>findByIdAndDelete</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>params</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>user) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:246.4pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>404</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(user)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>catch</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (e) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>500</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222496">Lesson 20: Separate Route
Files </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to organize your
Express application endpoints. Defining all endpoints in a single file is a
fine way to get started, but that wont scale well as you add more routes to
the app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Creating
Separate Routers </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>Express allows you to create as many routers as you
want. These separate routers can then be combined into a single Express
application. You can create a new router using <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>express.Router</span>
as shown below. The example file below creates the router, adds routes, and
exports the router from the file. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:101.45pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:101.45pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> router </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>express</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>Router</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:204.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#18167B'>router</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>post</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/someEndpoint'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Do something</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>module</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>exports</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> router</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.95pt;margin-left:.2in;line-height:90%'>The router defined in the file above
can be added into the Express application in <span style='font-size:11.0pt;
line-height:90%;font-family:Consolas;background:#FAFAFA'>index.js</span>. This
is done by loading the router in with <sub><span style='font-size:17.0pt;
line-height:90%;font-family:Consolas;background:#FAFAFA'>require</span></sub>
and then passing the router to <sub><span style='font-size:17.0pt;line-height:
90%;font-family:Consolas;background:#FAFAFA'>app.use</span></sub>. You can set
up as many routers as you need for your application, though its common to have
a router for each distinct resource your REST API has. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:162.55pt;margin-bottom:
20.7pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Register with existing application</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>app</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>use</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(router)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:41.2pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="http://expressjs.com/en/4x/api.html#router"><span style='color:#4F81BC;
text-decoration:none'>express.Router</span></a><a
href="http://expressjs.com/en/4x/api.html#router"><span style='color:black;
text-decoration:none'> </span></a></p>

<h1 style='margin-left:.2in'><a name="_Toc222497">Section 12: API
Authentication and Security </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222498">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>In this section, youll set up authentication for the
task manager app. This will require users to log in before theyll be able to
manage their tasks. This section also covers password security, Express
middleware, and more. </p>

<h2 style='margin-left:.2in'><a name="_Toc222499">Lesson 2: Securely Storing
Passwords: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to securely store
user passwords by hashing and salting the password before storing it in the
database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Hashing
Passwords </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>Storing plain text passwords is a bad idea. Most folks
reuse password for multiple accounts online. That means if your database gets
compromised, the hacker can reuse those credentials on other sites such as
credit cards or bank accounts. We dont want to leave our users open to further
attacks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>The solution is to hash passwords using a secure
one-way hashing algorithm. Users passwords will stay hidden and secure, even if
the database is compromised. </p>

<h2 style='margin-left:.2in'><a name="_Toc222500">Hashing Passwords with Bcrypt
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>First up, install the library. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
bcryptjs@2.4.3</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>hash</span></sub> method can be
used to hash the plain text password. The example below hashes the password
Red12345!. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.45pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> password </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Red12345!'</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.45pt;margin-bottom:
21.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> hashedPassword </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>bcrypt</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>hash</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(password</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>8</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#5F9FAF'>// The hashed password is what would be
stored in the database</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.55pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>compare</span></sub> method is
used to compare a plain text password against a previously hashed password.
This would be useful when logging in. The user logging in provides the plain
text password for their account. The application fetches the hashed password
from the database for that user. <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>compare</span></sub> is then
called to confirm its a match. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> isMatch </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>bcrypt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>compare</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'red12345!'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> hashedPassword)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(isMatch)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/bcryptjs"><span style='color:#4F81BC;
text-decoration:none'>npm: bcryptjs</span></a><a
href="https://www.npmjs.com/package/bcryptjs"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222501">Lesson 3: Securely Storing
Passwords: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use Mongoose
middleware. Middleware will allow you to automatically hash a users password
before the user is saved to the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Mongoose
Middleware </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Middleware allows you to register some code to run
before or after a lifecycle event for your model. As an example, you could use
middleware to register some code to run just after a user is deleted. You could
also use middleware to register some code to run just before the user is saved.
This can be used to hash passwords just before saving users to the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The example below calls <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>pre</span></sub>
with the <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#406F9F;background:#FAFAFA'>'save'</span></sub> lifecycle event. This
registers a function to run just before users are saved. The function itself
checks if the password has been altered. If the password has been altered, the
plain text password is overwritten with a hashed version. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:127.25pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:127.25pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:155.2pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>userSchema</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>pre</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'save'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> async </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>function</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (next) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>this</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>isModified</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'password'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:113.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>bcrypt</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>hash</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>8</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>next</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://mongoosejs.com/docs/middleware.html"><span style='color:#4F81BC;
text-decoration:none'>Mongoose middleware</span></a><a
href="https://mongoosejs.com/docs/middleware.html"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222502">Lesson 4: Logging in Users </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up the ability for users
to log into their existing accounts. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Logging in Users
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Logging in a user is a two-step process. The user
provides their email and password, and the first thing to do is fetch the user
by their email. From there, bcrypt is used to verify the password provided
matches the hashed password stored in the database. If either step fails, the
users wont be able to log in. If both steps succeed, then you know the user is
who they say they are. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The code below sets up <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>findByCredentials</span></sub>
which finds a user by their email and password. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:206.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.25pt 8.0pt;height:206.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:22.15pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>userSchema</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>statics</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>findByCredentials</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (email</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> password) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>findOne</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> email </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>user) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:77.05pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>throw</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Unable
  to login'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> isMatch </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>bcrypt</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>compare</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>isMatch) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:216.2pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>throw</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Unable
  to login'</span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>You can then call <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>findByCredentials</span></sub>
from you application when users need to login. The example below shows how this
can be done. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
23.4pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> user </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>User</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>findByCredentials</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>body</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>email</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>body</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>password</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222503">Lesson 5: JSON Web Tokens </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore JWTs (JSON Web
Tokens). JWTs provide a nice system for issuing and validating authentication
tokens. The authentication token will ensure that the client doesnt need to
log in every time they want to perform an operation on the server. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>JSON Web Tokens </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>First up, install the library. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
jsonwebtoken@8.4.0</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.2pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>sign</span></sub> method can be
used to generate a new token. <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>sign</span></sub> accepts three
arguments: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.4pt;margin-left:.2in'>The first is the data to embed in the token: This needs
to include a unique identifier for the user. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The second is a secret phrase: This is used to issue
and validate tokens, ensuring that the token data hasnt been tampered with. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>The third is a set of options: The example below uses <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>expiresIn</span></sub>
to create a token thats valid for seven days. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:63.1pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> jwt </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'jsonwebtoken'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:63.1pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> token </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>jwt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>sign</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>_id</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'abc123'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>},</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'thisismynewcourse'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>expiresIn</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'7
days'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas'>
</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#666666'>}</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Tokens can be issued to users when they sign up or
log in to the application. These can then be stored on the data and used to
authenticate the user when they perform other options. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.15pt;margin-left:.2in'>The server can verify the token using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>verify</span></sub>.
This requires two arguments: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The first is the token to validate. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>The second is the secret phrase that the token was
created with. If valid, the embedded data will be returned. This would allow
the server to figure out which user is performing the operation. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> data </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>jwt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>verify</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(token</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'thisismynewcourse'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
24.05pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
data._id contains the user id of the user that owns this token</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222504">Lesson 6: Generating
Authentication Tokens </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll integrate JWTs into the
application. This will allow the app to issue an authentication token when a
user signs up or logs in. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Generating and
Storing Auth Tokens </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Authentication tokens for a user can be stored in the
database. This provides a way for users to log out. All generated
authentication tokens will be stored as part of the user profile. If a user
logs out, that token will be removed from the user profile. A token would only
be considered valid if its a valid JWT and its still stored as part of the
user profile. A user could be logged out of all session by simply deleting all
the tokens stored in their user profile. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The snippet below adds a <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>tokens</span></sub>
array onto the user model. This will be used to store all valid authentication
tokens for a user. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Other properties and options omitted for brevity</span><span style='font-family:
Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'> userSchema </span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Schema</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#901F00'>tokens</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> [</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#901F00'>token</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>            </span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> String</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>            </span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#901F00'>required</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>]</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>The instance method below is responsible for generating
new authentication tokens. The token is created, stored in the database, and
finally returned from the function. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:127.25pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 3.65pt 2.3pt 8.0pt;height:127.25pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:84.75pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>userSchema</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>methods</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>generateAuthToken</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> async </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>function</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>this</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> token </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>jwt</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>sign</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>_id</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>_id</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>toString</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>() </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'thisismynewcourse'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:2.1in;margin-bottom:
  .25pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>tokens</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>tokens</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>concat</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> token </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>save</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:375.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>    </span><b><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#006F1F'>return</span></b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'> token</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>generateAuthToken</span> can then be
called to generate a fresh authentication token when users sign up or log in. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
23.4pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> token </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>generateAuthToken</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222505">Lesson 7: Express Middleware </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll explore Express middleware.
When working with middleware, youll have more control over how your server
processes requests. This will be used to check that a user is authenticated
before performing specific operations. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Exploring
Express Middleware </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Express middleware is nothing more than a function
that runs as Express handles a given request. You can customize the function to
do whatever you want it to do, and you can have it run whenever you want it to.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
1.2pt;margin-left:.2in'>The example below uses middleware to print information
about incoming requests. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.65pt;margin-left:.2in;line-height:90%'>Middleware functions should accept
three parameters: <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;background:#FAFAFA'>req</span></sub>, <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>res</span></sub>,
and <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>next</span></sub>. The only new parameter is <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>next</span></sub>.
<sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>next</span></sub> is called to signal to Express that the
middleware function is done. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>
loggerMiddleware </span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> (req</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> next) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>console</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'New
request to: '</span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas'> </span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas;color:#666666'>+</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#18167B'>req</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>method</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>+</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'
'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>+</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>path</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#7C9029'>next</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>()</span><span style='font-family:
Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
20.7pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Register the function as middleware for the application</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#18167B'>app</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#7C9029'>use</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(loggerMiddleware)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="http://expressjs.com/th/guide/using-middleware.html"><span
style='color:#4F81BC;text-decoration:none'>Express middleware</span></a><a
href="http://expressjs.com/th/guide/using-middleware.html"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222506">Lesson 8: Accepting
Authentication Tokens </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.5pt;margin-left:.2in'>In this lesson, youll use Express middleware to put
specific routes behind authentication. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>That will require the client to be authenticated
before the operation can be performed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Accepting and
Validating Tokens </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The goal of the authentication middleware is to
validate the authentication token and then fetch the profile for that user. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>auth</span></sub>
below shows how you can get this done. Notice that the user profile is added
onto <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>req.user</span></sub>. This allows route handler functions
to access the user profile without needing to fetch it again. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:297.05pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 16.3pt 2.45pt 8.0pt;height:297.05pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:211.15pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> jwt </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'jsonwebtoken'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> User </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'../models/user'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:193.0pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> auth </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> next) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>try</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:6.05pt;margin-bottom:
  .65pt;margin-left:0in;text-indent:0in;line-height:99%'><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> token </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>header</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'Authorization'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>replace</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'Bearer
  '</span><span style='font-size:11.0pt;line-height:99%;font-family:Consolas;
  color:#666666'>,</span><span style='font-size:11.0pt;line-height:99%;
  font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:99%;
  font-family:Consolas;color:#406F9F'>''</span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:99%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> decoded </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>jwt</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>verify</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(token</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'thisismynewcourse'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>findOne</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#901F00'>_id</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>decoded</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>_id</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'tokens.token'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:404.75pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas'>token </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>user) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>throw</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>Error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:320.55pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>next</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>catch</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (e) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:66.05pt;margin-bottom:
  0in;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:97%'><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>401</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Please
  authenticate.'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:447.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>module</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>exports</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> auth </span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.4in;margin-left:.2in'>The authentication middleware can be added to individual
endpoints to lock them down. This is shown with <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>GET /users/me</span></sub>
below. <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>auth</span></sub> is added as the second argument to <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>router.get</span>,
meaning that it will run before the route handler function runs. This will
ensure the user is authenticated. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:175.3pt;margin-bottom:
23.7pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>router</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>get</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/users/me'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> auth</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>async</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>res</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<h2 style='margin-left:.2in'><a name="_Toc222507">Lesson 9: Advanced Postman </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll explore Postman environments.
Environments make it easy to manage your requests and authentication without
having to manually add authentication tokens to the individual requests. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this video. Refer to the video
to learn how to set up Postman environments. </p>

<h2 style='margin-left:.2in'><a name="_Toc222508">Lesson 10: Logging Out </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its your job to give users a way to
log out of the app. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222509">Lesson 11: Hiding Private
Data </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to limit what data
gets sent to the client. This will allow you to hide authentication tokens and
hashed passwords from server responses. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Hiding Private
Data </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.6pt;margin-left:.2in'>When a Mongoose document is passed to <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>res.send</span></sub>,
Mongoose converts the object into JSON. You can customize this by adding <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>toJSON</span></sub>
as a method on the object. The method below removes the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>password</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>tokens</span></sub> properties before sending the response
back. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:127.25pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:127.25pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:185.4pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>userSchema</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>methods</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>toJSON</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>function</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>this</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> userObject </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>toObject</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:245.9pt;margin-bottom:
  .25pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>delete</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>userObject</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>password</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>delete</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>userObject</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>tokens</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:343.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>    </span><b><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#006F1F'>return</span></b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'> userObject</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222510">Lesson 12: Authenticating
User Endpoints </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be adding authentication to
the other user endpoints. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222511">Lesson 13: The User/Task
Relationship </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to create a
relationship between a user and tasks. This will make it possible to know which
tasks a user created. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Mongoose
Relationships </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>To set up the relationship, both the user and task
model will be changed. First up, a new field needs to be added onto the task.
This will store the ID of the user who created it. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:112.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:112.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:161.8pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Other properties and options omitted for brevity</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> Task </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>model</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Task'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>owner</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:198.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>Schema</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>Types</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>ObjectId</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>required</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>ref</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'User'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>Next, a virtual property needs to be added onto the
user. The code below adds a <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>tasks</span></sub> field onto
users that can be used to fetch the tasks for a given user. Its a virtual
property because users in the database wont have a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>tasks</span></sub>
field. Its a reference to the task data stored in the separate collection. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:308.3pt;margin-bottom:
20.4pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>userSchema</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>virtual</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>ref</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Task'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>localField</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'_id'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>foreignField</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'owner'</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.15pt;margin-left:.2in'>With the relationship configured, tasks can be created
with an <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>owner</span></sub> value. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>The code below shows how you can fetch the owner of a
given task. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:83.95pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> task </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>Task</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>findById</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'5c2e505a3253e18a43e612e6'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>await </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>task</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>populate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'owner'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>execPopulate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>task</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>owner</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>The code below shows how you can fetch the tasks for
a given user. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:83.95pt;margin-bottom:
23.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> user </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>User</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>findById</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'5c2e4dcb5eac678a23725b5b'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>await </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>populate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>execPopulate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>tasks</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222512">Lesson 14: Authenticating
Task Endpoints </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be setting up authentication
for the other task endpoints. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222513">Lesson 15: Cascade Delete
Tasks </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use Mongoose
middleware to clean up a users tasks when they close their account. This will
make sure that all their data is securely removed from the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Deleting a
Users Tasks </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>The middleware function below is registered using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>pre</span></sub>.
It will run just before <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>remove</span></sub> fires for the
user. The function itself deletes all tasks created by that user. Now when a
user closes their account, their other data will get deleted too. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> Task </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'./task'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Existing code omitted for brevity</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>userSchema</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>pre</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'remove'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> async </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>function</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (next) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>     </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> user </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>this</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.8pt;margin-bottom:
42.4pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>     await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>Task</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>deleteMany</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>owner</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>_id</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>     </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>next</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<h1 style='margin-left:.2in'><a name="_Toc222514">Section 13: Sorting,
Pagination, and Filtering </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222515">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>In this section, youll explore advanced techniques
for fetching data. This includes sorting, filtering, and pagination. All three
of these will give clients more control over what data they get back. This
keeps applications fast, as they dont need to fetch unnecessary data. </p>

<h2 style='margin-left:.2in'><a name="_Toc222516">Lesson 2: Working with
Timestamps </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll enable timestamps for your
Mongoose models. Mongoose will automatically track when documents were created
and updated. This is great data to have if you want to allow users to sort by
when the document was created or updated. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Enabling
Mongoose Timestamps </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Schema options can be used to enable timestamps.
Schema options are provided by passing an object in as the second argument to <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>mongoose.Schema</span>.
Set <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>timestamps</span> to <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>true</span>
to have Mongoose add <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>createdAt</span></sub> and <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>updatedAt</span></sub>
fields to the model. You dont need to write any code to create or manage those
fields, as Mongoose does all that for you. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:100.3pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:100.3pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> taskSchema </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>Schema</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//Task
  fields omitted for brevity</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>timestamps</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:451.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> Task </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>model</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Task'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> taskSchema)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222517">Lesson 3: Filtering Data </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll use query parameters to allow
for data filtering. This will allow clients to fetch all tasks, just the
complete tasks, or just the incomplete tasks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:9.25pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Filtering Data </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.2pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>GET /tasks</span> below supports a <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>completed</span>
query parameter which can be set to <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>true</span> or <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;color:#06287D;
background:#FAFAFA'>false</span>. This will prevent clients from fetching
unnecessary data that they dont plan on using. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>First up, create an object to store the search
criteria. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> match </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.4pt;margin-left:.2in;line-height:92%'>From there, check if the query
parameter was provided. The provided value should be parsed into a boolean and
stored on <sub><span style='font-size:17.0pt;line-height:92%;font-family:Consolas;
background:#FAFAFA'>match.completed</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:89.95pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>if</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>completed</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:89.95pt;margin-bottom:
20.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>match</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>completed</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>completed</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>===</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'true'</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Last up, <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>match</span></sub>
can be added onto <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>populate</span></sub> to fetch just
the users that match the search criteria. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:332.5pt;margin-bottom:
23.8pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>populate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>path</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    match</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>execPopulate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222518">Lesson 4: Paginating Data </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add pagination to the
application. This will allow the client to fetch data in pages. The client can
start off with the first page of data and then fetch other pages as theyre
needed. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Data Pagination </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Pagination is configured using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>limit</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>skip</span></sub>. These two values give the client
complete control of the data theyre getting back. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in;line-height:90%'>If a client wanted the first page of
10 tasks, <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>limit</span></sub> would be set to <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>10</span></sub>
and <sub><span style='font-size:17.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>skip</span></sub> would be set to <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>0</span></sub>.
If the client wanted the third page of 10 tasks, <sub><span style='font-size:
17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>limit</span></sub>
would be set to <sub><span style='font-size:17.0pt;line-height:90%;font-family:
Consolas;background:#FAFAFA'>10</span></sub> and <sub><span style='font-size:
17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>skip</span></sub>
would be set to <sub><span style='font-size:17.0pt;line-height:90%;font-family:
Consolas;background:#FAFAFA'>20</span></sub>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.55pt;margin-left:.2in;line-height:90%'>Both <span style='font-size:11.0pt;
line-height:90%;font-family:Consolas;background:#FAFAFA'>limit</span> and <span
style='font-size:11.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>skip</span>
can be added onto the <span style='font-size:11.0pt;line-height:90%;font-family:
Consolas;background:#FAFAFA'>options</span> object passed to <span
style='font-size:11.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>populate</span>.
The code below uses <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;background:#FAFAFA'>parseInt</span></sub> to convert the
string query parameters into numbers first. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>populate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>path</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    match</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>options</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>limit</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>parseInt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>limit</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>skip</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>parseInt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>skip</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
23.4pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>execPopulate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222519">Lesson 5: Sorting Data </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add sorting to the
application. Clients will be able to fetch the data back in any order they
like. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Sorting Data </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.65pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>options</span></sub> object used
for pagination can also be used for sorting. A <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>sort</span></sub>
property should be set, which is an object containing key/value pairs. The key
is the field to sort. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The value is <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>1</span></sub> for
ascending and <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>-1</span></sub> for descending sorting. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>GET</span><sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'> /tasks</span></sub>
will get support for a <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>sortBy</span></sub> query parameter.
The value should include the field to sort and the order in which to sort. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>createdAt:asc</span></sub>
would sort the tasks in ascending order with the oldest first. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>createdAt:asc</span></sub>
would sort the tasks in a descending order with the newest first. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>Start with an empty object to store the sorting
options. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> sort </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.4pt;margin-left:.2in'>If the query parameter is provided, itll get parsed
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>sort</span></sub> will be updated. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:120.0pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><b><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>sortBy</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:120.0pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> parts </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>sortBy</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>split</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>':'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    sort[parts[</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#409F6F'>0</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>]] </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> parts[</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>1</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>] </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>===</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'desc'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>?</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>-1</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> : </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>1</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:120.0pt;margin-bottom:
20.5pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.55pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;color:#06287D;background:#FAFAFA'>sort</span> is then
added onto <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>options</span>. If <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>sortBy</span> isnt
provided, <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
color:#06287D;background:#FAFAFA'>sort</span> will be an empty object and no
sorting will occur. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>populate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>path</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'tasks'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    match</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#901F00'>options</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>limit</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>parseInt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>limit</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>skip</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>parseInt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>query</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>skip</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        sort</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
42.15pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>execPopulate</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<h1 style='margin-left:.2in'><a name="_Toc222520">Section 14: File Uploads </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222521">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this section, youll learn how to configure
Node.js to support file uploads. This will allow users to upload documents,
profile pictures, and any other file type you might need to support. Youll
also see what it takes to store the uploaded files in MongoDB. </p>

<h2 style='margin-left:.2in'><a name="_Toc222522">Lesson 2: Adding Support for
File Uploads </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up multer. Multer is a
library in the Express ecosystem that allows your Express application to easily
support file uploads. It couldnt be easier. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Configuing
Multer </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>First up, install the library. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
multer@1.4.1</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.65pt;margin-left:.2in'>Multer can then be configured to fit your specific
needs. The example below shows off a basic configuration where <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>dest</span></sub>
is set to <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>avatars</span></sub>. This will store all uploaded files in
a directory called <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>avatars</span></sub>. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:74.6pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:74.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> multer </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'multer'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:294.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> upload </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>multer</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>dest</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'avatars'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.65pt;margin-left:.2in;line-height:90%'>Multer is then added as middleware
for the specific endpoint that should allow for file uploads. The route below
is expecting a single <sub><span style='font-size:17.0pt;line-height:90%;
font-family:Consolas;background:#FAFAFA'>avatar</span></sub> field on the
submitted form. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.3pt;margin-bottom:
20.7pt;margin-left:.2in;text-align:justify;text-justify:inter-ideograph;
line-height:97%;background:#FAFAFA'><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#18167B'>router</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>post</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/users/me/avatar'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>upload</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>single</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'avatar'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#18167B'>res</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/multer"><span style='color:#4F81BC;
text-decoration:none'>npm: multer</span></a><a
href="https://www.npmjs.com/package/multer"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222523">Lesson 3: Validating File
Uploads </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to validate file
uploads. This will allow you to reject files that are too large or files of the
wrong type. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Validating
Multer Uploads </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The multer configuration below adds these two types
of validation. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>limits.fileSize</span> is set to limit
the file size in bytes. The configuration below uses 1,000,000 bytes which is
equivalent to 1 megabyte. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>fileFilter</span> is set to validate
the file type. The method below will reject all documents that dont have
either <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>.doc</span></sub> or <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>.docx</span></sub> file
extensions. This same technique could be used to limit uploads to just images,
PDFs, or any other file type. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:177.55pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:177.55pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:306.45pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> upload </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>multer</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>dest</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'images'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>limits</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>fileSize</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>1000000</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>fileFilter</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> file</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> cb) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>file</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>originalname</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>match</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#BA6687'>/</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>\.(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#BA6687'>doc</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>|</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#BA6687'>docx</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>)$</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#BA6687'>/</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:64.45pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>cb</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Please
  upload a Word document'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'>))</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:306.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>        </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#7C9029'>cb</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>undefined</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>true</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222524">Lesson 4: Validation
Challenge </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add validation to avatar
uploads. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222525">Lesson 5: Handling Express
Errors </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll customize the errors that
multer provides. This will give you complete control of what sort of response
the client gets when their upload is rejected. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Handling Express
Errors </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can handle errors from middleware function by
providing a function to Express. As shown below, a new function is passed as
the final argument to <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>router.post</span></sub>. This
function accepts <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>error</span></sub>, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>req</span></sub>,
<sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>res</span></sub>, and <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>next</span></sub>.
This call signature lets Express know the function is designed to handle
errors. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The function itself sends back a JSON response with
the error message from multer. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:73.4pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:73.4pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>router</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>post</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/users/me/avatar'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>upload</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>single</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'avatar'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> next) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:149.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>400</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>message</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222526">Lesson 6: Adding Images to
the User Profile </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to associate the
uploaded avatar with the users account. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Adding Images to
the User Profile </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.95pt;margin-left:.2in'>A new field needs to be added to the user model to
store the avatar image data. The snippet below adds <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>avatar</span></sub>
on the user with the type of <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>Buffer</span></sub>. The <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>Buffer</span></sub>
type should be used when storing binary data, which is exactly the type of data
that multer provides. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Existing code omitted for brevity</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userSchema </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Schema</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#901F00'>avatar</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#901F00'>type</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> Buffer</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.5pt;margin-left:.2in'>The avatar upload route will be able to change the user
profile data, so the route should be put behind authentication. The handler
function grabs the binary data and stores it on the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>avatar</span></sub>
field. Finally, the changes are saved. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:112.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:112.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.25pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#18167B'>router</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>post</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>'/users/me/avatar'</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> auth</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#18167B'>upload</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>single</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>'avatar'</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>)</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:246.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>avatar</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>file</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>buffer</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>save</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> next) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:149.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>400</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>error</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>message</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222527">Lesson 7: Serving up Files </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to serve up user
profile images. These images will be served up as if they were static assets
for the application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Serving up Files
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Serving up the user avatars will require two pieces
of data from the server. The first is the image data, and the second is the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>Content-Type</span></sub>
header. The image data is stored on the user profile. The header should be set
equal to <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>image/png</span></sub> which lets the client know theyre
getting a PNG image back. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>The route below fetches the image data and sets the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>Content-Type</span></sub>
header for the response. The URL could be visited to view the profile picture. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:191.65pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:191.65pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:124.95pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>router</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/users/:id/avatar'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (req</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> res) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>try</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>findById</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>req</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>params</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>||</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>avatar</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>throw</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Error</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:70.55pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>set</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Content-Type'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'image/jpg'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>avatar</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>catch</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (e) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>res</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>status</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>404</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222528">Lesson 8: Auto-Cropping and
Image Formatting </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to resize and format
images. This will let you create uniform sizes and file types for user avatars.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Auto-Cropping
and Image Formatting </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>First up, install the npm library. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
sharp@0.21.1</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Now, sharp can be used to manipulate uploaded images.
Before the image data is added onto the user profile, the data should be passed
through sharp. The example below uses <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>resize</span> to resize all
uploads to 250 by 250 pixels. The example also uses <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>png</span></sub>
to convert all images to portable network graphics. Lastly, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>toBuffer</span></sub>
is used to retrieve the modified image data. The modified data is what should
be saved in the database. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:20.35pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> sharp </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'sharp'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:20.35pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> buffer </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>sharp</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>req</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>file</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>buffer</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>resize</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>width</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>250</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>height</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>250</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>png</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>().</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>toBuffer</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:41.25pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/sharp"><span style='color:#4F81BC;
text-decoration:none'>npm: sharp</span></a><a
href="https://www.npmjs.com/package/sharp"><span style='color:black;text-decoration:
none'> </span></a></p>

<h1 style='margin-left:.2in'><a name="_Toc222529">Section 15: Sending Emails </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222530">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>In this section, youll add email sending to your
Node.js application! This will allow you to communicate with users as they use
the app. This could be useful for welcome emails, notifications, and more! </p>

<h2 style='margin-left:.2in'><a name="_Toc222531">Lesson 2: Exploring SendGrid </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll integrate SendGrid into your
Node app. SendGrid is one of many services that allow you to send emails from
your application code. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Exploring
SendGrid </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>First up, install the module. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
sendgrid/mail@6.3.1</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Next, create a free SendGrid account and get your API
key. Check out the lesson video to learn how to get your API key. The code
below shows whats necessary to get the SendGrid module configured. All you
need to do is call <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>setApiKey</span></sub> to well set
your API key. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:53.75pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> sgMail </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'@sendgrid/mail'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:53.75pt;margin-bottom:
20.3pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#18167B'>sgMail</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>setApiKey</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'SG.EPCyKzFZT6yUHXzuxdU4tQ.d60AWJbSwkMAplANUtf1Vx47t9TFLSLMv
QzmN4tYEuM'</span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas'>)</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>send</span> can be called to send an
email from your application. The configuration object can be used to provide: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:37.9pt;text-indent:-24.0pt'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>to</span></sub> - Who is the email to? </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:37.9pt;text-indent:-24.0pt'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>from</span></sub> - Who is the email from? </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:37.9pt;text-indent:-24.0pt'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>subject</span></sub> - Whats the subject line of the
email? </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.5pt;margin-left:37.9pt;text-indent:-24.0pt'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>text</span></sub> - Whats the body of the email. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:86.3pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:86.3pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:306.85pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>sgMail</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>to</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'andrew@mead.io'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>from</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'andrew@mead.io'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:179.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>subject</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'This
  is my first creation!'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>,</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>text</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'I
  hope this one actually get to you.'</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#666666'>}</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In the long term, youll want to purchase a custom
domain and register it with SendGrid. This will increase your sending
reliability. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.6pt;margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://sendgrid.com/"><span style='color:#4F81BC;text-decoration:
none'>SendGrid</span></a><a href="https://sendgrid.com/"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222532">Lesson 3: Sending Welcome and
Cancelation Emails </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be sending email to users when
they sign up or cancel their account. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222533">Lesson 4: Environment
Variables </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use environment
variables to securely store API keys and other credentials. This will reduce
the chance your private keys fall into the wrong hands. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Environment
Variables </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>First up, install the npm module. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
env-cmd@8.0.2</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.5pt;margin-left:.2in'>Next up, create an environment file <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>dev.env</span></sub>
in the <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>config</span></sub> directory. This will store your
environment variables in the following format. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>KEY=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>value</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>ANOTHER_KEY=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>some other value</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
6.35pt;margin-left:.2in;line-height:139%'>Next, update the <sub><span
style='font-size:17.0pt;line-height:139%;font-family:Consolas;background:#FAFAFA'>dev</span></sub>
script to use env-cmd to load in those environment variables when it starts up.
That would be <span style='font-size:11.0pt;line-height:139%;font-family:Consolas;
background:#FAFAFA'>env-cmd ./config/dev.env nodemon src/index.js</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.4in;margin-left:.2in'>Now, you can remove API keys and database credentials
from the application itself. For example, you can create <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>MONGODB_URL</span></sub>
in the development environment file. The application code shown below can then
reference that environment variable to get its value. This can be done with the
SendGrid API key and the JWT secret used to generate and verify authentication
tokens. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:223.65pt;margin-bottom:
19.45pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>mongoose</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>connect</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>process</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>env</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>MONGODB_URL</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#901F00'>useNewUrlParser</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#901F00'>useCreateIndex</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>true</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#901F00'>useFindAndModify</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>false</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
107%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:107%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/env-cmd"><span style='color:#4F81BC;
text-decoration:none'>npm: env</span></a><a
href="https://www.npmjs.com/package/env-cmd"><span style='color:#4F81BC;
text-decoration:none'>-</span></a><a
href="https://www.npmjs.com/package/env-cmd"><span style='color:#4F81BC;
text-decoration:none'>cmd</span></a><a
href="https://www.npmjs.com/package/env-cmd"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222534">Lesson 5: Creating a
Production MongoDB Database </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll set up a production MongoDB
database using MongoDB Atlas. Atlas is the official MongoDB hosting platform
released by the MongoDB organization. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>Please refer to the video for the detailed steps
required to set up the production database. </p>

<h2 style='margin-left:.2in'><a name="_Toc222535">Lesson 6: Heroku Deployment </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll deploy the task manager API to
Heroku. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Heroku
Deployment </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.65pt;margin-left:.2in'>You already know how to deploy Node.js applications to
Heroku. The only difference with this application is that your custom
environment variables need to be configured on Heroku too. This doesnt include
<sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>PORT</span></sub>, as thats managed by Heroku. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>The command below is used to set an environment
variable. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>heroku
config:set KEY=VALUE</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.6pt;margin-left:.2in'>A variation of that command can be used to fetch all
the environment variables currently configured. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>heroku config</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>Lastly, you can delete an environment variable as
shown here. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
42.15pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>heroku
config:unset KEY</span><span style='font-family:Consolas'> </span></p>

<h1 style='margin-left:.2in'><a name="_Toc222536">Section 16: Testing Node.js </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222537">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>In this section, youll learn how to test your Node.js
applications. Setting up an automated test suite makes it easy to check that
your application is always working as expected. </p>

<h2 style='margin-left:.2in'><a name="_Toc222538">Lesson 2: Jest Testing
Framework </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up the Jest testing
framework. Jest gives you everything you need to create a test suite for your
Node.js applications. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting up Jest </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>First up, install the module. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
21.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
jest@23.6.0</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Next, create a <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>test</span> script in
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:
#FAFAFA'>package.json</span>. The script itself is <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>jest</span>. This
allows you to use <span style='font-size:11.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>npm test</span> to run the Jest test suite. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Now, youll need to create a test suite. This is a
file in your project that ends with <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>.test.js</span></sub>.
The file extension allows Jest to find and run the test suites for your
project. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Creating a Test
Case </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can add a test case to a test suite using the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>test</span></sub>
function. Jest provides various functions as global variables in your test
suite files. <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>test</span></sub> is one of them. The first
argument to <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>test</span></sub> is the name of your test case.
The second argument to <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>test</span></sub> is the test function
itself. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>If the test function throws an error, the test cast
will fail. If the test function doesnt throw an error, the test case will
pass. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>The test case below would always pass, as no error is
thrown. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>test</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Hello
world!'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#666666'>,</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'> () </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>=&gt;</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>The test case below would always fail, as it throws
an error. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:277.55pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>test</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'This
should fail'</span><span style='font-size:11.0pt;line-height:102%;font-family:
Consolas;color:#666666'>,</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'> () </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>=&gt;</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><b><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'>throw</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>Error</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Failure!'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://jestjs.io/"><span style='color:#4F81BC;text-decoration:none'>Jest</span></a><a
href="https://jestjs.io/"><span style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222539">Lesson 3: Writing Tests and
Assertions </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add assertions to your test
cases. Assertions allow you check if a given value is what youre expecting or
not. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Testing a
Function </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>For this example, lets test the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>calculateTip</span></sub>
function shown below. All it does is calculate the tip for your restaurant
bill. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:87.4pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:87.4pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
  margin-left:0in;text-indent:0in;line-height:95%'><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> calculateTip </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> (total</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> tipPercent </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#409F6F'>.25</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> total </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> (total </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>*</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> tipPercent)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:282.2pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>module</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>exports</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    calculateTip</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.9pt;margin-left:.2in'>The test suite below has a single test case for the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>calculateTip</span></sub>
function. The test case itself calculates a 30% tip on a $10 restaurant bill.
The assertion checks that the calculated total equals $13. The assertion is
made using <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>toBe</span></sub> to check for equality. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> calculateTip </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>require</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'../src/math'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>test</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Should
calculate total with tip'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> () </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> total </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>calculateTip</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>10</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>.3</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#7C9029'>expect</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>(total).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>toBe</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>13</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://jestjs.io/docs/en/expect"><span style='color:#4F81BC;text-decoration:
none'>expect</span></a><a href="https://jestjs.io/docs/en/expect"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222540">Lesson 4: Writing Your Own
Tests </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this video, its on you to write some new test
cases using what youve learned so far. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222541">Lesson 5: Testing
Asynchronous Code </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to test asynchronous
code. This will be necessary to test the Express API endpoints. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Testing
Asynchronous Code </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The two test cases below test the asynchronous <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>add</span></sub>
function you created earlier in the course. Both test cases add up 2 and 3 and
assert that the total is 5. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
24.25pt;margin-left:.2in'>The callback function for the first test case accepts
a <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#006F1F;background:#FAFAFA'>done</span></sub> parameter. This lets Jest
know that the test function contains asynchronous code. Jest wont determine if
the test passed or failed until <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;color:#006F1F;background:#FAFAFA'>done</span></sub>
is called. In the example below, <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;color:#006F1F;background:#FAFAFA'>then</span></sub>
is called to run some code after the numbers are added. This is where the
assertion is added and its where <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;color:#006F1F;background:#FAFAFA'>done</span></sub>
is called. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>test</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Should
add two numbers'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> (done) </span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#7C9029'>add</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#409F6F'>2</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>3</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>then</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>((sum) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>expect</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(sum).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>toBe</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>5</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>done</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>Your test cases can use async/await as well. The test
case below is a refactored version of the test case above. The test case
function is defined with <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>async</span></sub>. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>await</span></sub>
is used in the function to ensure that Jest waits for those asynchronous tasks
to complete. Both test cases are functionally identical. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:145.0pt;margin-bottom:
23.65pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>test</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Should
add two numbers async/await'</span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>async</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> () </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#006F1F'>const</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'> sum </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> await </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>add</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>2</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>3</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#7C9029'>expect</span><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>(sum).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>toBe</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>3</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)  </span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<h2 style='margin-left:.2in'><a name="_Toc222542">Lesson 6: Testing an Express
Application: Part I </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up the Express API to be
easily testable. This involves settings up a test environment as well as
configuring Jest to work with Node. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Creating a Test
Environment </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Creating the test environment requires <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>test.env</span></sub>
to be added to the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>config</span></sub> directory. The
contents will be identical to <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>dev.env</span></sub>, with the
exception of the MongoDB connection string. The test environment should use a
separate database such as <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>task-manager-api</span></sub><span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>test</span>.
This will prevent the test cases from messing with development data. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
6.7pt;margin-left:.2in;line-height:145%'>With the environment in place, update
the <sub><span style='font-size:17.0pt;line-height:145%;font-family:Consolas;
background:#FAFAFA'>test</span></sub> script to load the environment file in.
That would be <span style='font-size:11.0pt;line-height:145%;font-family:Consolas;
background:#FAFAFA'>env-cmd ./config/test.env jest --watch --runInBand</span>. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Configuring Jest
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.3pt;margin-left:.2in;line-height:90%'>By default, Jest is expecting to run
in the browser. You can use Jest with Node, but youll need to configure Jest
to enable support. Jest can be configured by adding a <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>jest</span></sub>
property in <span style='font-size:11.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>package.json</span>. The configuration below sets <span
style='font-size:11.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>testEnvironment</span>
to <span style='font-size:11.0pt;line-height:90%;font-family:Consolas;
background:#FAFAFA'>node</span> to ensure that Jest runs correctly in Node.js. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.55pt;
margin-left:.2in;line-height:102%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;jest&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.55pt;
margin-left:.2in;line-height:102%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:102%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;testEnvironment&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;node&quot;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.1pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://jestjs.io/docs/en/configuration"><span style='color:#4F81BC;
text-decoration:none'>Configuring Jest</span></a><a
href="https://jestjs.io/docs/en/configuration"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222543">Lesson 7: Testing an Express
Application: Part II </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add tests for the Express API.
Each test case will focus on testing a specific endpoint, making assertions
about the response from the server. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Testing with
Supertest </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>Supertest was created by the Express team to allow you
to easily test your Express apps. First up, install the module. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
supertest@3.4.1</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Now, supertest can be used to test an endpoint. The
test case below tests that new users can sign up for accounts. All the account
data provided is valid, so a new account should be created. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Step one is to pass the express <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>app</span></sub>
to <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>request</span></sub>. Next, supertest methods can be
chained together to fit the needs of your tests. <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>post</span></sub>
is used to make an HTTP POST request to <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>/users</span>. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>send</span></sub>
is used to send the correct JSON data to the server. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>expect</span></sub>
is used to assert that the response status code is correct. In this case, a
successful signup should result in a <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>201</span> status code. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:138.95pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:138.95pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.6pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> request </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'supertest'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> app </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'../src/app'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:167.3pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>test</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Should
  signup a new user'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(app).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>post</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/users'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Andrew'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:191.4pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>email</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'andrew@example.com'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'MyPass777!'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>expect</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>201</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://www.npmjs.com/package/supertest"><span style='color:#4F81BC;
text-decoration:none'>npm: supertest</span></a><a
href="https://www.npmjs.com/package/supertest"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222544">Lesson 8: Jest Setup and
Teardown </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll configure Jest to add test
data into the database. This will allow you to test operations that require
existing data, such as the login operation. You cant log in if there isnt a
user account in the database to login to. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Seeding Database
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Jest provides lifecycle functions that you can use to
configure your test suite. There are four: </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:37.9pt;text-indent:-24.0pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>beforeEach</span></sub> - Run some code before each test
case </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
0in;margin-left:37.9pt;text-indent:-24.0pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>afterEach</span></sub> - Run some code after each test case
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
6.15pt;margin-left:37.9pt;text-indent:-24.0pt'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>before</span></sub> - Run some code once before the tests
run 4.<span style='font-family:"Arial",sans-serif'> </span><sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>after</span></sub>
- Run some code once after the tests run </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>beforeEach</span> works great for
adding test data to the database. The <span style='font-size:11.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>beforeEach</span> call below
removes all users and then adds a single test user into the database. By having
this run before each test case, it ensures that the tests run in a consistent
environment each time they execute. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:165.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:165.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> User </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'../src/models/user'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:288.75pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userOne </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Mike'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>email</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'mike@example.com'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'56what!!'</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:457.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:264.55pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>beforeEach</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    await </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>User</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>deleteMany</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    await </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>User</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(userOne).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>save</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>With the test user in place, the test case below is
able to test the login operation by logging in as the test user. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>test</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'Should
login existing user'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>async</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> () </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>     await </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>request</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(app).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>post</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/users/login'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>send</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>         </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>email</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>userOne</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>email</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>         </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#901F00'>password</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>userOne</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>password</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>     </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>expect</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#409F6F'>200</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://jestjs.io/docs/en/setup-teardown"><span style='color:#4F81BC;
text-decoration:none'>Jest setup and teardown</span></a><a
href="https://jestjs.io/docs/en/setup-teardown"><span style='color:black;
text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222545">Lesson 9: Testing with
Authentication </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to test API
endpoints that sit behind authentication. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Testing with
Authentication </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The goal is to test operations that require
authentication. This means an authentication token will need to be passed along
with the request. Step one is to create an authentication token for the test
user. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:137.8pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 64.15pt 2.3pt 8.0pt;height:137.8pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:127.55pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userOneId </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>mongoose</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>Types</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>ObjectId</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userOne </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>_id</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userOneId</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>name</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Mike'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>email</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'mike@example.com'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>password</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'56what!!'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>tokens</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> [</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:97%'><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#901F00'>token</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>jwt</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>sign</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>_id</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> userOneId </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>process</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>env</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>JWT_SECRET</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>]</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>From there, the authentication token can be added as
part of the supertest request. Supertest provides a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;color:#006F1F;
background:#FAFAFA'>set</span></sub> method for setting request headers. The
test case below attempts to fetch the user profile for the logged-in user. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:99.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:99.1pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:149.65pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>test</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Should
  get profile for user'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(app)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        .</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'/users/me'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        .</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>set</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Authorization'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>`Bearer
  ${</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#18167B'>userOne</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#7C9029'>tokens</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>[</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>token</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>}`</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        .</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        .</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>expect</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>200</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222546">Lesson 10: Advanced
Assertions </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its up to you to write some test
cases on your own. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222547">Lesson 11: Mocking Libraries </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to mock npm modules.
Jest lets you mock npm modules so you can override module functionality in your
test environment. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Mocking SendGrid
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can mock an npm module by creating a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>__mocks__</span></sub>
directory in the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>tests</span></sub> folder. A module
can be mocked by creating a file in the <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>__mocks__</span></sub>
folder. The file name should match up with the module name, so <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>tests/__mocks__/express.js</span></sub>
can be used to mock the Express library. If the npm module uses a scope like <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>@sendgrid/mail</span></sub>,
then a <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>@sendgrid</span></sub> folder would be created with a <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>mail.js</span></sub>
file inside. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>The job of the mock file is to provide mocked versions
of the library features. The SendGrid mock below defines and exports <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>setApiKey</span></sub>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>send</span></sub>. This ensures that our code still works
even though emails will no longer be sent for the tests. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:114.35pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:114.35pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:288.25pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>module</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>exports</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>     </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>setApiKey</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>() </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:379.05pt;margin-bottom:
  .25pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>      </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>},</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>     </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>() </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>      </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222548">Lesson 12: Wrapping up User
Tests </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its your job to finalize the user
tests. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222549">Lesson 13: Setup Task Test
Suite </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll be refactoring the user test
suite. These changes will makes it possible to test the task operations too. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>Refer to the video for refactoring instructions. The
refactoring requires lots of code to be shifted between files, which is a
little more than could be covered in this guide. </p>

<h2 style='margin-left:.2in'><a name="_Toc222550">Lesson 14: Testing with Task
Data </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll be writing some test cases for
tasks. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Testing with
Task Data </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in;line-height:90%'>Testing tasks will require that some
test tasks exist in the database. Like with users, tasks can be added to the
database using <sub><span style='font-size:17.0pt;line-height:90%;font-family:
Consolas;background:#FAFAFA'>beforeEach</span></sub>. The test case below
fetches all tasks for the user. It also asserts that the status code is a <sub><span
style='font-size:17.0pt;line-height:90%;font-family:Consolas;background:#FAFAFA'>200</span></sub>
and the tasks are sent back correctly. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:112.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:112.0pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:161.25pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>test</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Should
  fetch user tasks'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>async</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> response </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> await </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>request</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(app)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        .</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>get</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'/tasks'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        .</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>set</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Authorization'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>`Bearer
  ${</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#18167B'>userOne</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#7C9029'>tokens</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>[</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>].</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>token</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>}`</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:300.35pt;margin-bottom:
  .1pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        .</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>send</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        .</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>expect</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#409F6F'>200</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:191.5pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>expect</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>response</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>body</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>length</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>toEqual</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>2</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h2 style='margin-left:.2in'><a name="_Toc222551">Lesson 15: Bonus: Extra Test
Ideas </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, well go over some other test cases
you could add to the application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
40.95pt;margin-left:.2in'>You can find the list of optional test cases at <a
href="https://links.mead.io/extratests"><span style='color:#4F81BC;text-decoration:
none'>https://links.mead.io/extratests</span></a><a
href="https://links.mead.io/extratests"><span style='color:black;text-decoration:
none'>.</span></a> </p>

<h1 style='margin-left:.2in'><a name="_Toc222552">Section 17: Real-Time Web
Applications with Socket.io </a></h1>

<h2 style='margin-left:.2in'><a name="_Toc222553">Lesson 1: Section Intro </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>In this section, youll learn how to create real-time
web applications with Node. The nonblocking nature of Node makes it well-suited
for real-time applications such as chat apps, social media apps, and more. </p>

<h2 style='margin-left:.2in'><a name="_Toc222554">Lesson 2: Creating the Chat
App Project </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to set up the chat
application web server. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222555">Lesson 3: WebSockets </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll learn about the WebSocket
protocol. The WebSocket protocol supports real-time bi-direction communication,
which makes it a great fit for the chat application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>This lesson contains a detailed presentation. Please
refer to the video for a recap of WebSockets. </p>

<h2 style='margin-left:.2in'><a name="_Toc222556">Lesson 4: Getting Started
with Socket.io </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll install and configure
Socket.io. Socket.io comes with everything needed to set up a WebSocket server
using Node. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Setting up
Socket.io </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.85pt;margin-left:.2in'>First up, install the module. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
socket.io@2.20</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Socket.io can be used on its own or with Express.
Since the chat application will be serving up client-side assets, both Express
and Socket.io will get set up. The server file below shows how to get this
done. <br clear=all style='page-break-before:always'>
</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:352.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:352.1pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:246.4pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> path </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'path'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> http </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'http'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> express </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'express'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> socketio </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>require</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'socket.io'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:233.8pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// Create the
  Express application</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> app </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>express</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:149.05pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Create the HTTP server using the Express app</span><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'> server </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>http</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>createServer</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(app)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:197.5pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Connect socket.io to the HTTP server</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'> io </span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>socketio</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(server)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> port </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>process</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>env</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>PORT</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>||</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>3000</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>
  publicDirectoryPath </span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>path</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>join</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(__dirname</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'../public'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:197.5pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#18167B'>app</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas;color:#7C9029'>use</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>(</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>express</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>static</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(publicDirectoryPath))</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:94.65pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Listen for new connections to Socket.io</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#18167B'>io</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#7C9029'>on</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#406F9F'>'connection'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:210.1pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'New
  WebSocket connection'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>server</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>listen</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(port</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>`Server
  is up on port ${</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>port</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas;color:#406F9F'>}!`</span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>)</span><span style='font-family:
  Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The server above uses <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>io.on</span></sub>
which is provided by Socket.io. <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>on</span></sub> allows the server
to listen for an event and respond to it. In the example above, the server
listens for <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>connection</span></sub> which allows it to run
some code when a client connects to the WebSocket server. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Socket.io on the
Client </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.9pt;margin-left:.2in'>Socket.io is also used on the client to connect to the
server. Socket.io automatically serves up <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>/socket.io/socket.io.js</span></sub>
which contains the client-side code. The script tags below load in the
client-side library followed by a custom JavaScript file. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.05pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&lt;script
src=</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#406F9F'>&quot;/socket.io/socket.io.js&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&gt;&lt;/script&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.05pt;margin-bottom:
19.45pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;script
src=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
color:#406F9F'>&quot;/js/chat.js&quot;</span><span style='font-size:11.0pt;
line-height:107%;font-family:Consolas;color:#006F1F'>&gt;&lt;/script&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Your client-side JavaScript can then connect to the
Socket.io server by calling <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>io</span></sub>. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>io</span></sub>
is provided by the client-side Socket.io library. Calling this function will
set up the connection, and itll cause the servers <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>connection</span></sub>
event handler to run. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>io</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://socket.io/"><span style='color:#4F81BC;text-decoration:none'>Socket.io</span></a><a
href="https://socket.io/"><span style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222557">Lesson 5: Socket.io Events </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to work with events
in Socket.io. Events allow you to transfer data from the client to the server
or from the server to the client. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Working with
Events </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are two sides to every event, the sender and
the receiver. If the server is the sender, then the client is the receiver. If
the client is the sender, then the server is the receiver. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>Events can be sent from the sender using <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>emit</span></sub>.
Events can be received by the receiver using <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>on</span></sub>. The
example below shows how this pattern can be used to create a simple counter
application. The following snippet contains the client-side JavaScript code. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:153.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 46.0pt 2.3pt 8.0pt;height:153.0pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> socket </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>io</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:102.8pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Listen for &quot;countUpdated&quot;</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#18167B'>socket</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#7C9029'>on</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#406F9F'>'countUpdated'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (count) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:6.55pt;margin-bottom:
  0in;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:97%'><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'The
  count has been updated!'</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas;color:#666666'>,</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> count)</span><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#666666'>}</span><span style='font-size:11.0pt;line-height:
  97%;font-family:Consolas'>)</span><span style='font-family:Consolas'>  </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'#increment'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>addEventListener</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'click'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:241.95pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Emit &quot;increment</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'increment'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
4.55pt;margin-left:.2in'>The client-side code uses <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>on</span></sub>
to listen for the <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>countUpdated</span></sub> event. A
message will be logged with the current count when that event is received. The
client-side code also uses <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>emit</span> to send the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>increment</span></sub>
event. This occurs when a button on the screen is clicked. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The server-side code for this example is below. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:167.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:167.1pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>let</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> count </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#409F6F'>0</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>io</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'connection'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (socket) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'New
  WebSocket connection'</span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:240.4pt;margin-bottom:
  .25pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'countUpdated'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> count)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.65pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'increment'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        count</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>++</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>io</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'countUpdated'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> count)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The server above is responsible for emitting <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>countUpdated</span>
and listening for <span style='font-size:11.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>increment</span>. New users get the current count
right after they connect to the server. If a client sends <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>increment</span>
to the server, the count is incremented and all connected clients are notified
of the change. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.55pt;margin-left:.2in'>On the client, <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.emit</span>
emits an event to the server. On the server, both <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.emit</span>
and <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>io.emit</span></sub> can be used. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.emit</span></sub>
sends an event to that specific client, while <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>io.emit</span> sends
an event to all connected clients. </p>

<h2 style='margin-left:.2in'><a name="_Toc222558">Lesson 6: Socket.io Events
Challenge </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to use events to build
the chat applications messaging system. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h2 style='margin-left:.2in'><a name="_Toc222559">Lesson 7: Broadcasting Events
</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to broadcast events.
Broadcasted events are sent to all connected clients, expect for the client
that initiated the broadcast. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:9.0pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Broadcasting
Events </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Events can be broadcasted from the server using <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.broadcast.emit</span>.
This event will get sent to all sockets except the one that broadcasted the
event. The code below shows this off. When a new user joins the chat
application, <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>socket.broadcast.emit</span></sub> is used to send
a message to all other users that someone new has joined. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>io</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>on</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'connection'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (socket) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:96.1pt;margin-bottom:
23.7pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>socket</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>broadcast</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>emit</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'message'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'A
new user has joined!'</span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<h2 style='margin-left:.2in'><a name="_Toc222560">Lesson 8: Sharing Your
Location </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll integrate the Geolocation API
into the chat app. This will allow users to share their locations in real time.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Sharing Your
Location </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>The Geolocation API lets you fetch a users location
using client-side JavaScript. Once the user gives you permission to access
their location, this location can be shared with everyone else in the chat
room. The code below attempts to share a users location with the chat room. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:164.7pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:164.7pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:4.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'#send-location'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>addEventListener</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'click'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>!</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>navigator</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>geolocation</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:52.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>alert</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Geolocation
  is not supported by your browser.'</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:107.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>navigator</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>geolocation</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>getCurrentPosition</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>((position) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'sendLocation'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>latitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>position</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>coords</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>latitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#901F00'>longitude</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>position</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>coords</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>longitude</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>First up, check if <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>navigator.geolocation</span></sub>
exists. This will determine if the browser supports geolocation. From there, <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>navigator.geolocation.getCurrentPosition</span>
can be called to fetch the users location. The provided callback function will
get called with the users position, which includes the latitude and longitude.
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>With the client set up, the server can listen for the
<sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>sendLocation</span></sub> event. When its received, <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>io.emit</span>
is used to share that location with everyone in the chat room </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:60.55pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.35pt 8.0pt;height:60.55pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:118.95pt;margin-bottom:
  .45pt;margin-left:0in;text-indent:0in;line-height:101%'><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#406F9F'>'sendLocation'</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> (coords) </span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:101%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:101%;font-family:Consolas;color:#18167B'>io</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:101%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:46.3pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>`https://google.com/maps?q=${</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>coords</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>latitude</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>},${</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>coords</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>longitude</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>}`</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>        </span><a
href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API"><span
style='color:#4F81BC;text-decoration:none'>MDN: Geolocation API</span></a><a
href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API"><span
style='color:black;text-decoration:none'> </span></a></p>

<h2 style='margin-left:.2in'><a name="_Toc222561">Lesson 9: Event
Acknowledgements </a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn about event
acknowledgements. This allows the receiver of an event to send a message back
to the sender of the event. This is useful for error handling and data
validation. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Event
Acknowledgements </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>To explore acknowledgements, lets set up the server
to screen messages for profane language. The bad-words module will let you
check text for profane language. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>npm i
bad-words@3.0.0</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>You already know there are two sides to every event,
the sender and the receiver. In the example below, the client is the one
emitting the <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>sendMessage</span></sub> event. The big change is
the addition of the callback function. This function will run if/when the
server acknowledges the event. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:100.3pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:100.3pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:161.25pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'sendMessage'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> message</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><b><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(error)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:246.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'>    </span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>console</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>log</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'Message
  delivered!'</span><span style='font-size:11.0pt;line-height:107%;font-family:
  Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>On the server, the event listener for <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>sendMessage</span></sub>
also has a small change. Aside from the <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>message</span>
parameter, it now has access to the <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>callback</span></sub>
parameter. This callback function can be called on the server to trigger the
acknowledgement function on the client. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
8.85pt;margin-left:.2in'>The callback can be called with or without data. In
this example, the callback is called with an error if profane language was
detected. The argument would get passed to the client where the error could be
shown. The callback is called without no arguments if no profane language was
detected. This lets the client know that the message was successfully
processed. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:140.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:140.1pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:137.05pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'sendMessage'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (message</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> callback) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> filter </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Filter</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>filter</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>isProfane</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(message)) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:155.7pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'Profanity
  is not allowed!'</span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas'>)</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:215.65pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>io</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> message)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222562"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 10: Form and Button States </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll use a bit of DOM manipulation
to provide users with a nicer experience. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Form and Button
States </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.6pt;margin-left:.2in'>First up is the form that allows users to send a new
message. This form should be disabled while messages are being sent to the
server. This will prevent duplicate messages from being sent if the user was to
double-click the button. The form can be disabled by setting the <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>disabled</span></sub>
attribute on the submit button. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:101.45pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.4pt 8.0pt;height:101.45pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:82.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>
  $messageFormButton </span><span style='font-size:11.0pt;line-height:99%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas;color:#18167B'>$messageForm</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'button'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Disable button</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:131.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>$messageFormButton</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>setAttribute</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'disabled'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'disabled'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Enable buttons</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>$messageFormButton</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>removeAttribute</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'disabled'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The interaction with the text input can also be
improved. The text input should be cleared and focused on when the form is
submitted. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>const</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>
$messageFormInput </span><span style='font-size:11.0pt;line-height:102%;
font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'> </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>$messageForm</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>querySelector</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'input'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Clear the text from the input</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>$messageFormInput</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>value</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>''</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
0in;margin-left:13.9pt;text-indent:0in;line-height:107%;background:#FAFAFA'><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Shift focus back to the input</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:77.45pt;margin-bottom:
22.95pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>$messageFormInput</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>focus</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222563"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 11: Rendering Messages </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to use a client-side
templating engine to render messages to the screen. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Creating a
Template </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
27.9pt;margin-left:.2in'>First up, include these in your HTML. Mustache will be
used to render the messages. Moment and Qs will be used a bit later in the
section. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.15pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;script
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.15pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>src=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.1/mustache.min.js
&quot;</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#006F1F'>&gt;&lt;/script&gt;</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&lt;script
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.15pt;margin-bottom:
20.7pt;margin-left:.2in;text-align:justify;text-justify:inter-ideograph;
line-height:97%;background:#FAFAFA'><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#006F1F'>src=</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#406F9F'>&quot;https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js&quot;</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>&gt;&lt;
/script&gt;</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>&lt;script
src=</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
color:#406F9F'>&quot;https://cdnjs.cloudflare.com/ajax/libs/qs/6.6.0/qs.min.js&quot;</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>&gt;&lt;/script&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Rendering messages to the screen will require two
changes to the HTML. First up, a place needs to be created on the page to store
the rendered messages. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.25pt;
margin-left:.2in;line-height:107%;background:#FAFAFA'><span style='font-size:
11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;div id=</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;messages&quot;</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&gt;&lt;/div&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>Second, a template needs to be created for the
messages. The template below looks like pretty standard HTML. The only addition
is <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
color:#901F00;background:#FAFAFA'>{{message}}</span></sub>. This is the syntax
used to inject a value into the template. In this case, the message text will
be shown inside the templates paragraph. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&lt;script
id=</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#406F9F'>&quot;message-template&quot;</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'> type=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;text/html&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&lt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>div</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&lt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>p</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;{{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>message</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>&lt;/p</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    &lt;/div</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.2pt;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/script&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Rendering a
Template </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
2.65pt;margin-left:.2in'>The template can be compiled and rendered using
client-side JavaScript. The snippet below renders a new instance of the message
template to the screen whenever it receives a new <sub><span style='font-size:
17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>message</span></sub>
event. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:205.7pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 3.65pt 2.35pt 8.0pt;height:205.7pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:97.35pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#5F9FAF'>// Select the
  element in which you want to render the template</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> $messages </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'#messages'</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:6.55pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// Select the
  template</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>
  messageTemplate </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'#message-template'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>innerHTML</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:260.6pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas;color:#18167B'>socket</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (message) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:145.2pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Render the template with the message data</span><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>    </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> html </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>Mustache</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>render</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(messageTemplate</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        message</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Insert the template into the DOM</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:145.15pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>insertAdjacentHTML</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'beforeend'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> html)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:0in;text-indent:0in;line-height:110%'><span style='font-size:11.0pt;
line-height:110%'>      </span><span style='font-family:"Arial",sans-serif'>       </span><a
href="https://github.com/janl/mustache.js/"><span style='color:#4F81BC;
text-decoration:none'>Mustache.js</span></a><a
href="https://github.com/janl/mustache.js/"><span style='color:black;
text-decoration:none'> </span></a></p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222564"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 12: Rendering Location Messages </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to render a new template
for shared locations. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222565"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 13: Working with Time </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to work with time in
JavaScript. This will allow you to show users when a given message was sent. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Working with
Time </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.35pt;margin-left:.2in'>Every message is going to contain a timestamp. This
timestamp will represent the time when the server sent the message out to
everyone in the chat application. The server will be the one to generate the
timestamp, which prevents the client from lying about when a message was sent. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>A JavaScript timestamp is nothing more than an
integer. This integer represents the number of milliseconds since the Unix
Epoch. The Unix Epoch was January 1st, 1970 at midnight, so the timestamp for
the current point in time is a pretty big number. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:159.9pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
The getTime method is used to get the timestamp</span><span style='font-family:
Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
Consolas;color:#006F1F'>const</span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'> timestamp </span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>new</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>Date</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>().</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>getTime</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:159.9pt;margin-bottom:
20.7pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#18167B'>console</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas'>.</span><span style='font-size:
11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>log</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(timestamp) </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Will print: 1549481884646</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.65pt;margin-left:.2in'>Once the server sends the message and timestamp to
the client, the client can format the timestamp before rendering it. The Moment
library provides an easy way to format timestamps to fit your needs. For the
chat app, showing something like 11:48 am works well. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.3pt;margin-bottom:
19.75pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>moment</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>message</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>createdAt</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>format</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'h:mm
a'</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>You can find a complete list of the formatting
options in the documentation below. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Documentation
Links </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.8pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://momentjs.com/"><span style='color:#4F81BC;text-decoration:
none'>Moment</span></a><a href="https://momentjs.com/"><span style='color:black;
text-decoration:none'> </span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.6pt;
margin-left:37.9pt;text-indent:-24.0pt;line-height:110%'><span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a href="https://momentjs.com/docs/#/displaying/format/"><span
style='color:#4F81BC;text-decoration:none'>Moment formatting</span></a><a
href="https://momentjs.com/docs/#/displaying/format/"><span style='color:black;
text-decoration:none'> </span></a></p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222566"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 14: Timestamps for Location
Messages </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to add timestamps for
location messages. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.05pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222567"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 15: Styling the Chat App </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add styles to the chat
application. This will give it a professional and polished feel. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>This lesson contains detailed instructions to apply
the provided styles. Please refer to the video for a recap on working with the
styles. </p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222568"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 16: Join Page </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add a join page to the chat
application. This will allow users to pick a username and join a specific chat
room. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Adding a Join
Page </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>Below is the HTML for the join page. This will be <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>index.html</span></sub>.
The HTML for the chat page will move to <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>chat.html</span></sub>.
This will make sure that users visit the join page when pulling up the site. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:318.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 16.3pt 2.4pt 8.0pt;height:318.1pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&lt;!DOCTYPE
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas'>html</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#901F00'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;html&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;head&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;title&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>Chat App</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/title&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;link
  rel=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#406F9F'>&quot;icon&quot;</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'> href=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>&quot;/img/favicon.png&quot;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:60.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>&lt;link
  rel=</span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas;
  color:#406F9F'>&quot;stylesheet&quot;</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'> href=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>&quot;/css/styles.min.css&quot;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>&lt;/head&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;body&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;div
  class=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#406F9F'>&quot;centered-form&quot;</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;div
  class=</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#406F9F'>&quot;centered-form__box&quot;</span><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>               
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#006F1F'>&lt;h1&gt;</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas'>Join</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/h1&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>               
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#006F1F'>&lt;form action=</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#406F9F'>&quot;/chat.html&quot;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>                   
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#006F1F'>&lt;label&gt;</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas'>Display name</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/label&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.3pt;
  margin-left:0in;text-align:justify;text-justify:inter-ideograph;text-indent:
  0in;line-height:95%'><span style='font-size:11.0pt;line-height:95%;
  font-family:Consolas'>                    </span><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#006F1F'>&lt;input type=</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>&quot;text&quot;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#006F1F'>
  name=</span><span style='font-size:11.0pt;line-height:95%;font-family:Consolas;
  color:#406F9F'>&quot;username&quot;</span><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#006F1F'> placeholder=</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>&quot;Display
  name&quot;</span><span style='font-size:11.0pt;line-height:95%;font-family:
  Consolas;color:#006F1F'> required&gt;</span><span style='font-family:Consolas'>
  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>                   
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#006F1F'>&lt;label&gt;</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas'>Room</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/label&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.3pt;
  margin-left:0in;text-align:justify;text-justify:inter-ideograph;text-indent:
  0in;line-height:95%'><span style='font-size:11.0pt;line-height:95%;
  font-family:Consolas'>                    </span><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#006F1F'>&lt;input type=</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>&quot;text&quot;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#006F1F'>
  name=</span><span style='font-size:11.0pt;line-height:95%;font-family:Consolas;
  color:#406F9F'>&quot;room&quot;</span><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#006F1F'> placeholder=</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>&quot;Room&quot;</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#006F1F'>
  required&gt;</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>                   
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#006F1F'>&lt;button&gt;</span><span style='font-size:11.0pt;line-height:
  107%;font-family:Consolas'>Join</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/button&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>               
  </span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
  color:#006F1F'>&lt;/form&gt;</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>            </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/div&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/div&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/body&gt;</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>&lt;/html&gt;</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222569"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 17: Socket.io Rooms </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll learn how to work with rooms
in Socket.io. Rooms allow you to separate users into groups, which is a great
fit for the chat application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Socket.io Rooms </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>Its the servers job to add and remove users from a
room. The server can add a user to a room by calling <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.join</span></sub>
with the room name. Below, the listener for <sub><span style='font-size:17.0pt;
line-height:112%;font-family:Consolas;color:#06287D;background:#FAFAFA'>join</span></sub>
accepts the username and the room name from the client. <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.join(room)</span></sub>
is then called to add the user to the room they wanted to join. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:153.0pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 22.35pt 2.35pt 8.0pt;height:153.0pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'join'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> username</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> room </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:223.35pt;margin-bottom:
  .2pt;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Join the room</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>join</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(room)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Welcome the user to the room</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:114.4pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>generateMessage</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>'Welcome!'</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>))</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Broadcast an event to everyone in the room</span><span style='font-family:
  Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
  margin-left:0in;text-align:justify;text-justify:inter-ideograph;text-indent:
  0in;line-height:95%'><span style='font-size:11.0pt;line-height:95%;
  font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
  95%;font-family:Consolas;color:#18167B'>socket</span><span style='font-size:
  11.0pt;line-height:95%;font-family:Consolas'>.</span><span style='font-size:
  11.0pt;line-height:95%;font-family:Consolas;color:#18167B'>broadcast</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>to</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(room).</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>generateMessage</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>`${</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>username</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>}
  has joined!`</span><span style='font-size:11.0pt;line-height:95%;font-family:
  Consolas'>))</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;color:#06287D;background:#FAFAFA'>join</span> listener
above also calls <span style='font-size:11.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>to</span> as part of <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;background:#FAFAFA'>socket.broadcast.to.emit</span>.
The <span style='font-size:11.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>to</span> method allows an event to be emitted to a
specific room. In this case, when a user joins a room, only users in that room
will be notified. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
23.4pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>to</span></sub> method can also
be used with <sub><span style='font-size:17.0pt;line-height:112%;font-family:
Consolas;background:#FAFAFA'>io</span></sub> to send an event to everyone in a
room. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.2pt;margin-bottom:
24.4pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
Emit a message to everyone in a specific room</span><span style='font-family:
Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
Consolas;color:#18167B'>io</span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>.</span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#7C9029'>to</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas'>(</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#406F9F'>'Center City'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>emit</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'message'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>generateMessage</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(message))</span><span
style='font-family:Consolas'> </span></p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222570"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 18: Storing Users: Part I </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
9.3pt;margin-left:.2in'>In this lesson, youll create functions that allow the
chat application to track which users are in which rooms. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222571"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 19: Storing Users: Part II </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll continue to create functions
that allow the chat application to track which users are in which rooms. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
14.0pt;margin-left:.2in'>There are no notes for this challenge video, as no new
information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222572"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 20: Tracking Users Joining and
Leaving </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll use the functions created in
the last two lessons to track users. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Add and Removing
Users </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.9pt;margin-left:.2in'>When a user attempts to join a room, their username and
room name will be passed to <span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>addUser</span>. This will allow the
application to track the user, and itll also allow the data to be validated.
If an error occurs, that error message will be sent back to the client and the
user wont join the requests room. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:231.4pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 70.2pt 2.3pt 8.0pt;height:231.4pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'join'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (options</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> callback) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Validate/track user</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:99%'><span style='font-size:11.0pt;line-height:
  99%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> error</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>addUser</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#901F00'>id</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>:</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> ...</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>options</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:121.0pt;margin-bottom:
  .05pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  If error, send message back to client</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (error) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>return</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(error)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:73.1pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:98%'><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#5F9FAF'>//
  Else, join the room</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>join</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>room</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>generateMessage</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'Welcome!'</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>))</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>broadcast</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>to</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>room</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>generateMessage</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>`${</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>username</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>}
  has joined!`</span><span style='font-size:11.0pt;line-height:98%;font-family:
  Consolas'>))</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:321.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>    </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#7C9029'>callback</span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>()</span><span style='font-family:
  Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>When a user disconnects from the application, <sub><span
style='font-size:17.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>removeUser</span></sub>
is called to remove them from the list of active users. If a user was removed,
a message is sent to everyone in the chat room letting them know that someone
has left. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:113.2pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 22.35pt 2.3pt 8.0pt;height:113.2pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:223.8pt;margin-bottom:
  .15pt;margin-left:0in;text-indent:0in;line-height:97%'><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'disconnect'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>removeUser</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>if</span></b><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> (user) </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.15pt;
  margin-left:0in;text-align:justify;text-justify:inter-ideograph;text-indent:
  0in;line-height:95%'><span style='font-size:11.0pt;line-height:95%;
  font-family:Consolas'>        </span><span style='font-size:11.0pt;
  line-height:95%;font-family:Consolas;color:#18167B'>io</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>to</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>room</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>'message'</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>generateMessage</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>`${</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#7C9029'>username</span><span
  style='font-size:11.0pt;line-height:95%;font-family:Consolas;color:#406F9F'>}
  has left!`</span><span style='font-size:11.0pt;line-height:95%;font-family:
  Consolas'>))</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
28.7pt;margin-left:.2in'>The server uses an acknowledgement to send errors back
to the client. The client can set up the callback function and respond to any
errors that might occur. If an error does occur, the snippet below shows the
error message and then redirects the user back to the join page. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>socket</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>emit</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'join'</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> username</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> room </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>},</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (error) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>    </span><b><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'>if</span></b><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> (error) </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#7C9029'>alert</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(error)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas'>        </span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#18167B'>location</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>href</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>'/'</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
23.45pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>) </span><span
style='font-family:Consolas'> </span></p>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222573"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 21: Sending Messages to Rooms </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll use the tracked user data to
send messages to the correct rooms. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:8.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Sending Messages
to Room </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The <sub><span style='font-size:17.0pt;line-height:
112%;font-family:Consolas;background:#FAFAFA'>sendLocation</span></sub> event
listener below uses <sub><span style='font-size:17.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>getUser</span></sub> to get the
username and room for the user who sent the message. This allows the server to
use <sub><span style='font-size:17.0pt;line-height:112%;font-family:Consolas;
background:#FAFAFA'>to</span></sub> to emit the message to only users in that
chat room. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:165.9pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 5.75pt 2.3pt 8.0pt;height:165.9pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:173.85pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:98%'><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#406F9F'>'sendLocation'</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> (coords</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> callback) </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#5F9FAF'>// Get the username and
  room for the user</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> user </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>getUser</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>id</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.55pt;
  margin-left:0in;text-indent:0in;line-height:100%'><span style='font-size:
  11.0pt;line-height:100%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#5F9FAF'>//
  Emit the message to just that room</span><span style='font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>io</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>to</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>room</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>emit</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#406F9F'>'locationMessage'</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>generateLocationMessage</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#18167B'>user</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#7C9029'>username</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:100%;font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:52.4pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>`https://google.com/maps?q=${</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>coords</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>latitude</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>},${</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>coords</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>longitude</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#406F9F'>}`</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>))</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:137.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
  Send an acknowledgement to the client</span><span style='font-family:Consolas'>
  </span><span style='font-size:11.0pt;line-height:97%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>callback</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>()</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222574"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 22: Rendering User List </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll set up the chat application to
show a list of all active users in the sidebar. With Socket.io, this list will
be updated in real time. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:7.95pt;
margin-left:.2in;line-height:107%'><span style='color:#3D3D3E'>Rendering the
User List </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>The client can only render data it has access to, so
the server needs to send a list of all active users to the client. This data
should be sent again whenever a user is added or removed from a chat room. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
.4in;margin-left:.2in'><span style='font-size:11.0pt;line-height:112%;
font-family:Consolas;background:#FAFAFA'>getUsersInRoom</span> is used to get a
list of all users in a specific room. The server then emits <span
style='font-size:11.0pt;line-height:112%;font-family:Consolas;background:#FAFAFA'>roomData</span>
to all clients in that affected room letting them know to rerender their user
list. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:241.25pt;margin-bottom:
.15pt;margin-left:.2in;line-height:97%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>//
After a user joins or leaves</span><span style='font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>io</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>to</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>room</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>).</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>emit</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'roomData'</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;line-height:
97%;font-family:Consolas;color:#901F00'>room</span><span style='font-size:11.0pt;
line-height:97%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>room</span><span
style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:241.25pt;margin-bottom:
20.05pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#901F00'>users</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>:</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'> </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>getUsersInRoom</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>(</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#18167B'>user</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>.</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#7C9029'>room</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>)</span><span
style='font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:
102%;font-family:Consolas;color:#666666'>}</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas'>)</span><span style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>On the client-side, the sidebar template will be
responsible for rendering the room name and the list of users. Rendering a list
with Moustache requires a new syntax. In the template below, everything between
<span style='font-size:11.0pt;line-height:112%;font-family:Consolas;color:#901F00;
background:#FAFAFA'>{{#users}}</span> and <span style='font-size:11.0pt;
line-height:112%;font-family:Consolas;color:#901F00;background:#FAFAFA'>{{/users}}</span>
will be repeated for each user. In this case, the username is rendered in a
list item that will show up in the sidebar. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&lt;script
id=</span><span style='font-size:11.0pt;line-height:102%;font-family:Consolas;
color:#406F9F'>&quot;sidebar-template&quot;</span><span style='font-size:11.0pt;
line-height:102%;font-family:Consolas;color:#006F1F'> type=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;text/html&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&lt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>h2 </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>class</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;room-title&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;{{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>room</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>&lt;/h2</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&lt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>h3 </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>class</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;list-title&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>Users&lt;/h3</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>    </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&lt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>ul </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#006F1F'>class</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>=</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#406F9F'>&quot;users&quot;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>{{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>#users</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
.55pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>            </span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&lt;</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>li</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;{{</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>username</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>}}</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>&lt;/li</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas'>        </span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>{{</span><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#BA6687'>/users}}</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
0in;margin-left:.2in;line-height:107%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#BA6687'>   
&lt;/ul</span><span style='font-size:11.0pt;line-height:107%;font-family:Consolas;
color:#666666'>&gt;</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.4pt;margin-bottom:
19.9pt;margin-left:.2in;line-height:102%;background:#FAFAFA'><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas'>&lt;/script</span><span
style='font-size:11.0pt;line-height:102%;font-family:Consolas;color:#666666'>&gt;</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
7.85pt;margin-left:.2in'>The client-side is then able to listen for that event
and render the user list to the sidebar. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:126.1pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 3.65pt 2.35pt 8.0pt;height:126.1pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>
  sidebarTemplate </span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'#sidebar-template'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>innerHTML</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:163.9pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>socket</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>on</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#406F9F'>'roomData'</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> (</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> room</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> users </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> html </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>Mustache</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>render</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>(sidebarTemplate</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        room</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>,</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>        users</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>    </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:121.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:
  11.0pt;line-height:107%;font-family:Consolas'>    </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>document</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>querySelector</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>(</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#406F9F'>'#sidebar'</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>).</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>innerHTML</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> html</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222575"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 23: Automatic Scrolling </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, youll add automatic scrolling to the
chat application. </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>This lesson contains detailed instructions covering
automatic scrolling. The function used to enable autoscrolling is below, but
please refer to the lesson video for a recap of how it was designed. </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=645
 style='width:483.95pt;margin-left:6.65pt;border-collapse:collapse'>
 <tr style='height:298.2pt'>
  <td width=645 valign=bottom style='width:483.95pt;background:#FAFAFA;
  padding:0in 27.9pt 2.3pt 8.0pt;height:298.2pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:272.1pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> autoscroll </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> () </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=&gt;</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>     </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#5F9FAF'>// New message
  element</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:133.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas'>     </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> $newMessage </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>lastElementChild</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>      </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Height of the new message</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:6.55pt;margin-bottom:
  0in;margin-left:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:98%'><span style='font-size:11.0pt;line-height:
  98%;font-family:Consolas'>     </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>
  newMessageStyles </span><span style='font-size:11.0pt;line-height:98%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#7C9029'>getComputedStyle</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>($newMessage)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>     </span><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> newMessageMargin
  </span><span style='font-size:11.0pt;line-height:98%;font-family:Consolas;
  color:#666666'>=</span><span style='font-size:11.0pt;line-height:98%;
  font-family:Consolas'> </span><span style='font-size:11.0pt;line-height:98%;
  font-family:Consolas;color:#7C9029'>parseInt</span><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas'>(</span><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#18167B'>newMessageStyles</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>marginBottom</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>)</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'>     </span><span style='font-size:
  11.0pt;line-height:98%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>
  newMessageHeight </span><span style='font-size:11.0pt;line-height:98%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:98%;font-family:Consolas;color:#18167B'>$newMessage</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#7C9029'>offsetHeight</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:98%;font-family:Consolas'>
  newMessageMargin</span><span style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>      </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Visible height</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:145.15pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:99%'><span style='font-size:
  11.0pt;line-height:99%;font-family:Consolas'>     </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> visibleHeight </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:99%;font-family:Consolas;color:#7C9029'>offsetHeight</span><span
  style='font-family:Consolas'>  </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>      </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  Height of messages container</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>     </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>
  containerHeight </span><span style='font-size:11.0pt;line-height:107%;
  font-family:Consolas;color:#666666'>=</span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:107%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>scrollHeight</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>      </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#5F9FAF'>//
  How far have I scrolled?</span><span style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>     </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#006F1F'>const</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> scrollOffset </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#7C9029'>scrollTop</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>+</span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> visibleHeight</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin-top:0in;margin-right:67.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:97%'><span style='font-family:
  Consolas'> </span><span style='font-size:11.0pt;line-height:97%;font-family:
  Consolas'>      </span><b><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#006F1F'>if</span></b><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> (containerHeight </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>-</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>
  newMessageHeight </span><span style='font-size:11.0pt;line-height:97%;
  font-family:Consolas;color:#666666'>&lt;=</span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'> scrollOffset) </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>{</span><span
  style='font-family:Consolas'> </span><span style='font-size:11.0pt;
  line-height:97%;font-family:Consolas'>         </span><span style='font-size:
  11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>scrollTop</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#666666'>=</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#18167B'>$messages</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas'>.</span><span
  style='font-size:11.0pt;line-height:97%;font-family:Consolas;color:#7C9029'>scrollHeight</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'>     </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas'> </span><span
  style='font-size:11.0pt;line-height:107%;font-family:Consolas;color:#666666'>}</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
</table>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.2in;background:transparent'><a name="_Toc222576"><b><span style='font-size:
16.0pt;line-height:107%;color:#3D3D3E'>Lesson 24: Deploying the Chat
Application </span></b></a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>In this lesson, its on you to deploy the chat
application to production! </p>

<p class=MsoNormal style='margin-top:0in;margin-right:15.7pt;margin-bottom:
10.45pt;margin-left:.2in'>There are no notes for this challenge video, as no
new information is covered. The goal is to give you experience using what was
covered in previous lessons. </p>

</div>

</body>

</html>
