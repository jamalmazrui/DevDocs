<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>R Notes for Professionals</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Yu Gothic";
	panose-1:2 11 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:DengXian;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Calibri Light";
	panose-1:2 15 3 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Aptos Display";}
@font-face
	{font-family:Aptos;}
@font-face
	{font-family:"Segoe UI Emoji";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"DejaVu Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:1.7pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:108%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:.15pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:110%;
	page-break-after:avoid;
	font-size:26.0pt;
	font-family:"Calibri",sans-serif;
	color:#2066B9;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.7pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:18.0pt;
	font-family:"Calibri",sans-serif;
	color:#2066B9;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:2.7pt;
	margin-left:.5pt;
	text-indent:-.5pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:18.0pt;
	font-family:"Calibri",sans-serif;
	color:#2066B9;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:13.4pt;
	margin-left:.5pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-.5pt;
	line-height:109%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:.75pt;
	margin-bottom:1.7pt;
	margin-left:1.25pt;
	text-indent:-.5pt;
	line-height:108%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:.75pt;
	margin-bottom:3.5pt;
	margin-left:21.25pt;
	text-indent:-.5pt;
	line-height:108%;
	font-size:10.0pt;
	font-family:"Calibri",sans-serif;
	color:black;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Calibri",sans-serif;
	color:#2066B9;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Calibri",sans-serif;
	color:black;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Calibri",sans-serif;
	color:#2066B9;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Calibri",sans-serif;
	color:#2066B9;
	font-weight:bold;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:#65B4B4;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:#FF4B4B;}
.MsoChpDefault
	{font-size:12.0pt;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:23.8pt 41.95pt 45.3pt 28.35pt;}
div.WordSection1
	{page:WordSection1;}
@page WordSection2
	{size:595.3pt 841.9pt;
	margin:23.8pt 28.35pt 42.5pt 28.35pt;}
div.WordSection2
	{page:WordSection2;}
@page WordSection3
	{size:595.3pt 841.9pt;
	margin:23.8pt 28.75pt 20.5pt 28.35pt;}
div.WordSection3
	{page:WordSection3;}
@page WordSection4
	{size:595.3pt 841.9pt;
	margin:63.75pt 1.0in 34.15pt 1.0in;}
div.WordSection4
	{page:WordSection4;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal style='margin-top:0in;margin-right:553.35pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'><img width=792
height=1120 src="R%20Notes%20for%20Professionals_files/image001.jpg"><br
clear=ALL>
<br clear=all style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.0pt;
margin-left:-.25pt;line-height:110%'><b><span style='font-size:26.0pt;
line-height:110%;color:#2066B9'>Contents</span></b></p>

<p class=MsoToc1><a href="#_Toc618743"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>About</span></b><span style='color:black;
text-decoration:none'>........................................................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc618744"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 1: Getting started with R Language</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>2</span></a></p>

<p class=MsoToc2><a href="#_Toc618745"><span style='color:#2066B9'>Section 1.1:
Installing R</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>2</span></a></p>

<p class=MsoToc2><a href="#_Toc618746"><span style='color:#2066B9'>Section 1.2:
Hello World!</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>3</span></a></p>

<p class=MsoToc2><a href="#_Toc618747"><span style='color:#2066B9'>Section 1.3:
Getting Help</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>3</span></a></p>

<p class=MsoToc2><a href="#_Toc618748"><span style='color:#2066B9'>Section 1.4:
Interactive mode and R scripts</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>3</span></a></p>

<p class=MsoToc1><a href="#_Toc618749"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 2: Variables</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>7</span></a></p>

<p class=MsoToc2><a href="#_Toc618750"><span style='color:#2066B9'>Section 2.1:
Variables, data structures and basic Operations</span><span style='color:black;
text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>7</span></a></p>

<p class=MsoToc1><a href="#_Toc618751"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 3: Arithmetic Operators</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>10</span></a></p>

<p class=MsoToc2><a href="#_Toc618752"><span style='color:#2066B9'>Section 3.1:
Range and addition</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>10</span></a></p>

<p class=MsoToc2><a href="#_Toc618753"><span style='color:#2066B9'>Section 3.2:
Addition and subtraction</span><span style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>10</span></a></p>

<p class=MsoToc1><a href="#_Toc618754"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 4: Matrices</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>13</span></a></p>

<p class=MsoToc2><a href="#_Toc618755"><span style='color:#2066B9'>Section 4.1:
Creating matrices</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>13</span></a></p>

<p class=MsoToc1><a href="#_Toc618756"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 5: Formula</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>15</span></a></p>

<p class=MsoToc2><a href="#_Toc618757"><span style='color:#2066B9'>Section 5.1:
The basics of formula</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>15</span></a></p>

<p class=MsoToc1><a href="#_Toc618758"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 6: Reading and writing strings</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>17</span></a></p>

<p class=MsoToc2><a href="#_Toc618759"><span style='color:#2066B9'>Section 6.1:
Printing and displaying strings</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>17</span></a></p>

<p class=MsoToc2><a href="#_Toc618760"><span style='color:#2066B9'>Section 6.2:
Capture output of operating system command</span><span style='color:black;
text-decoration:none'>................................................................................................................. </span><span style='color:black;text-decoration:none'>18</span></a></p>

<p class=MsoToc2><a href="#_Toc618761"><span style='color:#2066B9'>Section 6.3:
Reading from or writing to a file connection</span><span style='color:black;
text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>19</span></a></p>

<p class=MsoToc1><a href="#_Toc618762"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 7: String manipulation with stringi
package</span></b><span style='color:black;text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>21</span></a></p>

<p class=MsoToc2><a href="#_Toc618763"><span style='color:#2066B9'>Section 7.1:
Count pattern inside string</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>21</span></a></p>

<p class=MsoToc2><a href="#_Toc618764"><span style='color:#2066B9'>Section 7.2:
Duplicating strings</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>21</span></a></p>

<p class=MsoToc2><a href="#_Toc618765"><span style='color:#2066B9'>Section 7.3:
Paste vectors</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>22</span></a></p>

<p class=MsoToc2><a href="#_Toc618766"><span style='color:#2066B9'>Section 7.4:
Splitting text by some fixed pattern</span><span style='color:black;text-decoration:
none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>22</span></a></p>

<p class=MsoToc1><a href="#_Toc618767"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 8: Classes</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>23</span></a></p>

<p class=MsoToc2><a href="#_Toc618768"><span style='color:#2066B9'>Section 8.1:
Inspect classes</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>23</span></a></p>

<p class=MsoToc2><a href="#_Toc618769"><span style='color:#2066B9'>Section 8.2:
Vectors and lists</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>23</span></a></p>

<p class=MsoToc2><a href="#_Toc618770"><span style='color:#2066B9'>Section 8.3:
Vectors</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>24</span></a></p>

<p class=MsoToc1><a href="#_Toc618771"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 9: Lists</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>25</span></a></p>

<p class=MsoToc2><a href="#_Toc618772"><span style='color:#2066B9'>Section 9.1:
Introduction to lists</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>25</span></a></p>

<p class=MsoToc2><a href="#_Toc618773"><span style='color:#2066B9'>Section 9.2:
Quick Introduction to Lists</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>25</span></a></p>

<p class=MsoToc2><a href="#_Toc618774"><span style='color:#2066B9'>Section 9.3:
Serialization: using lists to pass information</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>27</span></a></p>

<p class=MsoToc1><a href="#_Toc618775"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 10: Hashmaps</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>29</span></a></p>

<p class=MsoToc2><a href="#_Toc618776"><span style='color:#2066B9'>Section
10.1: Environments as hash maps</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>29</span></a></p>

<p class=MsoToc2><a href="#_Toc618777"><span style='color:#2066B9'>Section
10.2: package:hash</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>32</span></a></p>

<p class=MsoToc2><a href="#_Toc618778"><span style='color:#2066B9'>Section
10.3: package:listenv</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>33</span></a></p>

<p class=MsoToc1><a href="#_Toc618779"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 11: Creating vectors</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc618780"><span style='color:#2066B9'>Section
11.1: Vectors from build in constants: Sequences of letters &amp; month names</span><span
style='color:black;text-decoration:none'>...................................................................... </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc618781"><span style='color:#2066B9'>Section
11.2: Creating named vectors</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>35</span></a></p>

<p class=MsoToc2><a href="#_Toc618782"><span style='color:#2066B9'>Section
11.3: Sequence of numbers</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>37</span></a></p>

<p class=MsoToc2><a href="#_Toc618783"><span style='color:#2066B9'>Section
11.4: seq()</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>37</span></a></p>

<p class=MsoToc2><a href="#_Toc618784"><span style='color:#2066B9'>Section
11.5: Vectors</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>38</span></a></p>

<p class=MsoToc2><a href="#_Toc618785"><span style='color:#2066B9'>Section
11.6: Expanding a vector with the rep() function</span><span style='color:black;
text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>39</span></a></p>

<p class=MsoToc1><a href="#_Toc618786"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 12: Date and Time</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>41</span></a></p>

<p class=MsoToc2><a href="#_Toc618787"><span style='color:#2066B9'>Section
12.1: Current Date and Time</span><span style='color:black;text-decoration:
none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>41</span></a></p>

<p class=MsoToc2><a href="#_Toc618788"><span style='color:#2066B9'>Section
12.2: Go to the End of the Month</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>41</span></a></p>

<p class=MsoToc2><a href="#_Toc618789"><span style='color:#2066B9'>Section
12.3: Go to First Day of the Month</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>42</span></a></p>

<p class=MsoToc2><a href="#_Toc618790"><span style='color:#2066B9'>Section
12.4: Move a date a number of months consistently by months</span><span
style='color:black;text-decoration:none'>........................................................................................... </span><span style='color:black;text-decoration:none'>42</span></a></p>

<p class=MsoToc1><a href="#_Toc618791"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 13: The Date class</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>44</span></a></p>

<p class=MsoToc2><a href="#_Toc618792"><span style='color:#2066B9'>Section
13.1: Formatting Dates</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>44</span></a></p>

<p class=MsoToc2><a href="#_Toc618793"><span style='color:#2066B9'>Section
13.2: Parsing Strings into Date Objects</span><span style='color:black;
text-decoration:none'>........................................................................................................................................ </span><span style='color:black;text-decoration:none'>44</span></a></p>

<p class=MsoToc2><a href="#_Toc618794"><span style='color:#2066B9'>Section
13.3: Dates</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>45</span></a></p>

<p class=MsoToc1><a href="#_Toc618795"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 14: Date-time classes (POSIXct and
POSIXlt)</span></b><span style='color:black;text-decoration:none'>................................................................................................................. </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc618796"><span style='color:#2066B9'>Section
14.1: Formatting and printing date-time objects</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc618797"><span style='color:#2066B9'>Section
14.2: Date-time arithmetic</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>47</span></a></p>

<p class=MsoToc2><a href="#_Toc618798"><span style='color:#2066B9'>Section
14.3: Parsing strings into date-time objects</span><span style='color:black;
text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>48</span></a></p>

<p class=MsoToc1><a href="#_Toc618799"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 15: The character class</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>50</span></a></p>

<p class=MsoToc2><a href="#_Toc618800"><span style='color:#2066B9'>Section
15.1: Coercion</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>50</span></a></p>

<p class=MsoToc1><a href="#_Toc618801"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 16: Numeric classes and storage modes</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................... </span><span style='color:black;text-decoration:none'>51</span></a></p>

<p class=MsoToc2><a href="#_Toc618802"><span style='color:#2066B9'>Section
16.1: Numeric</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>51</span></a></p>

<p class=MsoToc1><a href="#_Toc618803"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 17: The logical class</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc618804"><span style='color:#2066B9'>Section
17.1: Logical operators</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc618805"><span style='color:#2066B9'>Section
17.2: Coercion</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc2><a href="#_Toc618806"><span style='color:#2066B9'>Section
17.3: Interpretation of NAs</span><span style='color:black;text-decoration:
none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>53</span></a></p>

<p class=MsoToc1><a href="#_Toc618807"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 18: Data frames</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>55</span></a></p>

<p class=MsoToc2><a href="#_Toc618808"><span style='color:#2066B9'>Section
18.1: Create an empty data.frame</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>55</span></a></p>

<p class=MsoToc2><a href="#_Toc618809"><span style='color:#2066B9'>Section
18.2: Subsetting rows and columns from a data frame</span><span
style='color:black;text-decoration:none'>............................................................................................................ </span><span style='color:black;text-decoration:none'>56</span></a></p>

<p class=MsoToc2><a href="#_Toc618810"><span style='color:#2066B9'>Section
18.3: Convenience functions to manipulate data.frames</span><span
style='color:black;text-decoration:none'>........................................................................................................ </span><span style='color:black;text-decoration:none'>59</span></a></p>

<p class=MsoToc2><a href="#_Toc618811"><span style='color:#2066B9'>Section
18.4: Introduction</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>60</span></a></p>

<p class=MsoToc2><a href="#_Toc618812"><span style='color:#2066B9'>Section
18.5: Convert all columns of a data.frame to character class</span><span
style='color:black;text-decoration:none'>.................................................................................................. </span><span style='color:black;text-decoration:none'>61</span></a></p>

<p class=MsoToc1><a href="#_Toc618813"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 19: Split function</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>63</span></a></p>

<p class=MsoToc2><a href="#_Toc618814"><span style='color:#2066B9'>Section
19.1: Using split in the split-apply-combine paradigm</span><span
style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>63</span></a></p>

<p class=MsoToc2><a href="#_Toc618815"><span style='color:#2066B9'>Section
19.2: Basic usage of split</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>64</span></a></p>

<p class=MsoToc1><a href="#_Toc618816"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 20: Reading and writing tabular data in
plain-text files (CSV, TSV, etc.)</span></b><span style='color:black;
text-decoration:none'>........................................................ </span><sub><span style='font-size:15.5pt;line-height:108%;color:black;text-decoration:none'>67</span></sub></a></p>

<p class=MsoToc2><a href="#_Toc618817"><span style='color:#2066B9'>Section
20.1: Importing .csv files</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>67</span></a></p>

<p class=MsoToc2><a href="#_Toc618818"><span style='color:#2066B9'>Section
20.2: Importing with data.table</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>68</span></a></p>

<p class=MsoToc2><a href="#_Toc618819"><span style='color:#2066B9'>Section
20.3: Exporting .csv files</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc2><a href="#_Toc618820"><span style='color:#2066B9'>Section
20.4: Import multiple csv files</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc2><a href="#_Toc618821"><span style='color:#2066B9'>Section
20.5: Importing fixed-width files</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................. </span><span style='color:black;text-decoration:none'>69</span></a></p>

<p class=MsoToc1><a href="#_Toc618822"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 21: Pipe operators (%&gt;% and others)</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................ </span><span style='color:black;text-decoration:none'>71</span></a></p>

<p class=MsoToc2><a href="#_Toc618823"><span style='color:#2066B9'>Section
21.1: Basic use and chaining</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>71</span></a></p>

<p class=MsoToc2><a href="#_Toc618824"><span style='color:#2066B9'>Section
21.2: Functional sequences</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>72</span></a></p>

<p class=MsoToc2><a href="#_Toc618825"><span style='color:#2066B9'>Section
21.3: Assignment with %&lt;&gt;%</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>73</span></a></p>

<p class=MsoToc2><a href="#_Toc618826"><span style='color:#2066B9'>Section
21.4: Exposing contents with %$%</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>73</span></a></p>

<p class=MsoToc2><a href="#_Toc618827"><span style='color:#2066B9'>Section
21.5: Creating side e&#57379;ects with %T&gt;%</span><span style='color:black;
text-decoration:none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>74</span></a></p>

<p class=MsoToc2><a href="#_Toc618828"><span style='color:#2066B9'>Section
21.6: Using the pipe with dplyr and ggplot2</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>75</span></a></p>

<p class=MsoToc1><a href="#_Toc618829"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 22: Linear Models (Regression)</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>76</span></a></p>

<p class=MsoToc2><a href="#_Toc618830"><span style='color:#2066B9'>Section
22.1: Linear regression on the mtcars dataset</span><span style='color:black;
text-decoration:none'>........................................................................................................................... </span><span style='color:black;text-decoration:none'>76</span></a></p>

<p class=MsoToc2><a href="#_Toc618831"><span style='color:#2066B9'>Section
22.2: Using the 'predict' function</span><span style='color:black;text-decoration:
none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>78</span></a></p>

<p class=MsoToc2><a href="#_Toc618832"><span style='color:#2066B9'>Section
22.3: Weighting</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>79</span></a></p>

<p class=MsoToc2><a href="#_Toc618833"><span style='color:#2066B9'>Section
22.4: Checking for nonlinearity with polynomial regression</span><span
style='color:black;text-decoration:none'>................................................................................................... </span><span style='color:black;text-decoration:none'>81</span></a></p>

<p class=MsoToc2><a href="#_Toc618834"><span style='color:#2066B9'>Section
22.5: Plotting The Regression (base)</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>83</span></a></p>

<p class=MsoToc2><a href="#_Toc618835"><span style='color:#2066B9'>Section
22.6: Quality assessment</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>85</span></a></p>

<p class=MsoToc1><a href="#_Toc618836"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 23: data.table</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>87</span></a></p>

<p class=MsoToc2><a href="#_Toc618837"><span style='color:#2066B9'>Section
23.1: Creating a data.table</span><span style='color:black;text-decoration:
none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>87</span></a></p>

<p class=MsoToc2><a href="#_Toc618838"><span style='color:#2066B9'>Section
23.2: Special symbols in data.table</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>88</span></a></p>

<p class=MsoToc2><a href="#_Toc618839"><span style='color:#2066B9'>Section
23.3: Adding and modifying columns</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>89</span></a></p>

<p class=MsoToc2><a href="#_Toc618840"><span style='color:#2066B9'>Section
23.4: Writing code compatible with both data.frame and data.table</span><span
style='color:black;text-decoration:none'>.................................................................................... </span><span style='color:black;text-decoration:none'>91</span></a></p>

<p class=MsoToc2><a href="#_Toc618841"><span style='color:#2066B9'>Section
23.5: Setting keys in data.table</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>93</span></a></p>

<p class=MsoToc1><a href="#_Toc618842"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 24: Pivot and unpivot with data.table</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>95</span></a></p>

<p class=MsoToc2><a href="#_Toc618843"><span style='color:#2066B9'>Section
24.1: Pivot and unpivot tabular data with data.table - I</span><span
style='color:black;text-decoration:none'>........................................................................................................... </span><span style='color:black;text-decoration:none'>95</span></a></p>

<p class=MsoToc2><a href="#_Toc618844"><span style='color:#2066B9'>Section
24.2: Pivot and unpivot tabular data with data.table - II</span><span
style='color:black;text-decoration:none'>.......................................................................................................... </span><span style='color:black;text-decoration:none'>96</span></a></p>

<p class=MsoToc1><a href="#_Toc618845"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 25: Bar Chart</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>98</span></a></p>

<p class=MsoToc2><a href="#_Toc618846"><span style='color:#2066B9'>Section
25.1: barplot() function</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>98</span></a></p>

<p class=MsoToc1><a href="#_Toc618847"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 26: Base Plotting</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>104</span></a></p>

<p class=MsoToc2><a href="#_Toc618848"><span style='color:#2066B9'>Section
26.1: Density plot</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>104</span></a></p>

<p class=MsoToc2><a href="#_Toc618849"><span style='color:#2066B9'>Section
26.2: Combining Plots</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>105</span></a></p>

<p class=MsoToc2><a href="#_Toc618850"><span style='color:#2066B9'>Section
26.3: Getting Started with R_Plots</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>107</span></a></p>

<p class=MsoToc2><a href="#_Toc618851"><span style='color:#2066B9'>Section
26.4: Basic Plot</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>108</span></a></p>

<p class=MsoToc2><a href="#_Toc618852"><span style='color:#2066B9'>Section
26.5: Histograms</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>111</span></a></p>

<p class=MsoToc2><a href="#_Toc618853"><span style='color:#2066B9'>Section
26.6: Matplot</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>113</span></a></p>

<p class=MsoToc2><a href="#_Toc618854"><span style='color:#2066B9'>Section
26.7: Empirical Cumulative Distribution Function</span><span style='color:black;
text-decoration:none'>................................................................................................................... </span><span style='color:black;text-decoration:none'>119</span></a></p>

<p class=MsoToc1><a href="#_Toc618855"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 27: boxplot</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>121</span></a></p>

<p class=MsoToc2><a href="#_Toc618856"><span style='color:#2066B9'>Section
27.1: Create a box-and-whisker plot with boxplot() {graphics}</span><span
style='color:black;text-decoration:none'>............................................................................................ </span><span style='color:black;text-decoration:none'>121</span></a></p>

<p class=MsoToc2><a href="#_Toc618857"><span style='color:#2066B9'>Section
27.2: Additional boxplot style parameters</span><span style='color:black;
text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>125</span></a></p>

<p class=MsoToc1><a href="#_Toc618858"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 28: ggplot2</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>128</span></a></p>

<p class=MsoToc2><a href="#_Toc618859"><span style='color:#2066B9'>Section
28.1: Displaying multiple plots</span><span style='color:black;text-decoration:
none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>128</span></a></p>

<p class=MsoToc2><a href="#_Toc618860"><span style='color:#2066B9'>Section
28.2: Prepare your data for plotting</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................... </span><span style='color:black;text-decoration:none'>131</span></a></p>

<p class=MsoToc2><a href="#_Toc618861"><span style='color:#2066B9'>Section
28.3: Add horizontal and vertical lines to plot</span><span style='color:black;
text-decoration:none'>......................................................................................................................... </span><span style='color:black;text-decoration:none'>133</span></a></p>

<p class=MsoToc2><a href="#_Toc618862"><span style='color:#2066B9'>Section
28.4: Scatter Plots</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>136</span></a></p>

<p class=MsoToc2><a href="#_Toc618863"><span style='color:#2066B9'>Section
28.5: Produce basic plots with qplot</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>136</span></a></p>

<p class=MsoToc2><a href="#_Toc618864"><span style='color:#2066B9'>Section
28.6: Vertical and Horizontal Bar Chart</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>138</span></a></p>

<p class=MsoToc2><a href="#_Toc618865"><span style='color:#2066B9'>Section
28.7: Violin plot</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>140</span></a></p>

<p class=MsoToc1><a href="#_Toc618866"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 29: Factors</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>143</span></a></p>

<p class=MsoToc2><a href="#_Toc618867"><span style='color:#2066B9'>Section
29.1: Consolidating Factor Levels with a List</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>143</span></a></p>

<p class=MsoToc2><a href="#_Toc618868"><span style='color:#2066B9'>Section
29.2: Basic creation of factors</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>144</span></a></p>

<p class=MsoToc2><a href="#_Toc618869"><span style='color:#2066B9'>Section
29.3: Changing and reordering factors</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>145</span></a></p>

<p class=MsoToc2><a href="#_Toc618870"><span style='color:#2066B9'>Section
29.4: Rebuilding factors from zero</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>150</span></a></p>

<p class=MsoToc1><a href="#_Toc618871"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 30: Pattern Matching and Replacement</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>152</span></a></p>

<p class=MsoToc2><a href="#_Toc618872"><span style='color:#2066B9'>Section
30.1: Finding Matches</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>152</span></a></p>

<p class=MsoToc2><a href="#_Toc618873"><span style='color:#2066B9'>Section
30.2: Single and Global match</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>153</span></a></p>

<p class=MsoToc2><a href="#_Toc618874"><span style='color:#2066B9'>Section
30.3: Making substitutions</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>154</span></a></p>

<p class=MsoToc2><a href="#_Toc618875"><span style='color:#2066B9'>Section
30.4: Find matches in big data sets</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>154</span></a></p>

<p class=MsoToc1><a href="#_Toc618876"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 31: Run-length encoding</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>156</span></a></p>

<p class=MsoToc2><a href="#_Toc618877"><span style='color:#2066B9'>Section
31.1: Run-length Encoding with `rle`</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>156</span></a></p>

<p class=MsoToc2><a href="#_Toc618878"><span style='color:#2066B9'>Section
31.2: Identifying and grouping by runs in base R</span><span style='color:black;
text-decoration:none'>.................................................................................................................... </span><span style='color:black;text-decoration:none'>156</span></a></p>

<p class=MsoToc2><a href="#_Toc618879"><span style='color:#2066B9'>Section
31.3: Run-length encoding to compress and decompress vectors</span><span
style='color:black;text-decoration:none'>....................................................................................... </span><span style='color:black;text-decoration:none'>157</span></a></p>

<p class=MsoToc2><a href="#_Toc618880"><span style='color:#2066B9'>Section
31.4: Identifying and grouping by runs in data.table</span><span
style='color:black;text-decoration:none'>.............................................................................................................. </span><span style='color:black;text-decoration:none'>158</span></a></p>

<p class=MsoToc1><a href="#_Toc618881"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 32: Speeding up tough-to-vectorize code</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................... </span><span style='color:black;text-decoration:none'>159</span></a></p>

<p class=MsoToc2><a href="#_Toc618882"><span style='color:#2066B9'>Section
32.1: Speeding tough-to-vectorize for loops with Rcpp</span><span
style='color:black;text-decoration:none'>......................................................................................................... </span><span style='color:black;text-decoration:none'>159</span></a></p>

<p class=MsoToc2><a href="#_Toc618883"><span style='color:#2066B9'>Section
32.2: Speeding tough-to-vectorize for loops by byte compiling</span><span
style='color:black;text-decoration:none'>........................................................................................... </span><span style='color:black;text-decoration:none'>159</span></a></p>

<p class=MsoToc1><a href="#_Toc618884"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 33: Introduction to Geographical Maps</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................... </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc618885"><span style='color:#2066B9'>Section
33.1: Basic map-making with map() from the package maps</span><span
style='color:black;text-decoration:none'>............................................................................................... </span><span style='color:black;text-decoration:none'>161</span></a></p>

<p class=MsoToc2><a href="#_Toc618886"><span style='color:#2066B9'>Section
33.2: 50 State Maps and Advanced Choropleths with Google Viz</span><span
style='color:black;text-decoration:none'>....................................................................................... </span><span style='color:black;text-decoration:none'>164</span></a></p>

<p class=MsoToc2><a href="#_Toc618887"><span style='color:#2066B9'>Section
33.3: Interactive plotly maps</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>165</span></a></p>

<p class=MsoToc2><a href="#_Toc618888"><span style='color:#2066B9'>Section
33.4: Making Dynamic HTML Maps with Leaflet</span><span style='color:black;
text-decoration:none'>..................................................................................................................... </span><span style='color:black;text-decoration:none'>167</span></a></p>

<p class=MsoToc2><a href="#_Toc618889"><span style='color:#2066B9'>Section
33.5: Dynamic Leaflet maps in Shiny applications</span><span style='color:black;
text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>168</span></a></p>

<p class=MsoToc1><a href="#_Toc618890"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 34: Set operations</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>171</span></a></p>

<p class=MsoToc2><a href="#_Toc618891"><span style='color:#2066B9'>Section
34.1: Set operators for pairs of vectors</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>171</span></a></p>

<p class=MsoToc2><a href="#_Toc618892"><span style='color:#2066B9'>Section
34.2: Cartesian or &quot;cross&quot; products of vectors</span><span
style='color:black;text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>171</span></a></p>

<p class=MsoToc2><a href="#_Toc618893"><span style='color:#2066B9'>Section
34.3: Set membership for vectors</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>172</span></a></p>

<p class=MsoToc2><a href="#_Toc618894"><span style='color:#2066B9'>Section
34.4: Make unique / drop duplicates / select distinct elements from a vector</span><span
style='color:black;text-decoration:none'>................................................................. </span><span style='color:black;text-decoration:none'>172</span></a></p>

<p class=MsoToc2><a href="#_Toc618895"><span style='color:#2066B9'>Section
34.5: Measuring set overlaps / Venn diagrams for vectors</span><span
style='color:black;text-decoration:none'>................................................................................................... </span><span style='color:black;text-decoration:none'>173</span></a></p>

<p class=MsoToc1><a href="#_Toc618896"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 35: tidyverse</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>174</span></a></p>

<p class=MsoToc2><a href="#_Toc618897"><span style='color:#2066B9'>Section
35.1: tidyverse: an overview</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>174</span></a></p>

<p class=MsoToc2><a href="#_Toc618898"><span style='color:#2066B9'>Section
35.2: Creating tbl_dfs</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>175</span></a></p>

<p class=MsoToc1><a href="#_Toc618899"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 36: Rcpp</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>176</span></a></p>

<p class=MsoToc2><a href="#_Toc618900"><span style='color:#2066B9'>Section
36.1: Extending Rcpp with Plugins</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>176</span></a></p>

<p class=MsoToc2><a href="#_Toc618901"><span style='color:#2066B9'>Section
36.2: Inline Code Compile</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>176</span></a></p>

<p class=MsoToc2><a href="#_Toc618902"><span style='color:#2066B9'>Section
36.3: Rcpp Attributes</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>177</span></a></p>

<p class=MsoToc2><a href="#_Toc618903"><span style='color:#2066B9'>Section
36.4: Specifying Additional Build Dependencies</span><span style='color:black;
text-decoration:none'>..................................................................................................................... </span><span style='color:black;text-decoration:none'>178</span></a></p>

<p class=MsoToc1><a href="#_Toc618904"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 37: Random Numbers Generator</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>179</span></a></p>

<p class=MsoToc2><a href="#_Toc618905"><span style='color:#2066B9'>Section
37.1: Random permutations</span><span style='color:black;text-decoration:none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>179</span></a></p>

<p class=MsoToc2><a href="#_Toc618906"><span style='color:#2066B9'>Section
37.2: Generating random numbers using various density functions</span><span
style='color:black;text-decoration:none'>................................................................................... </span><span style='color:black;text-decoration:none'>179</span></a></p>

<p class=MsoToc2><a href="#_Toc618907"><span style='color:#2066B9'>Section
37.3: Random number generator's reproducibility</span><span style='color:black;
text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>181</span></a></p>

<p class=MsoToc1><a href="#_Toc618908"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 38: Parallel processing</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc2><a href="#_Toc618909"><span style='color:#2066B9'>Section
38.1: Parallel processing with parallel package</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>182</span></a></p>

<p class=MsoToc2><a href="#_Toc618910"><span style='color:#2066B9'>Section
38.2: Parallel processing with foreach package</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>183</span></a></p>

<p class=MsoToc2><a href="#_Toc618911"><span style='color:#2066B9'>Section
38.3: Random Number Generation</span><span style='color:black;text-decoration:
none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>184</span></a></p>

<p class=MsoToc2><a href="#_Toc618912"><span style='color:#2066B9'>Section
38.4: mcparallelDo</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>184</span></a></p>

<p class=MsoToc1><a href="#_Toc618913"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 39: Subsetting</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>186</span></a></p>

<p class=MsoToc2><a href="#_Toc618914"><span style='color:#2066B9'>Section
39.1: Data frames</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>186</span></a></p>

<p class=MsoToc2><a href="#_Toc618915"><span style='color:#2066B9'>Section
39.2: Atomic vectors</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>187</span></a></p>

<p class=MsoToc2><a href="#_Toc618916"><span style='color:#2066B9'>Section
39.3: Matrices</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>188</span></a></p>

<p class=MsoToc2><a href="#_Toc618917"><span style='color:#2066B9'>Section
39.4: Lists</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>190</span></a></p>

<p class=MsoToc2><a href="#_Toc618918"><span style='color:#2066B9'>Section
39.5: Vector indexing</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>191</span></a></p>

<p class=MsoToc2><a href="#_Toc618919"><span style='color:#2066B9'>Section
39.6: Other objects</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>192</span></a></p>

<p class=MsoToc2><a href="#_Toc618920"><span style='color:#2066B9'>Section
39.7: Elementwise Matrix Operations</span><span style='color:black;text-decoration:
none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>192</span></a></p>

<p class=MsoToc1><a href="#_Toc618921"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 40: Debugging</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>194</span></a></p>

<p class=MsoToc2><a href="#_Toc618922"><span style='color:#2066B9'>Section
40.1: Using debug</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>194</span></a></p>

<p class=MsoToc2><a href="#_Toc618923"><span style='color:#2066B9'>Section
40.2: Using browser</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>194</span></a></p>

<p class=MsoToc1><a href="#_Toc618924"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 41: Installing packages</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>196</span></a></p>

<p class=MsoToc2><a href="#_Toc618925"><span style='color:#2066B9'>Section
41.1: Install packages from GitHub</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>196</span></a></p>

<p class=MsoToc2><a href="#_Toc618926"><span style='color:#2066B9'>Section
41.2: Download and install packages from repositories</span><span
style='color:black;text-decoration:none'>........................................................................................................ </span><span style='color:black;text-decoration:none'>197</span></a></p>

<p class=MsoToc2><a href="#_Toc618927"><span style='color:#2066B9'>Section
41.3: Install package from local source</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>198</span></a></p>

<p class=MsoToc2><a href="#_Toc618928"><span style='color:#2066B9'>Section
41.4: Install local development version of a package</span><span
style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>198</span></a></p>

<p class=MsoToc2><a href="#_Toc618929"><span style='color:#2066B9'>Section
41.5: Using a CLI package manager -- basic pacman usage</span><span
style='color:black;text-decoration:none'>................................................................................................... </span><span style='color:black;text-decoration:none'>199</span></a></p>

<p class=MsoToc1><a href="#_Toc618930"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 42: Inspecting packages</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc2><a href="#_Toc618931"><span style='color:#2066B9'>Section
42.1: View Package Version</span><span style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc2><a href="#_Toc618932"><span style='color:#2066B9'>Section
42.2: View Loaded packages in Current Session</span><span style='color:black;
text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc2><a href="#_Toc618933"><span style='color:#2066B9'>Section
42.3: View package information</span><span style='color:black;text-decoration:
none'>................................................................................................................................................. </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc2><a href="#_Toc618934"><span style='color:#2066B9'>Section
42.4: View package's built-in data sets</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc2><a href="#_Toc618935"><span style='color:#2066B9'>Section
42.5: List a package's exported functions</span><span style='color:black;
text-decoration:none'>................................................................................................................................. </span><span style='color:black;text-decoration:none'>200</span></a></p>

<p class=MsoToc1><a href="#_Toc618936"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 43: Creating packages with devtools</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>201</span></a></p>

<p class=MsoToc2><a href="#_Toc618937"><span style='color:#2066B9'>Section
43.1: Creating and distributing packages</span><span style='color:black;
text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>201</span></a></p>

<p class=MsoToc2><a href="#_Toc618938"><span style='color:#2066B9'>Section
43.2: Creating vignettes</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>203</span></a></p>

<p class=MsoToc1><a href="#_Toc618939"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 44: Using pipe assignment in your own
package %&lt;&gt;%: How to ?</span></b><span style='color:black;text-decoration:
none'>................................................................. </span><span style='color:black;text-decoration:none'>204</span></a></p>

<p class=MsoToc2><a href="#_Toc618940"><span style='color:#2066B9'>Section
44.1: Putting the pipe in a utility-functions file</span><span
style='color:black;text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>204</span></a></p>

<p class=MsoToc1><a href="#_Toc618941"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 45: Arima Models</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>205</span></a></p>

<p class=MsoToc2><a href="#_Toc618942"><span style='color:#2066B9'>Section
45.1: Modeling an AR1 Process with Arima</span><span style='color:black;
text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>205</span></a></p>

<p class=MsoToc1><a href="#_Toc618943"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 46: Distribution Functions</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>210</span></a></p>

<p class=MsoToc2><a href="#_Toc618944"><span style='color:#2066B9'>Section
46.1: Normal distribution</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>210</span></a></p>

<p class=MsoToc2><a href="#_Toc618945"><span style='color:#2066B9'>Section
46.2: Binomial Distribution</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>210</span></a></p>

<p class=MsoToc1><a href="#_Toc618946"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 47: Shiny</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>214</span></a></p>

<p class=MsoToc2><a href="#_Toc618947"><span style='color:#2066B9'>Section
47.1: Create an app</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>214</span></a></p>

<p class=MsoToc2><a href="#_Toc618948"><span style='color:#2066B9'>Section
47.2: Checkbox Group</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>214</span></a></p>

<p class=MsoToc2><a href="#_Toc618949"><span style='color:#2066B9'>Section
47.3: Radio Button</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>215</span></a></p>

<p class=MsoToc2><a href="#_Toc618950"><span style='color:#2066B9'>Section
47.4: Debugging</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>216</span></a></p>

<p class=MsoToc2><a href="#_Toc618951"><span style='color:#2066B9'>Section
47.5: Select box</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>216</span></a></p>

<p class=MsoToc2><a href="#_Toc618952"><span style='color:#2066B9'>Section
47.6: Launch a Shiny app</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>217</span></a></p>

<p class=MsoToc2><a href="#_Toc618953"><span style='color:#2066B9'>Section
47.7: Control widgets</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>218</span></a></p>

<p class=MsoToc1><a href="#_Toc618954"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 48: spatial analysis</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>220</span></a></p>

<p class=MsoToc2><a href="#_Toc618955"><span style='color:#2066B9'>Section
48.1: Create spatial points from XY data set</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>220</span></a></p>

<p class=MsoToc2><a href="#_Toc618956"><span style='color:#2066B9'>Section
48.2: Importing a shape file (.shp)</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>221</span></a></p>

<p class=MsoToc1><a href="#_Toc618957"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 49: sqldf</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>222</span></a></p>

<p class=MsoToc2><a href="#_Toc618958"><span style='color:#2066B9'>Section
49.1: Basic Usage Examples</span><span style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>222</span></a></p>

<p class=MsoToc1><a href="#_Toc618959"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 50: Code profiling</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>224</span></a></p>

<p class=MsoToc2><a href="#_Toc618960"><span style='color:#2066B9'>Section
50.1: Benchmarking using microbenchmark</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>224</span></a></p>

<p class=MsoToc2><a href="#_Toc618961"><span style='color:#2066B9'>Section
50.2: proc.time()</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>225</span></a></p>

<p class=MsoToc2><a href="#_Toc618962"><span style='color:#2066B9'>Section
50.3: Microbenchmark</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>226</span></a></p>

<p class=MsoToc2><a href="#_Toc618963"><span style='color:#2066B9'>Section
50.4: System.time</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>227</span></a></p>

<p class=MsoToc2><a href="#_Toc618964"><span style='color:#2066B9'>Section
50.5: Line Profiling</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>227</span></a></p>

<p class=MsoToc1><a href="#_Toc618965"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 51: Control flow structures</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>229</span></a></p>

<p class=MsoToc2><a href="#_Toc618966"><span style='color:#2066B9'>Section
51.1: Optimal Construction of a For Loop</span><span style='color:black;
text-decoration:none'>................................................................................................................................. </span><span style='color:black;text-decoration:none'>229</span></a></p>

<p class=MsoToc2><a href="#_Toc618967"><span style='color:#2066B9'>Section
51.2: Basic For Loop Construction</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>230</span></a></p>

<p class=MsoToc2><a href="#_Toc618968"><span style='color:#2066B9'>Section
51.3: The Other Looping Constructs: while and repeat</span><span
style='color:black;text-decoration:none'>......................................................................................................... </span><span style='color:black;text-decoration:none'>230</span></a></p>

<p class=MsoToc1><a href="#_Toc618969"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 52: Column wise operation</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>234</span></a></p>

<p class=MsoToc2><a href="#_Toc618970"><span style='color:#2066B9'>Section
52.1: sum of each column</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>234</span></a></p>

<p class=MsoToc1><a href="#_Toc618971"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 53: JSON</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>236</span></a></p>

<p class=MsoToc2><a href="#_Toc618972"><span style='color:#2066B9'>Section
53.1: JSON to / from R objects</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>236</span></a></p>

<p class=MsoToc1><a href="#_Toc618973"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 54: RODBC</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>238</span></a></p>

<p class=MsoToc2><a href="#_Toc618974"><span style='color:#2066B9'>Section
54.1: Connecting to Excel Files via RODBC</span><span style='color:black;
text-decoration:none'>............................................................................................................................... </span><span style='color:black;text-decoration:none'>238</span></a></p>

<p class=MsoToc2><a href="#_Toc618975"><span style='color:#2066B9'>Section
54.2: SQL Server Management Database connection to get individual table</span><span
style='color:black;text-decoration:none'>.................................................................... </span><span style='color:black;text-decoration:none'>238</span></a></p>

<p class=MsoToc2><a href="#_Toc618976"><span style='color:#2066B9'>Section
54.3: Connecting to relational databases</span><span style='color:black;
text-decoration:none'>................................................................................................................................. </span><span style='color:black;text-decoration:none'>238</span></a></p>

<p class=MsoToc1><a href="#_Toc618977"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 55: lubridate</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>239</span></a></p>

<p class=MsoToc2><a href="#_Toc618978"><span style='color:#2066B9'>Section
55.1: Parsing dates and datetimes from strings with lubridate</span><span
style='color:black;text-decoration:none'>............................................................................................ </span><span style='color:black;text-decoration:none'>239</span></a></p>

<p class=MsoToc2><a href="#_Toc618979"><span style='color:#2066B9'>Section
55.2: Di&#57379;erence between period and duration</span><span
style='color:black;text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>240</span></a></p>

<p class=MsoToc2><a href="#_Toc618980"><span style='color:#2066B9'>Section
55.3: Instants</span><span style='color:black;text-decoration:none'>................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>240</span></a></p>

<p class=MsoToc2><a href="#_Toc618981"><span style='color:#2066B9'>Section
55.4: Intervals, Durations and Periods</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>241</span></a></p>

<p class=MsoToc2><a href="#_Toc618982"><span style='color:#2066B9'>Section
55.5: Manipulating date and time in lubridate</span><span style='color:black;
text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>242</span></a></p>

<p class=MsoToc2><a href="#_Toc618983"><span style='color:#2066B9'>Section
55.6: Time Zones</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>243</span></a></p>

<p class=MsoToc2><a href="#_Toc618984"><span style='color:#2066B9'>Section
55.7: Parsing date and time in lubridate</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>243</span></a></p>

<p class=MsoToc2><a href="#_Toc618985"><span style='color:#2066B9'>Section
55.8: Rounding dates</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>243</span></a></p>

<p class=MsoToc1><a href="#_Toc618986"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 56: Time Series and Forecasting</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>245</span></a></p>

<p class=MsoToc2><a href="#_Toc618987"><span style='color:#2066B9'>Section
56.1: Creating a ts object</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>245</span></a></p>

<p class=MsoToc2><a href="#_Toc618988"><span style='color:#2066B9'>Section
56.2: Exploratory Data Analysis with time-series data</span><span
style='color:black;text-decoration:none'>........................................................................................................... </span><span style='color:black;text-decoration:none'>245</span></a></p>

<p class=MsoToc1><a href="#_Toc618989"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 57: strsplit function</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>247</span></a></p>

<p class=MsoToc2><a href="#_Toc618990"><span style='color:#2066B9'>Section
57.1: Introduction</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>247</span></a></p>

<p class=MsoToc1><a href="#_Toc618991"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 58: Web scraping and parsing</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>248</span></a></p>

<p class=MsoToc2><a href="#_Toc618992"><span style='color:#2066B9'>Section
58.1: Basic scraping with rvest</span><span style='color:black;text-decoration:
none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>248</span></a></p>

<p class=MsoToc2><a href="#_Toc618993"><span style='color:#2066B9'>Section
58.2: Using rvest when login is required</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>248</span></a></p>

<p class=MsoToc1><a href="#_Toc618994"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 59: Generalized linear models</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>250</span></a></p>

<p class=MsoToc2><a href="#_Toc618995"><span style='color:#2066B9'>Section
59.1: Logistic regression on Titanic dataset</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>250</span></a></p>

<p class=MsoToc1><a href="#_Toc618996"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 60: Reshaping data between long and
wide forms</span></b><span style='color:black;text-decoration:none'>................................................................................................. </span><span style='color:black;text-decoration:none'>253</span></a></p>

<p class=MsoToc2><a href="#_Toc618997"><span style='color:#2066B9'>Section
60.1: Reshaping data</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>253</span></a></p>

<p class=MsoToc2><a href="#_Toc618998"><span style='color:#2066B9'>Section
60.2: The reshape function</span><span style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>254</span></a></p>

<p class=MsoToc1><a href="#_Toc618999"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 61: RMarkdown and knitr presentation</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>256</span></a></p>

<p class=MsoToc2><a href="#_Toc619000"><span style='color:#2066B9'>Section
61.1: Adding a footer to an ioslides presentation</span><span style='color:
black;text-decoration:none'>................................................................................................................... </span><span style='color:black;text-decoration:none'>256</span></a></p>

<p class=MsoToc2><a href="#_Toc619001"><span style='color:#2066B9'>Section
61.2: Rstudio example</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>257</span></a></p>

<p class=MsoToc1><a href="#_Toc619002"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 62: Scope of variables</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>259</span></a></p>

<p class=MsoToc2><a href="#_Toc619003"><span style='color:#2066B9'>Section
62.1: Environments and Functions</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>259</span></a></p>

<p class=MsoToc2><a href="#_Toc619004"><span style='color:#2066B9'>Section
62.2: Function Exit</span><span style='color:black;text-decoration:none'>........................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>259</span></a></p>

<p class=MsoToc2><a href="#_Toc619005"><span style='color:#2066B9'>Section
62.3: Sub functions</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>260</span></a></p>

<p class=MsoToc2><a href="#_Toc619006"><span style='color:#2066B9'>Section
62.4: Global Assignment</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>260</span></a></p>

<p class=MsoToc2><a href="#_Toc619007"><span style='color:#2066B9'>Section
62.5: Explicit Assignment of Environments and Variables</span><span
style='color:black;text-decoration:none'>..................................................................................................... </span><span style='color:black;text-decoration:none'>261</span></a></p>

<p class=MsoToc1><a href="#_Toc619008"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 63: Performing a Permutation Test</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>262</span></a></p>

<p class=MsoToc2><a href="#_Toc619009"><span style='color:#2066B9'>Section
63.1: A fairly general function</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>262</span></a></p>

<p class=MsoToc1><a href="#_Toc619010"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 64: xgboost</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>265</span></a></p>

<p class=MsoToc2><a href="#_Toc619011"><span style='color:#2066B9'>Section
64.1: Cross Validation and Tuning with xgboost</span><span style='color:black;
text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>265</span></a></p>

<p class=MsoToc1><a href="#_Toc619012"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 65: R code vectorization best practices</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................... </span><span style='color:black;text-decoration:none'>267</span></a></p>

<p class=MsoToc2><a href="#_Toc619013"><span style='color:#2066B9'>Section
65.1: By row operations</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>267</span></a></p>

<p class=MsoToc1><a href="#_Toc619014"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 66: Missing values</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>270</span></a></p>

<p class=MsoToc2><a href="#_Toc619015"><span style='color:#2066B9'>Section
66.1: Examining missing data</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>270</span></a></p>

<p class=MsoToc2><a href="#_Toc619016"><span style='color:#2066B9'>Section
66.2: Reading and writing data with NA values</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>270</span></a></p>

<p class=MsoToc2><a href="#_Toc619017"><span style='color:#2066B9'>Section
66.3: Using NAs of di&#57379;erent classes</span><span style='color:black;
text-decoration:none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>270</span></a></p>

<p class=MsoToc2><a href="#_Toc619018"><span style='color:#2066B9'>Section
66.4: TRUE/FALSE and/or NA</span><span style='color:black;text-decoration:none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>271</span></a></p>

<p class=MsoToc1><a href="#_Toc619019"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 67: Hierarchical Linear Modeling</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>272</span></a></p>

<p class=MsoToc2><a href="#_Toc619020"><span style='color:#2066B9'>Section
67.1: basic model fitting</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>272</span></a></p>

<p class=MsoToc1><a href="#_Toc619021"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 68: *apply family of functions
(functionals)</span></b><span style='color:black;text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>273</span></a></p>

<p class=MsoToc2><a href="#_Toc619022"><span style='color:#2066B9'>Section
68.1: Using built-in functionals</span><span style='color:black;text-decoration:
none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>273</span></a></p>

<p class=MsoToc2><a href="#_Toc619023"><span style='color:#2066B9'>Section
68.2: Combining multiple `data.frames` (`lapply`, `mapply`)</span><span
style='color:black;text-decoration:none'>................................................................................................ </span><span style='color:black;text-decoration:none'>273</span></a></p>

<p class=MsoToc2><a href="#_Toc619024"><span style='color:#2066B9'>Section
68.3: Bulk File Loading</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>275</span></a></p>

<p class=MsoToc2><a href="#_Toc619025"><span style='color:#2066B9'>Section
68.4: Using user-defined functionals</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>275</span></a></p>

<p class=MsoToc1><a href="#_Toc619026"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 69: Text mining</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>277</span></a></p>

<p class=MsoToc2><a href="#_Toc619027"><span style='color:#2066B9'>Section
69.1: Scraping Data to build N-gram Word Clouds</span><span style='color:black;
text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>277</span></a></p>

<p class=MsoToc1><a href="#_Toc619028"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 70: ANOVA</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>281</span></a></p>

<p class=MsoToc2><a href="#_Toc619029"><span style='color:#2066B9'>Section
70.1: Basic usage of aov()</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>281</span></a></p>

<p class=MsoToc2><a href="#_Toc619030"><span style='color:#2066B9'>Section
70.2: Basic usage of Anova()</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>281</span></a></p>

<p class=MsoToc1><a href="#_Toc619031"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 71: Raster and Image Analysis</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>283</span></a></p>

<p class=MsoToc2><a href="#_Toc619032"><span style='color:#2066B9'>Section
71.1: Calculating GLCM Texture</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................. </span><span style='color:black;text-decoration:none'>283</span></a></p>

<p class=MsoToc2><a href="#_Toc619033"><span style='color:#2066B9'>Section
71.2: Mathematical Morphologies</span><span style='color:black;text-decoration:
none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>285</span></a></p>

<p class=MsoToc1><a href="#_Toc619034"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 72: Survival analysis</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>287</span></a></p>

<p class=MsoToc2><a href="#_Toc619035"><span style='color:#2066B9'>Section
72.1: Random Forest Survival Analysis with randomForestSRC</span><span
style='color:black;text-decoration:none'>............................................................................................ </span><span style='color:black;text-decoration:none'>287</span></a></p>

<p class=MsoToc2><a href="#_Toc619036"><span style='color:#2066B9'>Section
72.2: Introduction - basic fitting and plotting of parametric survival models
with the survivalpackage</span><span style='color:black;text-decoration:none'>....................... </span><span style='color:black;text-decoration:none'>288</span></a></p>

<p class=MsoToc2><a href="#_Toc619037"><span style='color:#2066B9'>Section
72.3: Kaplan Meier estimates of survival curves and risk set tables with
survminer</span><span style='color:black;text-decoration:none'>....................................................... </span><span style='color:black;text-decoration:none'>289</span></a></p>

<p class=MsoToc1><a href="#_Toc619038"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 73: Fault-tolerant/resilient code</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................ </span><span style='color:black;text-decoration:none'>292</span></a></p>

<p class=MsoToc2><a href="#_Toc619039"><span style='color:#2066B9'>Section
73.1: Using tryCatch()</span><span style='color:black;text-decoration:none'>................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>292</span></a></p>

<p class=MsoToc1><a href="#_Toc619040"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 74: Reproducible R</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>295</span></a></p>

<p class=MsoToc2><a href="#_Toc619041"><span style='color:#2066B9'>Section
74.1: Data reproducibility</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>295</span></a></p>

<p class=MsoToc2><a href="#_Toc619042"><span style='color:#2066B9'>Section
74.2: Package reproducibility</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>295</span></a></p>

<p class=MsoToc1><a href="#_Toc619043"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 75: Fourier Series and Transformations</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................... </span><span style='color:black;text-decoration:none'>296</span></a></p>

<p class=MsoToc2><a href="#_Toc619044"><span style='color:#2066B9'>Section
75.1: Fourier Series</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>297</span></a></p>

<p class=MsoToc1><a href="#_Toc619045"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 76: .Rprofile</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>302</span></a></p>

<p class=MsoToc2><a href="#_Toc619046"><span style='color:#2066B9'>Section
76.1: .Rprofile - the first chunk of code executed</span><span
style='color:black;text-decoration:none'>................................................................................................................... </span><span style='color:black;text-decoration:none'>302</span></a></p>

<p class=MsoToc2><a href="#_Toc619047"><span style='color:#2066B9'>Section
76.2: .Rprofile example</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>303</span></a></p>

<p class=MsoToc1><a href="#_Toc619048"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 77: dplyr</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>304</span></a></p>

<p class=MsoToc2><a href="#_Toc619049"><span style='color:#2066B9'>Section
77.1: dplyr's single table verbs</span><span style='color:black;text-decoration:
none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>304</span></a></p>

<p class=MsoToc2><a href="#_Toc619050"><span style='color:#2066B9'>Section
77.2: Aggregating with %&gt;% (pipe) operator</span><span style='color:black;
text-decoration:none'>........................................................................................................................... </span><span style='color:black;text-decoration:none'>311</span></a></p>

<p class=MsoToc2><a href="#_Toc619051"><span style='color:#2066B9'>Section
77.3: Subset Observation (Rows)</span><span style='color:black;text-decoration:
none'>............................................................................................................................................... </span><span style='color:black;text-decoration:none'>312</span></a></p>

<p class=MsoToc2><a href="#_Toc619052"><span style='color:#2066B9'>Section
77.4: Examples of NSE and string variables in dpylr</span><span
style='color:black;text-decoration:none'>............................................................................................................... </span><span style='color:black;text-decoration:none'>313</span></a></p>

<p class=MsoToc1><a href="#_Toc619053"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 78: caret</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>314</span></a></p>

<p class=MsoToc2><a href="#_Toc619054"><span style='color:#2066B9'>Section
78.1: Preprocessing</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>314</span></a></p>

<p class=MsoToc1><a href="#_Toc619055"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 79: Extracting and Listing Files in
Compressed Archives</span></b><span style='color:black;text-decoration:none'>...................................................................................... </span><span style='color:black;text-decoration:none'>315</span></a></p>

<p class=MsoToc2><a href="#_Toc619056"><span style='color:#2066B9'>Section
79.1: Extracting files from a .zip archive</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>315</span></a></p>

<p class=MsoToc1><a href="#_Toc619057"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 80: Probability Distributions with R</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................. </span><span style='color:black;text-decoration:none'>316</span></a></p>

<p class=MsoToc2><a href="#_Toc619058"><span style='color:#2066B9'>Section
80.1: PDF and PMF for di&#57379;erent distributions in R</span><span
style='color:black;text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>316</span></a></p>

<p class=MsoToc1><a href="#_Toc619059"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 81: R in LaTeX with knitr</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>317</span></a></p>

<p class=MsoToc2><a href="#_Toc619060"><span style='color:#2066B9'>Section
81.1: R in LaTeX with Knitr and Code Externalization</span><span
style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>317</span></a></p>

<p class=MsoToc2><a href="#_Toc619061"><span style='color:#2066B9'>Section
81.2: R in LaTeX with Knitr and Inline Code Chunks</span><span
style='color:black;text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>317</span></a></p>

<p class=MsoToc2><a href="#_Toc619062"><span style='color:#2066B9'>Section
81.3: R in LaTex with Knitr and Internal Code Chunks</span><span
style='color:black;text-decoration:none'>............................................................................................................ </span><span style='color:black;text-decoration:none'>318</span></a></p>

<p class=MsoToc1><a href="#_Toc619063"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 82: Web Crawling in R</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>319</span></a></p>

<p class=MsoToc2><a href="#_Toc619064"><span style='color:#2066B9'>Section
82.1: Standard scraping approach using the RCurl package</span><span
style='color:black;text-decoration:none'>.................................................................................................. </span><span style='color:black;text-decoration:none'>319</span></a></p>

<p class=MsoToc1><a href="#_Toc619065"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 83: Creating reports with RMarkdown</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................... </span><span style='color:black;text-decoration:none'>320</span></a></p>

<p class=MsoToc2><a href="#_Toc619066"><span style='color:#2066B9'>Section
83.1: Including bibliographies</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>320</span></a></p>

<p class=MsoToc2><a href="#_Toc619067"><span style='color:#2066B9'>Section
83.2: Including LaTeX Preample Commands</span><span style='color:black;
text-decoration:none'>............................................................................................................................ </span><span style='color:black;text-decoration:none'>320</span></a></p>

<p class=MsoToc2><a href="#_Toc619068"><span style='color:#2066B9'>Section
83.3: Printing tables</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>321</span></a></p>

<p class=MsoToc2><a href="#_Toc619069"><span style='color:#2066B9'>Section
83.4: Basic R-markdown document structure</span><span style='color:black;
text-decoration:none'>......................................................................................................................... </span><span style='color:black;text-decoration:none'>323</span></a></p>

<p class=MsoToc1><a href="#_Toc619070"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 84: GPU-accelerated computing</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>326</span></a></p>

<p class=MsoToc2><a href="#_Toc619071"><span style='color:#2066B9'>Section
84.1: gpuR gpuMatrix objects</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>326</span></a></p>

<p class=MsoToc2><a href="#_Toc619072"><span style='color:#2066B9'>Section
84.2: gpuR vclMatrix objects</span><span style='color:black;text-decoration:
none'>....................................................................................................................................................... </span><span style='color:black;text-decoration:none'>326</span></a></p>

<p class=MsoToc1><a href="#_Toc619073"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 85: heatmap and heatmap.2</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>327</span></a></p>

<p class=MsoToc2><a href="#_Toc619074"><span style='color:#2066B9'>Section
85.1: Examples from the o&#57380;cial documentation</span><span
style='color:black;text-decoration:none'>...................................................................................................................... </span><span style='color:black;text-decoration:none'>327</span></a></p>

<p class=MsoToc2><a href="#_Toc619075"><span style='color:#2066B9'>Section
85.2: Tuning parameters in heatmap.2</span><span style='color:black;text-decoration:
none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>335</span></a></p>

<p class=MsoToc1><a href="#_Toc619076"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 86: Network analysis with the igraph
package</span></b><span style='color:black;text-decoration:none'>.......................................................................................................... </span><span style='color:black;text-decoration:none'>341</span></a></p>

<p class=MsoToc2><a href="#_Toc619077"><span style='color:#2066B9'>Section
86.1: Simple Directed and Non-directed Network Graphing</span><span
style='color:black;text-decoration:none'>................................................................................................ </span><span style='color:black;text-decoration:none'>341</span></a></p>

<p class=MsoToc1><a href="#_Toc619078"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 87: Functional programming</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>343</span></a></p>

<p class=MsoToc2><a href="#_Toc619079"><span style='color:#2066B9'>Section
87.1: Built-in Higher Order Functions</span><span style='color:black;
text-decoration:none'>........................................................................................................................................ </span><span style='color:black;text-decoration:none'>343</span></a></p>

<p class=MsoToc1><a href="#_Toc619080"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 88: Get user input</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>344</span></a></p>

<p class=MsoToc2><a href="#_Toc619081"><span style='color:#2066B9'>Section
88.1: User input in R</span><span style='color:black;text-decoration:none'>..................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>344</span></a></p>

<p class=MsoToc1><a href="#_Toc619082"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 89: Spark API (SparkR)</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>345</span></a></p>

<p class=MsoToc2><a href="#_Toc619083"><span style='color:#2066B9'>Section
89.1: Setup Spark context</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>345</span></a></p>

<p class=MsoToc2><a href="#_Toc619084"><span style='color:#2066B9'>Section
89.2: Cache data</span><span style='color:black;text-decoration:none'>............................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>345</span></a></p>

<p class=MsoToc2><a href="#_Toc619085"><span style='color:#2066B9'>Section
89.3: Create RDDs (Resilient Distributed Datasets)</span><span
style='color:black;text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>346</span></a></p>

<p class=MsoToc1><a href="#_Toc619086"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 90: Meta: Documentation Guidelines</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>347</span></a></p>

<p class=MsoToc2><a href="#_Toc619087"><span style='color:#2066B9'>Section
90.1: Style</span><span style='color:black;text-decoration:none'>....................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>347</span></a></p>

<p class=MsoToc2><a href="#_Toc619088"><span style='color:#2066B9'>Section
90.2: Making good examples</span><span style='color:black;text-decoration:none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>347</span></a></p>

<p class=MsoToc1><a href="#_Toc619089"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 91: Input and output</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>348</span></a></p>

<p class=MsoToc2><a href="#_Toc619090"><span style='color:#2066B9'>Section
91.1: Reading and writing data frames</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>348</span></a></p>

<p class=MsoToc1><a href="#_Toc619091"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 92: I/O for foreign tables (Excel, SAS,
SPSS, Stata)</span></b><span style='color:black;text-decoration:none'>.................................................................................................. </span><span style='color:black;text-decoration:none'>350</span></a></p>

<p class=MsoToc2><a href="#_Toc619092"><span style='color:#2066B9'>Section
92.1: Importing data with rio</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>350</span></a></p>

<p class=MsoToc2><a href="#_Toc619093"><span style='color:#2066B9'>Section
92.2: Read and write Stata, SPSS and SAS files</span><span style='color:black;
text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>350</span></a></p>

<p class=MsoToc2><a href="#_Toc619094"><span style='color:#2066B9'>Section
92.3: Importing Excel files</span><span style='color:black;text-decoration:
none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>351</span></a></p>

<p class=MsoToc2><a href="#_Toc619095"><span style='color:#2066B9'>Section
92.4: Import or Export of Feather file</span><span style='color:black;
text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>354</span></a></p>

<p class=MsoToc1><a href="#_Toc619096"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 93: I/O for database tables</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>356</span></a></p>

<p class=MsoToc2><a href="#_Toc619097"><span style='color:#2066B9'>Section
93.1: Reading Data from MySQL Databases</span><span style='color:black;
text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>356</span></a></p>

<p class=MsoToc2><a href="#_Toc619098"><span style='color:#2066B9'>Section
93.2: Reading Data from MongoDB Databases</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>356</span></a></p>

<p class=MsoToc1><a href="#_Toc619099"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 94: I/O for geographic data
(shapefiles, etc.)</span></b><span style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>357</span></a></p>

<p class=MsoToc2><a href="#_Toc619100"><span style='color:#2066B9'>Section
94.1: Import and Export Shapefiles</span><span style='color:black;text-decoration:
none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>357</span></a></p>

<p class=MsoToc1><a href="#_Toc619101"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 95: I/O for raster images</span></b><span
style='color:black;text-decoration:none'>......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>358</span></a></p>

<p class=MsoToc2><a href="#_Toc619102"><span style='color:#2066B9'>Section
95.1: Load a multilayer raster</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>358</span></a></p>

<p class=MsoToc1><a href="#_Toc619103"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 96: I/O for R's binary format</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>360</span></a></p>

<p class=MsoToc2><a href="#_Toc619104"><span style='color:#2066B9'>Section
96.1: Rds and RData (Rda) files</span><span style='color:black;text-decoration:
none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>360</span></a></p>

<p class=MsoToc2><a href="#_Toc619105"><span style='color:#2066B9'>Section
96.2: Enviromments</span><span style='color:black;text-decoration:none'>...................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>360</span></a></p>

<p class=MsoToc1><a href="#_Toc619106"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 97: Recycling</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>361</span></a></p>

<p class=MsoToc2><a href="#_Toc619107"><span style='color:#2066B9'>Section
97.1: Recycling use in subsetting</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>361</span></a></p>

<p class=MsoToc1><a href="#_Toc619108"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 98: Expression: parse + eval</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................. </span><span style='color:black;text-decoration:none'>362</span></a></p>

<p class=MsoToc2><a href="#_Toc619109"><span style='color:#2066B9'>Section
98.1: Execute code in string format</span><span style='color:black;text-decoration:
none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>362</span></a></p>

<p class=MsoToc1><a href="#_Toc619110"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 99: Regular Expression Syntax in R</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>363</span></a></p>

<p class=MsoToc2><a href="#_Toc619111"><span style='color:#2066B9'>Section
99.1: Use `grep` to find a string in a character vector</span><span
style='color:black;text-decoration:none'>............................................................................................................ </span><span style='color:black;text-decoration:none'>363</span></a></p>

<p class=MsoToc1><a href="#_Toc619112"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 100: Regular Expressions (regex)</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................................... </span><span style='color:black;text-decoration:none'>365</span></a></p>

<p class=MsoToc2><a href="#_Toc619113"><span style='color:#2066B9'>Section
100.1: Di&#57379;erences between Perl and POSIX regex</span><span
style='color:black;text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>365</span></a></p>

<p class=MsoToc2><a href="#_Toc619114"><span style='color:#2066B9'>Section
100.2: Validate a date in a &quot;YYYYMMDD&quot; format</span><span
style='color:black;text-decoration:none'>.................................................................................................................... </span><span style='color:black;text-decoration:none'>365</span></a></p>

<p class=MsoToc2><a href="#_Toc619115"><span style='color:#2066B9'>Section
100.3: Escaping characters in R regex patterns</span><span style='color:black;
text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>366</span></a></p>

<p class=MsoToc2><a href="#_Toc619116"><span style='color:#2066B9'>Section
100.4: Validate US States postal abbreviations</span><span style='color:black;
text-decoration:none'>........................................................................................................................ </span><span style='color:black;text-decoration:none'>366</span></a></p>

<p class=MsoToc2><a href="#_Toc619117"><span style='color:#2066B9'>Section
100.5: Validate US phone numbers</span><span style='color:black;text-decoration:
none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>366</span></a></p>

<p class=MsoToc1><a href="#_Toc619118"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 101: Combinatorics</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>368</span></a></p>

<p class=MsoToc2><a href="#_Toc619119"><span style='color:#2066B9'>Section
101.1: Enumerating combinations of a specified length</span><span
style='color:black;text-decoration:none'>........................................................................................................ </span><span style='color:black;text-decoration:none'>368</span></a></p>

<p class=MsoToc2><a href="#_Toc619120"><span style='color:#2066B9'>Section
101.2: Counting combinations of a specified length</span><span
style='color:black;text-decoration:none'>.............................................................................................................. </span><span style='color:black;text-decoration:none'>369</span></a></p>

<p class=MsoToc1><a href="#_Toc619121"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 102: Solving ODEs in R</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>370</span></a></p>

<p class=MsoToc2><a href="#_Toc619122"><span style='color:#2066B9'>Section
102.1: The Lorenz model</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>370</span></a></p>

<p class=MsoToc2><a href="#_Toc619123"><span style='color:#2066B9'>Section
102.2: Lotka-Volterra or: Prey vs. predator</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>371</span></a></p>

<p class=MsoToc2><a href="#_Toc619124"><span style='color:#2066B9'>Section
102.3: ODEs in compiled languages - definition in R</span><span
style='color:black;text-decoration:none'>.............................................................................................................. </span><span style='color:black;text-decoration:none'>373</span></a></p>

<p class=MsoToc2><a href="#_Toc619125"><span style='color:#2066B9'>Section
102.4: ODEs in compiled languages - definition in C</span><span
style='color:black;text-decoration:none'>.............................................................................................................. </span><span style='color:black;text-decoration:none'>373</span></a></p>

<p class=MsoToc2><a href="#_Toc619126"><span style='color:#2066B9'>Section
102.5: ODEs in compiled languages - definition in fortran</span><span
style='color:black;text-decoration:none'>.................................................................................................... </span><span style='color:black;text-decoration:none'>375</span></a></p>

<p class=MsoToc2><a href="#_Toc619127"><span style='color:#2066B9'>Section
102.6: ODEs in compiled languages - a benchmark test</span><span
style='color:black;text-decoration:none'>........................................................................................................ </span><span style='color:black;text-decoration:none'>376</span></a></p>

<p class=MsoToc1><a href="#_Toc619128"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 103: Feature Selection in R -- Removing
Extraneous Features</span></b><span style='color:black;text-decoration:none'>.......................................................................... </span><span style='color:black;text-decoration:none'>378</span></a></p>

<p class=MsoToc2><a href="#_Toc619129"><span style='color:#2066B9'>Section
103.1: Removing features with zero or near-zero variance</span><span
style='color:black;text-decoration:none'>................................................................................................... </span><span style='color:black;text-decoration:none'>378</span></a></p>

<p class=MsoToc2><a href="#_Toc619130"><span style='color:#2066B9'>Section
103.2: Removing features with high numbers of NA</span><span style='color:black;
text-decoration:none'>.............................................................................................................. </span><span style='color:black;text-decoration:none'>378</span></a></p>

<p class=MsoToc2><a href="#_Toc619131"><span style='color:#2066B9'>Section
103.3: Removing closely correlated features</span><span style='color:black;
text-decoration:none'>........................................................................................................................... </span><span style='color:black;text-decoration:none'>378</span></a></p>

<p class=MsoToc1><a href="#_Toc619132"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 104: Bibliography in RMD</span></b><span
style='color:black;text-decoration:none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>380</span></a></p>

<p class=MsoToc2><a href="#_Toc619133"><span style='color:#2066B9'>Section
104.1: Specifying a bibliography and cite authors</span><span style='color:
black;text-decoration:none'>.................................................................................................................. </span><span style='color:black;text-decoration:none'>380</span></a></p>

<p class=MsoToc2><a href="#_Toc619134"><span style='color:#2066B9'>Section
104.2: Inline references</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>381</span></a></p>

<p class=MsoToc2><a href="#_Toc619135"><span style='color:#2066B9'>Section
104.3: Citation styles</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>382</span></a></p>

<p class=MsoToc1><a href="#_Toc619136"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 105: Writing functions in R</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................... </span><span style='color:black;text-decoration:none'>385</span></a></p>

<p class=MsoToc2><a href="#_Toc619137"><span style='color:#2066B9'>Section
105.1: Anonymous functions</span><span style='color:black;text-decoration:none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>385</span></a></p>

<p class=MsoToc2><a href="#_Toc619138"><span style='color:#2066B9'>Section
105.2: RStudio code snippets</span><span style='color:black;text-decoration:
none'>...................................................................................................................................................... </span><span style='color:black;text-decoration:none'>385</span></a></p>

<p class=MsoToc2><a href="#_Toc619139"><span style='color:#2066B9'>Section
105.3: Named functions</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>386</span></a></p>

<p class=MsoToc1><a href="#_Toc619140"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 106: Color schemes for graphics</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................ </span><span style='color:black;text-decoration:none'>388</span></a></p>

<p class=MsoToc2><a href="#_Toc619141"><span style='color:#2066B9'>Section
106.1: viridis - print and colorblind friendly palettes</span><span
style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>388</span></a></p>

<p class=MsoToc2><a href="#_Toc619142"><span style='color:#2066B9'>Section
106.2: A handy function to glimse a vector of colors</span><span
style='color:black;text-decoration:none'>............................................................................................................. </span><span style='color:black;text-decoration:none'>389</span></a></p>

<p class=MsoToc2><a href="#_Toc619143"><span style='color:#2066B9'>Section
106.3: colorspace - click&amp;drag interface for colors</span><span
style='color:black;text-decoration:none'>................................................................................................................. </span><span style='color:black;text-decoration:none'>390</span></a></p>

<p class=MsoToc2><a href="#_Toc619144"><span style='color:#2066B9'>Section
106.4: Colorblind-friendly palettes</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>391</span></a></p>

<p class=MsoToc2><a href="#_Toc619145"><span style='color:#2066B9'>Section
106.5: RColorBrewer</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>392</span></a></p>

<p class=MsoToc2><a href="#_Toc619146"><span style='color:#2066B9'>Section
106.6: basic R color functions</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>393</span></a></p>

<p class=MsoToc1><a href="#_Toc619147"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 107: Hierarchical clustering with
hclust</span></b><span style='color:black;text-decoration:none'>......................................................................................................................... </span><span style='color:black;text-decoration:none'>394</span></a></p>

<p class=MsoToc2><a href="#_Toc619148"><span style='color:#2066B9'>Section
107.1: Example 1 - Basic use of hclust, display of dendrogram, plot clusters</span><span
style='color:black;text-decoration:none'>.................................................................... </span><span style='color:black;text-decoration:none'>394</span></a></p>

<p class=MsoToc2><a href="#_Toc619149"><span style='color:#2066B9'>Section
107.2: Example 2 - hclust and outliers</span><span style='color:black;
text-decoration:none'>...................................................................................................................................... </span><span style='color:black;text-decoration:none'>397</span></a></p>

<p class=MsoToc1><a href="#_Toc619150"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 108: Random Forest Algorithm</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................... </span><span style='color:black;text-decoration:none'>400</span></a></p>

<p class=MsoToc2><a href="#_Toc619151"><span style='color:#2066B9'>Section
108.1: Basic examples - Classification and Regression</span><span
style='color:black;text-decoration:none'>........................................................................................................... </span><span style='color:black;text-decoration:none'>400</span></a></p>

<p class=MsoToc1><a href="#_Toc619152"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 109: RESTful R Services</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>402</span></a></p>

<p class=MsoToc2><a href="#_Toc619153"><span style='color:#2066B9'>Section
109.1: opencpu Apps</span><span style='color:black;text-decoration:none'>.................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>402</span></a></p>

<p class=MsoToc1><a href="#_Toc619154"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 110: Machine learning</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>403</span></a></p>

<p class=MsoToc2><a href="#_Toc619155"><span style='color:#2066B9'>Section
110.1: Creating a Random Forest model</span><span style='color:black;
text-decoration:none'>.................................................................................................................................. </span><span style='color:black;text-decoration:none'>403</span></a></p>

<p class=MsoToc1><a href="#_Toc619156"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 111: Using texreg to export models in a
paper-ready way</span></b><span style='color:black;text-decoration:none'>................................................................................. </span><span style='color:black;text-decoration:none'>404</span></a></p>

<p class=MsoToc2><a href="#_Toc619157"><span style='color:#2066B9'>Section
111.1: Printing linear regression results</span><span style='color:black;
text-decoration:none'>................................................................................................................................... </span><span style='color:black;text-decoration:none'>404</span></a></p>

<p class=MsoToc1><a href="#_Toc619158"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 112: Publishing</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>406</span></a></p>

<p class=MsoToc2><a href="#_Toc619159"><span style='color:#2066B9'>Section
112.1: Formatting tables</span><span style='color:black;text-decoration:none'>.............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>406</span></a></p>

<p class=MsoToc2><a href="#_Toc619160"><span style='color:#2066B9'>Section
112.2: Formatting entire documents</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>406</span></a></p>

<p class=MsoToc1><a href="#_Toc619161"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 113: Implement State Machine Pattern
using S4 Class</span></b><span style='color:black;text-decoration:none'>......................................................................................... </span><span style='color:black;text-decoration:none'>407</span></a></p>

<p class=MsoToc2><a href="#_Toc619162"><span style='color:#2066B9'>Section
113.1: Parsing Lines using State Machine</span><span style='color:black;
text-decoration:none'>................................................................................................................................. </span><span style='color:black;text-decoration:none'>407</span></a></p>

<p class=MsoToc1><a href="#_Toc619163"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 114: Reshape using tidyr</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>419</span></a></p>

<p class=MsoToc2><a href="#_Toc619164"><span style='color:#2066B9'>Section
114.1: Reshape from long to wide format with spread()</span><span
style='color:black;text-decoration:none'>....................................................................................................... </span><span style='color:black;text-decoration:none'>419</span></a></p>

<p class=MsoToc2><a href="#_Toc619165"><span style='color:#2066B9'>Section
114.2: Reshape from wide to long format with gather()</span><span
style='color:black;text-decoration:none'>....................................................................................................... </span><span style='color:black;text-decoration:none'>419</span></a></p>

<p class=MsoToc1><a href="#_Toc619166"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 115: Modifying strings by substitution</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................... </span><span style='color:black;text-decoration:none'>421</span></a></p>

<p class=MsoToc2><a href="#_Toc619167"><span style='color:#2066B9'>Section
115.1: Rearrange character strings using capture groups</span><span
style='color:black;text-decoration:none'>..................................................................................................... </span><span style='color:black;text-decoration:none'>421</span></a></p>

<p class=MsoToc2><a href="#_Toc619168"><span style='color:#2066B9'>Section
115.2: Eliminate duplicated consecutive elements</span><span style='color:black;
text-decoration:none'>................................................................................................................ </span><span style='color:black;text-decoration:none'>421</span></a></p>

<p class=MsoToc1><a href="#_Toc619169"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 116: Non-standard evaluation and
standard evaluation</span></b><span style='color:black;text-decoration:none'>...................................................................................... </span><span style='color:black;text-decoration:none'>423</span></a></p>

<p class=MsoToc2><a href="#_Toc619170"><span style='color:#2066B9'>Section
116.1: Examples with standard dplyr verbs</span><span style='color:black;
text-decoration:none'>............................................................................................................................. </span><span style='color:black;text-decoration:none'>423</span></a></p>

<p class=MsoToc1><a href="#_Toc619171"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 117: Randomization</span></b><span
style='color:black;text-decoration:none'>.................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>425</span></a></p>

<p class=MsoToc2><a href="#_Toc619172"><span style='color:#2066B9'>Section
117.1: Random draws and permutations</span><span style='color:black;text-decoration:
none'>................................................................................................................................. </span><span style='color:black;text-decoration:none'>425</span></a></p>

<p class=MsoToc2><a href="#_Toc619173"><span style='color:#2066B9'>Section
117.2: Setting the seed</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>427</span></a></p>

<p class=MsoToc1><a href="#_Toc619174"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 118: Object-Oriented Programming in R</span></b><span
style='color:black;text-decoration:none'>....................................................................................................................... </span><span style='color:black;text-decoration:none'>428</span></a></p>

<p class=MsoToc2><a href="#_Toc619175"><span style='color:#2066B9'>Section
118.1: S3</span><span style='color:black;text-decoration:none'>......................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>428</span></a></p>

<p class=MsoToc1><a href="#_Toc619176"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 119: Coercion</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>429</span></a></p>

<p class=MsoToc2><a href="#_Toc619177"><span style='color:#2066B9'>Section
119.1: Implicit Coercion</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>429</span></a></p>

<p class=MsoToc1><a href="#_Toc619178"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 120: Standardize analyses by writing
standalone R scripts</span></b><span style='color:black;text-decoration:none'>................................................................................ </span><span style='color:black;text-decoration:none'>430</span></a></p>

<p class=MsoToc2><a href="#_Toc619179"><span style='color:#2066B9'>Section
120.1: The basic structure of standalone R program and how to call it</span><span
style='color:black;text-decoration:none'>.............................................................................. </span><span style='color:black;text-decoration:none'>430</span></a></p>

<p class=MsoToc2><a href="#_Toc619180"><span style='color:#2066B9'>Section
120.2: Using littler to execute R scripts</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>431</span></a></p>

<p class=MsoToc1><a href="#_Toc619181"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 121: Analyze tweets with R</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................... </span><span style='color:black;text-decoration:none'>433</span></a></p>

<p class=MsoToc2><a href="#_Toc619182"><span style='color:#2066B9'>Section
121.1: Download Tweets</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>433</span></a></p>

<p class=MsoToc2><a href="#_Toc619183"><span style='color:#2066B9'>Section
121.2: Get text of tweets</span><span style='color:black;text-decoration:none'>............................................................................................................................................................. </span><span style='color:black;text-decoration:none'>433</span></a></p>

<p class=MsoToc1><a href="#_Toc619184"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 122: Natural language processing</span></b><span
style='color:black;text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>435</span></a></p>

<p class=MsoToc2><a href="#_Toc619185"><span style='color:#2066B9'>Section
122.1: Create a term frequency matrix</span><span style='color:black;
text-decoration:none'>..................................................................................................................................... </span><span style='color:black;text-decoration:none'>435</span></a></p>

<p class=MsoToc1><a href="#_Toc619186"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 123: R Markdown Notebooks (from
RStudio)</span></b><span style='color:black;text-decoration:none'>............................................................................................................ </span><span style='color:black;text-decoration:none'>437</span></a></p>

<p class=MsoToc2><a href="#_Toc619187"><span style='color:#2066B9'>Section
123.1: Creating a Notebook</span><span style='color:black;text-decoration:none'>........................................................................................................................................................ </span><span style='color:black;text-decoration:none'>437</span></a></p>

<p class=MsoToc2><a href="#_Toc619188"><span style='color:#2066B9'>Section
123.2: Inserting Chunks</span><span style='color:black;text-decoration:none'>............................................................................................................................................................... </span><span style='color:black;text-decoration:none'>437</span></a></p>

<p class=MsoToc2><a href="#_Toc619189"><span style='color:#2066B9'>Section
123.3: Executing Chunk Code</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>438</span></a></p>

<p class=MsoToc2><a href="#_Toc619190"><span style='color:#2066B9'>Section
123.4: Execution Progress</span><span style='color:black;text-decoration:none'>........................................................................................................................................................... </span><span style='color:black;text-decoration:none'>439</span></a></p>

<p class=MsoToc2><a href="#_Toc619191"><span style='color:#2066B9'>Section
123.5: Preview Output</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>440</span></a></p>

<p class=MsoToc2><a href="#_Toc619192"><span style='color:#2066B9'>Section
123.6: Saving and Sharing</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>440</span></a></p>

<p class=MsoToc1><a href="#_Toc619193"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 124: Aggregating data frames</span></b><span
style='color:black;text-decoration:none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>442</span></a></p>

<p class=MsoToc2><a href="#_Toc619194"><span style='color:#2066B9'>Section
124.1: Aggregating with data.table</span><span style='color:black;text-decoration:
none'>............................................................................................................................................ </span><span style='color:black;text-decoration:none'>442</span></a></p>

<p class=MsoToc2><a href="#_Toc619195"><span style='color:#2066B9'>Section
124.2: Aggregating with base R</span><span style='color:black;text-decoration:
none'>.................................................................................................................................................. </span><span style='color:black;text-decoration:none'>443</span></a></p>

<p class=MsoToc2><a href="#_Toc619196"><span style='color:#2066B9'>Section
124.3: Aggregating with dplyr</span><span style='color:black;text-decoration:
none'>..................................................................................................................................................... </span><span style='color:black;text-decoration:none'>444</span></a></p>

<p class=MsoToc1><a href="#_Toc619197"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 125: Data acquisition</span></b><span
style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>446</span></a></p>

<p class=MsoToc2><a href="#_Toc619198"><span style='color:#2066B9'>Section
125.1: Built-in datasets</span><span style='color:black;text-decoration:none'>................................................................................................................................................................ </span><span style='color:black;text-decoration:none'>446</span></a></p>

<p class=MsoToc2><a href="#_Toc619199"><span style='color:#2066B9'>Section
125.2: Packages to access open databases</span><span style='color:black;
text-decoration:none'>.............................................................................................................................. </span><span style='color:black;text-decoration:none'>446</span></a></p>

<p class=MsoToc2><a href="#_Toc619200"><span style='color:#2066B9'>Section
125.3: Packages to access restricted data</span><span style='color:black;
text-decoration:none'>................................................................................................................................ </span><span style='color:black;text-decoration:none'>448</span></a></p>

<p class=MsoToc2><a href="#_Toc619201"><span style='color:#2066B9'>Section
125.4: Datasets within packages</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>452</span></a></p>

<p class=MsoToc1><a href="#_Toc619202"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 126: R memento by examples</span></b><span
style='color:black;text-decoration:none'>............................................................................................................................................. </span><span style='color:black;text-decoration:none'>454</span></a></p>

<p class=MsoToc2><a href="#_Toc619203"><span style='color:#2066B9'>Section
126.1: Plotting (using plot)</span><span style='color:black;text-decoration:
none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>454</span></a></p>

<p class=MsoToc2><a href="#_Toc619204"><span style='color:#2066B9'>Section
126.2: Commonly used functions</span><span style='color:black;text-decoration:
none'>.............................................................................................................................................. </span><span style='color:black;text-decoration:none'>454</span></a></p>

<p class=MsoToc2><a href="#_Toc619205"><span style='color:#2066B9'>Section
126.3: Data types</span><span style='color:black;text-decoration:none'>.......................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>455</span></a></p>

<p class=MsoToc1><a href="#_Toc619206"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Chapter 127: Updating R version</span></b><span
style='color:black;text-decoration:none'>.......................................................................................................................................................... </span><span style='color:black;text-decoration:none'>457</span></a></p>

<p class=MsoToc2><a href="#_Toc619207"><span style='color:#2066B9'>Section
127.1: Installing from R Website</span><span style='color:black;text-decoration:
none'>................................................................................................................................................ </span><span style='color:black;text-decoration:none'>457</span></a></p>

<p class=MsoToc2><a href="#_Toc619208"><span style='color:#2066B9'>Section
127.2: Updating from within R using installr Package</span><span
style='color:black;text-decoration:none'>............................................................................................................ </span><span style='color:black;text-decoration:none'>457</span></a></p>

<p class=MsoToc2><a href="#_Toc619209"><span style='color:#2066B9'>Section
127.3: Deciding on the old packages</span><span style='color:black;text-decoration:
none'>......................................................................................................................................... </span><span style='color:black;text-decoration:none'>457</span></a></p>

<p class=MsoToc2><a href="#_Toc619210"><span style='color:#2066B9'>Section
127.4: Updating Packages</span><span style='color:black;text-decoration:none'>............................................................................................................................................................ </span><span style='color:black;text-decoration:none'>459</span></a></p>

<p class=MsoToc2><a href="#_Toc619211"><span style='color:#2066B9'>Section
127.5: Check R Version</span><span style='color:black;text-decoration:none'>................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>459</span></a></p>

<p class=MsoToc1><a href="#_Toc619212"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>Credits</span></b><span style='color:black;
text-decoration:none'>................................................................................................................................................................................................................. </span><span style='color:black;text-decoration:none'>460</span></a></p>

<p class=MsoToc1><a href="#_Toc619213"><b><span style='font-size:12.0pt;
line-height:108%;color:#2066B9'>You may also like</span></b><span
style='color:black;text-decoration:none'>........................................................................................................................................................................................... </span><span style='color:black;text-decoration:none'>464</span></a></p>

<p class=MsoNormal>&nbsp;</p>

</div>

<span style='font-size:10.0pt;line-height:108%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection2>

<h1 style='margin-top:0in;margin-right:0in;margin-bottom:105.15pt;margin-left:
-.25pt'><a name="_Toc618743">About</a></h1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:116.5pt;
margin-bottom:29.9pt;margin-left:116.5pt;text-align:center;text-indent:0in;
line-height:123%'><span style='font-size:11.0pt;line-height:123%'>Please feel
free to share this PDF with anyone for free, latest version of this book can be
downloaded from: </span><a href="https://goalkicker.com/RBook"><span
style='font-size:11.0pt;line-height:123%;color:#2066B9'>https://goalkicker.com/RBook</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:114.75pt'>This <i>R Notes for Professionals</i> book is compiled
from <a href="https://archive.org/details/documentation-dump.7z"><span
style='color:#2066B9'>Stack Overflow</span></a></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:82.4pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><a
href="https://archive.org/details/documentation-dump.7z"><span
style='color:#2066B9'>Documentation</span></a>, the content is written by the
beautiful people at Stack Overflow.</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:80.8pt;
margin-bottom:13.15pt;margin-left:81.3pt;text-align:center;line-height:103%'>Text
content is released under Creative Commons BY-SA, see credits at the end of
this book whom contributed to the various chapters. Images may be copyright of
their respective owners unless otherwise specified</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:80.8pt;
margin-bottom:13.15pt;margin-left:81.3pt;text-align:center;line-height:103%'><span
style='position:relative;z-index:-1895824384'><span style='left:0px;position:
absolute;left:87px;top:-275px;width:545px;height:476px'><img width=545
height=476 src="R%20Notes%20for%20Professionals_files/image002.gif"></span></span>This
is an unofficial free book created for educational purposes and is not
affiliated with official R group(s) or company(s) nor Stack Overflow. All
trademarks and registered trademarks are the property of their respective
company owners</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:74.2pt;
margin-bottom:13.15pt;margin-left:74.7pt;text-align:center;line-height:103%'>The
information presented in this book is not guaranteed to be correct nor
accurate, use at your own risk</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:131.55pt'>Please send feedback and corrections to <u><span
style='color:#2066B9'>web@petercv.com</span></u></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618744">Chapter 1: Getting started
with R Language</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618745">Section 1.1: Installing R</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>You might wish to install <a href="https://www.rstudio.com/"><span
style='color:#2066B9'>RStudio</span></a> after you have installed R. RStudio is
a development environment for R that simplifies many programming tasks.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Windows only:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'><a href="https://www.visualstudio.com/"><span
style='color:#2066B9'>Visual Studio</span></a> (starting from version 2015
Update 3) now features a development environment for R called <a
href="https://www.visualstudio.com/vs/rtvs/"><span style='color:#2066B9'>R
Tools</span></a>, that includes a live interpreter, IntelliSense, and a
debugging module. If you choose this method, you won't have to install R as
specified in the following section.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:.15in;margin-left:
.75pt'>For Windows</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Go
to the <a href="https://cran.r-project.org/bin/windows/base/"><span
style='color:#2066B9'>CRAN</span></a> website, click on download R for Windows,
and download the latest version of R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Right-click
the installer file and RUN as administrator.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Select
the operational language for installation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.35pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Follow
the instructions for installation.</p>

<h4 style='margin-top:0in;margin-right:399.5pt;margin-bottom:13.4pt;margin-left:
.75pt'>For OSX / macOS Alternative 1</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.5pt;
margin-left:.75pt'>(0. Ensure <a href="https://www.xquartz.org/"><span
style='color:#2066B9'>XQuartz</span></a> is installed )</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Go
to the <a href="https://cran.r-project.org/bin/macosx/"><span style='color:
#2066B9'>CRAN</span></a> website and download the latest version of R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Open
the disk image and run the installer.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Follow
the instructions for installation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This will install both R and the R-MacGUI. It will put the
GUI in the /Applications/ Folder as R.app where it can either be double-clicked
or dragged to the Doc. When a new version is released, the (re)-installation
process will overwrite</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R.app but prior major versions of R will be maintained. The
actual R code will be in the</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>/Library/Frameworks/R.Framework/Versions/ directory. Using R
within RStudio is also possible and would be using the same R code with a
different GUI.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:.15in;margin-left:
.75pt'>Alternative 2</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.35pt;margin-bottom:3.15pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Install
homebrew (the missing package manager for macOS) by following the instructions
on <a href="https://brew.sh/"><span style='color:#2066B9'>https://brew.sh/</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.35pt;margin-bottom:13.45pt;
margin-left:30.0pt;text-indent:-13.9pt;line-height:110%'><span
style='line-height:110%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>brew
install R</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Those choosing the second method should be aware that the
maintainer of the Mac fork advises against it, and will not respond to
questions about difficulties on the R-SIG-Mac Mailing List.</p>

<h4 style='margin-left:.75pt'>For Debian, Ubuntu and derivatives</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>apt</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>get</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can get the version of R corresponding to your distro
via . However, this version will frequently be quite far behind the most recent
version available on CRAN. You can add CRAN to your list of recognized
&quot;sources&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image003.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can get a more recent version directly from CRAN by
adding CRAN to your sources list. Follow the <a
href="http://cran.us.r-project.org/bin/linux/ubuntu/README.html"><span
style='color:#2066B9'>directions </span></a>from CRAN for more details. Note in
particular the need to also execute this so that you can use</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>install.packages</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:8.35pt;
margin-left:86.9pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>. Linux packages are usually distributed as source
files and need compilation:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26 id="Group 492873"
src="R%20Notes%20for%20Professionals_files/image004.gif"></span><b><span
style='font-size:9.0pt;line-height:107%;color:#C20CB9'>sudo</span></b><span
style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
9.0pt;line-height:107%;color:#C20CB9'>apt-get install</span></b><span
style='font-size:9.0pt;line-height:107%'> r-base-dev</span></p>

<h4 style='margin-left:.75pt'>For Red Hat and Fedora <span style='font-size:
11.0pt;line-height:109%'><img border=0 width=718 height=26 id="Group 492874"
src="R%20Notes%20for%20Professionals_files/image004.gif"></span><span
style='font-size:9.0pt;line-height:109%;color:#C20CB9'>sudo</span><span
style='font-size:9.0pt;line-height:109%;font-weight:normal'> dnf </span><span
style='font-size:9.0pt;line-height:109%;color:#C20CB9'>install</span><span
style='font-size:9.0pt;line-height:109%;font-weight:normal'> R </span>For
Archlinux</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>R is directly available in the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Extra</span> package repo.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>sudo pacman -S r</p>

<p class=MsoNormal style='margin-top:0in;margin-right:124.05pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>More info on using R under Archlinux
can be found on the <a href="https://wiki.archlinux.org/index.php/R"><span
style='color:#2066B9'>ArchWiki R page</span></a>.</p>

<h2 style='margin-top:0in;margin-right:124.05pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618746">Section 1.2: Hello World!</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image005.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:67.5pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Also, check out the detailed discussion
of how, when, whether and why to print a string.</p>

<h2 style='margin-top:0in;margin-right:67.5pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618747">Section 1.3: Getting Help</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help.search</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can use function <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>?</span> to access
documentations and search for help in R. For even more general searches, you
can use <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>()</span> or <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>??</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image006.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:162.95pt;margin-bottom:
0in;margin-left:-.25pt;line-height:145%'>Visit <a
href="https://www.r-project.org/help.html"><span style='color:#2066B9'>https://www.r-project.org/help.html</span></a>
for additional information</p>

<h2 style='margin-top:0in;margin-right:162.95pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc618748">Section 1.4: Interactive mode and
R scripts</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>The interactive mode</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>The most basic way to use R is the <i>interactive</i> mode.
You type commands and immediately get the result from R.</p>

<h4 style='margin-left:.75pt'>Using R as a calculator</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Start R by typing <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>R</span> at the command prompt of your operating
system or by executing <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>RGui</span> on Windows. Below you can see a screenshot of
an interactive R session on Linux:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=622
height=396 id="Picture 4162"
src="R%20Notes%20for%20Professionals_files/image007.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This is RGui on Windows, the most basic working environment
for R under Windows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=676
height=540 id="Picture 4165"
src="R%20Notes%20for%20Professionals_files/image008.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>After the <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>&gt;</span> sign, expressions can be typed
in. Once an expression is typed, the result is shown by R. In the screenshot
above, R is used as a calculator: Type</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image009.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>to immediately see the result, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>2</span>. The leading <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
indicates that R returns a vector. In this case, the vector contains only one
number (2).</p>

<h4 style='margin-left:.75pt'>The first plot</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>R can be used to generate plots. The following example uses
the data set <b><span style='font-size:9.0pt;line-height:108%;color:#333399;
background:#FAFAFA'>PlantGrowth</span></b>, which comes as an example data set
along with R</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Type int the following all lines into the R prompt which do
not start with <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>##</span>.
Lines starting with <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>##</span> are meant to document the result which R will return.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=258
src="R%20Notes%20for%20Professionals_files/image010.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The following plot is created:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=315
height=232 id="Picture 4281"
src="R%20Notes%20for%20Professionals_files/image011.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>PlantGrowth</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>)</span>
loads the example data set <b><span style='font-size:9.0pt;line-height:110%;
color:#333399;background:#FAFAFA'>PlantGrowth</span></b>, which is records of
dry masses of plants which were</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>subject to two different treatment conditions or no
treatment at all (control group). The data set is made available under the name
<b><span style='font-size:9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>PlantGrowth</span></b>.
Such a name is also called a Variable.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>To load your own data, the following two documentation pages
might be helpful:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=25
src="R%20Notes%20for%20Professionals_files/image012.gif" align=left hspace=12>Reading
and writing tabular data in plain-text files (CSV, TSV, etc.)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:21.4pt'>I/O for foreign tables (Excel, SAS, SPSS, Stata)</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>str</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>PlantGrowth</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:5.0pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>)</span>
shows information about the data set which was loaded. The output indicates
that <b><span style='font-size:9.0pt;line-height:110%;color:#333399;background:
#FAFAFA'>PlantGrowth</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=361 style='width:270.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=217 valign=top style='width:162.65pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, which is R's name for a table. The </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>is a contains of two columns and 30 rows. In this case,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>each row corresponds to one plant. Details of the two
columns are shown in the lines starting with <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>$</span>: The first column is called <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>weight</span> and
contains numbers (<span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>num</span>, the dry weight of the respective plant). The second
column, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>group</span>,
contains the treatment that the plant was subjected to. This is categorial
data, which is called <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>factor</span></b> in R. Read more information
about data frames.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>anova</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>... </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>To compare the dry masses of the three different groups, a
one-way ANOVA is performed using <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>))</span>. <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>weight ~ group</span> means &quot;Compare
the values of the column <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>weight</span>, grouping by the values of the column <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>group</span>&quot;.
This is called a Formula in R. specifies the name of the table where the data
can be found.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=133 style='width:99.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.55pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Pr</span></p>
  </td>
  <td width=39 valign=top style='width:29.6pt;padding:1.55pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>&gt;</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>F</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>)</span>),
  </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.55pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>p </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.55pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.55pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>0.01591</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>The result shows, among others, that there exists a
significant difference (Column ) between some of the three groups. Post-hoc
tests, like Tukey's Test, must be performed to determine which groups' means
differ significantly.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>boxplot</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ylab </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span> creates a box plot of the data. where the values
to be plotted come from. <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>weight ~ group</span> means: &quot;Plot the values of the
column weight <i>versus</i> the values of the column <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>group</span>. specifies the label
of the y axis. More information: Base plotting</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.4pt;
margin-left:.75pt'>Type <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>q</span></b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> or <span
style='border:solid black 1.5pt;padding:0in'>Ctrl </span>-<span
style='border:solid black 1.5pt;padding:0in'> D </span>to exit from the R
session.</p>

<h4 style='margin-left:.75pt'>R scripts</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>To document your research, it is favourable to save the
commands you use for calculation in a file. For that effect, you can create <b>R
scripts</b>. An R script is a simple text file, containing R commands.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plants.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Create a text file with the name <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>R</span>, and fill it with the
following text, where some commands are familiar from the code block above:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image013.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Execute the script by typing into your terminal (The
terminal of your operating system, <b>not</b> an interactive R session like in
the previous section!)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image014.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plant_result.txt</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The file contains the results of your calculation, as if
you had typed them into the interactive R prompt. Thereby, your calculations
are documented.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dev.off</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The new commands <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>png</span></b> and are used for saving the
boxplot to disk. The two commands must enclose the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=295 style='width:221.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>png</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;FILENAME&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, width </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>..., height </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>plotting command, as shown in the example above. <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
opens a new</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dev.off</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dev.off</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>PNG file with the specified file name, width and height in
pixels. <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>()</span> will finish plotting and saves the plot to disk. No output
is saved until <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> is called.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618749">Chapter 2: Variables</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618750">Section 2.1: Variables,
data structures and basic Operations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>In R, data objects are manipulated using named data
structures. The names of the objects might be called &quot;variables&quot;
although that term does not have a specific meaning in the official R
documentation. R names are <i>case sensitive</i> and may contain alphanumeric
characters(<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>z</span>,<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>A</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>z</span>,<span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>0</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span>),
the dot/period(<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>)
and underscore(<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>_</span>).
To create names for the data structures, we have to follow the following rules:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.5pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 495446"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Names that
start with a digit or an underscore (e.g. <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>1a</span>), or names that are valid
numerical expressions (e.g. <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.11</span>), or names with dashes ('-') or spaces can only
be used when they are quoted: <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>`1a`</span> and <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>`.11`</span>. The names will be printed with
backticks:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.5pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=690 height=83
src="R%20Notes%20for%20Professionals_files/image016.gif"></span>All other
combinations of alphanumeric characters, dots and underscores can be used
freely, where reference with or without backticks points to the same object.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>ls</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:20.55pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:108%'><img
border=0 width=5 height=5 id="Group 495447"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Names that
begin with <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>
are considered system names and are not always visible using the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>-function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>There is no restriction on the number of characters in a
variable name.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=165 style='width:123.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.65pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>foo.bar</span></p>
  </td>
  <td width=71 valign=top style='width:53.3pt;padding:1.65pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, <span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>foo_bar</span>, <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.65pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>foobar</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:179.1pt;margin-bottom:
13.15pt;margin-left:.75pt'>Some examples of valid object names are: <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>foobar</span>, </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&lt;-</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.2pt;
margin-left:.75pt'>In R, variables are assigned values using the
infix-assignment operator <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>&lt;-</span>. The operator <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>=</span> can also
be used for assigning values to variables, however its proper use is for
associating values with parameter names in function calls. Note that omitting
spaces around operators may create confusion for users. The expression <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span>
is parsed as assignment (<span style='font-size:11.0pt;line-height:108%'><img
border=0 width=718 height=74
src="R%20Notes%20for%20Professionals_files/image017.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:130%'>So <span style='font-size:9.0pt;line-height:
130%;background:#FAFAFA'>foo</span> is assigned the value of <span
style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>42</span>. Typing <span
style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>foo</span> within
the console will output <span style='font-size:9.0pt;line-height:130%;
background:#FAFAFA'>42</span>, while typing <span style='font-size:9.0pt;
line-height:130%;background:#FAFAFA'>fooEquals</span> will output <span
style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>43</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image018.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The following command assigns a value to the variable named <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span> and prints
the value simultaneously:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=92
src="R%20Notes%20for%20Professionals_files/image019.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It is also possible to make assignments to variables using <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-&gt;</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=47
src="R%20Notes%20for%20Professionals_files/image020.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image021.gif"></span></p>

<h4 style='margin-left:.75pt'>Types of data structures</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>There are no scalar data types in R. Vectors of length-one
act like scalars.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=295 style='width:221.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>v </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>(</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>2</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>3</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>7</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>10</span></p>
  </td>
  <td width=14 valign=top style='width:10.45pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span>, </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>v2 </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;a&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;b&quot;</span><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;c&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>a </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:blue'>matrix</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=166 style='width:124.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>2</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>3</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>4</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>5</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>6</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>7</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>8</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=45
src="R%20Notes%20for%20Professionals_files/image022.gif" align=left hspace=12>Vectors:
Atomic vectors must be sequence of same-class objects.: a sequence of numbers,
or a sequence of logicals or a sequence of characters. <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span> are both
vectors.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='position:relative;z-index:-1895821312'><span
style='left:0px;position:absolute;left:496px;top:-2px;width:7px;height:14px'><img
width=7 height=14 src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span>Matrices:
A matrix of numbers, logical or characters. <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:108%'> </span><b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>19</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>,</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, byrow </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>ncol</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:107%'>,
  </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>11</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>12</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>nrow</span></b><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'><span style='position:relative;z-index:-1895820288'><span
style='left:0px;position:absolute;left:177px;top:-2px;width:7px;height:14px'><img
width=7 height=14 src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='position:relative;z-index:-1895819264'><span style='left:0px;position:
absolute;left:249px;top:-2px;width:7px;height:14px'><img width=7 height=14
src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='position:relative;z-index:-1895818240'><span style='left:0px;position:
absolute;left:328px;top:-2px;width:7px;height:14px'><img width=7 height=14
src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>4</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:108%'> </span><b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>F</span></b><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>.
Like vectors, matrix must be made of same-class</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'><span style='position:relative;z-index:-1895817216'><span
style='left:0px;position:absolute;left:671px;top:-1px;width:7px;height:14px'><img
width=7 height=14 src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span>elements.
To extract elements from a matrix rows and columns must be specified: <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>,</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
returns <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>1</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>]</span><span style='font-size:9.0pt;
line-height:108%'> </span><span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>5</span> that is the element on the first
row, second column.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=374 style='width:3.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mylist </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:blue'>list</span></b><span style='font-size:
  9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>course </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>'stat'</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><b><span style='font-size:
  9.0pt;line-height:107%;color:blue'>date</span></b><span style='font-size:
  9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>'04/07/2009'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin:0in;text-indent:0in'><span style='font-size:
11.0pt;line-height:108%'> <img border=0 width=5 height=5
id="Group 600790" src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Lists:
concatenation of different elements  <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>,</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, num_cons </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>num_isc </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=482 style='width:361.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, num_mat </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>as.character</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><b><span style='font-size:
  9.0pt;line-height:107%;color:blue;background:#FAFAFA'>c</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=288 valign=top style='width:3.0in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>45020</span><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>45679</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>46789</span><span style='font-size:
  9.0pt;line-height:107%'>, </span><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>43126</span><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>42345</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>47568</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:6.4pt;
margin-bottom:2.7pt;margin-left:0in;text-align:right;text-indent:0in;
line-height:107%'><span style='position:relative;z-index:-1895816192'><span
style='left:0px;position:absolute;left:105px;top:-2px;width:7px;height:14px'><img
width=7 height=14 src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
line-height:107%;color:#CC0A0A;background:#FAFAFA'>7</span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
line-height:107%;color:#CC0A0A;background:#FAFAFA'>6</span><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>,</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=187 style='width:1.95in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>30</span><span style='font-size:9.0pt;line-height:107%'>,
  </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>19</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>29</span><span style='font-size:9.0pt;
  line-height:107%'>, NA, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>25</span><span style='font-size:9.0pt;line-height:107%'>, </span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>26</span><span
  style='font-size:9.0pt;line-height:107%'> ,</span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>27</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>45674</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>))</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, results </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:.25in;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='position:relative;z-index:-1895815168'><span style='left:0px;position:
absolute;left:170px;top:-20px;width:43px;height:34px'><img width=43 height=34
src="R%20Notes%20for%20Professionals_files/image024.gif"></span></span><span
style='position:relative;z-index:-1895814144'><span style='left:0px;position:
absolute;left:386px;top:-1px;width:7px;height:14px'><img width=7 height=14
src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222;background:#FAFAFA'>)</span>. Extracting
elements from a list can be done by</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mylist</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mylist</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>name (if the list is named) or by index. In the given
example <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mylist$results</span>
and <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>[[</span><span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>6</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>]]</span> obtains the same element. Warning:
if you try <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>6</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>]</span>, R won't give you
an error, but it extract the result as a list.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=329 style='width:246.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mylist</span></p>
  </td>
  <td width=242 valign=top style='width:181.65pt;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>6</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]][</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>2</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]</span>
  is permitted (it gives you 19), </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mylist</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>While <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>6</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>][</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
gives you an error.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=583 style='width:437.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exam </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
  9.0pt;line-height:107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>matr </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>as.character</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><b><span style='font-size:
  9.0pt;line-height:107%;color:blue;background:#FAFAFA'>c</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=288 valign=top style='width:3.0in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>45020</span><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>45679</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>46789</span><span style='font-size:
  9.0pt;line-height:107%'>, </span><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>43126</span><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>42345</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>47568</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 600794"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>data.frame:
object with columns that are vectors of equal length, but (possibly) different
types. They are not matrices. <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>,</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>45674</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>))</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, res_S </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>30</span><span style='font-size:9.0pt;line-height:107%'>,
  </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>19</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>29</span><span style='font-size:9.0pt;
  line-height:107%'>, NA, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>25</span><span style='font-size:9.0pt;line-height:107%'>, </span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>26</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>27</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, res_O </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=223 style='width:167.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>3</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>1</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, NA, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>3</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>2</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, NA</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, res_TOT </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=635 style='width:476.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>30</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>,</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>22</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>,</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>30</span><span style='font-size:9.0pt;line-height:107%'>,NA,</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>28</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>,</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>28</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>,</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>27</span></p>
  </td>
  <td width=285 valign=top style='width:213.9pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>))</span>. Columns can be read by name
  <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>exam$matr</span>,
  </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exam</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>'matr'</span></p>
  </td>
  <td width=84 valign=top style='width:62.75pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]</span> or by index </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exam</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:1.95pt;margin-bottom:
2.25pt;margin-left:29.25pt;text-indent:81.0pt;line-height:107%'><span
style='position:relative;z-index:-1895813120'><span style='left:0px;position:
absolute;left:155px;top:-2px;width:7px;height:14px'><img width=7 height=14
src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='position:relative;z-index:-1895812096'><span style='left:0px;position:
absolute;left:436px;top:-2px;width:7px;height:14px'><img width=7 height=14
src="R%20Notes%20for%20Professionals_files/image023.gif"></span></span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
9.0pt;line-height:107%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
9.0pt;line-height:107%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>= </span><b><span
style='font-size:9.0pt;line-height:107%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>([</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]</span>,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=473 style='width:354.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exam</span></p>
  </td>
  <td width=235 valign=top style='width:176.1pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>,</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]</span>.
  Rows can also be read by name </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exam</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>'rowname'</span><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=65 valign=top style='width:48.95pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]</span> or index </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exam</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.0pt;
margin-left:30.5pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>1</span><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>,</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>]</span>. Dataframes are
actually just lists with a particular structure (rownames-attribute and equal
length components)</p>

<h4 style='margin-left:.75pt'>Common operations and some cautionary advice</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Syntax</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Default operations are done element by element. See <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>?</span>
for the rules of operator precedence. Most operators (and may other functions
in base R) have recycling rules that allow arguments of unequal length. Given
these objects:</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Example
objects</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image025.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=257
src="R%20Notes%20for%20Professionals_files/image026.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:329.2pt;margin-bottom:
0in;margin-left:.25pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:150%'><span style='position:relative;z-index:
-1895811072'><span style='left:0px;position:absolute;left:0px;top:-3px;
width:718px;height:21px'><img width=718 height=21
src="R%20Notes%20for%20Professionals_files/image027.gif"></span></span><span
style='font-size:9.0pt;line-height:150%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:150%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:150%'> </span><span style='font-size:9.0pt;
line-height:150%;color:#CC0A0A'>7.389056</span><span style='font-size:9.0pt;
line-height:150%'> </span><span style='font-size:9.0pt;line-height:150%;
color:#CC0A0A'>20.085537</span><span style='font-size:9.0pt;line-height:150%'> </span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A'>54.598150 </span><b>Some
vector operation Warnings!</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image028.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R sums what it can and then reuses the shorter vector to
fill in the blanks... The warning was given only because the two vectors have
lengths that are not exactly multiples. c+f # no warning whatsoever.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image029.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To use a matrix multiply: V %*% W</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=223
src="R%20Notes%20for%20Professionals_files/image030.gif"></span></p>

<h4 style='margin-left:.75pt'>&quot;Private&quot; variables</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>A leading dot in a name of a variable or function in R is
commonly used to denote that the variable or function is meant to be hidden.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>So, declaring the following variables</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image031.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>And then using the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>ls</span> function to list objects will only show the
first object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image032.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>all.names</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>However, passing to the function will show the 'private'
variable</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image033.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618751">Chapter 3: Arithmetic
Operators</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618752">Section 3.1: Range and
addition</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's take an example of adding a value to a range (as it
could be done in a loop for example):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image034.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Gives:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image035.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>This is because the range operator <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>:</span> has higher precedence than
addition operator <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>+</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>What happens during evaluation is as follows:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>2</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>3</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>4</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>5</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>6</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>7</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.3pt;
margin-left:21.4pt;line-height:107%'><img width=5 height=45
src="R%20Notes%20for%20Professionals_files/image036.gif" align=left hspace=12><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>+</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>5</span></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:92.25pt;
margin-bottom:2.3pt;margin-left:21.4pt;text-align:center;line-height:103%'><span
style='font-size:9.0pt;line-height:103%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:103%;color:#666666;background:#FAFAFA'>+</span><b><span
style='font-size:9.0pt;line-height:103%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:103%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:103%;color:#CC0A0A;background:#FAFAFA'>15</span><span
style='font-size:9.0pt;line-height:103%;color:#222222;background:#FAFAFA'>)</span>
expansion of the range operator to make a vector of integers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>48</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
Addition of 3 to each member of the vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=58
src="R%20Notes%20for%20Professionals_files/image037.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now R will compute what is inside the parentheses before
expanding the range and gives:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image038.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618753">Section 3.2: Addition and
subtraction</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>The basic math operations are performed mainly on numbers or
on vectors (lists of numbers).</p>

<h4 style='margin-left:.75pt'>1. Using single numbers</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can simple enter the numbers concatenated with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>+</span> for <i>adding</i>
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>-</span>
for <i>subtracting</i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="R%20Notes%20for%20Professionals_files/image039.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We can assign the numbers to <i>variables</i> (constants in
this case) and do the same operations:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image040.gif"></span></p>

<h4 style='margin-left:.75pt'>2. Using vectors</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In this case we create vectors of numbers and do the
operations using those vectors, or combinations with single numbers. In this
case the operation is done considering each element of the vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=273
src="R%20Notes%20for%20Professionals_files/image041.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can also use the function <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sum</span></b> to add all
elements of a vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image042.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
1.5pt;margin-left:-.25pt;line-height:107%'>We must take care with <i>recycling</i>,
which is one of the characteristics of <span style='font-size:9.0pt;line-height:
107%;background:#FAFAFA'>R</span>, a behavior that happens when doing math
operations where the length of vectors is different. <i>Shorter vectors in the
expression are recycled as often as need be (perhaps fractionally) until they
match the length of the longest vector. In particular a constant is simply
repeated</i>. In this case a Warning is show.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image043.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=136
src="R%20Notes%20for%20Professionals_files/image044.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In this case the correct procedure will be to consider only
the elements of the shorter vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image045.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When using the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>sum</span></b> function, again all the
elements inside the function are added.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image046.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618754">Chapter 4: Matrices</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:3.9in;margin-bottom:0in;
margin-left:-.25pt;line-height:145%'>Matrices store data</p>

<h2 style='margin-top:0in;margin-right:3.9in;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc618755">Section 4.1: Creating matrices</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Under the hood, a matrix is a special kind of vector with
two dimensions. Like a vector, a matrix can only have one data class. You can
create matrices using the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>matrix</span></b> function as shown below.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image047.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>As you can see this gives us a matrix of all numbers from 1
to 6 with two rows and three columns. The <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>data </span></b>parameter takes
a vector of values, <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>nrow</span></b> specifies the number of rows in
the matrix, and <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>ncol</span></b> specifies the number of columns. By
convention the matrix is filled by column. The default behavior can be changed
with the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>byrow
</span>parameter as shown below:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image048.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Matrices do not have to be numeric <span style='font-family:
"Arial",sans-serif'></span> any vector can be transformed into a matrix. For
example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image049.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Like vectors matrices can be stored as variables and then
called later. The rows and columns of a matrix can have names. You can look at
these using the functions <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>rownames</span></b> and <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>colnames</span></b>.
As shown below, the rows and columns don't initially have names, which is
denoted by <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NULL</span>.
However, you can assign values to them.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image050.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is important to note that similarly to vectors, matrices
can only have one data type. If you try to specify a matrix with multiple data
types the data will be coerced to the higher order data class.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>class</span></b>, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>is</span>, and <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>as</span> functions can be used to
check and coerce data structures in the same way they were used on the vectors
in class 1.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image051.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618756">Chapter 5: Formula</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618757">Section 5.1: The basics of
formula</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Statistical functions in R make heavy use of the so-called
Wilkinson-Rogers formula notation1 .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When running model functions like <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>lm</span> for the Linear
Regressions, they need a <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>formula</span></b>. This <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>formula</span></b>
specifies which regression coefficients shall be estimated.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image052.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>On the left side of the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>~</span> (LHS) the dependent variable is
specified, while the right hand side (RHS) contains the independent variables.
Technically the <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>formula</span></b> call above is redundant because the
tilde-operator is an infix function that returns an object with formula class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image053.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The advantage of the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>formula</span></b> function
over <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>~</span>
is that it also allows an environment for evaluation to be specified:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image054.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In this case, the output shows that a regression coefficient
for <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>wt</span>
is estimated, as well as (per default) an intercept parameter. The intercept
can be excluded / forced to be 0 by including <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>0</span> or <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>-1</span> in the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>formula</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image055.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Interactions between variables <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>a</span> and <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>b</span> can added by included <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>b</span> to the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>formula</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image056.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>a </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>+</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>b </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>+</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>a</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>As it is (from a statistical point of view) generally
advisable not have interactions in the model without the main effects, the
naive approach would be to expand the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>formula</span></b> to <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>b</span>. This
works but can be simplified by writing <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>a</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>*</span><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>b</span>, where the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>*</span> operator
indicates factor crossing (when between two factor columns) or multiplication
when one or both of the columns are 'numeric':</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image057.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Using the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>*</span> notation expands a term to include all lower order
effects, such that:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image058.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>will give, in addition to the intercept, 7 regression
coefficients. One for the three-way interaction, three for the twoway
interactions and three for the main effects.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If one wants, for example, to exclude the three-way
interaction, but retain all two-way interactions there are two shorthands.
First, using <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>-</span>
we can subtract any particular term:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image059.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Or, we can use the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>^</span> notation to specify which level of
interaction we require:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image060.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>Those two formula specifications should create the same
model matrix.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.</span> is shorthand to use all available variables as
main effects. In this case, the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>data</span></b> argument is used to obtain
the available variables (which are not on the LHS). Therefore:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image061.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>update.formula</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>gives coefficients for the intercept and 10 independent
variables. This notation is frequently used in machine learning packages, where
one would like to use all variables for prediction or classification. Note that
the meaning of <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>
depends on context (see e.g. <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span> for a different meaning).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
1.5pt;margin-left:30.0pt;text-indent:-13.9pt;line-height:107%'>1. G. N.
Wilkinson and C. E. Rogers. <i>Journal of the Royal Statistical Society. Series
C (Applied Statistics)</i> Vol. 22, No. 3 (1973), pp. 392-399<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618758">Chapter 6: Reading and
writing strings</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618759">Section 6.1: Printing and
displaying strings</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R has several built-in functions that can be used to print
or display information, but <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>print</span></b> and <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>cat</span></b> are the
most basic. As R is an <a
href="https://en.wikipedia.org/wiki/Interpreted_language"><span
style='color:#2066B9'>interpreted language</span></a>, you can try these out
directly in the R console:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image062.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>&quot;Hello World&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Note the difference in both input and output for the two
functions. (Note: there are no quote-characters in the value of <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span> created
with . They are added by <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>print</span></b> at the output stage.)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>cat</span></b> takes one or more character vectors as
arguments and prints them to the console. If the character vector has a length
greater than 1, arguments are separated by a space (by default):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image063.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Without the new-line character (<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>\n</span>) the output would be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image064.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The prompt for the next command appears immediately after
the output. (Some consoles such as RStudio's may automatically append a newline
to strings that do not end with a newline.)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>print</span></b> is an example of a &quot;generic&quot;
function, which means the class of the first argument passed is detected and a
class-specific <i>method</i> is used to output. For a character vector like <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;Hello
World&quot;</span>, the result is similar to the output of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>cat</span></b>.
However, the character string is quoted and a number <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
is output to indicate the first element of a character vector (In this case,
the first and only element):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image065.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=215 style='width:161.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
  <td width=42 valign=top style='width:31.5pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>s</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>)</span> or </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;Hello World&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This default print method is also what we see when we simply
ask R to print a variable. Note how the output of typing <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>s</span> is the
same as calling <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image066.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Or even without assigning it to anything:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image067.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If we add another character string as a second element of
the vector (using the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> function to <b>c</b>oncatenate
the elements together), then the behavior of <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> looks quite a bit
different from that of <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>cat</span></b>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=42
src="R%20Notes%20for%20Professionals_files/image068.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image069.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>Observe that the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> function does <i>not</i>
do string-concatenation. (One needs to use <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>paste</span></b> for that
purpose.) R shows that the character vector has two elements by quoting them
separately. If we have a vector long enough to span multiple lines, R will
print the index of the element starting each line, just as it prints <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
at the start of the first line.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:156.85pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895809024'><span style='left:0px;position:absolute;left:0px;
top:-8px;width:718px;height:59px'><img width=718 height=59
src="R%20Notes%20for%20Professionals_files/image070.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;Hello World&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;Here I am!&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;This next string is really long.&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#[1] &quot;Hello
World&quot; &quot;Here I am!&quot; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.2pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#[3] &quot;This next string is really long.&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>The particular behavior of <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>print</span></b> depends on the
<i>class</i> of the object passed to the function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If we call <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>print</span></b> an object with a different
class, such as &quot;numeric&quot; or &quot;logical&quot;, the quotes are
omitted from the output to indicate we are dealing with an object that is not
character class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image071.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Factor objects get printed in the same fashion as character
variables which often creates ambiguity when console output is used to display
objects in SO question bodies. It is rare to use <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>cat</span></b> or <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>print</span></b>
except in an interactive context. Explicitly calling <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span> is
particularly rare (unless you wanted to suppress the appearance of the quotes
or view an object that is returned as <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>invisible</span></b> by a
function), as entering <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>foo</span> at the console is a shortcut for</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>foo</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:1.8pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>)</span>.
The interactive console of R is known as a REPL, a
&quot;read-eval-print-loop&quot;. The <b><span style='font-size:9.0pt;
line-height:110%;color:blue;background:#FAFAFA'>cat</span></b> function is best
saved</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>for special purposes (like writing output to an open file
connection). Sometimes it is used inside functions (where</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=279 style='width:208.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
  <td width=221 valign=top style='width:165.7pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> are suppressed), however <b>using
  </b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cat</span></b></p>
  </td>
 </tr>
</table>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.3pt;margin-left:
.75pt'><span style='font-weight:normal'>calls to </span><span style='font-size:
9.0pt;line-height:109%;color:#222222;background:#FAFAFA'>()</span> inside a
function to generate output to the console is</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=136 style='width:101.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>message</span></b></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>warning</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>bad practice</b>. The preferred method is to <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
for intermediate messages; they behave</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>similarly to <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>cat</span></b> but can be optionally
suppressed by the end user. The final result should simply returned so that the
user can assign it to store it if necessary.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image072.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618760">Section 6.2: Capture output
of operating system command</a></h2>

<h4 style='margin-left:.75pt'>Functions which return a character vector</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Base <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>R</span> has two functions for invoking a system command.
Both require an additional parameter to capture the output of the system
command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image073.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Both return a character vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.0pt;text-indent:0in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>[1]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;top
- 08:52:03 up 70 days, 15:09, 0 users, load average: 0.00, 0.00, 0.00&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.0pt;text-indent:0in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%'>[2]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Tasks:
125 total, 1 running, 124 sleeping, 0 stopped, 0 zombie&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.0pt;text-indent:0in;line-height:112%'><span style='font-size:
9.0pt;line-height:112%'>[3]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='position:relative;z-index:-1895808000'><span
style='left:0px;position:absolute;left:0px;top:-41px;width:718px;height:125px'><img
width=718 height=125 src="R%20Notes%20for%20Professionals_files/image074.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;Cpu(s): 0.9%us,
0.3%sy, 0.0%ni, 98.7%id, 0.1%wa, 0.0%hi, 0.0%si, 0.0%st&quot;</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;Mem: 12194312k total, 3613292k used, 8581020k free,
216940k buffers&quot;</span><span style='font-size:9.0pt;line-height:112%'>
</span><span style='font-size:9.0pt;line-height:112%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;Swap: 12582908k total, 2334156k used,
10248752k free, 1682340k cached&quot;</span><span style='font-size:9.0pt;
line-height:112%'> </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-27.0pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>[6]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;&quot;</span><span
style='font-size:9.0pt;line-height:110%'>
</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-27.0pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>[7]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;
PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND
&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-27.0pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>[8]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;11300
root 20 0 1278m 375m 3696 S 0.0 3.2 124:40.92 trala
&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:30.0pt;text-indent:-27.0pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>[9]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;
6093 user1 20 0 1817m 269m 1888 S 0.0 2.3 12:17.96 R
&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:28.5pt;
margin-left:30.0pt;text-indent:-27.0pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%'>[10]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;
4949 user2 20 0 1917m 214m 1888 S 0.0 1.8 11:16.73 R
&quot;</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>top </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>a </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>b </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>n </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:10.15pt;margin-bottom:
23.95pt;margin-left:24.5pt'><span style='position:relative;z-index:-1895806976'><span
style='left:0px;position:absolute;left:0px;top:-89px;width:718px;height:140px'><img
width=718 height=140 src="R%20Notes%20for%20Professionals_files/image075.gif"></span></span>For
illustration, the UNIX command <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>1</span> is used. This is OS specific and may
need to be amended to run the examples on your computer.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.6pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:188%'><span style='position:absolute;z-index:-1895805952;
left:0px;margin-left:0px;margin-top:50px;width:718px;height:26px'><img
width=718 height=26 src="R%20Notes%20for%20Professionals_files/image076.gif"></span>Package
<span style='font-size:9.0pt;line-height:188%;background:#FAFAFA'>devtools</span>
has a function to run a system command and capture the output without an
additional parameter. It also returns a character vector. <span
style='font-size:9.0pt;line-height:188%'>devtools</span><span style='font-size:
9.0pt;line-height:188%;color:#666666'>::</span><span style='font-size:9.0pt;
line-height:188%'>system_output</span><span style='font-size:9.0pt;line-height:
188%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:188%;
color:#CC0A0A'>&quot;top&quot;</span><span style='font-size:9.0pt;line-height:
188%'>, </span><span style='font-size:9.0pt;line-height:188%;color:#CC0A0A'>&quot;-a
-b -n 1&quot;</span><span style='font-size:9.0pt;line-height:188%;color:#222222'>)</span></p>

<h4 style='margin-left:.75pt'>Functions which return a data frame</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>fread</span> function in package allows to execute a shell
command and to read the output like</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=326 style='width:244.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
  <td width=79 valign=top style='width:59.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>. It returns a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
  <td width=31 valign=top style='width:23.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:52.15pt;
margin-bottom:15.1pt;margin-left:6.25pt;text-align:center;line-height:103%'>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>fread</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;top -a -b -n
1&quot;</span><span style='font-size:9.0pt;line-height:110%'>, check.names </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> TRUE</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> PID USER PR NI VIRT RES SHR S X.CPU X.MEM TIME.
COMMAND</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11300</span><span style='font-size:9.0pt;
line-height:110%'> root </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>20</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:110%'> 1278m 375m </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3696</span><span
style='font-size:9.0pt;line-height:110%'> S </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.2</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>124</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>40.92</span><span
style='font-size:9.0pt;line-height:110%'> trala</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6093</span><span style='font-size:9.0pt;
line-height:110%'> user1 </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>20</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:110%'> 1817m 269m </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1888</span><span
style='font-size:9.0pt;line-height:110%'> S </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>12</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.56</span><span
style='font-size:9.0pt;line-height:110%'> R</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4949</span><span style='font-size:9.0pt;
line-height:110%'> user2 </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>20</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:110%'> 1917m 214m </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1888</span><span
style='font-size:9.0pt;line-height:110%'> S </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1.8</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>11</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.33</span><span
style='font-size:9.0pt;line-height:110%'> R</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:72.25pt;margin-bottom:
8.1pt;margin-left:.25pt;text-indent:3.75pt;line-height:241%'><span
style='position:relative;z-index:-1895804928'><span style='left:0px;position:
absolute;left:0px;top:-90px;width:718px;height:108px'><img width=718
height=108 src="R%20Notes%20for%20Professionals_files/image077.gif"></span></span><span
style='font-size:9.0pt;line-height:241%'> </span><span style='font-size:9.0pt;
line-height:241%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:241%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:241%'> </span><span style='font-size:9.0pt;line-height:241%;
color:#CC0A0A'>7922</span><span style='font-size:9.0pt;line-height:241%'>
user3 </span><span style='font-size:9.0pt;line-height:241%;color:#CC0A0A'>20</span><span
style='font-size:9.0pt;line-height:241%'> </span><span style='font-size:9.0pt;
line-height:241%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:241%'> 3094m 131m </span><span style='font-size:9.0pt;line-height:
241%;color:#CC0A0A'>1892</span><span style='font-size:9.0pt;line-height:241%'>
S </span><span style='font-size:9.0pt;line-height:241%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:241%'> </span><span style='font-size:9.0pt;
line-height:241%;color:#CC0A0A'>1.1</span><span style='font-size:9.0pt;
line-height:241%'> </span><span style='font-size:9.0pt;line-height:241%;
color:#CC0A0A'>21</span><span style='font-size:9.0pt;line-height:241%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:241%;
color:#CC0A0A'>04.95</span><span style='font-size:9.0pt;line-height:241%'>
R </span>Note, that <span style='font-size:9.0pt;line-height:241%;background:
#FAFAFA'>fread</span> automatically has skipped the top 6 header lines.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=397 style='width:297.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>check.names </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
  <td width=148 valign=top style='width:110.8pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>was added to convert <span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>%</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>CPU</span></p>
  </td>
  <td width=14 valign=top style='width:10.45pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, <span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>%</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MEN</span></p>
  </td>
  <td width=34 valign=top style='width:25.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, and </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TIME</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:23.2pt;margin-bottom:
29.6pt;margin-left:24.5pt'><img width=3 height=71
src="R%20Notes%20for%20Professionals_files/image078.gif" align=left hspace=12>Here
the parameter <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>+</span> to syntactically valid column names.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618761">Section 6.3: Reading from
or writing to a file connection</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Not always we have liberty to read from or write to a local
system path. For example if R code streaming mapreduce must need to read and
write to file connection. There can be other scenarios as well where one is
going beyond local system and with advent of cloud and big data, this is
becoming increasingly common. One of the way to do this is in logical sequence.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>file</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>Establish a file connection to read with <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
command (&quot;r&quot; is for read mode):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'>conn </span><span style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>file</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;/path/example.data&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;r&quot;</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'>#when file is in local system</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895802880'><span style='left:0px;position:absolute;left:0px;top:-24px;
width:718px;height:43px'><img width=718 height=43
src="R%20Notes%20for%20Professionals_files/image079.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>conn1 </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>file</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;stdin&quot;</span><span style='font-size:9.0pt;line-height:
112%'>, </span><span style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;r&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#when just standard input/output for files
are available</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>As this will establish just file connection, one can read
the data from these file connections as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image080.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>=-</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:8.25pt;margin-bottom:
10.3pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Here we are reading the data from file connection <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>conn</span> line by
line as <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>n</span><span
style='font-size:9.0pt;line-height:134%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A;background:#FAFAFA'>1</span>.
one can change value of <span style='font-size:9.0pt;line-height:134%;
background:#FAFAFA'>n</span> (say 10, 20 etc.) for reading data blocks for
faster reading (10 or 20 lines block read in one go). To read complete file in
one go set <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>n</span><span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A;background:#FAFAFA'>1</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>writeLines</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>,</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cat</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>file</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>After data processing or say model execution; one can write
the results back to file connection using many different commands like <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
etc. which are capable of writing to a file connection. However all of these
commands will leverage file connection established for writing. This could be
done using <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> command as:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'>conn2 </span><span style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>file</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;/path/result.data&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;w&quot;</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'>#when file is in local system</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895801856'><span style='left:0px;position:absolute;left:0px;top:-24px;
width:718px;height:43px'><img width=718 height=43
src="R%20Notes%20for%20Professionals_files/image079.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>conn3 </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>file</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;stdout&quot;</span><span style='font-size:9.0pt;
line-height:112%'>, </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;w&quot;</span><span style='font-size:9.0pt;line-height:
112%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#when just standard
input/output for files are available</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Then write the data as follows:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image081.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618762">Chapter 7: String
manipulation with stringi package</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618763">Section 7.1: Count pattern
inside string</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>With fixed pattern</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image082.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>Natively:</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image083.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>function is vectorized over string and pattern:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image084.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>A base R solution</i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image085.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>With regex</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>First example - find <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>a</span> and any character after</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Second example - find <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>a</span> and any digit after</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image086.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618764">Section 7.2: Duplicating strings</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image087.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>A base R solution that does the
same would look like this:</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image088.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:4.2pt;margin-left:
-.25pt'><a name="_Toc618765">Section 7.3: Paste vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>stri_paste</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>LETTERS</span></b><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;-&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>13</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># [1] &quot;A-1&quot; &quot;B-2&quot;
&quot;C-3&quot; &quot;D-4&quot; &quot;E-5&quot; &quot;F-6&quot;
&quot;G-7&quot; &quot;H-8&quot; &quot;I-9&quot; &quot;J-10&quot;
&quot;K-11&quot; &quot;L-12&quot; &quot;M-13&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895800832'><span style='left:0px;position:absolute;left:0px;top:-41px;
width:718px;height:59px'><img width=718 height=59
src="R%20Notes%20for%20Professionals_files/image089.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># [14]
&quot;N-1&quot; &quot;O-2&quot; &quot;P-3&quot; &quot;Q-4&quot;
&quot;R-5&quot; &quot;S-6&quot; &quot;T-7&quot; &quot;U-8&quot;
&quot;V-9&quot; &quot;W-10&quot; &quot;X-11&quot; &quot;Y-12&quot;
&quot;Z-13&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
14.65pt;margin-left:-.25pt;line-height:107%'><i>Natively, we could do this in R
via:</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>paste</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>LETTERS</span></b><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>13</span><span style='font-size:9.0pt;
line-height:110%'>,sep</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;-&quot;</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895799808'><span style='left:0px;position:absolute;left:0px;top:-24px;
width:718px;height:59px'><img width=718 height=59
src="R%20Notes%20for%20Professionals_files/image090.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'></span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#[1] &quot;A-1&quot; &quot;B-2&quot;
&quot;C-3&quot; &quot;D-4&quot; &quot;E-5&quot; &quot;F-6&quot;
&quot;G-7&quot; &quot;H-8&quot; &quot;I-9&quot; &quot;J-10&quot;
&quot;K-11&quot; &quot;L-12&quot; &quot;M-13&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.85pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'></span><span style='font-size:9.0pt;line-height:112%;color:forestgreen'>#[14]
&quot;N-1&quot; &quot;O-2&quot; &quot;P-3&quot; &quot;Q-4&quot;
&quot;R-5&quot; &quot;S-6&quot; &quot;T-7&quot; &quot;U-8&quot;
&quot;V-9&quot; &quot;W-10&quot; &quot;X-11&quot; &quot;Y-12&quot;
&quot;Z-13&quot;</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618766">Section 7.4: Splitting text
by some fixed pattern</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Split vector of texts using one pattern:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image091.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Split one text using many patterns:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image092.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618767">Chapter 8: Classes</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>class</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.0pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>The class of a data-object determines which functions will
process its contents. The <b><span style='font-size:9.0pt;line-height:134%;
color:blue;background:#FAFAFA'>class</span></b>-attribute is a character
vector, and objects can have zero, one or more classes. If there is no
class-attribute, there will still be an implicit class determined by an
object's <b><span style='font-size:9.0pt;line-height:134%;color:blue;
background:#FAFAFA'>mode</span></b>. The class can be inspected with the
function <b><span style='font-size:9.0pt;line-height:134%;color:blue;
background:#FAFAFA'>class</span></b> and it can be set or modified by the
function. The S3 class system was established early in S's history. The more
complex S4 class system was established later</p>

<h2 style='margin-top:0in;margin-right:15.0pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618768">Section 8.1: Inspect classes</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=255 style='width:191.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>class</span></b></p>
  </td>
  <td width=197 valign=top style='width:147.85pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> to find the object's class
  and </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>str</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Every object in R is assigned a class. You can use <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
to see its structure, including the classes it contains. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image093.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=161 style='width:120.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=68 valign=top style='width:50.7pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and using </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>str</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We see that iris has the class <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> allows us to
examine the data inside. The variable</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>str</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>class</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:21.55pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Species in the iris data frame is of class factor, in
contrast to the other variables which are of class numeric. The <span
style='font-size:9.0pt;line-height:134%;color:#222222;background:#FAFAFA'>()</span>
function also provides the length of the variables and shows the first couple
of observations, while the <span style='font-size:9.0pt;line-height:134%;
color:#222222;background:#FAFAFA'>()</span> function only provides the object's
class.</p>

<h2 style='margin-top:0in;margin-right:21.55pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618769">Section 8.2: Vectors and lists</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>atomic</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=533 style='width:5.55in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=230 valign=top style='width:2.4in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;logical&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;integer&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;numeric&quot;</span><span style='font-size:9.0pt;
  line-height:107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>synonym </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;double&quot;</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=173 valign=top style='width:1.8in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;complex&quot;</span><span
  style='font-size:9.0pt;line-height:107%'>, </span><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'>&quot;character&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Data in R are stored in vectors. A typical vector is a
sequence of values all having the same storage mode (e.g., characters vectors,
numeric vectors). See <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>?</span> for details on the atomic implicit classes and
their corresponding storage modes: and <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;raw&quot;</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Many classes are simply an atomic vector with a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>class</span></b>
attribute on top:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image094.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Lists are a special type of vector where each element can be
anything, even another list, hence the R term for lists:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>&quot;recursive vectors&quot;:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:7.35pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895798784'><span style='left:0px;position:absolute;left:0px;top:-8px;
width:718px;height:26px'><img width=718 height=26
src="R%20Notes%20for%20Professionals_files/image095.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>mylist </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>list</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'> A </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, B </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>letters</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'>, CC </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>list</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Z&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.45pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=243
src="R%20Notes%20for%20Professionals_files/image096.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:3.25pt;
margin-left:30.5pt'>vectors all having the same length:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.25pt;
margin-left:30.0pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=678 height=142
src="R%20Notes%20for%20Professionals_files/image097.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:91.3pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>The other class of recursive vectors is
R expressions, which are &quot;language&quot;- objects</p>

<h2 style='margin-top:0in;margin-right:91.3pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618770">Section 8.3: Vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The most simple data structure available in R is a vector.
You can make vectors of numeric values, logical values, and character strings
using the <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image098.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can also join to vectors using the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image099.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A more elaborate treatment of how to create vectors can be
found in the <i>&quot;Creating vectors&quot;</i> topic</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618771">Chapter 9: Lists</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618772">Section 9.1: Introduction
to lists</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Lists allow users to store multiple elements (like vectors
and matrices) under a single object. You can use the <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>list </span></b>function
to create a list:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image100.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice the vectors that make up the above list are different
classes. Lists allow users to group elements of different classes. Each element
in a list can also have a name. List names are accessed by the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>names</span></b>
function, and are assigned in the same manner row and column names are assigned
in a matrix.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image101.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It is often easier and safer to declare the list names when
creating the list object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image102.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:58.9pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Above the list has two elements, named
&quot;vec&quot; and &quot;mat,&quot; a vector and matrix, resepcively.</p>

<h2 style='margin-top:0in;margin-right:58.9pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618773">Section 9.2: Quick Introduction to
Lists</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In general, most of the objects you would interact with as a
user would tend to be a vector; e.g numeric vector, logical vector. These
objects can only take in a single type of variable (a numeric vector can only
have numbers inside it).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A list would be able to store any type variable in it,
making it to the generic object that can store any type of variables we would
need.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Example of initializing a list</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image103.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In order to understand the data that was defined in the
list, we can use the str function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image104.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Subsetting of lists distinguishes between extracting a slice
of the list, i.e. obtaining a list containing a subset of the elements in the
original list, and extracting a single element. Using the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[</span> operator
commonly used for vectors produces a new list.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image105.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To obtain a single element use <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>[[</span> instead.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image106.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>List entries may be named:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image107.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The entries in named lists can be accessed by their name
instead of their index.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image108.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Alternatively the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>$</span> operator can be used to access named
elements.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image109.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This has the advantage that it is faster to type and may be
easier to read but it is important to be aware of a potential pitfall. The <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span> operator
uses partial matching to identify matching list elements and may produce
unexpected results.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image110.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Lists can be particularly useful because they can store
objects of different lengths and of various classes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=601
src="R%20Notes%20for%20Professionals_files/image111.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618774">Section 9.3: Serialization:
using lists to pass information</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>There exist cases in which it is necessary to put data of
different types together. In Azure ML for example, it is necessary to pass
information from a R script module to another one exclusively throught
dataframes. Suppose we have a dataframe and a number:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:183.05pt;margin-bottom:
0in;margin-left:4.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:112%'><span style='position:relative;z-index:-1895797760'><span
style='left:0px;position:absolute;left:0px;top:-2484px;width:718px;height:1px'><img
width=718 height=1 src="R%20Notes%20for%20Professionals_files/image112.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>df </span></b><span style='font-size:9.0pt;
line-height:112%'>name height team fun_index </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>title</span></b><span
style='font-size:9.0pt;line-height:112%'> age desc Y </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> Andrea </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>195</span><span
style='font-size:9.0pt;line-height:112%'> Lazio </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>97</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:
9.0pt;line-height:112%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>33</span><span style='font-size:9.0pt;line-height:112%'>
eccellente </span><span style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Paja </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>165</span><span
style='font-size:9.0pt;line-height:110%'> Fiorentina </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>87</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>31</span><span style='font-size:9.0pt;line-height:110%'>
deciso </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Roro </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>190</span><span
style='font-size:9.0pt;line-height:110%'> Lazio </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>28</span><span style='font-size:9.0pt;line-height:110%'>
strano </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Gioele </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>70</span><span
style='font-size:9.0pt;line-height:110%'> Lazio </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%'>
simpatico </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Cacio </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>170</span><span
style='font-size:9.0pt;line-height:110%'> Juventus </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>81</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>33</span><span style='font-size:9.0pt;line-height:110%'>
duro </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Edola </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>171</span><span
style='font-size:9.0pt;line-height:110%'> Lazio </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>72</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>32</span><span style='font-size:9.0pt;line-height:110%'>
svampito </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Salami </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>175</span><span
style='font-size:9.0pt;line-height:110%'> Inter </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>75</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>30</span><span style='font-size:9.0pt;line-height:110%'>
doppiopasso </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Braugo </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>180</span><span
style='font-size:9.0pt;line-height:110%'> Inter </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>79</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>32</span><span style='font-size:9.0pt;line-height:110%'>
gjn </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Benna </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>158</span><span
style='font-size:9.0pt;line-height:110%'> Juventus </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>80</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>28</span><span style='font-size:9.0pt;line-height:110%'>
esaurito </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Riggio </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>182</span><span
style='font-size:9.0pt;line-height:110%'> Lazio </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>92</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>31</span><span style='font-size:9.0pt;line-height:110%'>
certezza </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:40.8pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>11<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%'>Giordano </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>185</span><span
style='font-size:9.0pt;line-height:110%'> Roma </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>79</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>29</span><span style='font-size:9.0pt;line-height:110%'>
buono </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image113.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can access to this information:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image114.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In order to put different types of data in a dataframe we
have to use the list object and the serialization. In particular we have to put
the data in a generic list and then put the list in a particular dataframe:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image115.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Once we have stored the information in the dataframe, we
need to deserialize it in order to use it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=110
src="R%20Notes%20for%20Professionals_files/image116.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Then, we can verify that the data are transfered correctly:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image117.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618775">Chapter 10: Hashmaps</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618776">Section 10.1: Environments
as hash maps</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
12.9pt;margin-left:-.25pt;line-height:107%'><i>Note: in the subsequent
passages, the terms <b>hash map</b> and <b>hash table</b> are used
interchangeably and refer to the </i><a
href="https://en.wikipedia.org/wiki/Hash_table"><i><span style='color:#2066B9'>same
</span></i></a><a href="https://en.wikipedia.org/wiki/Hash_table"><i><span
style='color:#2066B9'>concept</span></i></a><i>, namely, a data structure
providing efficient key lookup through use of an internal hash function.</i></p>

<h4 style='margin-left:.75pt'>Introduction</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>new.env</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Although R does not provide a native hash table structure,
similar functionality can be achieved by leveraging the fact that the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>environment</span></b>
object returned from (by default) provides hashed key lookups. The following
two statements are equivalent, as the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>hash</span> parameter defaults to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image118.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Additionally, one may specify that the internal hash table
is pre-allocated with a particular size via the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>size </span>parameter, which has a default
value of 29. Like all other R objects, <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>environment</span></b>s manage
their own memory and will grow in capacity as needed, so while it is not
necessary to request a non-default value for <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>size</span>, there may be a slight
performance advantage in doing so <b>if</b> the object will (eventually)
contain a very large number of elements. It is worth noting that allocating
extra space via <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>size</span>
does not, in itself, result in an object with a larger memory footprint:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image119.gif"></span></p>

<h4 style='margin-left:.75pt'>Insertion</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=56 style='width:42.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&lt;-</span></p>
  </td>
  <td width=28 valign=top style='width:20.7pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>$</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&lt;-</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:10.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:10.55pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><i><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&lt;-</span></i></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Insertion of elements may be done using either of the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[[</span>
methods provided for the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>environment</span></b> class, <i>but <b>not</b>
by using &quot;single bracket&quot; assignment (</i><i><span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span>)</i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image120.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>object</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>key</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]]</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> value</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Like other facets of R, the first method () is generally
preferred to the second (<span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>object$key</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:
  107%'> value</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'>)
because in the former case, a variable maybe be used instead of a literal value
(e.g <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>key2</span>
in the example</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'>above).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>As is generally the case with hash map implementations, the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>environment</span></b>
object will <b>not</b> store duplicate keys. Attempting to insert a key-value
pair for an existing key will replace the previously stored value:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image121.gif"></span></p>

<h4 style='margin-left:.75pt'>Key Lookup</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Likewise, elements may be accessed with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[[</span> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span>, but not
with <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image122.gif"></span></p>

<h4 style='margin-left:.75pt'>Inspecting the Hash Map</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Being just an ordinary <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>environment</span></b>, the
hash map can be inspected by typical means:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=307
src="R%20Notes%20for%20Professionals_files/image123.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=127
src="R%20Notes%20for%20Professionals_files/image124.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image125.gif"></span></p>

<h4 style='margin-left:.75pt'>Flexibility</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One of the major benefits of using <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>environment</span></b>
objects as hash tables is their ability to store virtually any type of object
as a value, <i>even other </i><b><i><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>environment</span></i></b><i>s</i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=896 id="Picture 603581"
src="R%20Notes%20for%20Professionals_files/image126.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=120
src="R%20Notes%20for%20Professionals_files/image127.gif"></span></p>

<h4 style='margin-left:.75pt'>Limitations</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One of the major limitations of using <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>environment</span></b>
objects as hash maps is that, unlike many aspects of R, vectorization is not
supported for element lookup / insertion:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image128.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Depending on the nature of the data being stored in the
object, it may be possible to use <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>vapply</span> or <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>list2env</span> for assigning many
elements at once:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=371
src="R%20Notes%20for%20Professionals_files/image129.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:13.6pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Neither of the above are particularly concise, but may be
preferable to using a <b><span style='font-size:9.0pt;line-height:134%;
color:blue;background:#FAFAFA'>for</span></b> loop, etc. when the number of
key-value pairs is large.</p>

<h2 style='margin-top:0in;margin-right:13.6pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618777">Section 10.2: package:hash</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.5pt;
margin-left:.75pt'>The <a href="https://cran.r-project.org/package=hash"><span
style='color:#2066B9'>hash package</span></a> offers a hash structure in R.
However, it <a href="https://rpubs.com/rpierce/hashBenchmarks"><span
style='color:#2066B9'>terms of timing</span></a> for both inserts and reads it
compares unfavorably to using environments as a hash. This documentation simply
acknowledges its existence and provides sample timing code below for the above
stated reasons. There is no identified case where hash is an appropriate
solution in R code today.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Consider:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
10.45pt;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=798 id="Picture 603583"
src="R%20Notes%20for%20Professionals_files/image130.gif"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618778">Section 10.3:
package:listenv</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://cran.r-project.org/package=listenv"><span style='font-size:
  9.0pt;line-height:107%;color:#2066B9'>packag</span></a><a
  href="https://cran.r-project.org/package=listenv"><span style='font-size:
  9.0pt;line-height:107%;color:#2066B9'>e</span></a></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://cran.r-project.org/package=listenv"><span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>:</span></a></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://cran.r-project.org/package=listenv"><span style='font-size:
  9.0pt;line-height:107%;color:#2066B9'>listenv</span></a></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>package</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>future</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Although implements a list-like interface to environments,
its performance relative to environments for hash-like purposes is <a
href="https://rpubs.com/rpierce/hashBenchmarks"><span style='color:#2066B9'>poor
on hash retrieval</span></a>. However, if the indexes are numeric, it can be
quite fast on retrieval. However, they have other advantages, e.g.
compatibility with . Covering this package for that purpose goes beyond the
scope of the current topic. However, the timing code provided here can be used
in conjunction with the example for package:hash for write timings.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image131.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618779">Chapter 11: Creating
vectors</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618780">Section 11.1: Vectors from
build in constants: Sequences of letters &amp; month names</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>R</span> has a number of build in constants. The following constants
are available:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>month.abb</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>month.name</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:199.35pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12><b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>LETTERS</span></b>:
the 26 upper-case letters of the Roman alphabet <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>letters</span></b>: the 26
lower-case letters of the Roman alphabet</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>: the three-letter abbreviations for the English month
names</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>: the English names for the months of the year</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>pi</span>: the ratio of the circumference of a circle to its diameter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>From the letters and month constants, vectors can be
created.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:11.95pt;text-indent:-11.7pt'><b><span style='line-height:108%'>1)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b>Sequences
of letters:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=158
src="R%20Notes%20for%20Professionals_files/image133.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:11.95pt;text-indent:-11.7pt'><b><span style='line-height:108%'>2)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b>Sequences
of month abbreviations or month names:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image134.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618781">Section 11.2: Creating
named vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Named vector can be created in several ways. With <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>c</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image135.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>which results in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image136.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>with <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>list</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image137.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>which results in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image138.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>With the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>setNames</span></b> function, two vectors of the
same length can be used to create a named vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image139.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>which results in a named integer vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image140.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>As can be seen, this gives the same result as the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>c</span> method.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You may also use the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>names</span></b> function to
get the same result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image141.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>With such a vector it is also possibly to select elements by
name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image142.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This feature makes it possible to use such a named vector as
a look-up vector/table to match the values to values of another vector or
column in dataframe. Considering the following dataframe:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image143.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Suppose you want to create a new variable in the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mydf</span>
dataframe called <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>num</span>
with the correct values from <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>xy</span> in the rows. Using the <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>match</span></b> function
the appropriate values from <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>xy</span> can be selected:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image144.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>which results in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image145.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618782">Section 11.3: Sequence of
numbers</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Use the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>:</span> operator to create sequences of numbers, such as
for use in vectorizing larger chunks of your code:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image146.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This works both ways</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image147.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>and even with floating point numbers</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image148.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>or negatives</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image149.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618783">Section 11.4: seq()</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>seq</span></b> is a more flexible function than the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>:</span> operator
allowing to specify steps other than 1.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>The function creates a sequence from the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>start</span></b>
(default is 1) to the end including that number.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can supply only the end (<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>to</span>) parameter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image150.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>As well as the start</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image151.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>And finally the step (<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>by</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image152.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>length.out</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>seq</span></b> can optionally infer the (evenly spaced)
steps when alternatively the desired length of the output () is supplied</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=29
src="R%20Notes%20for%20Professionals_files/image153.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image154.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>length.out </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>length</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:4.0pt;margin-bottom:1.7pt;
margin-left:102.85pt;text-indent:-102.6pt'>If the sequence needs to have the
same length as another vector we can use the <span style='font-size:9.0pt;
line-height:108%'>along.with</span> as a shorthand for <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=60
src="R%20Notes%20for%20Professionals_files/image155.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>seq.int</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are two useful simplified functions in the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>seq</span></b>
family: <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>seq_along</span></b>, <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>seq_len</span></b>, and . <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>seq_along</span></b>
and <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>seq_len</span></b> functions construct the natural (counting) numbers
from 1 through N where N is determined by the function argument, the length of
a vector or list with <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>seq_along</span></b>, and the integer argument
with <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>seq_len</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image156.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Note that <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>seq_along</span></b> returns the indices of an
existing object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image157.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>seq.int</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>is the same as <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>seq</span></b> maintained for ancient
compatibility.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>There is also an old function <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>sequence</span></b>that
creates a vector of sequences from a non negative argument.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image158.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618784">Section 11.5: Vectors</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>vector</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.2in;
margin-left:.75pt'>Vectors in R can have different types (e.g. integer,
logical, character). The most general way of defining a vector is by using the
function <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><b><span style='font-size:9.0pt;line-height:
112%;color:blue'>vector</span></b><span style='font-size:9.0pt;line-height:
112%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>'integer'</span><span style='font-size:9.0pt;line-height:112%'>,</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># creates a vector of integers of size 2.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:81.2pt;margin-bottom:
17.05pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895795712'><span style='left:0px;position:absolute;left:0px;
top:-12012px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>vector</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>'character'</span><span
style='font-size:9.0pt;line-height:112%'>,</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># creates a vector of characters of size 2. </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>vector</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>'logical'</span><span
style='font-size:9.0pt;line-height:112%'>,</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># creates a vector of logicals of size 2.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>However, in R, the shorthand functions are generally more
popular.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.05pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895794688'><span style='left:0px;position:absolute;left:0px;top:-12090px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>integer</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># is the same as vector('integer',2) and
creates an integer vector with two elements </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>character</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># is the same as vector('integer',2) and creates an
character vector with two elements </span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>logical</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># is the same as vector('logical',2) and creates an logical
vector with two elements</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Creating vectors with values, other than the default values,
is also possible. Often the function <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
is used for this. The c is short for combine or concatenate.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:178.4pt;margin-bottom:
17.05pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895793664'><span style='left:0px;position:absolute;left:0px;
top:-12188px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># creates a integer vector of two elements: 1 and 2. </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>'a'</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>'b'</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># creates a character vector of two elements: a and b. </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>T</span></b><span
style='font-size:9.0pt;line-height:112%'>,</span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>F</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># creates a logical vector of two elements: TRUE and FALSE.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Important to note here is that R interprets any integer
(e.g. 1) as an integer vector of size one. The same holds for numerics (e.g.
1.1), logicals (e.g. T or F), or characters (e.g. 'a'). Therefore, you are in
essence combining vectors, which in turn are vectors.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.35pt;
margin-left:.75pt'>Pay attention that you always have to combine similar
vectors. Otherwise, R will try to convert the vectors in vectors of the same
type.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.05pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895792640'><span style='left:0px;position:absolute;left:0px;top:-12357px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'>,</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>1.1</span><span style='font-size:9.0pt;
line-height:112%'>,</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>'a'</span><span style='font-size:9.0pt;line-height:112%'>,</span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>T</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># all types (integer, numeric, character
and logical) are converted to the 'lowest' type which is character.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Finding elements in vectors can be done with the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[</span> operator.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image161.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This can also be used to change values</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image162.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>seq</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Finally, the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>:</span> operator (short for the function <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>)
can be used to quickly create a vector of numbers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image163.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This can also be used to subset vectors (from easy to more
complex subsets)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image164.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618785">Section 11.6: Expanding a
vector with the rep() function</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>rep</span></b> function can be used to repeat a
vector in a fairly flexible manner.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image165.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The each argument is especially useful for expanding a
vector of statistics of observational/experimental units into a vector of
data.frame with repeated observations of these units.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image166.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A nice feature of <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>rep</span></b> regarding
involving expansion to such a data structure is that expansion of a vector to
an unbalanced panel can be accomplished by replacing the length argument with a
vector that dictates the number of times to repeat each element in the vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image167.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>This should expose the possibility of allowing an external
function to feed the second argument of <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>rep</span></b> in order to
dynamically construct a vector that expands according to the data.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rep.int</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>As with <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>seq</span></b>, faster, simplified versions of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>rep</span></b>
are <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>rep_len</span>
and . These drop some attributes that <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>rep </span></b>maintains and so
may be most useful in situations where speed is a concern and additional
aspects of the repeated vector are unnecessary.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image168.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618786">Chapter 12: Date and Time</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=237 style='width:177.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><span style='font-size:9.0pt;line-height:107%'>Dates</span></p>
  </td>
  <td width=7 valign=top style='width:5.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, </p>
  </td>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><span style='font-size:9.0pt;line-height:107%'>DateTimeClasses</span></p>
  </td>
  <td width=7 valign=top style='width:5.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>difftime</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:7.4pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>R comes with classes for dates, date-times and time differences; see and
follow the &quot;See Also&quot; section of those docs for further
documentation. Related Docs: Dates and Date-Time Classes.</p>

<h2 style='margin-top:0in;margin-right:7.4pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618787">Section 12.1: Current Date and Time</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>R is able to access the current date, time and time zone:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=256
src="R%20Notes%20for%20Professionals_files/image169.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>OlsonNames</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Use to view the time zone names in Olson/IANA database on
the current system:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>str</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>OlsonNames</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>())</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.8pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895791616'><span style='left:0px;position:absolute;left:0px;top:-13993px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>## chr [1:589]
&quot;Africa/Abidjan&quot; &quot;Africa/Accra&quot;
&quot;Africa/Addis_Ababa&quot; &quot;Africa/Algiers&quot;
&quot;Africa/Asmara&quot; &quot;Africa/Asmera&quot; &quot;Africa/Bamako&quot;
...</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618788">Section 12.2: Go to the End
of the Month</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:65.0pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:247%'><span style='position:relative;z-index:-1895790592'><span
style='left:0px;position:absolute;left:0px;top:-14078px;width:718px;height:
1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>Let's
say we want to go to the last day of the month, this function will help on it: <span
style='font-size:9.0pt;line-height:247%'>eom </span><span style='font-size:
9.0pt;line-height:247%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:247%'> </span><b><span style='font-size:9.0pt;line-height:247%;
color:blue'>function</span></b><span style='font-size:9.0pt;line-height:247%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:247%'>x, p</span><span
style='font-size:9.0pt;line-height:247%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:247%;color:blue'>as.POSIXlt</span></b><span
style='font-size:9.0pt;line-height:247%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:247%'>x</span><span style='font-size:9.0pt;
line-height:247%;color:#222222'>))</span><span style='font-size:9.0pt;
line-height:247%'> </span><b><span style='font-size:9.0pt;line-height:247%;
color:blue'>as.Date</span></b><span style='font-size:9.0pt;line-height:247%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:247%;
color:blue'>modifyList</span></b><span style='font-size:9.0pt;line-height:247%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:247%'>p, </span><b><span
style='font-size:9.0pt;line-height:247%;color:blue'>list</span></b><span
style='font-size:9.0pt;line-height:247%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:247%'>mon</span><span style='font-size:9.0pt;
line-height:247%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:247%'>p$mon </span><span style='font-size:9.0pt;line-height:247%;
color:#666666'>+</span><span style='font-size:9.0pt;line-height:247%'> </span><span
style='font-size:9.0pt;line-height:247%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:247%'>, mday</span><span style='font-size:
9.0pt;line-height:247%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:247%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:247%;color:#222222'>))) </span>Test:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image171.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Using a date in a string format:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image172.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618789">Section 12.3: Go to First
Day of the Month</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's say we want to go to the first day of a given month:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image173.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618790">Section 12.4: Move a date a
number of months consistently by months</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Let's say we want to move a given date a <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>num</span>of
months. We can define the following function, that uses the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mondate </span>package:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image174.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>It moves consistently the month part of the date and
adjusting the day, in case the date refers to the last day of the month.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Back one month:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image175.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Back two months:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image176.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Forward two months:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image177.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>It moves two months from the last day of February, therefore
the last day of April.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's se how it works for backward and forward operations
when it is the last day of the month:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image178.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Because November has 30 days, we get the same date in the
backward operation, but:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image179.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Because January has 31 days, then moving two months from
last day of November will get the last day of January.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618791">Chapter 13: The Date class</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618792">Section 13.1: Formatting
Dates</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=223 style='width:167.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=223 valign=top style='width:167.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>format</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>date</span></b><span style='font-size:9.0pt;line-height:107%'>, </span><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>format</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>=</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;%Y-%m-%d&quot;</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To format <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Dates</span> we use the function with either the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>POSIXct</span>
(given from</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=325 style='width:244.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.POSIXct</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>()</span></p>
  </td>
  <td width=153 valign=top style='width:114.4pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>) or <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>POSIXlt</span> (given from </p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.POSIXlt</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:53.35pt;
margin-bottom:.4pt;margin-left:6.25pt;text-align:center;line-height:103%'>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=470
src="R%20Notes%20for%20Professionals_files/image180.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>strptime</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.75pt;
margin-left:.75pt'>For more, see .</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618793">Section 13.2: Parsing
Strings into Date Objects</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.Date</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>YYYY</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>-</span><span
  style='font-size:9.0pt;line-height:107%'>MM</span><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>-</span><span style='font-size:9.0pt;
  line-height:107%'>DD</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R contains a Date class, which is created with , which takes
a string or vector of strings, and if the date is not in ISO 8601 date format ,
a formatting string of <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>strptime</span></b>-style tokens.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=240
src="R%20Notes%20for%20Professionals_files/image181.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618794">Section 13.3: Dates</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=124
src="R%20Notes%20for%20Professionals_files/image182.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=522 style='width:391.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.Date</span></b></p>
  </td>
  <td width=435 valign=top style='width:326.45pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function allows you to
  provide a format argument. The default is <span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>%</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>Y</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>-%</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>m</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>-%</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>d</span>, which is Year-monthday.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image183.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>The format string can be placed either within a pair of
single quotes or double quotes. Dates are usually expressed in a variety of
forms such as: <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;d-m-yy&quot;</span> or <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;d-m-YYYY&quot;</span>
or <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;m-d-yy&quot;</span>
or <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;m-d-YYYY&quot;</span>
or <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;YYYY-m-d&quot;</span>
or <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;YYYY-d-m&quot;</span>.
These formats can also be expressed by replacing <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;-&quot;</span> by <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;/&quot;</span>.
Furher, dates are also expressed in the forms, say, &quot;Nov 6, 1986&quot; or
&quot;November 6, 1986&quot; or &quot;6 Nov, 1986&quot; or &quot;6 November,
1986&quot; and so on. The <b>as.Date()</b> function accepts all such character
strings and when we mention the appropriate format of the string, it always
outputs the date in the form <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>&quot;YYYY-m-d&quot;</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Suppose we have a date string <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;9-6-1962&quot;</span>
in the format <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;%d-%m-%Y&quot;</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=273
src="R%20Notes%20for%20Professionals_files/image184.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>By specifying the correct format of the input string, we can
get the desired results. We use the following codes for specifying the formats
to the <b>as.Date()</b> function.</p>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:.7pt;
margin-left:0in;text-align:left;text-indent:0in'>Format Code Meaning</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.55pt;
margin-left:0in;text-indent:0in'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>%d </span>day</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.35pt;
margin-left:0in;text-indent:0in'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>%m </span>month</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.15pt;
margin-left:0in;text-indent:0in'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>%y </span>year in 2-digits</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.15pt;
margin-left:0in;text-indent:0in'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>%Y </span>year in 4-digits</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>%b </span>abbreviated month in
3 chars</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.1pt;
margin-left:0in;text-indent:0in'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>%B </span>full name of the month</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Consider the following example specifying the <b>format</b>
parameter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image185.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The parameter name <b>format</b> can be omitted.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image186.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Some times, names of the months abbreviated to the first
three characters are used in the writing the dates. In which case we use the
format specifier <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>%b</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image187.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that, there are no either <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>'-'</span> or <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>'/'</span>
or white spaces between the members in the date string. The format string
should exactly match that input string. Consider the following example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image188.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that, there is a comma in the date string and hence a
comma in the format specification too. If comma is omitted in the format
string, it results in an <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>NA</span>. An example usage of <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>%B</span> format specifier is as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image189.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>%y</span> format is system specific and hence, should be used with
caution. Other parameters used with this function are <b>origin</b> and <b>tz</b>(
time zone).</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618795">Chapter 14: Date-time
classes (POSIXct and POSIXlt)</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><span style='font-size:9.0pt;line-height:107%'>DateTimeClasses</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:61.5pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>R includes two date-time classes --
POSIXct and POSIXlt -- see .</p>

<h2 style='margin-top:0in;margin-right:61.5pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618796">Section 14.1: Formatting and
printing date-time objects</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=455
src="R%20Notes%20for%20Professionals_files/image190.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>strptime</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:113.05pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>See for details on the format strings
here, as well as other formats.</p>

<h2 style='margin-top:0in;margin-right:113.05pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618797">Section 14.2: Date-time arithmetic</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To add/subtract time, use POSIXct, since it stores times in
seconds</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image191.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.difftime</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>More formally, can be used to specify time periods to add
to a date or datetime object. E.g.:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image192.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>difftime</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To find the difference between dates/times use <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
for differences in seconds, minutes, hours, days or weeks.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image193.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>seq.POSIXt</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:100.2pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>To generate sequences of date-times use
<span style='font-size:9.0pt;line-height:145%;color:#222222;background:#FAFAFA'>()</span>
or simply <b><span style='font-size:9.0pt;line-height:145%;color:blue;
background:#FAFAFA'>seq</span></b>.</p>

<h2 style='margin-top:0in;margin-right:100.2pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618798">Section 14.3: Parsing strings into
date-time objects</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The functions for parsing a string into POSIXct and POSIXlt
take similar parameters and return a similar-looking result, but there are
differences in how that date-time is stored; see &quot;Remarks.&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image194.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Note that date and timezone are imputed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:30.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=159
src="R%20Notes%20for%20Professionals_files/image195.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:10.3pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Notes Missing elements</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>If
a date element is not supplied, then that from the current date is used.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>If a time element is not supplied, then that from midnight
is used, i.e. 0s.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.35pt;
margin-left:21.4pt'>If no timezone is supplied in either the string or the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tz</span>
parameter, the local timezone is used.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Time zones</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>The accepted values of <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>tz</span> depend on the location.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:228.95pt;margin-bottom:
1.7pt;margin-left:30.0pt;text-indent:30.0pt'><span style='position:relative;
z-index:-1895788544'><span style='left:0px;position:absolute;left:28px;
top:-19701px;width:46px;height:1px'><img width=46 height=1
src="R%20Notes%20for%20Professionals_files/image196.gif"></span></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>CST</span> is given
with <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:
#FAFAFA'>&quot;CST6CDT&quot;</span> or <span style='font-size:9.0pt;line-height:
108%;color:#CC0A0A;background:#FAFAFA'>&quot;America/Chicago&quot; </span>For
supported locations and time zones use:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>OlsonNames</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:60.5pt'>In R: <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=317 style='width:3.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>system</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=266 valign=top style='width:199.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;cat $R_HOME/share/zoneinfo/zone.tab&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:60.5pt'>Alternatively, try in R: <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.6pt;
margin-left:30.5pt;line-height:110%'>These locations are given by <a
href="http://www.iana.org/time-zones"><span style='color:#2066B9'>Internet
Assigned Numbers Authority (IANA)</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.9pt;
margin-left:60.5pt;line-height:110%'><a
href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"><span
style='color:#2066B9'>List of tz database time zones (Wikipedia)</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:51.55pt;line-height:110%'><span style='font-size:11.0pt;line-height:
110%'><img border=0 width=5 height=5 id="Group 504756"
src="R%20Notes%20for%20Professionals_files/image197.gif"></span><u><span
style='color:#2066B9'></span></u><a
href="http://www.iana.org/time-zones/repository/releases/tzdata2016e.tar.gz"><span
style='color:#2066B9'>IANA TZ Data (2016e)</span></a><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618799">Chapter 15: The character
class</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:2.95in;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Characters are what other languages
call 'string vectors.'</p>

<h2 style='margin-top:0in;margin-right:2.95in;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618800">Section 15.1: Coercion</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.character</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.character</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To check whether a value is a character use the function.
To coerce a variable to a character use the function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image198.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Note that numerics can be coerced to characters, but
attempting to coerce a character to numeric may result in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image199.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618801">Chapter 16: Numeric classes
and storage modes</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618802">Section 16.1: Numeric</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Numeric represents integers and doubles and is the default
mode assigned to vectors of numbers. The function</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.numeric</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=244 style='width:183.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.numeric</span></b></p>
  </td>
  <td width=100 valign=top style='width:75.0pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, the function </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.numeric</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> will evaluate whether a vector is numeric. It is
important to note that although integers and doubles will pass <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
will always attempt to convert to type double.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=371
src="R%20Notes%20for%20Professionals_files/image200.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Doubles</b> are R's default numeric value. They are
double precision vectors, meaning that they take up 8 bytes of memory for each
value in the vector. R has no single precision data type and so all real
numbers are stored in the double precision format.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image201.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Integers</b> are whole numbers that can be written
without a fractional component. Integers are represented by a number with an L
after it. Any number without an L after it will be considered a double.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image202.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Though in most cases using an integer or double will not
matter, sometimes replacing doubles with integers will consume less memory and
operational time. A double vector uses 8 bytes per element while an integer
vector uses only 4 bytes per element. As the size of vectors increases, using
proper types can dramatically speed up processes.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=719 height=322
src="R%20Notes%20for%20Professionals_files/image203.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618803">Chapter 17: The logical
class</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:237.65pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Logical is a mode (and an implicit
class) for vectors.</p>

<h2 style='margin-top:0in;margin-right:237.65pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618804">Section 17.1: Logical operators</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>xor</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are two sorts of logical operators: those that accept
and return vectors of any length (elementwise operators: <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>!</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>|</span>, <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&amp;</span>,
<span style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>)
and those that only evaluate the first element in each argument (<span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&amp;&amp;</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>||</span>).
The second sort is primarily used as the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>cond</span> argument to the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>if</span> function.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=404
 style='width:303.2pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.3pt'>
  <td width=358 valign=top style='width:268.6pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><b>Logical
  Operator Meaning</b></p>
  </td>
  <td width=46 valign=top style='width:34.6pt;padding:0in 0in 0in 0in;
  height:12.3pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
  margin-left:.65pt;text-align:justify;text-justify:inter-ideograph;text-indent:
  0in;line-height:107%'><b>Syntax</b></p>
  </td>
 </tr>
 <tr style='height:15.4pt'>
  <td width=358 valign=top style='width:268.6pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>! Not</p>
  </td>
  <td width=46 valign=top style='width:34.6pt;padding:0in 0in 0in 0in;
  height:15.4pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>!x</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=358 valign=top style='width:268.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>&amp; element-wise
  (vectorized) and</p>
  </td>
  <td width=46 valign=top style='width:34.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>x
  &amp; y</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=358 valign=top style='width:268.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>&amp;&amp; and
  (single element only)</p>
  </td>
  <td width=46 valign=top style='width:34.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>x &amp;&amp; y</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=358 valign=top style='width:268.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>| element-wise
  (vectorized) or</p>
  </td>
  <td width=46 valign=top style='width:34.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>x | y</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=358 valign=top style='width:268.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>|| or
  (single element only)</p>
  </td>
  <td width=46 valign=top style='width:34.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>x || y</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in'>xor element-wise
(vectorized) exclusive OR xor(x,y)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>||</span> operator evaluates the left condition and if the
left condition is TRUE the right side is never evaluated. This can save time if
the first is the result of a complex operation. The <span style='font-size:
9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&amp;&amp;</span>
operator will likewise return FALSE without evaluation of the second argument
when the first element of the first argument is FALSE.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image204.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.logical</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:119.65pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>To check whether a value is a logical
you can use the <span style='font-size:9.0pt;line-height:145%;color:#222222;
background:#FAFAFA'>()</span> function.</p>

<h2 style='margin-top:0in;margin-right:119.65pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618805">Section 17.2: Coercion</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.logical</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To coerce a variable to a logical use the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image205.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.numeric</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:7.05pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>When applying <span style='font-size:9.0pt;line-height:134%;
color:#222222;background:#FAFAFA'>()</span> to a logical, a double will be
returned. <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>NA</span>
is a logical value and a logical operator with an <span style='font-size:9.0pt;
line-height:134%;background:#FAFAFA'>NA</span> will return <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>NA</span> if the
outcome is ambiguous.</p>

<h2 style='margin-top:0in;margin-right:7.05pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618806">Section 17.3: Interpretation of NAs</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>See Missing values for details.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=70
src="R%20Notes%20for%20Professionals_files/image206.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=87
src="R%20Notes%20for%20Professionals_files/image207.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618807">Chapter 18: Data frames</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618808">Section 18.1: Create an
empty data.frame</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>A data.frame is a special kind of list: it is <i>rectangular</i>.
Each element (column) of the list has same length, and where each row has a
&quot;row name&quot;. Each column has its own class, but the class of one
column can be different from the class of another column (unlike a matrix,
where all elements must have the same class).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In principle, a data.frame could have no rows and no
columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image208.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>But this is unusual. It is more common for a data.frame to
have many columns and many rows. Here is a data.frame with three rows and two
columns (<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span>
is numeric class and <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>b</span> is character class):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image209.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In order for the data.frame to print, we will need to supply
some row names. Here we use just the numbers 1:3:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image210.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>nrow</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now it becomes obvious that we have a data.frame with 3 rows
and 2 columns. You can check this using <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span>,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=156
src="R%20Notes%20for%20Professionals_files/image211.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>structure</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R provides two other functions (besides <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>)
that can be used to create a data.frame. The first is called, intuitively, <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>.
It checks to make sure that the column names you supplied are valid, that the
list elements are all the same length, and supplies some automatically
generated row names. This means that the output of <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> might now always
be exactly what you expect:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image212.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue;background:#FAFAFA'>.</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The other function is called <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span>. This can be used
to coerce an object that is not a data.frame into being a data.frame by running
it through <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>. As an example, consider a matrix:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image213.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="R%20Notes%20for%20Professionals_files/image214.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>And the result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image215.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618809">Section 18.2: Subsetting
rows and columns from a data frame</a></h2>

<h4 style='margin-left:.75pt'>Syntax for accessing rows and columns: <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>[</span>, <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>[[</span>, and <span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>$</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>This topic covers the most common syntax to access specific
rows and columns of a data frame. These are</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rows, columns</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>Like a <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>matrix</span></b> with single brackets <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:60.5pt'>Using row and column numbers</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:60.5pt'>Using column (and row) names</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'><span style='position:relative;z-index:-1895787520'><span
style='left:0px;position:absolute;left:28px;top:-24119px;width:46px;height:
1px'><img width=46 height=1
src="R%20Notes%20for%20Professionals_files/image196.gif"></span></span>Like a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>list</span></b>:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>columns</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:60.5pt'>With single brackets <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>]</span> to get a data frame</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>one_column</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:60.5pt'>With double brackets <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>]]</span> to get a vector</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:
  107%'>$column_name</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:298.7pt;margin-bottom:
13.15pt;margin-left:30.5pt'>With <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>$</span> for a single column </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.4pt;
margin-left:.75pt'>We will use the built-in <b><span style='font-size:9.0pt;
line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b> data frame
to illustrate.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></b></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>rows, columns</span></b></p>
  </td>
 </tr>
</table>

<h4 style='margin-left:.75pt'>Like a matrix: <span style='font-size:9.0pt;
line-height:109%;color:#222222;background:#FAFAFA'>] </span>With numeric
indexes</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Using the built in data frame <b><span style='font-size:
9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b>, we
can extract rows and columns using <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>[]</span> brackets with a comma included. Indices
before the comma are rows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image216.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Similarly, after the comma are columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image217.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>mtcars</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>As shown above, if either rows or columns are left blank,
all will be selected. <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>]</span> indicates the first row with <i>all</i> the
columns.</p>

<h4 style='margin-left:.75pt'>With column (and row) names</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>So far, this is identical to how rows and columns of
matrices are accessed. With s, most of the time it is preferable to use a
column name to a column index. This is done by using a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>character</span></b>
with the column name instead of <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>numeric</span></b> with a column number:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image218.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:196%'>Though less common, row names can also be
used: <span style='font-size:11.0pt;line-height:196%'><img border=0 width=718
height=26 id="Group 512099"
src="R%20Notes%20for%20Professionals_files/image219.gif"></span><b><span
style='font-size:9.0pt;line-height:196%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:196%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:196%;color:#CC0A0A'>&quot;Mazda Rx4&quot;</span><span
style='font-size:9.0pt;line-height:196%'>, </span><span style='font-size:9.0pt;
line-height:196%;color:#222222'>]</span></p>

<h4 style='margin-left:.75pt'>Rows and columns together</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The row and column arguments can be used together:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image220.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>A warning about dimensions:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When using these methods, if you extract multiple columns,
you will get a data frame back. However, if you extract a <i>single</i> column,
you will get a vector, not a data frame under the default options.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image221.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>drop</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are two ways around this. One is to treat the data
frame as a list (see below), the other is to add a <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>= </span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>
argument. This tells R to not &quot;drop the unused dimensions&quot;:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image222.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>drop</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>Note that matrices work the same way - by default a single
column or row will be a vector, but if you specify <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>= </span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span> you
can keep it as a one-column or one-row matrix.</p>

<h4 style='margin-left:.75pt'>Like a list</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>Data frames are essentially <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>list</span></b>s, i.e., they
are a list of column vectors (that all must have the same length). Lists can be
subset using single brackets <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[</span> for a sub-list, or double brackets <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[[</span> for a
single element.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>columns</span></b></p>
  </td>
 </tr>
</table>

<h4 style='margin-left:.75pt'>With single brackets <span style='font-size:9.0pt;
line-height:109%;color:#222222;background:#FAFAFA'>]</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When you use single brackets and no commas, you will get
column back because data frames are lists of columns.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image223.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Single brackets <i>like a list</i> vs. single brackets <i>like
a matrix</i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=463 style='width:347.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>columns</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]</span> and </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, columns</span></p>
  </td>
  <td width=166 valign=top style='width:124.45pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]</span> is that when treating the </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The difference between as a <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>list</span></b> (no</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=347 style='width:260.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=70 valign=top style='width:52.85pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>data.frame</span></i></b></p>
  </td>
  <td width=205 valign=top style='width:153.65pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>. If you use a comma to treat the </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>comma in the brackets) the object returned will <i>be a </i>like
a <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>matrix</span></b>
then selecting a single column will return a vector but selecting multiple
columns will return a .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image224.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>one_column</span></b></p>
  </td>
 </tr>
</table>

<h4 style='margin-left:.75pt'>With double brackets <span style='font-size:9.0pt;
line-height:109%;color:#222222;background:#FAFAFA'>]]</span></h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To extract a single column <i>as a vector</i> when treating
your as a <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>list</span></b>, you can use double brackets <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[[</span>. This
will only work for a single column at a time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image225.gif"></span></p>

<h4 style='margin-left:.75pt'>Using <span style='font-size:9.0pt;line-height:
109%;background:#FAFAFA'>$</span> to access columns</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A single column can be extracted using the magical shortcut <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span> without
using a quoted column name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image226.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>Columns accessed by <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>$</span> will always be vectors, not data frames.</p>

<h4 style='margin-left:.75pt'>Drawbacks of <span style='font-size:9.0pt;
line-height:109%;background:#FAFAFA'>$</span> for accessing columns</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>$</span> can be a convenient shortcut, especially if you
are working in an environment (such as RStudio) that will autocomplete the
column name in this case. <b>However,</b> <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>$</span> has drawbacks as well: it uses <i>non-standard
evaluation</i> to avoid the need for quotes, which means it <i>will not work</i>
if your column name is stored in a variable.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image227.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Due to these concerns, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>$</span> is best used in <i>interactive</i>
R sessions when your column names are constant. For <i>programmatic</i> use,
for example in writing a generalizable function that will be used on different
data sets with different column names, <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>$</span> should be avoided.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Also note that the default behaviour is to use partial
matching only when extracting from recursive objects (except environments) by <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=46
src="R%20Notes%20for%20Professionals_files/image228.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="R%20Notes%20for%20Professionals_files/image229.gif"></span></p>

<h4 style='margin-left:.75pt'>Advanced indexing: negative and logical indices</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Whenever we have the option to use numbers for a index, we
can also use negative numbers to omit certain indices or a boolean (logical)
vector to indicate exactly which items to keep.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.05pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Negative indices omit elements </b><span style='font-size:11.0pt;
line-height:109%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image230.gif"></span><b><span
style='font-size:9.0pt;line-height:109%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:109%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:109%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:109%'>, </span><span style='font-size:9.0pt;
line-height:109%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:109%'> </span><span style='font-size:9.0pt;line-height:109%;
color:forestgreen'># first row</span></p>

<h4 style='margin-left:.75pt'>Logical vectors indicate specific elements to
keep</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can use a condition such as <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>&lt;</span> to generate a
logical vector, and extract only the rows that meet the condition:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image231.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>We can also bypass the step of saving the intermediate
variable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:124.4pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># extract all columns for rows where the
value of cyl is 4. </span><b><span style='font-size:9.0pt;line-height:112%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>[</span><b><span style='font-size:9.0pt;line-height:112%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:112%'>$cyl
</span><span style='font-size:9.0pt;line-height:112%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:112%'>, </span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.6pt;margin-bottom:
22.8pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895786496'><span style='left:0px;position:absolute;left:0px;
top:-27179px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image232.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># extract the cyl,
mpg, and hp columns where the value of cyl is 4 </span><b><span
style='font-size:9.0pt;line-height:112%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:112%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:112%'>$cyl </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>==</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>4</span><span style='font-size:9.0pt;line-height:112%'>, </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;cyl&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;mpg&quot;</span><span style='font-size:
9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;hp&quot;</span><span style='font-size:9.0pt;line-height:
112%;color:#222222'>)]</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618810">Section 18.3: Convenience
functions to manipulate data.frames</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=374 style='width:280.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.frames</span></p>
  </td>
  <td width=27 valign=top style='width:20.45pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>are </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>subset</span></b></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>transform</span></b></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>with</span></b></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>within</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>Some convenience functions to manipulate <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>.</p>

<h4 style='margin-left:.75pt'>subset</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=329 style='width:246.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>subset</span></b></p>
  </td>
  <td width=214 valign=top style='width:160.2pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function allows you to
  subset a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The in a more convenient way (subset also works with other
classes):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image233.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>cyl </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>==</span><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In the code above we asking only for the lines in which <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>6</span>
and for the columns <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>mpg</span> and <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>hp</span>. You could achieve the same result using <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[]</span> with the
following code:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image234.gif"></span></p>

<h4 style='margin-left:.75pt'>transform</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=542 style='width:406.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>transform</span></b></p>
  </td>
  <td width=406 valign=top style='width:304.15pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function is a convenience
  function to change columns inside a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=198 style='width:148.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.4pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mpg</span></p>
  </td>
  <td width=105 valign=top style='width:78.45pt;padding:1.4pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>^</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>2</span> to the <b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>mtcars</span></b>
  </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.4pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The . For instance the following code adds another column
named <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg2</span>
with the result of :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image235.gif"></span></p>

<h4 style='margin-left:.75pt'>with and within</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=467 style='width:350.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>with</span></b></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>within</span></b></p>
  </td>
  <td width=278 valign=top style='width:208.3pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> let you to evaluate
  expressions inside the </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>Both environment, allowing a somewhat cleaner syntax,
saving you the use of some <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>$</span> or <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[]</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For example, if you want to create, change and/or remove
multiple columns in the <b><span style='font-size:9.0pt;line-height:108%;
color:#333399;background:#FAFAFA'>airquality</span></b> :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image236.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618811">Section 18.4: Introduction</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Data frames are likely the data structure you will used most
in your analyses. A data frame is a special kind of list that stores
same-length vectors of different classes. You create data frames using the
function. The example below shows this by combining a numeric and a character
vector into a data frame. It uses the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>:</span> operator, which will create a vector
containing all integers from 1 to 3.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image237.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Data frame objects do not print with quotation marks, so the
class of the columns is not always obvious.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image238.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Without further investigation, the &quot;x&quot; columns in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>df1</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>df2</span> cannot
be differentiated. The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>str</span></b> function can be used to describe
objects with more detail than class.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=118
src="R%20Notes%20for%20Professionals_files/image239.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image240.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Here you see that <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>df1</span> is a and has 3 observations of 2
variables, &quot;x&quot; and &quot;y.&quot; Then you are told that
&quot;x&quot; has the data type integer (not important for this class, but for
our purposes it behaves like a numeric) and &quot;y&quot; is a factor with
three levels (another data class we are not discussing). <b><i>It is important
to note that, by default, data frames coerce characters to factors.</i></b> The
default behavior can be changed with the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>stringsAsFactors</span> parameter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image241.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Now the &quot;y&quot; column is a character. As mentioned
above, each &quot;column&quot; of a data frame must have the same length.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, y </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:5.3pt;margin-bottom:12.85pt;
margin-left:.75pt'><span style='position:relative;z-index:-1895785472'><span
style='left:0px;position:absolute;left:7px;top:-28880px;width:7px;height:1px'><img
width=7 height=1 src="R%20Notes%20for%20Professionals_files/image242.gif"></span></span><span
style='position:relative;z-index:-1895784448'><span style='left:0px;position:
absolute;left:72px;top:-28880px;width:7px;height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image242.gif"></span></span>Trying
to create a data.frame from vectors with different lengths will result in an
error. (Try running <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>(</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x </span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>=</span><span style='font-size:9.0pt;
line-height:108%'> </span><span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>1</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>4</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
to see the resulting error.)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>As test-cases for data frames, some data is provided by R by
default. One of them is iris, loaded as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image243.gif"></span></p>

<h2 style='margin-top:0in;margin-right:3.8pt;margin-bottom:2.7pt;margin-left:
-.25pt'><a name="_Toc618812">Section 18.5: Convert all columns of a data.frame
to character class</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>A common task is to convert all columns of a data.frame to
character class for ease of manipulation, such as in the cases of sending
data.frames to a RDBMS or merging data.frames containing factors where levels
may differ between input data.frames.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>The best time to do this is when the data is read in -
almost all input methods that create data frames have an options <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>stringsAsFactors</span>
which can be set to <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>FALSE</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If the data has already been created, factor columns can be
converted to character columns as shown below.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=375
src="R%20Notes%20for%20Professionals_files/image244.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=54
src="R%20Notes%20for%20Professionals_files/image245.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618813">Chapter 19: Split function</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618814">Section 19.1: Using split
in the split-apply-combine paradigm</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>A popular form of data analysis is <a
href="https://www.jstatsoft.org/article/view/v040i01/v40i01.pdf"><span
style='color:#2066B9'>split-apply-combine</span></a>, in which you split your
data into groups, apply some sort of processing on each group, and then combine
the results.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.35pt;
margin-left:.75pt'>Let's consider a data analysis where we want to obtain the
two cars with the best miles per gallon (mpg) for each cylinder count (cyl) in
the built-in mtcars dataset. First, we split the <b><span style='font-size:
9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b> data
frame by the cylinder count:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>spl </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>split</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>$cyl</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># $`4`</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># mpg cyl disp hp drat wt qsec vs
am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Datsun 710 22.8 4 108.0 93 3.85 2.320 18.61
1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Merc 240D 24.4 4 146.7 62 3.69 3.190 20.00
1 0 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:166.9pt;margin-bottom:
0in;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
line-height:112%'><span style='font-size:9.0pt;line-height:112%;color:forestgreen'>#
Merc 230 22.8 4 140.8 95 3.92 3.150 22.90 1 0 4 2 # Fiat
128 32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 # ...</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># $`6`</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># mpg cyl disp hp drat wt qsec vs
am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Mazda RX4 21.0 6 160.0 110 3.90 2.620 16.46
0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875 17.02
0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:166.9pt;margin-bottom:
0in;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
line-height:112%'><span style='font-size:9.0pt;line-height:112%;color:forestgreen'>#
Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215 19.44 1 0 3 1 #
Valiant 18.1 6 225.0 105 2.76 3.460 20.22 1 0 3 1 # ...</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># $`8`</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># mpg cyl disp hp drat wt
qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Hornet Sportabout 18.7 8 360.0 175 3.15 3.440
17.02 0 0 3 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Duster 360 14.3 8 360.0 245 3.21 3.570
15.84 0 0 3 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:135.25pt;margin-bottom:
17.05pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895783424'><span style='left:0px;position:absolute;left:0px;
top:-30159px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image246.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># Merc
450SE 16.4 8 275.8 180 3.07 4.070 17.40 0 0 3 3 # Merc
450SL 17.3 8 275.8 180 3.07 3.730 17.60 0 0 3 3 # ...</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This has returned a list of data frames, one for each
cylinder count. As indicated by the output, we could obtain the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=178 style='width:133.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>spl$`</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>4</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>`</span>, </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>spl$`</span></p>
  </td>
  <td width=48 valign=top style='width:36.3pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>6</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>`</span>, and </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>spl$`</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>relevant data frames with <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>8</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>`</span> (some
might find it more visually appealing to use</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=128 style='width:96.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>spl$</span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;4&quot;</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>spl</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;4&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:96.8pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>]]</span> instead).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>Now, we can use <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>lapply</span></b> to loop through this
list, applying our function that extracts the cars with the best 2 mpg values
from each of the list elements:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>best2
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>lapply</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>spl, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>function</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>tail</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>x</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>order</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x$mpg</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># $`4`</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># mpg cyl disp hp drat wt qsec vs
am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:173.05pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Fiat 128 32.4 4 78.7 66 4.08
2.200 19.47 1 1 4 1 # Toyota Corolla 33.9 4 71.1 65 4.22 1.835 19.90
1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># $`6`</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># mpg cyl disp hp drat wt qsec vs
am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.65pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895782400'><span style='left:0px;position:absolute;left:0px;
top:-30493px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image247.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># Mazda RX4 Wag
21.0 6 160 110 3.90 2.875 17.02 0 1 4 4 # Hornet 4 Drive 21.4 6
258 110 3.08 3.215 19.44 1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># $`8`</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># mpg cyl disp hp drat wt qsec
vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Hornet Sportabout 18.7 8 360 175 3.15 3.440 17.02
0 0 3 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Pontiac Firebird 19.2 8 400 175 3.08 3.845 17.05
0 0 3 2</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rbind</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>best2</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;4&quot;</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]]</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, best2</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;6&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, we can combine everything together using <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>rbind</span></b>.
We want to call <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>]]</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>,</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>best2</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;8&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:54.5pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>]])</span>, but this would be tedious if we had a huge
list. As a result, we use:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:140.65pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895781376'><span style='left:0px;position:absolute;left:0px;
top:-30676px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image248.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>do.call</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>rbind</span></b><span
style='font-size:9.0pt;line-height:112%'>, best2</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># mpg cyl disp hp
drat wt qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 4.Fiat 128 32.4 4 78.7 66 4.08 2.200
19.47 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 4.Toyota Corolla 33.9 4 71.1 65 4.22 1.835
19.90 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 6.Mazda RX4 Wag 21.0 6 160.0 110 3.90 2.875
17.02 0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 6.Hornet 4 Drive 21.4 6 258.0 110 3.08 3.215
19.44 1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 8.Hornet Sportabout 18.7 8 360.0 175 3.15 3.440
17.02 0 0 3 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.2pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 8.Pontiac Firebird 19.2 8 400.0 175 3.08 3.845
17.05 0 0 3 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>This returns the result of <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>rbind</span></b> (argument 1, a
function) with all the elements of <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>best2</span> (argument 2, a list) passed as arguments.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:4.35pt;margin-bottom:
8.65pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:188%'><span style='position:relative;z-index:-1895780352'><span
style='left:0px;position:absolute;left:0px;top:-30859px;width:718px;height:
1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>With
simple analyses like this one, it can be more compact (and possibly much less
readable!) to do the whole splitapply-combine in a single line of code: <b><span
style='font-size:9.0pt;line-height:188%;color:blue'>do.call</span></b><span
style='font-size:9.0pt;line-height:188%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:188%;color:blue'>rbind</span></b><span
style='font-size:9.0pt;line-height:188%'>, </span><b><span style='font-size:
9.0pt;line-height:188%;color:blue'>lapply</span></b><span style='font-size:
9.0pt;line-height:188%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:188%;color:blue'>split</span></b><span style='font-size:9.0pt;
line-height:188%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:188%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:188%'>, </span><b><span style='font-size:9.0pt;line-height:188%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:188%'>$cyl</span><span
style='font-size:9.0pt;line-height:188%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:188%'>, </span><b><span style='font-size:
9.0pt;line-height:188%;color:blue'>function</span></b><span style='font-size:
9.0pt;line-height:188%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:188%'>x</span><span style='font-size:9.0pt;line-height:188%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:188%'> </span><b><span
style='font-size:9.0pt;line-height:188%;color:blue'>tail</span></b><span
style='font-size:9.0pt;line-height:188%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:188%'>x</span><span style='font-size:9.0pt;
line-height:188%;color:#222222'>[</span><b><span style='font-size:9.0pt;
line-height:188%;color:blue'>order</span></b><span style='font-size:9.0pt;
line-height:188%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:188%'>x$mpg</span><span style='font-size:9.0pt;line-height:188%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:188%'>,</span><span
style='font-size:9.0pt;line-height:188%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:188%'>, </span><span style='font-size:9.0pt;
line-height:188%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:188%;color:#222222'>)))</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=506 style='width:379.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>split</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x,f</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, FUN</span></p>
  </td>
  <td width=334 valign=top style='width:250.15pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span> combination can be
  alternatively framed using the <span style='font-size:9.0pt;line-height:107%;
  color:#666666;background:#FAFAFA'>?</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>by</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:16.6pt;margin-bottom:
14.3pt;margin-left:.75pt'>It is also worth noting that the function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>by</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>,
</span><b><span style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>$cyl, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>function</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>tail</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>order</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x$mpg</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.0pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895779328'><span style='left:0px;position:absolute;left:0px;top:-31010px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>do.call</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>rbind</span></b><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>by</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>$cyl,
</span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>function</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>tail</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>order</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x$mpg</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)))</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618815">Section 19.2: Basic usage
of split</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>split</span></b> allows to divide a vector or a data.frame
into buckets with regards to a factor/group variables. This ventilation into
buckets takes the form of a list, that can then be used to apply group-wise
computation (<b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>for</span></b> loops or <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>lapply</span></b>/<b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>sapply</span></b>).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>First example shows the usage of <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>split</span></b> on a
vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:59.6pt;margin-bottom:
1.65pt;margin-left:3.75pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895778304'><span style='left:0px;position:
absolute;left:0px;top:-31186px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>Consider
following vector of letters: <span style='font-size:9.0pt;line-height:253%'>testdata
</span><span style='font-size:9.0pt;line-height:253%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:253%'> </span><b><span style='font-size:
9.0pt;line-height:253%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:253%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>&quot;e&quot;</span><span style='font-size:
9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>&quot;o&quot;</span><span style='font-size:9.0pt;line-height:
253%'>, </span><span style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>&quot;r&quot;</span><span
style='font-size:9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>&quot;g&quot;</span><span style='font-size:
9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>&quot;a&quot;</span><span style='font-size:9.0pt;line-height:
253%'>, </span><span style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>&quot;y&quot;</span><span
style='font-size:9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>&quot;w&quot;</span><span style='font-size:
9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>&quot;q&quot;</span><span style='font-size:9.0pt;line-height:
253%'>, </span><span style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>&quot;i&quot;</span><span
style='font-size:9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>&quot;s&quot;</span><span style='font-size:
9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>&quot;b&quot;</span><span style='font-size:9.0pt;line-height:
253%'>, </span><span style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>&quot;v&quot;</span><span
style='font-size:9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>&quot;x&quot;</span><span style='font-size:
9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>&quot;h&quot;</span><span style='font-size:9.0pt;line-height:
253%'>, </span><span style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>&quot;u&quot;</span><span
style='font-size:9.0pt;line-height:253%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Objective is to separate those letters into <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>voyels</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>consonants</span>,
ie split it accordingly to letter type.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's first create a grouping vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image249.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Note that <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>letter_type</span> has the same length that our vector <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>testdata</span>.
Now we can <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>split</span></b> this test data in the two</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=139
src="R%20Notes%20for%20Professionals_files/image250.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:63.65pt;margin-bottom:
0in;margin-left:.75pt;line-height:216%'>Hence, the result is a list which names
are coming from our grouping vector/factor <span style='font-size:9.0pt;
line-height:216%;background:#FAFAFA'>letter_type</span>. <b><span
style='font-size:9.0pt;line-height:216%;color:blue;background:#FAFAFA'>split</span></b>
has also a method to deal with data.frames.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Consider for instance <b><span style='font-size:9.0pt;
line-height:108%;color:#333399;background:#FAFAFA'>iris</span></b> data:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image251.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>By using <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>split</span></b>, one can create a list
containing one data.frame per iris specie (variable: Species):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'>
liris </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>split</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>iris</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:110%'>$Species</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>names</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>liris</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;setosa&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;versicolor&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;virginica&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>liris$setosa</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895777280'><span style='left:0px;position:absolute;left:0px;top:-31761px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image252.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> Sepal.Length Sepal.Width
Petal.Length Petal.Width Species</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.4</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>(contains only data for setosa group).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>One example operation would be to compute correlation matrix
per iris specie; one would then use <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>lapply</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>lcor </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>lapply</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>liris,
FUN</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>function</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>df</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>cor</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>df</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>])))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> $setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895776256'><span style='left:0px;position:absolute;left:0px;top:-32032px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image253.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> Sepal.Length Sepal.Width
Petal.Length Petal.Width</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Sepal.Length </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1.0000000</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.7425467</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.2671758</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.2780984</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Sepal.Width </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.7425467</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.0000000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.1777000</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.2327520</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Petal.Length </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.2671758</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.1777000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1.0000000</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.3316300</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Petal.Width </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.2780984</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2327520</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.3316300</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>1.0000000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>$versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Sepal.Length Sepal.Width Petal.Length Petal.Width</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Sepal.Length </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1.0000000</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.5259107</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.7540490</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.5464611</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Sepal.Width </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.5259107</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.0000000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.5605221</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.6639987</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Petal.Length </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.7540490</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.5605221</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1.0000000</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.7866681</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Petal.Width </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.5464611</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.6639987</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.7866681</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>1.0000000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>$virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Sepal.Length Sepal.Width Petal.Length Petal.Width</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Sepal.Length </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1.0000000</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.4572278</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.8642247</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.2811077</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Sepal.Width </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.4572278</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.0000000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.4010446</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.5377280</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Petal.Length </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.8642247</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.4010446</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1.0000000</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>0.3221082</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Petal.Width </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.2811077</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.5377280</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0.3221082</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>1.0000000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Then we can retrieve per group the best pair of correlated
variables: (correlation matrix is reshaped/melted, diagonal is filtered out and
selecting best record is performed)</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=130
src="R%20Notes%20for%20Professionals_files/image254.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=186
src="R%20Notes%20for%20Professionals_files/image255.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that one computations are performed on such groupwise
level, one may be interested in stacking the results, which can be done with:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image256.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618816">Chapter 20: Reading and
writing tabular data in plain-text files (CSV, TSV, etc.)</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Parameter Details</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15in;margin-bottom:
0in;margin-left:.75pt;line-height:141%'>file name of the CSV file to
read header logical: does the .csv file contain a header row
with column names?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:9.3pt;margin-bottom:0in;
margin-left:.75pt;line-height:141%'>sep character: symbol that
separates the cells on each row quote character: symbol used to quote
character strings dec character: symbol used as decimal
separator fill logical: when TRUE, rows with unequal length are filled
with blank fields. comment.char character: character used as comment in the csv
file. Lines preceded by this character are ignored.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:21.15pt;
margin-left:0in;text-indent:0in'>... extra
arguments to be passed to </p>

<h2 style='margin-left:-.25pt'><a name="_Toc618817">Section 20.1: Importing
.csv files</a></h2>

<h4 style='margin-left:.75pt'>Importing using base R</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=345 style='width:259.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.csv</span></b></p>
  </td>
  <td width=88 valign=top style='width:65.9pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, which wraps </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
  <td width=63 valign=top style='width:47.35pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, but uses </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>sep </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;,&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:3.9pt;margin-bottom:1.7pt;
margin-left:.75pt'>Comma separated value files (CSVs) can be imported using to
set the delimiter to a comma.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=256
src="R%20Notes%20for%20Professionals_files/image257.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>file.choose</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A user friendly option, , allows to browse through the
directories:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image258.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:10.3pt;margin-left:
.75pt'>Notes</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=303 style='width:227.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.csv</span></b></p>
  </td>
  <td width=73 valign=top style='width:55.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>defaults to </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>header </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>as.is </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>stringsAsFactors </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=345 style='width:258.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.csv2</span></b></p>
  </td>
  <td width=120 valign=top style='width:90.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>variant defaults to </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>sep </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;;&quot;</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>dec </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;,&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>Unlike
, and uses the first row as column names.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>All these functions will convert strings to <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>factor</span></b>
class by default unless either or</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:25.05pt;
margin-left:21.4pt'>The for use on data from countries where the comma is used
as a decimal point and the semicolon as a field separator.</p>

<h4 style='margin-left:.75pt'>Importing using packages</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=297 style='width:222.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.csv</span></b></p>
  </td>
  <td width=67 valign=top style='width:50.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, including </p>
  </td>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>stringsAsFactors </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>readr</span> package's <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>read_csv</span> function offers much
faster performance, a progress bar for large files, and more popular default
options than standard .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image260.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618818">Section 20.2: Importing
with data.table</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=518 style='width:388.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
  <td width=374 valign=top style='width:280.6pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>package introduces the function <a
  href="http://www.inside-r.org/packages/cran/data.table/docs/fread"><span
  style='font-size:9.0pt;line-height:107%;color:#2066B9;background:#FAFAFA'>fread</span></a>.
  While it is similar to </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The , <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>fread</span> is usually faster and more flexible, guessing
the file's delimiter automatically.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=290
src="R%20Notes%20for%20Professionals_files/image261.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=230 valign=top style='width:2.4in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;input1, input2 </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#000099'>\n</span></b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'> A, B </span><b><span style='font-size:
  9.0pt;line-height:107%;color:#000099'>\n</span></b><span style='font-size:
  9.0pt;line-height:107%;color:#CC0A0A'> C, D&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:186.75pt;margin-bottom:
12.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>the
filename (<i>e.g.</i> <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;filename.csv&quot;</span>), a shell command that acts
on a file (<i>e.g.</i> <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>&quot;grep 'word' filename&quot;</span>), or
the input itself (<i>e.g.</i> ).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=294 style='width:220.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
  <td width=150 valign=top style='width:112.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>that inherits from class </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>fread</span> returns an object of class , suitable for use with the
data.table's usage of <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>[]</span>. To return an ordinary data.frame, set the parameter to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image262.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:10.9pt;margin-left:
.75pt'>Notes</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=309 style='width:231.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
  <td width=165 valign=top style='width:123.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>. One missing argument is </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>na.comment</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:0in;text-indent:0in'><span
style='font-size:11.0pt;line-height:108%'> <img border=0
width=5 height=5 id="Group 510487"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>fread</span> does
not have all same options as  ,
which may lead</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>in unwanted behaviors if the source file contains <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>#</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:263.95pt;margin-bottom:
.25pt;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:5.5pt;line-height:134%'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12><span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>fread</span> uses
only <span style='font-size:9.0pt;line-height:134%;color:#CC0A0A;background:
#FAFAFA'>&quot;</span> for <b><span style='font-size:9.0pt;line-height:134%;
color:blue;background:#FAFAFA'>quote</span></b> parameter. <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>fread</span> uses
few (5) lines to guess variables types.</p>

<h2 style='margin-top:0in;margin-right:263.95pt;margin-bottom:.25pt;margin-left:
-.75pt;text-align:justify;text-justify:inter-ideograph;text-indent:5.5pt;
line-height:134%'><a name="_Toc618819">Section 20.3: Exporting .csv files</a></h2>

<h4 style='margin-left:.75pt'>Exporting using base R</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>write.csv</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Data can be written to a CSV file using <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image263.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=204 style='width:152.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>row.names</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>na </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:28.3pt;
margin-left:.75pt'>Commonly-specified parameters include .</p>

<h4 style='margin-left:.75pt'>Exporting using packages</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=345 style='width:258.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>readr</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>write_csv</span></p>
  </td>
  <td width=165 valign=top style='width:123.55pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>is significantly faster than </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>write.csv</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:.4pt;margin-left:126.15pt;text-align:center;line-height:103%'>and
does not write row names.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image264.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618820">Section 20.4: Import multiple csv files</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image265.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This read every file and adds it to a list. Afterwards, if
all data.frame have the same structure they can be combined into one big
data.frame:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image266.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618821">Section 20.5: Importing
fixed-width files</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Fixed-width files are text files in which columns are not
separated by any character delimiter, like <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>,</span> or <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>;</span>, but rather have a fixed
character length (<i>width</i>). Data is usually padded with white spaces.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>An example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=94
src="R%20Notes%20for%20Professionals_files/image267.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>constants.txt</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:28.3pt;
margin-left:.75pt'>Let's assume this data table exists in the local file in
the working directory.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Importing
with base R</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=85
src="R%20Notes%20for%20Professionals_files/image268.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895772160'><span style='left:0px;position:absolute;left:0px;top:-36042px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image269.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#&gt; 1 1647
pi 'important' 3.14159 6.28318</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#&gt; 2 1731 euler 'quite important' 2.71828
5.43656</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#&gt; 3 1979 answer 'The Answer.' 42
42.0000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Note:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.fwf</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>Column
titles don't need to be separated by a character (<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Column4Column5</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>widths</span> parameter defines the width of each column</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:25.4pt;
margin-left:21.4pt'>Non-separated headers are not readable with <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Importing
with readr</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image270.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Note:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fwf_</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:32.35pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>readr's
<span style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>*</span>
helper functions offer alternative ways of specifying column lengths, including
automatic guessing (<span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>fwf_empty</span>) readr is faster than base R</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Column titles cannot be automatically imported from data
file</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618822">Chapter 21: Pipe operators
(%&gt;% and others)</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:11.0pt;line-height:
109%;color:black;font-weight:normal'> </span><span
style='font-size:10.0pt;line-height:109%;color:black'>lhs rhs</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:15.35pt;
margin-left:.75pt'>A value or the magrittr placeholder. A function call using
the magrittr semantics</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Pipe operators, available in <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>magrittr</span>, <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span>, and other R packages,
process a data-object using a sequence of operations by passing the result of
one step as input for the next step using infix-operators rather than the more
typical R method of nested function calls.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>Note that the intended aim of pipe operators is to increase human
readability of written code. See Remarks section for performance
considerations.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618823">Section 21.1: Basic use and chaining</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The pipe operator, <span style='font-size:9.0pt;line-height:
108%;color:#666666;background:#FAFAFA'>%&gt;%</span>, is used to insert an
argument into a function. It is not a base feature of the language and can only
be used after attaching a package that provides it, such as <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>magrittr</span>.
The pipe operator takes the left-hand side (LHS) of the pipe and uses it as the
first argument of the function on the right-hand side (RHS) of the pipe. For
example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image271.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The pipe can be used to replace a sequence of function
calls. Multiple pipes allow us to read and write the sequence from left to
right, rather than from inside to out. For example, suppose we have <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>years</span>
defined as a factor but want to convert it to a numeric. To prevent possible
information loss, we first convert to character and then to numeric:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image272.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If we don't want the LHS (Left Hand Side) used as the <i>first</i>
argument on the RHS (Right Hand Side), there are workarounds, such as naming
the arguments or using <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.</span> to indicate where the piped input goes.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=172
src="R%20Notes%20for%20Professionals_files/image273.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=169
src="R%20Notes%20for%20Professionals_files/image274.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618824">Section 21.2: Functional
sequences</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Given a sequence of steps we use repeatedly, it's often
handy to store it in a function. Pipes allow for saving such functions in a
readable format by starting a sequence with a dot as in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image275.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>As an example, suppose we have factor dates and want to
extract the year:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=404
src="R%20Notes%20for%20Professionals_files/image276.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can review the composition of the function by typing its
name or using <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>functions</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image277.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can also access each function by its position in the
sequence:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=25
src="R%20Notes%20for%20Professionals_files/image278.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image279.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:89.95pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Generally, this approach may be useful
when clarity is more important than speed.</p>

<h2 style='margin-top:0in;margin-right:89.95pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618825">Section 21.3: Assignment with
%&lt;&gt;%</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>magrittr</span> package contains a compound assignment
infix-operator, <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>%&lt;&gt;%</span>, that updates a value by first piping it
into one or more <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>rhs</span>
expressions and then assigning the result. This eliminates the need to type an
object name twice (once on each side of the assignment operator <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&lt;-</span>).
<span style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%&lt;&gt;%</span>
must be the first infix-operator in a chain:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image280.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Instead of writing</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image281.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>or</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image282.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The compound assignment operator will both pipe and reassign
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>df</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image283.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618826">Section 21.4: Exposing
contents with %$%</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The exposition pipe operator, <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>%</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%</span>,
exposes the column names as R symbols within the left-hand side object to the
right-hand side expression. This operator is handy when piping into functions
that do not have a <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>data</span></b> argument (unlike, say, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lm</span>) and that
don't take a data.frame and column names as arguments (most of the main dplyr
functions).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The exposition pipe operator <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>%</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%</span>
allows a user to avoid breaking a pipeline when needing to refer to column
names. For instance, say you want to filter a data.frame and then run a
correlation test on two columns with</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cor.test</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:43.7pt'>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=290
src="R%20Notes%20for%20Professionals_files/image284.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image285.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>filter</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cor.test</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>Here the standard <span style='font-size:9.0pt;line-height:
108%;color:#666666;background:#FAFAFA'>%&gt;%</span> pipe passes the data.frame
through to <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>, while the <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>%</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%</span>
pipe exposes the column names to <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>with</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:27.6pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>The exposition pipe works like a pipe-able version of the
base R <span style='font-size:9.0pt;line-height:134%;color:#222222;background:
#FAFAFA'>()</span> functions, and the same left-hand side objects are accepted
as inputs.</p>

<h2 style='margin-top:0in;margin-right:27.6pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618827">Section 21.5: Creating side e&#57379;ects with %T&gt;%</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Some functions in R produce a side effect (i.e. saving,
printing, plotting, etc) and do not always return a meaningful or desired
value.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&gt;%</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>%</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>T</span> (tee operator) allows you to forward a value into
a side-effect-producing function while keeping the original <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lhs</span> value
intact. In other words: the tee operator works like <span style='font-size:
9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%&gt;%</span>, except
the return values is <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>lhs</span> itself, and not the result of the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>rhs</span> function/expression.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&gt;%</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Example: Create, pipe, write, and return an object. If <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%&gt;%</span>
were used in place of <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>%</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>T</span> in this example, then the variable <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>all_letters</span>
would contain <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NULL</span>
rather than the value of the sorted object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image286.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>save</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>load</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Warning: Piping an unnamed object to <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span> will produce
an object named <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>
when loaded into the workspace with <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span>. However, a workaround using a
helper function is possible (which can also be written inline as an anonymous
function).</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=357
src="R%20Notes%20for%20Professionals_files/image287.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="R%20Notes%20for%20Professionals_files/image288.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618828">Section 21.6: Using the
pipe with dplyr and ggplot2</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>%&gt;%</span> operator can also be used to
pipe the dplyr output into ggplot. This creates a unified exploratory data
analysis (EDA) pipeline that is easily customizable. This method is faster than
doing the aggregations internally in ggplot and has the added benefit of
avoiding unnecessary intermediate variables.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image289.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618829">Chapter 22: Linear Models
(Regression)</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.9pt;margin-left:0in;
text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Parameter Meaning</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:56.9pt'>a formula in <i>Wilkinson-Rogers</i> notation; <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>response ~ ...</span>
where <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>...</span>
contains terms corresponding to</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=686
 style='width:514.5pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:19.75pt'>
  <td width=74 valign=top style='width:55.4pt;padding:0in 0in 0in 0in;
  height:19.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>formula</p>
  </td>
  <td width=612 valign=top style='width:459.1pt;padding:0in 0in 0in 0in;
  height:19.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>variables
  in the environment or in the data frame specified by the <b><span
  style='font-size:9.0pt;line-height:107%;color:blue;background:#FAFAFA'>data</span></b>
  argument</p>
  </td>
 </tr>
 <tr style='height:16.8pt'>
  <td width=74 valign=top style='width:55.4pt;padding:0in 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>data</p>
  </td>
  <td width=612 valign=top style='width:459.1pt;padding:0in 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>data
  frame containing the response and predictor variables</p>
  </td>
 </tr>
 <tr style='height:.4in'>
  <td width=74 style='width:55.4pt;padding:0in 0in 0in 0in;height:.4in'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>subset</p>
  </td>
  <td width=612 valign=top style='width:459.1pt;padding:0in 0in 0in 0in;
  height:.4in'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>a
  vector specifying a subset of observations to be used: may be expressed as a
  logical statement in terms of the variables in <b><span style='font-size:
  9.0pt;line-height:107%;color:blue;background:#FAFAFA'>data</span></b></p>
  </td>
 </tr>
 <tr style='height:13.75pt'>
  <td width=74 valign=top style='width:55.4pt;padding:0in 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>weights</p>
  </td>
  <td width=612 valign=top style='width:459.1pt;padding:0in 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>analytical
  weights (see <i>Weights</i> section above)</p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>na.action</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>model</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:3.8pt;margin-bottom:4.55pt;
margin-left:.75pt'>na.action how to handle missing (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>) values:
see <span style='font-size:9.0pt;line-height:108%;color:#666666;background:
#FAFAFA'>? </span>how to perform the fitting. Only choices are <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;qr&quot;</span>
or <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;model.frame&quot;</span>
(the latter returns the model frame method without fitting the model, identical
to specifying )</p>

<p class=MsoNormal style='margin-top:0in;margin-right:47.25pt;margin-bottom:
3.65pt;margin-left:.75pt'>model whether to store the model frame in the
fitted object x whether to store the model matrix in the fitted
object y whether to store the model response in the fitted object qr whether
to store the QR decomposition in the fitted object whether to allow <i>singular
fits</i>, models with collinear predictors (a subset of the coefficients will
singular.ok automatically be set to <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>NA</span> in this case</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>contrasts.arg</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:56.9pt'>a list of contrasts to be used for particular factors in
the model; see the argument of</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=390 style='width:292.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>model.matrix</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue;background:#FAFAFA'>.</span></b></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>default</span></b></p>
  </td>
  <td width=195 valign=top style='width:146.6pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>. Contrasts can also be set with </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>options</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>contrasts <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> (see the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>contrasts</span></b>
argument) or by</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>contrasts</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>model.offset</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:41.85pt;margin-bottom:
4.6pt;margin-left:.25pt;text-indent:55.4pt'>assigning the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>contrast</span>
attributes of a factor (see <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span>) used to specify an <i>a priori</i>
known component in the model. May also be specified as part of the offset
formula. See <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>?</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=128 style='width:96.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm.fit</span></b></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm.wfit</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:21.2pt;
margin-left:0in;text-indent:0in'>... additional
arguments to be passed to lower-level fitting functions (<span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>)</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618830">Section 22.1: Linear
regression on the mtcars dataset</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>mtcars</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>The built-in mtcars data frame contains information about 32
cars, including their weight, fuel efficiency (in milesper-gallon), speed, etc.
(To find out more about the dataset, use <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span>).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If we are interested in the relationship between fuel
efficiency (<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span>)
and weight (<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>wt</span>)
we may start plotting those variables with:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image290.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The plots shows a (linear) relationship!. Then if we want to
perform linear regression to determine the coefficients of a linear model, we
would use the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lm</span>
function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image291.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>~</span> here means &quot;explained by&quot;, so the
formula <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg ~
wt</span> means we are predicting mpg as explained by wt. The most helpful way
to view the output is with:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image292.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Which gives the output:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image293.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=204
src="R%20Notes%20for%20Professionals_files/image294.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>This provides information about:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>37.2851</span><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>5.3445</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>wt</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:21.4pt;line-height:129%'><span style='position:relative;z-index:
-1895769088'><span style='left:0px;position:absolute;left:118px;top:-41956px;
width:7px;height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image242.gif"></span></span><span
style='position:relative;z-index:-1895768064'><span style='left:0px;position:
absolute;left:190px;top:-41956px;width:7px;height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image295.gif"></span></span><img
width=5 height=1 src="R%20Notes%20for%20Professionals_files/image259.gif"
align=left hspace=12>the estimated slope of each coefficient (<span
style='font-size:9.0pt;line-height:129%;background:#FAFAFA'>wt</span> and the
y-intercept), which suggests the best-fit prediction of mpg is <span
style='font-size:9.0pt;line-height:129%;color:#666666;background:#FAFAFA'>+</span><span
style='font-size:9.0pt;line-height:129%'> </span><span style='font-size:9.0pt;
line-height:129%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:129%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:129%;color:#222222;background:#FAFAFA'>)</span><span
style='font-size:9.0pt;line-height:129%'> </span><span style='font-size:9.0pt;
line-height:129%;color:#666666;background:#FAFAFA'>*</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:21.4pt'>The p-value of each coefficient, which suggests that the
intercept and weight are probably not due to chance Overall estimates of fit
such as R^2 and adjusted R^2, which show how much of the variation in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span> is
explained by the model</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We could add a line to our first plot to show the predicted <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image296.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is also possible to add the equation to that plot. First,
get the coefficients with <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>coef</span></b>. Then using <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>paste0</span> we
collapse the coefficients with appropriate variables and <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>+/-</span>,
to built the equation. Finally, we add it to the plot using</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=140
src="R%20Notes%20for%20Professionals_files/image297.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=640
height=470 id="Picture 19547"
src="R%20Notes%20for%20Professionals_files/image298.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618831">Section 22.2: Using the
'predict' function</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Once a model is built <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>predict</span></b> is the main
function to test with new data. Our example will use the <b><span
style='font-size:9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b>
built-in dataset to regress miles per gallon against displacement:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image299.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If I had a new data source with displacement I could see the
estimated miles per gallon.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image300.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The most important part of the process is to create a new
data frame with the same column names as the original data. In this case, the
original data had a column labeled <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>disp</span>, I was sure to call the new data that same
name.</p>

<h4 style='margin-left:.75pt'>Caution</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.5pt;
margin-left:.75pt'>Let's look at a few common pitfalls:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:3.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>not
using a data.frame in the new object:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.05pt;
margin-left:30.0pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=678 height=60
src="R%20Notes%20for%20Professionals_files/image301.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:3.25pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>not
using same names in new data frame:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.5pt;
margin-left:30.0pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=678 height=60
src="R%20Notes%20for%20Professionals_files/image302.gif"></span></p>

<h4 style='margin-left:.75pt'>Accuracy</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To check the accuracy of the prediction you will need the
actual y values of the new data. In this example, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>newdf</span> will need a column for 'mpg'
and 'disp'.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=306
src="R%20Notes%20for%20Professionals_files/image303.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618832">Section 22.3: Weighting</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Sometimes we want the model to give more weight to some data
points or examples than others. This is possible by specifying the weight for
the input data while learning the model. There are generally two kinds of
scenarios where we might use non-uniform weights over the examples:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.3pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 512538"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Analytic
Weights: Reflect the different levels of precision of different observations.
For example, if analyzing data where each observation is the average results
from a geographic area, the analytic weight is proportional to the inverse of
the estimated variance. Useful when dealing with averages in data by providing
a proportional weight given the number of observations. <a
href="http://surveyanalysis.org/wiki/Different_Types_of_Weights"><span
style='color:#2066B9'>Source</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 512539"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Sampling
Weights (Inverse Probability Weights - IPW): a statistical technique for
calculating statistics standardized to a population different from that in
which the data was collected. Study designs with a disparate sampling
population and population of target inference (target population) are common in
application. Useful when dealing with data that have missing values. <a
href="https://en.wikipedia.org/wiki/Inverse_probability_weighting"><span
style='color:#2066B9'>Source</span></a></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function does analytic weighting.
For sampling weights the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>survey</span> package is used to build a survey</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=558 style='width:418.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>svyglm</span></p>
  </td>
  <td width=409 valign=top style='width:306.6pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>. By default, the <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>survey</span>
  package uses sampling weights. (NOTE: </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm</span></b></p>
  </td>
  <td width=48 valign=top style='width:36.3pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, and </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>svyglm</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>design object and run <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>gaussian</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>with family <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> will all produce the same point
estimates, because they both solve for the coefficients by minimizing the
weighted least squares. They differ in how standard errors are calculated.)</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:14.85pt;margin-left:
.75pt'>Test Data</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>structure</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>list</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>lexptot </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9.1595012302023</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>9.86330744180814</span><span style='font-size:
9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:129.85pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895766016'><span style='left:0px;position:absolute;left:0px;
top:-44418px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image304.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8.92372556833205</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8.58202430280175</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>10.1133857229336</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
progvillm </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>1L, 1L, 1L, 1L, 0L</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, sexhead </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>1L, 1L, 0L, 1L, 1L</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, agehead </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>79L,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>43L, 52L, 48L, 35L</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>, weight </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1.04273509979248</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1.01139605045319</span><span style='font-size:9.0pt;line-height:
110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>1.01139605045319</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1.01139605045319</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.76305216550827</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span><span
style='font-size:9.0pt;line-height:110%'>, .Names </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lexptot&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;progvillm&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;sexhead&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;agehead&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;weight&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>class</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;tbl_df&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.5pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;tbl&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;data.frame&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>row.names</span></b><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>NA, </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>-</span><span style='font-size:9.0pt;line-height:110%'>5L</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Analytic
Weights</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image305.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Output</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=306
src="R%20Notes%20for%20Professionals_files/image306.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Sampling
Weights (IPW)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image307.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Output</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=64
src="R%20Notes%20for%20Professionals_files/image308.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=254
src="R%20Notes%20for%20Professionals_files/image309.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618833">Section 22.4: Checking for
nonlinearity with polynomial regression</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Sometimes when working with linear regression we need to
check for non-linearity in the data. One way to do this is to fit a polynomial
model and check whether it fits the data better than a linear model. There are
other reasons, such as theoretical, that indicate to fit a quadratic or higher
order model because it is believed that the variables relationship is
inherently polynomial in nature.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Let's fit a quadratic model for the <b><span
style='font-size:9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b>
dataset. For a linear model see Linear regression on the mtcars dataset.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>First we make a scatter plot of the variables <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span>
(Miles/gallon), <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>disp</span>
(Displacement (cu.in.)), and <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>wt</span> (Weight (1000 lbs)). The relationship among <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>disp</span> appears
non-linear.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image310.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=500
height=479 id="Picture 20449"
src="R%20Notes%20for%20Professionals_files/image311.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=239
src="R%20Notes%20for%20Professionals_files/image312.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>disp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Then, to get the result of a quadratic model, we added <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>I</span></b><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>^</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>.
The new model appears better when looking at <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>R</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>^</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span>
and all variables are significant.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=220
src="R%20Notes%20for%20Professionals_files/image313.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895764992'><span style='left:0px;position:absolute;left:0px;top:-46783px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image314.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#Multiple
R-squared: 0.8578, Adjusted R-squared: 0.8426</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.9pt;
margin-left:.75pt'>As we have three variables, the fitted model is a surface
represented by:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=360 style='width:3.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>mpg </span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></b></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'></span></b><b><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>41.4020</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>3.4179</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>*</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>wt</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></b></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>0.0824</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>*</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>disp</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>+</span></b></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>0.0001277</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>*</span></b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>disp</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:13.8pt;margin-left:12.2pt;text-align:center;text-indent:0in;
line-height:107%'><b><span style='font-size:9.0pt;line-height:107%;color:#666666;
background:#FAFAFA'>^</span></b><b><span style='font-size:9.0pt;line-height:
107%;color:#CC0A0A;background:#FAFAFA'>2</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>raw</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ploy</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Another way to specify polynomial regression is using <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>poly</span></b>
with parameter , otherwise <i>orthogonal polynomials</i> will be considered
(see the <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span> for more information). We get the same result
using:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image315.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, what if we need to show a plot of the estimated
surface? Well there are many options to make <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>3D</span> plots in <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>R</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here we use <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Fit3d</span> from <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>p3d</span>package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=619
src="R%20Notes%20for%20Professionals_files/image316.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618834">Section 22.5: Plotting The
Regression (base)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Continuing on the <b><span style='font-size:9.0pt;
line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b> example,
here is a simple way to produce a plot of your linear regression that is
potentially suitable for publication.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>First fit the linear model and</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image317.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Then plot the two variables of interest and add the
regression line within the definition domain:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:5.65pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895763968'><span style='left:0px;position:absolute;left:0px;
top:-47852px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>plot</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>$wt,</span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:
9.0pt;line-height:110%'>$mpg,pch</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18</span><span style='font-size:9.0pt;line-height:110%'>, xlab </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>'wt'</span><span style='font-size:9.0pt;
line-height:110%'>,ylab </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'mpg'</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>lines</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>min</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>$wt</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>,</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>max</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>$wt</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>as.numeric</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>predict</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>fit, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>data.frame</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wt</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>min</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:110%'>$wt</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>max</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>$wt</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>))))))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.2in;
margin-left:.75pt'>Almost there! The last step is to add to the plot, the
regression equation, the rsquare as well as the correlation coefficient. This
is done using the <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>vector</span></b> function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.85pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>rp </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>vector</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'expression'</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>rp</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>substitute</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>expression</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>italic</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>y</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>==</span><span style='font-size:9.0pt;
line-height:110%'> MYOTHERVALUE3 </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>+</span><span style='font-size:9.0pt;
line-height:110%'> MYOTHERVALUE4 </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>%*%</span><span style='font-size:9.0pt;
line-height:110%'> x</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
</span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>list</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>MYOTHERVALUE3 </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>format</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>fit$coefficients</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'>, digits </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:81.2pt;margin-bottom:
14.6pt;margin-left:3.5pt;line-height:134%'><span style='position:relative;
z-index:-1895762944'><span style='left:0px;position:absolute;left:0px;
top:-48001px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image318.gif"></span></span><span
style='font-size:9.0pt;line-height:134%'> MYOTHERVALUE4 </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:134%'> </span><b><span style='font-size:
9.0pt;line-height:134%;color:blue'>format</span></b><span style='font-size:
9.0pt;line-height:134%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:134%'>fit$coefficients</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:134%'>, digits </span><span style='font-size:9.0pt;line-height:
134%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:134%'> </span><span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:134%;color:#222222'>)))[</span><span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:134%;color:#222222'>] </span><span
style='font-size:9.0pt;line-height:134%'>rp</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:134%'> </span><span style='font-size:9.0pt;line-height:134%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:134%'> </span><b><span
style='font-size:9.0pt;line-height:134%;color:blue'>substitute</span></b><span
style='font-size:9.0pt;line-height:134%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:134%;color:blue'>expression</span></b><span
style='font-size:9.0pt;line-height:134%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:134%'>italic</span><span style='font-size:
9.0pt;line-height:134%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:134%'>R</span><span style='font-size:9.0pt;line-height:134%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:134%;
color:#666666'>^</span><span style='font-size:9.0pt;line-height:134%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:134%'> </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:134%'> MYVALUE</span><span style='font-size:
9.0pt;line-height:134%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:134%'>, </span><b><span style='font-size:9.0pt;
line-height:134%;color:blue'>list</span></b><span style='font-size:9.0pt;
line-height:134%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:134%'>MYVALUE </span><span style='font-size:9.0pt;line-height:134%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:134%'> </span><b><span
style='font-size:9.0pt;line-height:134%;color:blue'>format</span></b><span
style='font-size:9.0pt;line-height:134%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:134%;color:blue'>summary</span></b><span
style='font-size:9.0pt;line-height:134%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:134%'>fit</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:134%'>$adj.r.squared,dig</span><span style='font-size:9.0pt;
line-height:134%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>)))[</span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>] </span><span style='font-size:9.0pt;
line-height:134%'>rp</span><span style='font-size:9.0pt;line-height:134%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:134%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:134%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:134%'> </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:134%'> </span><b><span style='font-size:
9.0pt;line-height:134%;color:blue'>substitute</span></b><span style='font-size:
9.0pt;line-height:134%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:134%;color:blue'>expression</span></b><span style='font-size:9.0pt;
line-height:134%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:134%'>Pearson</span><span style='font-size:9.0pt;line-height:134%;
color:#666666'>-</span><span style='font-size:9.0pt;line-height:134%'>R </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:134%'> MYOTHERVALUE2</span><span
style='font-size:9.0pt;line-height:134%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:134%'>, </span><b><span
style='font-size:9.0pt;line-height:134%;color:blue'>list</span></b><span
style='font-size:9.0pt;line-height:134%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:134%'>MYOTHERVALUE2 </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:134%'> </span><b><span style='font-size:
9.0pt;line-height:134%;color:blue'>format</span></b><span style='font-size:
9.0pt;line-height:134%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:134%;color:blue'>cor</span></b><span style='font-size:9.0pt;
line-height:134%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:134%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:134%'>$wt,</span><b><span style='font-size:9.0pt;line-height:134%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:134%'>$mpg</span><span
style='font-size:9.0pt;line-height:134%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:134%'>, digits </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:134%'> </span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>)))[</span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>] </span><b><span style='font-size:9.0pt;
line-height:134%;color:blue'>legend</span></b><span style='font-size:9.0pt;
line-height:134%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>&quot;topright&quot;</span><span
style='font-size:9.0pt;line-height:134%'>, </span><b><span style='font-size:
9.0pt;line-height:134%;color:blue'>legend</span></b><span style='font-size:
9.0pt;line-height:134%'> </span><span style='font-size:9.0pt;line-height:134%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:134%'> rp, bty </span><span
style='font-size:9.0pt;line-height:134%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:134%'> </span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A'>'n'</span><span style='font-size:9.0pt;
line-height:134%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that you can add any other parameter such as the RMSE
by adapting the vector function. Imagine you want a legend with 10 elements.
The vector definition would be the following:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image319.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>10</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>and you will need to defined <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>r</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>....
to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>r</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here is the output:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=457 height=410 id="Picture 21020"
src="R%20Notes%20for%20Professionals_files/image320.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618835">Section 22.6: Quality
assessment</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>After building a regression model it is important to check
the result and decide if the model is appropriate and works well with the data
at hand. This can be done by examining the residuals plot as well as other
diagnostic plots.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image321.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=668
height=650 id="Picture 21073"
src="R%20Notes%20for%20Professionals_files/image322.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.55pt;
margin-left:.75pt'>These plots check for two assumptions that were made while
building the model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.35pt;margin-bottom:1.7pt;
margin-left:24.85pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span>That the
expected value of the predicted variable (in this case <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>mpg</span>) is given by a linear
combination of the predictors (in this case <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>wt</span>). We expect this estimate to be
unbiased. So the residuals should be centered around the mean for all values of
the predictors. In this case we see that the residuals tend to be positive at
the ends and negative in the middle, suggesting a non-linear relationship
between the variables.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.35pt;margin-bottom:2.3pt;
margin-left:24.85pt;text-indent:-13.9pt;line-height:103%'><span
style='line-height:103%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>That the actual predicted variable is normally distributed around
its estimate. Thus, the residuals should be normally distributed. For normally
distributed data, the points in a normal Q-Q plot should lie on or close to the
diagonal. There is some amount of skew at the ends here.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618836">Chapter 23: data.table</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:16.05pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Data.table is a package that extends the functionality of
data frames from base R, particularly improving on their performance and
syntax. See the package's Docs area at Getting started with data.table for
details.</p>

<h2 style='margin-top:0in;margin-right:16.05pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618837">Section 23.1: Creating a data.table</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>class</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:135.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=180 valign=top style='width:135.0pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;data.table&quot;</span><span style='font-size:9.0pt;
  line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;data.frame&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:135.25pt;text-indent:-135.0pt'>A data.table is an enhanced version
of the data.frame class from base R. As such, its <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> attribute is the
vector and functions that work on a data.frame will also work with a
data.table. There are</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>many ways to create, load or coerce to a data.table.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Build</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Don't forget to install and activate the package</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image323.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>There is a constructor of the same name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image324.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Unlike will not coerce strings to factors:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image325.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Read in</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can read from a text file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image326.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.csv</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>Unlike , <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>fread</span> will read strings as strings, not as factors.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Modify a data.frame</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For efficiency, data.table offers a way of altering a
data.frame or list to make a data.table in-place (without making a copy or
changing its memory location):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image327.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that we do not <span style='font-size:9.0pt;line-height:
108%;color:#666666;background:#FAFAFA'>&lt;-</span> assign the result, since
the object <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>DF</span>
has been modified in-place. The class attributes of the</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image328.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=571 style='width:427.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=25 valign=top style='width:18.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b>, or </b></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></b></p>
  </td>
  <td width=329 valign=top style='width:247.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b>, you should use the </b><b><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>setDT</span>
  function</b> to convert to a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>as.data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:46.9pt;margin-bottom:
12.65pt;margin-left:.75pt'><b>If you have a </b><b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>list</span>, </b>because it
does the conversion by reference instead of making a copy (which does). This
is important if you are working with large datasets.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=269 style='width:201.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>as.data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>table</span></p>
  </td>
  <td width=103 valign=top style='width:77.2pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>to coerce it to a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If you have another R object (such as a matrix), you must
use .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image329.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618838">Section 23.2: Special
symbols in data.table</a></h2>

<h4 style='margin-left:.75pt'>.SD</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=255 style='width:191.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SD</span></p>
  </td>
  <td width=168 valign=top style='width:126.25pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>refers to the subset of the </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>.</span> for each group, excluding all columns used in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>by</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=629 style='width:471.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SD</span></p>
  </td>
  <td width=543 valign=top style='width:406.95pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>along with <b><span style='font-size:9.0pt;
  line-height:107%;color:blue;background:#FAFAFA'>lapply</span></b> can be used
  to apply any function to multiple columns by group in a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.25pt;
margin-left:.75pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.25pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:247%'><span style='position:relative;z-index:-1895761920'><span
style='left:0px;position:absolute;left:0px;top:-51207px;width:718px;height:
1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>We will
continue using the same built-in dataset, <b><span style='font-size:9.0pt;
line-height:247%;color:#333399;background:#FAFAFA'>mtcars</span></b>: <b><span
style='font-size:9.0pt;line-height:247%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:247%'> </span><span style='font-size:9.0pt;
line-height:247%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:247%'> data.table</span><span style='font-size:9.0pt;line-height:
247%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:247%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:247%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:247%'> </span><span
style='font-size:9.0pt;line-height:247%;color:forestgreen'># Let's not include
rownames to keep things simpler </span>Mean of all columns in the dataset by <i>number
of cylinders</i>, <span style='font-size:9.0pt;line-height:247%;background:
#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=174
src="R%20Notes%20for%20Professionals_files/image330.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SDcols</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Apart from <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>cyl</span>, there are other categorical columns in the
dataset such as <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>vs</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>am</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>gear</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>carb</span>. It
doesn't really make sense to take the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>mean</span></b> of these
columns. So let's exclude these columns. This is where <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>.</span> comes into the picture.</p>

<h4 style='margin-left:.75pt'>.SDcols</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=445 style='width:333.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SDcols</span></p>
  </td>
  <td width=180 valign=top style='width:135.35pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>specifies the columns of the </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
  <td width=135 valign=top style='width:101.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>that are included in <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SD</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.35pt;
margin-left:.75pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>.</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Mean of all columns (continuous columns) in the dataset by <i>number
of gears</i> <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>gear</span>,
and <i>number of cylinders</i>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>cyl</span>, arranged by <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>gear</span> and <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=31
src="R%20Notes%20for%20Professionals_files/image331.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:75.85pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:224%'><span style='position:relative;
z-index:-1895760896'><span style='left:0px;position:absolute;left:0px;
top:-51690px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image332.gif"></span></span><span
style='font-size:9.0pt;line-height:224%'>cols_chosen </span><span
style='font-size:9.0pt;line-height:224%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:224%'> </span><b><span style='font-size:
9.0pt;line-height:224%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:224%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:224%;color:#CC0A0A'>&quot;mpg&quot;</span><span style='font-size:
9.0pt;line-height:224%'>, </span><span style='font-size:9.0pt;line-height:224%;
color:#CC0A0A'>&quot;disp&quot;</span><span style='font-size:9.0pt;line-height:
224%'>, </span><span style='font-size:9.0pt;line-height:224%;color:#CC0A0A'>&quot;hp&quot;</span><span
style='font-size:9.0pt;line-height:224%'>, </span><span style='font-size:9.0pt;
line-height:224%;color:#CC0A0A'>&quot;drat&quot;</span><span style='font-size:
9.0pt;line-height:224%'>, </span><span style='font-size:9.0pt;line-height:224%;
color:#CC0A0A'>&quot;wt&quot;</span><span style='font-size:9.0pt;line-height:
224%'>, </span><span style='font-size:9.0pt;line-height:224%;color:#CC0A0A'>&quot;qsec&quot;</span><span
style='font-size:9.0pt;line-height:224%;color:#222222'>) </span><b><span
style='font-size:9.0pt;line-height:224%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:224%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:224%;color:blue'>order</span></b><span
style='font-size:9.0pt;line-height:224%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:224%'>gear, cyl</span><span
style='font-size:9.0pt;line-height:224%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:224%'>, </span><b><span style='font-size:
9.0pt;line-height:224%;color:blue'>lapply</span></b><span style='font-size:
9.0pt;line-height:224%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:224%'>.SD, </span><b><span style='font-size:9.0pt;line-height:224%;
color:blue'>mean</span></b><span style='font-size:9.0pt;line-height:224%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:224%'>, </span><b><span
style='font-size:9.0pt;line-height:224%;color:blue'>by</span></b><span
style='font-size:9.0pt;line-height:224%'> </span><span style='font-size:9.0pt;
line-height:224%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:224%'> .</span><span style='font-size:9.0pt;line-height:224%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:224%'>gear, cyl</span><span
style='font-size:9.0pt;line-height:224%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:224%'>, .SDcols </span><span
style='font-size:9.0pt;line-height:224%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:224%'> cols_chosen</span><span
style='font-size:9.0pt;line-height:224%;color:#222222'>]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># gear cyl mpg disp hp drat
wt qsec</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1: 3 4 21.500 120.1000 97.0000 3.700000 2.465000
20.0100</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2: 3 6 19.750 241.5000 107.5000 2.920000 3.337500
19.8300</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3: 3 8 15.050 357.6167 194.1667 3.120833 4.104083
17.1425</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#4: 4 4 26.925 102.6250 76.0000 4.110000 2.378125
19.6125</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#5: 4 6 19.750 163.8000 116.5000 3.910000 3.093750
17.6700</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#6: 5 4 28.200 107.7000 102.0000 4.100000 1.826500
16.8000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#7: 5 6 19.700 145.0000 175.0000 3.620000 2.770000
15.5000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#8: 5 8 15.400 326.0000 299.5000 3.880000 3.370000
14.5500</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Maybe we don't want to calculate the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>mean</span></b>
by groups. To calculate the mean for all the cars in the dataset, we don't
specify the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>by</span>
variable.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image333.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Note:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SDcols</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=648 style='width:485.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SDcols</span></p>
  </td>
  <td width=540 valign=top style='width:404.75pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>can also directly take a vector of
  columnnumbers. In the above example this would be </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>mtcars</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>,</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>It
is not necessary to define <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>cols_chosen</span> beforehand. <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>.</span> can directly take column names</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:21.4pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>.</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SD, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>mean</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, .SDcols </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:1.95pt;margin-bottom:
11.1pt;margin-left:176.3pt;line-height:107%'><span style='position:relative;
z-index:-1895758848'><span style='left:0px;position:absolute;left:242px;
top:-52174px;width:7px;height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image295.gif"></span></span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:107%'> </span><b><span style='font-size:
9.0pt;line-height:107%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>,</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>7</span><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>)]</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.6pt;margin-left:
.75pt'>.N</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=139
src="R%20Notes%20for%20Professionals_files/image334.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618839">Section 23.3: Adding and
modifying columns</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DT</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>where, select</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>|</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>update</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>|</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>do, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>by</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:13.5pt;margin-left:34.4pt;text-align:center;line-height:103%'><span
style='font-size:9.0pt;line-height:103%;color:#222222;background:#FAFAFA'>]</span>
syntax is used to work with columns of a data.table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>The
&quot;where&quot; part is the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>i</span> argument</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:21.4pt'>The &quot;select|update|do&quot; part is the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>j</span> argument</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>These two arguments are usually passed by position instead
of by name.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Our example data below is</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image335.gif"></span></p>

<h4 style='margin-left:.75pt'>Editing entire columns</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Use the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>:=</span> operator inside <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>j</span> to assign new columns:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image336.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Remove columns by setting to <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>NULL</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image337.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Add multiple columns by using the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>:=</span> operator's multivariate
format:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image338.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If the columns are dependent and must be defined in
sequence, one way is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image339.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>LHS </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>:=</span><span
  style='font-size:9.0pt;line-height:107%'> RHS</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> syntax is used when the right-hand
side of is a list of columns.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For dynamically-determined column names, use parentheses:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image340.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Columns can also be modified with <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>set</span>, though this is rarely
necessary:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image341.gif"></span></p>

<h4 style='margin-left:.75pt'>Editing subsets of columns</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Use the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>i</span> argument to subset to rows &quot;where&quot; edits
should be made:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image342.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>As in a data.frame, we can subset using row numbers or
logical tests. It is also possible to use a &quot;join&quot; in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>i</span>, but that
more complicated task is covered in another example.</p>

<h4 style='margin-left:.75pt'>Editing column attributes</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=128 style='width:96.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>levels</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>names</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Functions that edit attributes, such as , actually replace
an object with a modified copy. Even if only used on one column in a
data.table, the entire object is copied and replaced.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To modify an object without copies, use <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>setnames</span> to
change the column names of a data.table or data.frame and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>setattr</span> to
change an attribute for any object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image343.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Be aware that these changes are made by reference, so they
are <i>global</i>. Changing them within one environment affects the object in
all environments.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:124.4pt;margin-bottom:
22.8pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895756800'><span style='left:0px;position:absolute;left:0px;
top:-53680px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># This function also
changes the levels in the global environment </span><span style='font-size:
9.0pt;line-height:112%'>edit_levels </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>function</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%'>x</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> setattr</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>x, </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;levels&quot;</span><span style='font-size:9.0pt;
line-height:112%'>, </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;low&quot;</span><span style='font-size:9.0pt;line-height:
112%'>, </span><span style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;med&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;high&quot;</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>)) </span><span style='font-size:9.0pt;
line-height:112%'>edit_levels</span><span style='font-size:9.0pt;line-height:
112%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:112%'>$cyl_factor</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618840">Section 23.4: Writing code
compatible with both data.frame and data.table</a></h2>

<h4 style='margin-left:.75pt'>Differences in subsetting syntax</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=596 style='width:446.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
  <td width=452 valign=top style='width:338.8pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>is one of several two-dimensional data
  structures available in R, besides </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rows, cols</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>A , <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>matrix</span></b> and (2D) <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>array</span></b>.
All of these classes use a very similar but not identical syntax for
subsetting, the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>A</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[]</span>
schema.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=186 style='width:139.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=42 valign=top style='width:31.2pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Consider the following data stored in a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>matrix</span></b>,
a :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=125
src="R%20Notes%20for%20Professionals_files/image344.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>If you want to be sure of what will be returned, it is
better to be <i>explicit</i>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To get specific <b>rows</b>, just add a comma after the
range:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image345.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>But, if you want to subset <b>columns</b>, some cases are
interpreted differently. All three can be subset the same way with integer or
character indices <i>not</i> stored in a variable.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image346.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>However, they differ for unquoted variable names</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image347.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In the last case, <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>mycols</span> is evaluated as the name of a column.
Because <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dt</span>
cannot find a column named <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>mycols</span>, an error is raised.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note: For versions of the package priorto 1.9.8, this
behavior was slightly different. Anything in the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=175 style='width:131.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dt</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=60 valign=top style='width:44.65pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>2</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>:</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>3</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]</span>
  and </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dt</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, mycols</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.3pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>column index would have been evaluated using <span style='font-size:9.0pt;
line-height:134%;background:#FAFAFA'>dt</span> as an environment. So both <span
style='font-size:9.0pt;line-height:134%;color:#222222;background:#FAFAFA'>]</span>
would return the vector <span style='font-size:9.0pt;line-height:134%;
color:#CC0A0A;background:#FAFAFA'>2</span><span style='font-size:9.0pt;
line-height:134%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A;background:#FAFAFA'>3</span>.
No error would be raised for the second case, because the variable <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>mycols</span> does
exist in the parent environment.</p>

<h4 style='margin-left:.75pt'>Strategies for maintaining compatibility with
data.frame and data.table</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=175 style='width:131.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>There are many reasons to write code that is guaranteed to
work with . Maybe you are forced to use , or you may need to share some code
that you don't know how will be used. So, there are some main strategies for
achieving this, in order of convenience:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Use
syntax that behaves the same for both classes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Use
a common function that does the same thing as the shortest syntax.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=527 style='width:395.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
  <td width=86 valign=top style='width:64.35pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>to behave as </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=182 valign=top style='width:136.6pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>(ex.: call the specific method </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print.data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue;background:#FAFAFA'>.</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Force
).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Treat
them as <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>list</span></b>, which they ultimately are.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Convert
the table to a before doing anything (bad idea if it is a huge table).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Convert
the table to , if dependencies are not a concern.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b>Subset rows.</b> Its simple, just use the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[]</span>
selector, <i>with</i> the comma:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=169
src="R%20Notes%20for%20Professionals_files/image348.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If you want a uniform way to grab more than one column, it's
necessary to appeal a bit:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image349.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=244 style='width:183.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
  <td width=29 valign=top style='width:21.65pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>has </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>row.names</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Subset 'indexed' rows.</b> While has its unique <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>key</span> feature.
The best thing is</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=581 style='width:435.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>row.names</span></b></p>
  </td>
  <td width=444 valign=top style='width:333.15pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>entirely and take advantage of the
  existing optimizations in the case of </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>to avoid when possible.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=109
src="R%20Notes%20for%20Professionals_files/image350.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.9pt;
margin-left:.75pt'><b>Get a 1-column table, get a row as a vector.</b> These
are easy with what we have seen until now:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:13.8pt;text-indent:-.15in;line-height:112%'><span style='font-size:
9.0pt;line-height:112%'>B<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> select</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>A, </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#---&gt; a table
with just the second column</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:13.8pt;text-indent:-.15in;line-height:112%'><span style='font-size:
9.0pt;line-height:112%'>C<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='position:relative;z-index:-1895755776'><span
style='left:0px;position:absolute;left:0px;top:-55523px;width:718px;height:
1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>unlist</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>A</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:112%'>, </span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>])</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#---&gt; the first row as a vector (coerced
if necessary)</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618841">Section 23.5: Setting keys
in data.table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
13.0pt;margin-left:-.25pt;line-height:107%'><i>Yes, you need to SETKEY pre
1.9.6</i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In the past (pre 1.9.6), your was sped up by setting
columns as keys to the table, particularly for large tables. [See <a
href="http://stackoverflow.com/questions/20039335/what-is-the-purpose-of-setting-a-key-in-data-table"><span
style='color:#2066B9'>intro vignette page 5</span></a> of September 2015
version, where speed of search was 544 times better.] You may find older code
making use of this setting keys with 'setkey' or setting a 'key=' column when
setting up the table.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image351.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Set your key with the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>setkey</span> command. You can have a key
with multiple columns.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image352.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Check your table's key in tables()</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image353.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Note this will re-sort your data.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image354.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
13.0pt;margin-left:-.25pt;line-height:107%'><i>Now it is unnecessary</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Prior to v1.9.6 you had to have set a key for certain
operations especially joining tables. The developers of data.table have sped up
and introduced a <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;on=&quot;</span> feature that can replace the
dependency on keys. See <a
href="http://stackoverflow.com/questions/20039335/what-is-the-purpose-of-setting-a-key-in-data-table"><span
style='color:#2066B9'>SO answer </span></a><a
href="http://stackoverflow.com/questions/20039335/what-is-the-purpose-of-setting-a-key-in-data-table"><span
style='color:#2066B9'>here for a detailed discussion.</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In Jan 2017, the developers have written a <a
href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-secondary-indices-and-auto-indexing.html"><span
style='color:#2066B9'>vignette around secondary indices</span></a> which
explains the &quot;on&quot; syntax and allows for other columns to be
identified for fast indexing.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>Creating secondary indices?</i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=388 style='width:290.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>setindex</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DT, key.col</span></p>
  </td>
  <td width=28 valign=top style='width:20.7pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span> or </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>setindexv</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DT, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;key.col.string&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>setindex</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DT, NULL</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>In a manner similar to key, you can <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>, where DT is
your data.table. Remove all indices with <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>indices</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DT</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>See your secondary indices with <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
13.25pt;margin-left:-.25pt;line-height:107%'><i>Why secondary indices?</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>This <b>does not sort</b> the table (unlike key), but does
allow for quick indexing using the &quot;on&quot; syntax. Note there can be
only one key, but you can use multiple secondary indices, which saves having to
rekey and resort the table. This will speed up your subsetting when changing
the columns you want to subset on.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Recall, in example above y was the key for table DT:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=388
src="R%20Notes%20for%20Professionals_files/image355.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618842">Chapter 24: Pivot and
unpivot with data.table</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.3pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Parameter Details</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:223.5pt;margin-bottom:
0in;margin-left:.75pt'>id.vars tell <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>melt</span> which columns to retain
variable.name tell <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>melt</span> what to call the column with category labels</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=707
 style='width:530.25pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.75pt'>
  <td width=93 valign=top style='width:69.55pt;padding:.05pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>value.name</p>
  </td>
  <td width=614 valign=top style='width:460.7pt;padding:.05pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>tell <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>melt</span> what
  to call the column that has values associated with category labels</p>
  </td>
 </tr>
 <tr style='height:16.9pt'>
  <td width=93 valign=top style='width:69.55pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>value.var</p>
  </td>
  <td width=614 valign=top style='width:460.7pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>tell <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>dcast</span>
  where to find the values to cast in columns</p>
  </td>
 </tr>
 <tr style='height:19.75pt'>
  <td width=93 valign=bottom style='width:69.55pt;padding:.05pt 0in 0in 0in;
  height:19.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>formula</p>
  </td>
  <td width=614 valign=top style='width:460.7pt;padding:.05pt 0in 0in 0in;
  height:19.75pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>tell <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>dcast</span> which columns to retain to
  form a unique record identifier (LHS) and which one holds the</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:4.05pt;
margin-left:71.05pt'>category labels (RHS)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:21.0pt;
margin-left:.75pt'>fun.aggregate specify the function to use when the casting
operation generates a list of values in each cell</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618843">Section 24.1: Pivot and
unpivot tabular data with data.table - I</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Convert from wide form to long form</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=206
src="R%20Notes%20for%20Professionals_files/image356.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=349 style='width:261.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>USArrests</span></b></p>
  </td>
  <td width=212 valign=top style='width:159.2pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>to find out more. First, convert to </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Use <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span>. The names of states are row names
in the original</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:54.5pt'>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image357.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This is data in the wide form. It has a column for each
variable. The data can also be stored in long form without loss of information.
The long form has one column that stores the variable names. Then, it has
another column for the variable values. The long form of <b><span
style='font-size:9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>USArrests</span></b>
looks like so.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image358.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We use the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>melt</span> function to switch from wide form to long form.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image359.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>id.vars</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>By default, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>melt</span> treats all columns with numeric data as
variables with values. In <b><span style='font-size:9.0pt;line-height:108%;
color:#333399;background:#FAFAFA'>USArrests</span></b>, the variable <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>UrbanPop </span>represents
the percentage urban population of a state. It is different from the other
variables, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Murder</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Assault</span>
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Rape</span>,
which are violent crimes reported per 100,000 people. Suppose we want to retain
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>UrbanPop</span>
column. We achieve this by setting as follows.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image360.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=436 style='width:326.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>variable.name</span></p>
  </td>
  <td width=270 valign=top style='width:202.55pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and the column containing the values with </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>value.name</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:33.0pt;margin-bottom:
1.7pt;margin-left:327.0pt;text-indent:-326.75pt'>Note that we have specified
the names of the column containing category names (Murder, Assault, etc.) with
. Our data looks like so.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image361.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Generating summaries with with split-apply-combine style
approach is a breeze. For example, to summarize violent crimes by state?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image362.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This gives:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image363.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618844">Section 24.2: Pivot and
unpivot tabular data with data.table II</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Convert from long form to wide form</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To recover data from the previous example, use <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dcast</span> like
so.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image364.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>This gives the data in the original wide form.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> State UrbanPop Murder Assault Rape</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Alabama </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>58</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>13.2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>236</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>21.2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Alaska </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>48</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>10.0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>263</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>44.5</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Arizona </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>80</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>8.1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>294</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>31.0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:270.25pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895754752'><span style='left:0px;position:absolute;left:0px;
top:-58973px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image365.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'></span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:110%'> Arkansas </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>50</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>8.8</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>190</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>19.5 </span><span style='font-size:9.0pt;
line-height:110%'></span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%'>
California </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>91</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>276</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>40.6</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>value.var</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Here, the formula notation is used to specify the columns
that form a unique record identifier (LHS) and the column containing category
labels for new column names (RHS). Which column to use for the numeric values?
By default, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dcast</span>
uses the first column with numerical values left over when from the formula
specification. To make explicit, use the parameter with column name.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fun.aggregate</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.45pt;
margin-left:.75pt'>When the operation produces a list of values in each cell, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dcast</span>
provides a method to handle the situation. Say I am interested in states with
similar urban population when investigating crime rates. I add a column <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Decile</span> with
computed information.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:11.05pt;margin-bottom:
17.35pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895753728'><span style='left:0px;position:absolute;left:0px;
top:-59176px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>DTmu</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>, Decile </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>:=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>cut</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>UrbanPop, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>quantile</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>UrbanPop, probs </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>seq</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>by</span></b><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)))] </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>levels</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>DTmu$Decile</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> paste0</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;D&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fun.aggregate</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Now, casting <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Decile ~ Crime</span> produces multiple values per cell. I
can use to determine how these are handled. Both text and numerical values can
be handle this way.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image366.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This gives:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image367.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>This gives:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> State UrbanPop Crime Rate Decile</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Alabama </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>58</span><span
style='font-size:9.0pt;line-height:110%'> Murder </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>13.2</span><span style='font-size:9.0pt;
line-height:110%'> 4D</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Alaska </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>48</span><span
style='font-size:9.0pt;line-height:110%'> Murder </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>10.0</span><span style='font-size:9.0pt;
line-height:110%'> 2D</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Arizona </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>80</span><span
style='font-size:9.0pt;line-height:110%'> Murder </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8.1</span><span
style='font-size:9.0pt;line-height:110%'> 8D</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:275.65pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895752704'><span style='left:0px;position:absolute;left:0px;
top:-59479px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image365.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:110%'> Arkansas </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>50</span><span style='font-size:9.0pt;
line-height:110%'> Murder </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>8.8</span><span style='font-size:9.0pt;line-height:110%'>
2D </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> California </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>91</span><span
style='font-size:9.0pt;line-height:110%'> Murder </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9.0</span><span
style='font-size:9.0pt;line-height:110%'> 10D</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fun.aggregate</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are multiple states in each decile of the urban
population. Use to specify how these should be handled.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image368.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This sums over the data for like states, giving the
following.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image369.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618845">Chapter 25: Bar Chart</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:5.3pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>The purpose of the bar plot is to display the frequencies (or
proportions) of levels of a factor variable. For example, a bar plot is used to
pictorially display the frequencies (or proportions) of individuals in various
socio-economic (factor) groups(levels-high, middle, low). Such a plot will help
to provide a visual comparison among the various factor levels.</p>

<h2 style='margin-top:0in;margin-right:5.3pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618846">Section 25.1: barplot() function</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>In barplot, factor-levels are placed on the x-axis and
frequencies (or proportions) of various factor-levels are considered on the
y-axis. For each factor-level one bar of uniform width with heights being
proportional to factor level frequency (or proportion) is constructed.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=523 style='width:392.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>barplot</span></b></p>
  </td>
  <td width=422 valign=top style='width:316.5pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function is in the graphics
  package of the R's System Library. The </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>barplot</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function must be</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>supplied at least one argument. The R help calls this as <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>heights</span>,
which must be either vector or a matrix. If it is vector, its members are the
various factor-levels.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>barplot</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To illustrate <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>, consider the following data
preparation:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image370.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A bar chart of the Marks vector is obtained from</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image371.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=344 id="Picture 23879"
src="R%20Notes%20for%20Professionals_files/image372.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>lexicographical </span><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>order</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>names.arg</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice that, the barplot() function places the factor levels
on the x-axis in the of the levels. Using the parameter , the bars in plot can
be placed in the order as stated in the vector, <i>grades</i>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># plot to the desired horizontal axis labels</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.05in;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895751680'><span style='left:0px;position:absolute;left:0px;top:-60729px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>barplot</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Marks</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,names.arg</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>grades ,main</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in
Algorithms&quot;</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=671
height=394 id="Picture 23932"
src="R%20Notes%20for%20Professionals_files/image373.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>col</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>Colored bars can be drawn using the <span style='font-size:
9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span> parameter.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:146.05pt;margin-bottom:
3.55pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895750656'><span style='left:0px;position:absolute;left:0px;
top:-61205px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>barplot</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Marks</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,names.arg</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>grades,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;lightblue&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;lightcyan&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;lavender&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;mistyrose&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;cornsilk&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, main</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in Algorithms&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=344 id="Picture 23974"
src="R%20Notes%20for%20Professionals_files/image374.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A bar chart with <i>horizontal bars</i> can be obtained as
follows:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image375.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image376.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=344 id="Picture 24032"
src="R%20Notes%20for%20Professionals_files/image377.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>A bar chart with <i>proportions</i> on the y-axis can be
obtained as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:119.0pt;margin-bottom:
3.55pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895749632'><span style='left:0px;position:absolute;left:0px;
top:-62130px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>barplot</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>prop.table</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Marks</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))</span><span style='font-size:9.0pt;line-height:110%'>,names.arg</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>grades,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;lightblue&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;lightcyan&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;lavender&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;mistyrose&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;cornsilk&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, main</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in Algorithms&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=344 id="Picture 24075"
src="R%20Notes%20for%20Professionals_files/image378.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>cex.names</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>The sizes of the factor-level names on the x-axis can be
increased using parameter.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:124.4pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895748608'><span style='left:0px;position:absolute;left:0px;
top:-62574px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>barplot</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>prop.table</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Marks</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))</span><span style='font-size:9.0pt;line-height:110%'>,names.arg</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>grades,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;lightblue&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;lightcyan&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;lavender&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;mistyrose&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;cornsilk&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, main</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in Algorithms&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,cex.names</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=344 id="Picture 24140"
src="R%20Notes%20for%20Professionals_files/image379.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>barplot</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>heights</span> parameter of the <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span> could be a
matrix. For example it could be matrix, where the columns are the various
subjects taken in a course, the rows could be the labels of the grades.
Consider the following matrix:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image380.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>To draw a stacked bar, simply use the command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:178.45pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895747584'><span style='left:0px;position:absolute;left:0px;
top:-63199px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>barplot</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>gradTab,</span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lightblue&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lightcyan&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;lavender&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;mistyrose&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;cornsilk&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>,legend.text </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> grades, main</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in
Algorithms&quot;</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=428 id="Picture 24240"
src="R%20Notes%20for%20Professionals_files/image381.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.75pt;
margin-left:.75pt'>To draw a juxtaposed bars, use the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>besides</span> parameter, as given
under:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:140.65pt;margin-bottom:
3.55pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895746560'><span style='left:0px;position:absolute;left:0px;
top:-63722px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'></span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>barplot</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>gradTab,beside
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>T</span></b><span style='font-size:9.0pt;
line-height:110%'>,</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lightblue&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lightcyan&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;lavender&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;mistyrose&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;cornsilk&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>,legend.text </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> grades, main</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in
Algorithms&quot;</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=428 id="Picture 24282"
src="R%20Notes%20for%20Professionals_files/image382.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>horiz</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A horizontal bar chart can be obtained using <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span><b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>T</span></b>
parameter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.85pt;margin-bottom:
3.55pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895745536'><span style='left:0px;position:absolute;left:0px;
top:-64232px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>barplot</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>gradTab,beside </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>T</span></b><span style='font-size:9.0pt;line-height:110%'>,horiz</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>T</span></b><span
style='font-size:9.0pt;line-height:110%'>,</span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>col</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;lightblue&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lightcyan&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;lavender&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;mistyrose&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;cornsilk&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>,legend.text </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> grades, cex.names</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>.75,main</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Mid-Marks in Algorithms&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=428 id="Picture 24346"
src="R%20Notes%20for%20Professionals_files/image383.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618847">Chapter 26: Base Plotting</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.75pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Parameter Details</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=172 style='width:128.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:
  107%'>$variablex</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>,x</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=172 style='width:128.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:
  107%'>$variabley</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>,y</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:190.95pt;margin-bottom:
.15pt;margin-left:.75pt;line-height:142%'><span style='font-size:9.0pt;
line-height:142%;background:#FAFAFA'>x </span>x-axis variable. May
supply either <span style='font-size:9.0pt;line-height:142%;color:#222222;
background:#FAFAFA'>] </span><span style='font-size:9.0pt;line-height:142%;
background:#FAFAFA'>y </span>y-axis variable. May supply either <span
style='font-size:9.0pt;line-height:142%;color:#222222;background:#FAFAFA'>] </span><span
style='font-size:9.0pt;line-height:142%;background:#FAFAFA'>main </span>Main
title of plot <b><span style='font-size:9.0pt;line-height:142%;color:blue;
background:#FAFAFA'>sub </span></b>Optional subtitle of plot <span
style='font-size:9.0pt;line-height:142%;background:#FAFAFA'>xlab </span>Label
for x-axis <span style='font-size:9.0pt;line-height:142%;background:#FAFAFA'>ylab </span>Label
for y-axis <span style='font-size:9.0pt;line-height:142%;background:#FAFAFA'>pch </span>Integer
or character indicating plotting symbol <b><span style='font-size:9.0pt;
line-height:142%;color:blue;background:#FAFAFA'>col </span></b>Integer
or string indicating color</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'>Type of
plot. <span style='font-size:9.0pt;line-height:110%;color:#CC0A0A;background:
#FAFAFA'>&quot;p&quot;</span> for points, <span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A;background:#FAFAFA'>&quot;l&quot;</span> for
lines, <span style='font-size:9.0pt;line-height:110%;color:#CC0A0A;background:
#FAFAFA'>&quot;b&quot;</span> for both, <span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A;background:#FAFAFA'>&quot;c&quot;</span> for the
lines part alone of <span style='font-size:9.0pt;line-height:110%;color:#CC0A0A;
background:#FAFAFA'>&quot;b&quot;</span>, <span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A;background:#FAFAFA'>&quot;o&quot;</span> for
both</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:21.35pt;
margin-left:55.65pt;text-indent:-55.4pt'><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>type </span><span
style='font-family:"Arial",sans-serif'></span>overplotted<span
style='font-family:"Arial",sans-serif'></span>, <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;h&quot;</span> for <span
style='font-family:"Arial",sans-serif'></span>histogram<span style='font-family:
"Arial",sans-serif'></span>-like (or <span style='font-family:"Arial",sans-serif'></span>high-density<span
style='font-family:"Arial",sans-serif'></span>) vertical lines, <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;s&quot;</span>
for stair steps, <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;S&quot;</span> for other steps, <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;n&quot;</span>
for no plotting</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618848">Section 26.1: Density plot</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A very useful and logical follow-up to histograms would be
to plot the smoothed density function of a random variable. A basic plot
produced by the command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image384.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>would look like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=514
height=411 id="Picture 24483"
src="R%20Notes%20for%20Professionals_files/image385.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can overlay a histogram and a density curve with</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image386.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>which gives</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=514
height=411 id="Picture 24531"
src="R%20Notes%20for%20Professionals_files/image387.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618849">Section 26.2: Combining
Plots</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=110 style='width:82.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>par</span></b></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>layout</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.6pt;
margin-left:.75pt'>It's often useful to combine multiple plot types in one
graph (for example a Barplot next to a Scatterplot.) R makes this easy with the
help of the functions <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>par</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>nrows, ncols</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:7.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
167%'><b><span style='font-size:9.0pt;line-height:167%;color:#222222;
background:#FAFAFA'>() </span></b><b><span style='font-size:9.0pt;line-height:
167%;color:blue;background:#FAFAFA'>par</span></b> uses the arguments <span
style='font-size:9.0pt;line-height:167%;background:#FAFAFA'>mfrow</span> or <span
style='font-size:9.0pt;line-height:167%;background:#FAFAFA'>mfcol</span> to
create a matrix of nrows and ncols <b><span style='font-size:9.0pt;line-height:
167%;color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
line-height:167%;color:#222222;background:#FAFAFA'>()</span> which will serve
as a grid for your plots. The following example shows how to combine four plots
in one graph:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image388.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.75pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=653
height=735 id="Picture 24626"
src="R%20Notes%20for%20Professionals_files/image389.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>layout</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.7pt;
margin-left:32.15pt;line-height:108%'><b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>layout</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> is more flexible and allows you to
specify the location and the extent of each plot within the final combined
graph. This function expects a matrix object as an input:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image390.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=653
height=735 id="Picture 24701"
src="R%20Notes%20for%20Professionals_files/image391.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618850">Section 26.3: Getting
Started with R_Plots</a></h2>

<h4 style='margin-left:21.4pt'><span style='font-size:11.0pt;line-height:109%'><img
border=0 width=5 height=5 id="Group 522563"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Scatterplot</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
14.65pt;margin-left:-.25pt;line-height:107%'><i>You have two vectors and you
want to plot them.</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:32.6pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895744512'><span style='left:0px;position:absolute;left:0px;
top:-68106px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>x_values </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>rnorm</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>n </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>20</span><span
style='font-size:9.0pt;line-height:112%'> , </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>mean</span></b><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:112%'> , </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>sd</span></b><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#20 values generated from Normal(5,8) </span><span
style='font-size:9.0pt;line-height:112%'>y_values </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>rbeta</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>n </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>20</span><span
style='font-size:9.0pt;line-height:112%'> , shape1 </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>500</span><span style='font-size:9.0pt;
line-height:112%'> , shape2 </span><span style='font-size:9.0pt;line-height:
112%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#20 values generated from Beta(500,10)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you want to make a plot which has the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y_values</span> in
vertical axis and the <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>x_values</span>in horizontal axis, you can use the following commands:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=52
src="R%20Notes%20for%20Professionals_files/image392.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.3pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895743488'><span style='left:0px;position:absolute;left:0px;top:-68257px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image314.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>plot</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> x_values, y </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
y_values, type </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;n&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:forestgreen'># empty plot</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>plot</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.8pt;
margin-left:.75pt'>You can type <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> in the console to
read about more options.</p>

<h4 style='margin-left:21.4pt'><span style='font-size:11.0pt;line-height:109%'><img
border=0 width=5 height=5 id="Group 523245"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Boxplot</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>You have some variables and you
want to examine their Distributions</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=123
src="R%20Notes%20for%20Professionals_files/image393.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>Easy way to draw histograms</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=73
src="R%20Notes%20for%20Professionals_files/image394.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:231.35pt;margin-bottom:
1.7pt;margin-left:-.25pt;line-height:214%'><i>If you want to visualize the
frequencies of a variable just draw pie </i>First we have to generate data with
frequencies, for example :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:227.0pt;margin-bottom:
22.8pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895742464'><span style='left:0px;position:absolute;left:0px;
top:-68728px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>P </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>rep</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>'A'</span><span style='font-size:9.0pt;line-height:112%'> , </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> , </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>rep</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>'B'</span><span style='font-size:9.0pt;
line-height:112%'> , </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> , </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>rep</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>'C'</span><span
style='font-size:9.0pt;line-height:112%'> , </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>7</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>) </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>t</span></b><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>P</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># this is a
frequency matrix of variable P </span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>pie</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>t</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># And this is a visual version of the matrix above</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618851">Section 26.4: Basic Plot</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>plot</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A basic plot is created by calling <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>. Here we use
the built-in <b><span style='font-size:9.0pt;line-height:108%;color:#333399;
background:#FAFAFA'>cars</span></b> data frame that contains the speed of cars
and the distances taken to stop in the 1920s. (To find out more about the
dataset, use help(cars)).</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image395.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=500
height=525 id="Picture 25000"
src="R%20Notes%20for%20Professionals_files/image396.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We can use many other variations in the code to get the same
result. We can also change the parameters to obtain different results.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image397.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=500
height=525 id="Picture 25049"
src="R%20Notes%20for%20Professionals_files/image398.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=257 style='width:193.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>points</span></b></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>text</span></b></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>mtext</span></b></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lines</span></b></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grid</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Additional features can be added to this plot by calling <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>,
etc.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image399.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=500
height=525 id="Picture 25142"
src="R%20Notes%20for%20Professionals_files/image400.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618852">Section 26.5: Histograms</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Histograms allow for a pseudo-plot of the underlying
distribution of the data.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image401.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=561
src="R%20Notes%20for%20Professionals_files/image402.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=659
height=519 id="Picture 25196"
src="R%20Notes%20for%20Professionals_files/image403.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618853">Section 26.6: Matplot</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>matplot</span></b> is useful for quickly plotting multiple
sets of observations from the same object, particularly from a matrix, on the
same graph.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Here is an example of a matrix containing four sets of
random draws, each with a different mean.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:129.8pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895741440'><span style='left:0px;position:absolute;left:0px;
top:-72087px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image404.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>xmat </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>cbind</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>rnorm</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>100</span><span style='font-size:9.0pt;line-height:112%'>, </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'>, </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>rnorm</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>100</span><span style='font-size:9.0pt;
line-height:112%'>, </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>-</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'>, </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>rnorm</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'>, </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>rnorm</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>100</span><span style='font-size:9.0pt;line-height:112%'>, </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)) </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>xmat</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># [,1] [,2] [,3]
[,4]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:270.2pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># [1,] -3.072793 -2.53111494 0.6168063
3.780465 # [2,] -3.702545 -1.42789347 -0.2197196 2.478416 # [3,] -2.890698
-1.88476126 1.9586467 5.268474</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:270.2pt;margin-bottom:
17.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># [4,] -3.431133 -2.02626870 1.1153643
3.170689 # [5,] -4.532925 0.02164187 0.9783948 3.162121 # [6,] -2.169391
-1.42699116 0.3214854 4.480305</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One way to plot all of these observations on the same graph
is to do one <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>plot</span></b> call followed by three more <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>points </span></b>or
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>lines</span></b>
calls.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image405.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 25326"
src="R%20Notes%20for%20Professionals_files/image406.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>However, this is both tedious, and causes problems because,
among other things, by default the axis limits are fixed by <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>plot</span></b>
to fit only the first column.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Much more convenient in this situation is to use the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>matplot</span></b>
function, which only requires one call and automatically takes care of axis
limits <i>and</i> changing the aesthetics for each column to make them
distinguishable.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image407.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 25359"
src="R%20Notes%20for%20Professionals_files/image408.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that, by default, <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>matplot</span></b> varies both
color (<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>col</span></b>) and linetype (<span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>lty</span>) because this increases the number of
possible combinations before they get repeated. However, any (or both) of these
aesthetics can be fixed to a single value...</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image409.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 25403"
src="R%20Notes%20for%20Professionals_files/image410.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:4.0pt;text-indent:-3.75pt;line-height:253%'><span style='position:
relative;z-index:-1895740416'><span style='left:0px;position:absolute;
left:0px;top:-74044px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>...or a
custom vector (which will recycle to the number of columns, following standard
R vector recycling rules). <b><span style='font-size:9.0pt;line-height:253%;
color:blue'>matplot</span></b><span style='font-size:9.0pt;line-height:253%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:253%'>xmat,
type </span><span style='font-size:9.0pt;line-height:253%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:253%'> </span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>'l'</span><span style='font-size:9.0pt;
line-height:253%'>, </span><b><span style='font-size:9.0pt;line-height:253%;
color:blue'>col</span></b><span style='font-size:9.0pt;line-height:253%'> </span><span
style='font-size:9.0pt;line-height:253%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:253%'> </span><b><span style='font-size:
9.0pt;line-height:253%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:253%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>'red'</span><span style='font-size:9.0pt;
line-height:253%'>, </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>'green'</span><span style='font-size:9.0pt;line-height:253%'>, </span><span
style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>'blue'</span><span
style='font-size:9.0pt;line-height:253%'>, </span><span style='font-size:9.0pt;
line-height:253%;color:#CC0A0A'>'orange'</span><span style='font-size:9.0pt;
line-height:253%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 25440"
src="R%20Notes%20for%20Professionals_files/image411.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>par</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>Standard graphical parameters, including <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>main</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>xlab</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>xmin</span>, work
exactly the same way as for <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>plot</span></b>. For more on those, see <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>?</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Like <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>plot</span></b>, if given only one object, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>matplot</span></b>
assumes it's the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y</span>
variable and uses the indices for <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>x</span>. However, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>x</span> and <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>y </span>can be specified explicitly.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image412.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 25515"
src="R%20Notes%20for%20Professionals_files/image413.jpg"></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=122
src="R%20Notes%20for%20Professionals_files/image414.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 25607"
src="R%20Notes%20for%20Professionals_files/image415.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618854">Section 26.7: Empirical
Cumulative Distribution Function</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>ecdf</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A very useful and logical follow-up to histograms and
density plots would be the Empirical Cumulative Distribution Function. We can
use the function for this purpose. A basic plot produced by the command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image416.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>would look like</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=719 height=487 id="Picture 25646"
src="R%20Notes%20for%20Professionals_files/image417.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618855">Chapter 27: boxplot</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.7pt;margin-left:0in;
text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Parameters Details
(source R Documentation)</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=711 style='width:533.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:19.65pt'>
  <td width=81 valign=top style='width:60.4pt;padding:0in 0in 0in 0in;
  height:19.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>formula</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:19.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>to the
  grouping variable grp (usually a factor).</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=81 valign=top style='width:60.4pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>data</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>a
  data.frame (or list) from which the variables in formula should be taken.</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=81 valign=top style='width:60.4pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>subset</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>an
  optional vector specifying a subset of observations to be used for plotting.</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=81 style='width:60.4pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>na.action</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>a
  function which indicates what should happen when the data contain NAs. The
  default is to ignore missing values in either the response or the group.</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=81 style='width:60.4pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>boxwex</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>a
  scale factor to be applied to all boxes. When there are only a few groups,
  the appearance of the plot can be improved by making the boxes narrower.</p>
  </td>
 </tr>
 <tr style='height:28.75pt'>
  <td width=81 style='width:60.4pt;padding:0in 0in 0in 0in;height:28.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>plot</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:28.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>if
  TRUE (the default) then a boxplot is produced. If not, the summaries which
  the boxplots are based on are returned.</p>
  </td>
 </tr>
 <tr style='height:19.65pt'>
  <td width=81 valign=bottom style='width:60.4pt;padding:0in 0in 0in 0in;
  height:19.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>col</p>
  </td>
  <td width=630 valign=top style='width:472.65pt;padding:0in 0in 0in 0in;
  height:19.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>if col
  is non-null it is assumed to contain colors to be used to colour the bodies
  of the box plots. By</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:61.9pt;line-height:1315%'>a formula, such as y ~ grp, where y is a
numeric vector of data values to be split into groups according default they
are in the background colour.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618856">Section 27.1: Create a
box-and-whisker plot with boxplot() {graphics}</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>boxplot</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.75pt;
margin-left:.75pt'>This example use the default <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> function and the <b><span
style='font-size:9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>iris</span></b>data
frame.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>iris</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<h4 style='margin-top:0in;margin-right:182.55pt;margin-bottom:8.1pt;margin-left:
.25pt;text-indent:3.75pt;line-height:150%'><span style='position:relative;
z-index:-1895739392'><span style='left:0px;position:absolute;left:0px;
top:-77441px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image248.gif"></span></span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A;font-weight:normal'>6</span><span
style='font-size:9.0pt;line-height:150%;font-weight:normal'> </span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A;font-weight:normal'>5.4</span><span
style='font-size:9.0pt;line-height:150%;font-weight:normal'> </span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A;font-weight:normal'>3.9</span><span
style='font-size:9.0pt;line-height:150%;font-weight:normal'> </span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A;font-weight:normal'>1.7</span><span
style='font-size:9.0pt;line-height:150%;font-weight:normal'> </span><span
style='font-size:9.0pt;line-height:150%;color:#CC0A0A;font-weight:normal'>0.4</span><span
style='font-size:9.0pt;line-height:150%;font-weight:normal'> setosa </span>Simple
boxplot (Sepal.Length)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Create a box-and-whisker graph of a numerical variable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.85pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895738368'><span style='left:0px;position:absolute;left:0px;
top:-77516px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>boxplot</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>iris</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'>,xlab</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Sepal.Length&quot;</span><span style='font-size:9.0pt;
line-height:110%'>,ylab</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Length(in centemeters)&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, main</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Summary Charateristics of
Sepal.Length(Iris Data)&quot;</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=634
height=375 id="Picture 25806"
src="R%20Notes%20for%20Professionals_files/image418.jpg"></p>

<h4 style='margin-left:.75pt'>Boxplot of sepal length grouped by species</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create a boxplot of a numerical variable grouped by a
categorical variable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image419.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=421 id="Picture 25821"
src="R%20Notes%20for%20Professionals_files/image420.jpg"></p>

<h4 style='margin-left:.75pt'>Bring order</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To change order of the box in the plot you have to change
the order of the categorical variable's levels.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=223 style='width:167.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>virginica </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>versicolor </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>setosa</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:177.05pt;margin-bottom:
14.65pt;margin-left:.75pt'>For example if we want to have the order </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:3.55pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895737344'><span style='left:0px;position:absolute;left:0px;top:-78585px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>newSpeciesOrder </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>factor</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>iris</span></b><span style='font-size:9.0pt;
line-height:110%'>$Species, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>levels</span></b><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;virginica&quot;</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;versicolor&quot;</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;setosa&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)) </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>boxplot</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Sepal.Length~newSpeciesOrder,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>data</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=421 id="Picture 25880"
src="R%20Notes%20for%20Professionals_files/image421.jpg"></p>

<h4 style='margin-left:.75pt'>Change groups names</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>If you want to specifie a better name to your groups you can
use the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Names</span>
parameter. It take a vector of the size of the levels of categorical variable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895736320'><span style='left:0px;position:absolute;left:0px;top:-79143px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>boxplot</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>Sepal.Length~newSpeciesOrder,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>data</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:110%'>,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>names</span></b><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;name1&quot;</span><span style='font-size:
9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;name2&quot;</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;name3&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=421 id="Picture 25923"
src="R%20Notes%20for%20Professionals_files/image422.jpg"></p>

<h4 style='margin-top:0in;margin-right:409.05pt;margin-bottom:13.4pt;
margin-left:.75pt'>Small improvements Color</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>col</span></b> : add a vector of the size of the levels of
categorical variable</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.05in;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895735296'><span style='left:0px;position:absolute;left:0px;top:-79678px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>boxplot</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>Sepal.Length~Species,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>data</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:110%'>,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;green&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;yellow&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;orange&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=421 id="Picture 25952"
src="R%20Notes%20for%20Professionals_files/image423.jpg"></p>

<h4 style='margin-left:.75pt'>Proximity of the box</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>boxwex</span>: set the margin between boxes.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=382 style='width:286.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>boxplot</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=187 valign=top style='width:1.95in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Sepal.Length~Species,</span><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><b><span style='font-size:9.0pt;line-height:107%;color:#333399'>iris</span></b><span
  style='font-size:9.0pt;line-height:107%'>,boxwex </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>0.1</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Left <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.55pt;
margin-left:.75pt'>Right <span style='font-size:11.0pt;line-height:108%'><img
border=0 width=718 height=241
src="R%20Notes%20for%20Professionals_files/image424.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>plot</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></b></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></b></p>
  </td>
 </tr>
</table>

<h4 style='margin-top:0in;margin-right:238.0pt;margin-bottom:13.4pt;margin-left:
.75pt'>See the summaries which the boxplots are based </h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To see a summary you have to put the paramater <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>plot</span></b>
to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Various results are given</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=421
src="R%20Notes%20for%20Professionals_files/image425.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618857">Section 27.2: Additional
boxplot style parameters</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:10.3pt;margin-left:
.75pt'>Box</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:378.15pt;margin-bottom:
10.0pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>boxlty
- box line type boxlwd - box line width boxcol - box line color boxfill - box
fill colors</p>

<h4 style='margin-left:.75pt'>Median</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:298.0pt;margin-bottom:
10.0pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>medlty
- median line type (&quot;blank&quot; for no line) medlwd - median line widht
medcol - median line color medpch - median point (NA for no symbol) medcex -
median point size medbg - median point background color</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:10.3pt;margin-left:
.75pt'>Whisker</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:341.2pt;margin-bottom:
10.0pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>whisklty
- whisker line type whisklwd - whisker line width whiskcol - whisker line color</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:10.3pt;margin-left:
.75pt'>Staple</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:345.9pt;margin-bottom:
10.0pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>staplelty
- staple line type staplelwd - staple line width staplecol - staple line color</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:10.3pt;margin-left:
.75pt'>Outliers</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:297.4pt;margin-bottom:
10.0pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>outlty
- outlier line type (&quot;blank&quot; for no line) outlwd - outlier line width
outcol - outlier line color outpch - outlier point type (NA for no symbol)
outcex - outlier point size outbg - outlier point background color</p>

<h4 style='margin-left:.75pt'>Example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Default and heavily modified plots side by side</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image426.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=719 height=346 id="Picture 26390"
src="R%20Notes%20for%20Professionals_files/image427.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618858">Chapter 28: ggplot2</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618859">Section 28.1: Displaying
multiple plots</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'>Display multiple plots in one image with the different <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>facet</span>
functions. An advantage of this method is that all axes share the same scale
across charts, making it easy to compare them at a glance. We'll use the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span> dataset
included in <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ggplot2</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Wrap charts line by line (attempts to create a square layout):</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image428.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=670 id="Picture 26444"
src="R%20Notes%20for%20Professionals_files/image429.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Display multiple charts on one row, multiple columns:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=29
src="R%20Notes%20for%20Professionals_files/image430.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image431.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=263 id="Picture 26484"
src="R%20Notes%20for%20Professionals_files/image432.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Display multiple charts on one column, multiple rows:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image433.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=417
height=746 id="Picture 26522"
src="R%20Notes%20for%20Professionals_files/image434.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Display multiple charts in a grid by 2 variables:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image435.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=454 id="Picture 26564"
src="R%20Notes%20for%20Professionals_files/image436.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618860">Section 28.2: Prepare your
data for plotting</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>ggplot2</span> works best with a long data frame. The following sample
data which represents the prices for sweets on 20 different days, in a format
described as wide, because each category has a column.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image437.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To convert <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>sweetsWide</span> to long format for use with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ggplot2</span>,
several useful functions from base R, and the packages <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>reshape2</span>, and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tidyr</span> (in
chronological order) can be used:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=152
src="R%20Notes%20for%20Professionals_files/image438.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=136
src="R%20Notes%20for%20Professionals_files/image439.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The all give a similar result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image440.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>See also Reshaping data between long and wide forms for
details on converting data between <i>long</i> and <i>wide</i> format.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The resulting <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>sweetsLong</span> has one column of prices and one column
describing the type of sweet. Now plotting is much simpler:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image441.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=513 id="Picture 26834"
src="R%20Notes%20for%20Professionals_files/image442.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618861">Section 28.3: Add
horizontal and vertical lines to plot</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Add
one common horizontal line for all categorical variables</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=556
src="R%20Notes%20for%20Professionals_files/image443.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Add
one horizontal line for each categorical variable</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image444.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=400
height=400 id="Picture 27029"
src="R%20Notes%20for%20Professionals_files/image445.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Add
horizontal line over grouped bars</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image446.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=400
height=400 id="Picture 27168"
src="R%20Notes%20for%20Professionals_files/image447.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Add
vertical line</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=556
src="R%20Notes%20for%20Professionals_files/image448.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618862">Section 28.4: Scatter Plots</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We plot a simple scatter plot using the builtin iris data
set as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image449.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This gives:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=514 id="Picture 27303"
src="R%20Notes%20for%20Professionals_files/image450.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618863">Section 28.5: Produce basic
plots with qplot</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>plot</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>qplot is intended to be similar to base r function, trying
to always plot out your data without requiring too much specifications.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>basic
qplot</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image451.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=497
height=341 id="Picture 27343"
src="R%20Notes%20for%20Professionals_files/image452.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>adding
colors</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=382
src="R%20Notes%20for%20Professionals_files/image453.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:14.85pt;margin-left:
.75pt'>adding a smoother</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895729152'><span style='left:0px;position:absolute;left:0px;top:-90641px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>qplot</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>x </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> disp, y </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> mpg, geom </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;point&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;smooth&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>data</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=497
height=341 id="Picture 27399"
src="R%20Notes%20for%20Professionals_files/image454.jpg"></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618864">Section 28.6: Vertical and Horizontal Bar Chart</a></h2>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image455.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=725 id="Picture 27443"
src="R%20Notes%20for%20Professionals_files/image456.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>it is possible to obtain an horizontal bar chart simply
adding coord_flip() aesthetic to the ggplot object:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image457.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=704
height=441 id="Picture 27491"
src="R%20Notes%20for%20Professionals_files/image458.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618865">Section 28.7: Violin plot</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Violin plots are kernel density estimates mirrored in the
vertical plane. They can be used to visualize several distributions
side-by-side, with the mirroring helping to highlight any differences.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image459.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=725 id="Picture 27521"
src="R%20Notes%20for%20Professionals_files/image460.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Violin plots are named for their resemblance to the musical
instrument, this is particularly visible when they are coupled with an overlaid
boxplot. This visualisation then describes the underlying distributions both in
terms of Tukey's 5 number summary (as boxplots) and full continuous density
estimates (violins).</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image461.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=574 id="Picture 27586"
src="R%20Notes%20for%20Professionals_files/image462.jpg"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618866">Chapter 29: Factors</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618867">Section 29.1: Consolidating
Factor Levels with a List</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are times in which it is desirable to consolidate
factor levels into fewer groups, perhaps because of sparse data in one of the
categories. It may also occur when you have varying spellings or capitalization
of the category names. Consider as an example the factor</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image463.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Since R is case-sensitive, a frequency table of this vector
would appear as below.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=102
src="R%20Notes%20for%20Professionals_files/image464.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>This table, however, doesn't represent the true distribution
of the data, and the categories may effectively be reduced to three types:
Blue, Green, and Red. Three examples are provided. The first illustrates what
seems like an obvious solution, but won't actually provide a solution. The
second gives a working solution, but is verbose and computationally expensive.
The third is not an obvious solution, but is relatively compact and
computationally efficient.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.95pt;margin-left:
.75pt'>Consolidating levels using <span style='font-size:9.0pt;line-height:
109%;color:blue;background:#FAFAFA'>factor</span> (<span style='font-size:9.0pt;
line-height:109%;background:#FAFAFA'>factor_approach</span>)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:97.45pt;margin-bottom:
18.85pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895728128'><span style='left:0px;position:absolute;left:0px;
top:-94488px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image465.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>factor</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>as.character</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>colorful</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>levels</span></b><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;blue&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Blue&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;BLUE&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;green&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;gren&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;red&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Red&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;RED&quot;</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
</span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>labels</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Blue&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Blue&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Blue&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Green&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Green&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Red&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Red&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Red&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> Green Blue Red Red Blue Red
Red Red Blue Red Green Green Green Blue</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Red Green</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>17</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> Red
Green Green Red </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:224.65pt;margin-bottom:
.2pt;margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>Levels</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%'> Blue
Blue Blue Green Green Red Red Red Warning </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>message</span></b><span style='font-size:
9.0pt;line-height:110%;color:#666666'>:</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.2pt;
margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>In `levels</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>`</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>`</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>*</span><span style='font-size:9.0pt;
line-height:110%'>tmp</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>*</span><span style='font-size:9.0pt;line-height:110%'>`, value </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>if</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>nl </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:110%'> nL</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>as.character</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>labels</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>else</span></b><span
style='font-size:9.0pt;line-height:110%'> paste0</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>labels</span></b><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>: </span><span style='font-size:9.0pt;line-height:110%'></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>duplicated</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>levels</span></b><span style='font-size:
9.0pt;line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>in</span></b><span style='font-size:9.0pt;line-height:110%'>
factors are deprecated</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice that there are duplicated levels. We still have three
categories for &quot;Blue&quot;, which doesn't complete our task of
consolidating levels. Additionally, there is a warning that duplicated levels
are deprecated, meaning that this code may generate an error in the future.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=721 height=172
src="R%20Notes%20for%20Professionals_files/image466.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:15.75pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=668 height=39
src="R%20Notes%20for%20Professionals_files/image467.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>This code generates the desired result, but requires the use
of nested <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>ifelse</span></b> statements. While there is nothing wrong
with this approach, managing nested <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>ifelse</span></b> statements can be a
tedious task and must be done carefully.</p>

<h4 style='margin-left:.75pt'>Consolidating Factors Levels with a List (<span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>list_approach</span>)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A less obvious way of consolidating levels is to use a list
where the name of each element is the desired category name, and the element is
a character vector of the levels in the factor that should map to the desired
category. This has the added advantage of working directly on the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>
attribute of the factor, without having to assign new objects.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=168
src="R%20Notes%20for%20Professionals_files/image468.gif"></span></p>

<h4 style='margin-left:.75pt'>Benchmarking each approach</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>The time required to execute each of these approaches is
summarized below. (For the sake of space, the code to generate this summary is
not shown)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:105.85pt;margin-bottom:
17.25pt;margin-left:28.25pt;line-height:110%'><span style='position:relative;
z-index:-1895727104'><span style='left:0px;position:absolute;left:20px;
top:-95385px;width:668px;height:1px'><img width=668 height=1
src="R%20Notes%20for%20Professionals_files/image469.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>Unit</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:110%'> microseconds expr </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>min</span></b><span
style='font-size:9.0pt;line-height:110%'> lq </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>mean</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>median</span></b><span style='font-size:
9.0pt;line-height:110%'> uq </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>max</span></b><span style='font-size:9.0pt;
line-height:110%'> neval cld </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>factor</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>78.725</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>83.256</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>93.26023</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>87.5030</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>97.131</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>218.899</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>100</span><span style='font-size:9.0pt;line-height:110%'>
b </span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>ifelse</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>104.494</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>107.609</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>123.53793</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>113.4145</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>128.281</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>254.580</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>100</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c </span></b><span style='font-size:9.0pt;line-height:110%'>list_approach
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>49.557</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>52.955</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>60.50756</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>54.9370</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>65.132</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>138.193</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:110%'> a</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:6.65pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>The list approach runs about twice as fast as the <b><span
style='font-size:9.0pt;line-height:134%;color:blue;background:#FAFAFA'>ifelse</span></b>
approach. However, except in times of very, very large amounts of data, the
differences in execution time will likely be measured in either microseconds or
milliseconds. With such small time differences, efficiency need not guide the
decision of which approach to use. Instead, use an approach that is familiar
and comfortable, and which you and your collaborators will understand on future
review.</p>

<h2 style='margin-top:0in;margin-right:6.65pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618868">Section 29.2: Basic creation of factors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Factors are one way to represent categorical variables in R.
A factor is stored internally as a <b>vector of integers</b>. The unique
elements of the supplied character vector are known as the <i>levels</i> of the
factor. By default, if the levels are not supplied by the user, then R will
generate the set of unique values in the vector, sort these values
alphanumerically, and use them as the levels.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=177
src="R%20Notes%20for%20Professionals_files/image470.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image471.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If you want to change the ordering of the levels, then one
option to to specify the levels manually:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image472.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Factors have a number of properties. For example, levels can
be given labels:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image473.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Another property that can be assigned is whether the factor
is ordered:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'>
Weekdays </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>factor</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Monday&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Wednesday&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Thursday&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Tuesday&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Friday&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;Sunday&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;Saturday&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'>
Weekdays</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'>
Monday Wednesday Thursday Tuesday Friday Sunday Saturday</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Levels</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Friday Monday Saturday Sunday
Thursday Tuesday Wednesday</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895726080'><span style='left:0px;position:absolute;left:0px;top:-96232px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image318.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> Weekdays </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>factor</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Weekdays, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>levels</span></b><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Monday&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Tuesday&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Wednesday&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Thursday&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Friday&quot;</span><span style='font-size:9.0pt;
line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>&quot;Saturday&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Sunday&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>ordered</span></b><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>TRUE</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'>
Weekdays</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'>
Monday Wednesday Thursday Tuesday Friday Sunday Saturday</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.3pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Levels</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%'> Monday </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'> Tuesday </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>
Wednesday </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'> Thursday </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'> Friday </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'> Saturday </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>
Sunday</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>droplevels</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When a level of the factor is no longer used, you can drop
it using the <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image474.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618869">Section 29.3: Changing and
reordering factors</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.character</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When factors are created with defaults, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>
are formed by applied to the inputs and are ordered alphabetically.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image475.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In some situations the treatment of the default ordering of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>
(alphabetic/lexical order) will be acceptable. For example, if one justs want
to <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>plot</span></b>
the frequencies, this will be the result:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image476.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=500
height=525 id="Picture 28453"
src="R%20Notes%20for%20Professionals_files/image477.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>But if we want a different ordering of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>,
we need to specify this in the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>levels</span></b> or <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>labels</span></b>
parameter (taking care that the meaning of &quot;order&quot; here is different
from <i>ordered</i> factors, see below). There are many alternatives to
accomplish that task depending on the situation.</p>

<h4 style='margin-left:.75pt'>1. Redefine the factor</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When it is possible, we can recreate the factor using the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>
parameter with the order we want.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image478.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When the input levels are different than the desired output
levels, we use the <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>labels</span></b> parameter which causes the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>
parameter to become a &quot;filter&quot; for acceptable input values, but
leaves the final values of &quot;levels&quot; for the factor vector as the
argument to <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>labels</span></b>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=128
src="R%20Notes%20for%20Professionals_files/image479.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.5pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="R%20Notes%20for%20Professionals_files/image480.gif"></span></p>

<h4 style='margin-left:.75pt'>2. Use <span style='font-size:9.0pt;line-height:
109%;color:blue;background:#FAFAFA'>relevel</span> function</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When there is one specific <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>level</span> that needs to be the first we
can use <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>relevel</span></b>. This happens, for example, in the context of
statistical analysis, when a <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>base</span> category is necessary for testing hypothesis.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image481.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>As can be verified <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>f</span> and <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>g</span> are the same</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=78
src="R%20Notes%20for%20Professionals_files/image482.gif"></span></p>

<h4 style='margin-left:.75pt'>3. Reordering factors</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are cases when we need to <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>reorder</span></b> the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>
based on a number, a partial result, a computed statistic, or previous
calculations. Let's reorder based on the <b>frequencies</b> of the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image483.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>reorder</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>reorder</span></b> function is generic (see <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>),
but in this context needs: <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x</span>, in this case the factor; <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>X</span>, a numeric value of the
same length as <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>;
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FUN</span>,
a function to be applied to <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>X</span> and computed by level of the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>, which
determines the <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>levels</span></b> order, by default increasing. The result
is the same factor with its levels reordered.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image484.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To get de decreasing order we consider negative values (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>-1</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image485.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Again the factor is the same as the others.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image486.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image487.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;iris&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Sepal.Width</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When there is a <b>quantitative variable</b> related to the
factor variable, we could use other functions to reorder the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>.
Lets take the <b><span style='font-size:9.0pt;line-height:108%;color:#333399;
background:#FAFAFA'>iris</span></b> data (<span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span> for more
information), for reordering the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Species</span> factor by using its mean .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image488.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=281 style='width:210.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>with</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>miris, </span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>boxplot</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Petal.Width~Species</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Sepal.Width</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The usual <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>boxplot</span></b> (say: <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>) will show
the especies in this order: <i>setosa</i>, <i>versicolor</i>, and <i>virginica</i>.
But using the ordered factor we get the species ordered by its mean :</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image489.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=640
height=672 id="Picture 29035"
src="R%20Notes%20for%20Professionals_files/image490.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Additionally, it is also possible to change the names of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>,
combine them into groups, or add new <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>levels</span></b>. For that we
use the function of the same name <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>levels</span></b>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=286
src="R%20Notes%20for%20Professionals_files/image491.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=153
src="R%20Notes%20for%20Professionals_files/image492.gif"></span></p>

<h4 style='margin-left:.75pt'>- Ordered factors</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, we know that <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>ordered</span></b> factors are
different from <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>factors</span>,
the first one are used to represent <i>ordinal data</i>, and the second one to
work with <i>nominal data</i>. At first, it does not make sense to change the
order of <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>levels</span></b> for ordered factors, but we can change
its <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>labels</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=256
src="R%20Notes%20for%20Professionals_files/image493.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618870">Section 29.4: Rebuilding
factors from zero</a></h2>

<h4 style='margin-left:.75pt'>Problem</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.45pt;
margin-left:.75pt'>Factors are used to represent variables that take values
from a set of categories, known as Levels in R. For example, some experiment
could be characterized by the energy level of a battery, with four levels:
empty, low, normal, and full. Then, for 5 different sampling sites, those
levels could be identified, in those terms, as follows:</p>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:12.25pt;
margin-left:0in;text-align:left;text-indent:0in'><span style='font-size:11.0pt;
line-height:109%;font-weight:normal'> </span><span style='font-size:
11.0pt;line-height:109%'><img border=0 width=3 height=52 id="Group 529949"
src="R%20Notes%20for%20Professionals_files/image494.gif"></span> full<span
style='font-weight:normal'>, </span>full<span style='font-weight:normal'>, </span>normal<span
style='font-weight:normal'>, </span>empty<span style='font-weight:normal'>, </span>low</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.45pt;
margin-left:.75pt'>Typically, in databases or other information sources, the
handling of these data is by arbitrary integer indices associated with the
categories or levels. If we assume that, for the given example, we would
assign, the indices as follows: 1 = empty, 2 = low, 3 = normal, 4 = full, then
the 5 samples could be coded as:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.3pt;
margin-left:0in;text-indent:0in'><span style='font-size:11.0pt;line-height:
108%'> <img border=0 width=3 height=52 id="Group 529950"
src="R%20Notes%20for%20Professionals_files/image494.gif"></span><b> 4</b>, <b>4</b>,
<b>3</b>, <b>1</b>, <b>2</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:4.65pt;margin-bottom:
1.7pt;margin-left:.75pt;line-height:154%'>It could happen that, from your
source of information, e.g. a database, you only have the encoded list of
integers, and the catalog associating each integer with each level-keyword. How
can a factor of R be reconstructed from that information? <b>Solution</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We will simulate a vector of 20 integers that represents the
samples, each of which may have one of four different values:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=126
src="R%20Notes%20for%20Professionals_files/image495.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The first step is to make a factor, from the previous
sequence, in which the levels or categories are exactly the numbers from 1 to
4.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=129
src="R%20Notes%20for%20Professionals_files/image496.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now simply, you have to <i>dress</i> the factor already
created with the index tags:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=149
src="R%20Notes%20for%20Professionals_files/image497.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618871">Chapter 30: Pattern
Matching and Replacement</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:51.15pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>This topic covers matching string patterns, as well as
extracting or replacing them. For details on defining complicated patterns see
Regular Expressions.</p>

<h2 style='margin-top:0in;margin-right:51.15pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618872">Section 30.1: Finding Matches</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image498.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Is there a match?</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grepl</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> is used to check whether a word or regular
expression exists in a string or character vector. The function returns a
TRUE/FALSE (or &quot;Boolean&quot;) vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Notice that we can check each string for the word
&quot;fox&quot; and receive a Boolean vector in return.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image499.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Match locations</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>grep</span></b> takes in a character string and a regular
expression. It returns a numeric vector of indexes.This will return which
sentence contains the word &quot;fox&quot; in it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image500.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Matched values</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To select sentences that match a pattern:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image501.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Details</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fixed </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Since the <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>&quot;fox&quot;</span> pattern is just a
word, rather than a regular expression, we could improve performance (with
either <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>grep</span></b> or <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>grepl</span></b>) by specifying .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image502.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>invert </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=157 style='width:117.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grep</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span> or <span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>!</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grepl</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>To select sentences that <i>don't</i> match a pattern, one
can use <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>grep</span></b> with ; or follow subsetting rules with <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=261 style='width:195.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grepl</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern, x</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span> and </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grep</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern, x</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=210 style='width:157.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern</span></p>
  </td>
  <td width=109 valign=top style='width:81.6pt;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]</span>
  against <span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>x</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>[</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>]</span>,
  </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>In both <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>)</span>, the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>x</span> parameter is vectorized, the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pattern</span>
parameter is not. As a result, you cannot use these directly to match <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
against <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>,
and so on.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Summary of matches</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>After performing the e.g. the <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>grepl</span></b> command,
maybe you want to get an overview about how many matches where <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>. This
is useful e.g. in case of big data sets. In order to do so run the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>summary</span></b>
command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image503.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618873">Section 30.2: Single and
Global match</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>When working with regular expressions one modifier for PCRE
is <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>g</span>
for global match.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>In R matching and replacement functions have two version:
first match and global match:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=202 style='width:2.1in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sub</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=173 valign=top style='width:1.8in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern,replacement,</span><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>text</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>gsub</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=173 valign=top style='width:1.8in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern,replacement,</span><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>text</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>regexpr</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern,</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>text</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>gregexpr</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pattern,</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>text</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:47.55pt;
margin-bottom:9.15pt;margin-left:30.5pt;text-align:right;line-height:110%'><img
width=5 height=1 src="R%20Notes%20for%20Professionals_files/image259.gif"
align=left hspace=12><span style='font-size:9.0pt;line-height:110%;color:#222222;
background:#FAFAFA'>)</span> will replace the first occurrence of pattern by
replacement in text</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:72.6pt;
margin-bottom:9.15pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>)</span>
will do the same as sub but for each occurrence of pattern</p>

<p class=MsoNormal style='margin-top:0in;margin-right:91.8pt;margin-bottom:
11.2pt;margin-left:26.3pt;text-indent:-5.4pt;line-height:185%'><span
style='font-size:9.0pt;line-height:185%;color:#222222;background:#FAFAFA'>)</span>
will return the position of match for the first instance of pattern <span
style='font-size:9.0pt;line-height:185%;color:#222222;background:#FAFAFA'>)</span>
will return all matches.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Some random data:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image504.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's see how this works if we want to replace vowels by
something else:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=109
src="R%20Notes%20for%20Professionals_files/image505.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now let's see how we can find a consonant immediately
followed by one or more vowel:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image506.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>We have a match on position 3 of the string of length 2,
i.e: <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ju</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now if we want to get all matches:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=95
src="R%20Notes%20for%20Professionals_files/image507.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image508.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>All this is really great, but this only give use positions
of match and that's not so easy to get what is matched, and here comes <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>regmatches</span>
it's sole purpose is to extract the string matched from regexpr, but it has a
different syntax.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's save our matches in a variable and then extract them
from original string:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image509.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This may sound strange to not have a shortcut, but this
allow extraction from another string by the matches of our first one (think
comparing two long vector where you know there's is a common pattern for the
first but not for the second, this allow an easy comparison):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image510.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>perl</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:7.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>Attention note: by default the pattern is not Perl Compatible Regular
Expression, some things like lookarounds are not supported, but each function
presented here allow for argument to enable them.</p>

<h2 style='margin-top:0in;margin-right:7.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618874">Section 30.3: Making substitutions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image511.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's make the brown fox red:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image512.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now, let's make the <span style='font-size:9.0pt;line-height:
108%;color:#CC0A0A;background:#FAFAFA'>&quot;fast&quot;</span> fox act <span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;fastly&quot;</span>.
This won't do it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image513.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>sub</span></b> only makes the first available replacement,
we need <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>gsub</span></b> for global replacement:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image514.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:168.45pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>See Modifying strings by substitution
for more examples.</p>

<h2 style='margin-top:0in;margin-right:168.45pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618875">Section 30.4: Find matches in big
data sets</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>grepl</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;fox&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, test_sentences</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In case of big data sets, the call of <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
does not perform well. Big data sets are e.g. crawled websites or million of
Tweets, etc.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=370 style='width:277.75pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>perl </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
  <td width=205 valign=top style='width:153.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>option. Even faster is the option </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fixed </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The first acceleration is the usage of the . A complete
example would be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image515.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In case of text mining, often a corpus gets used. A corpus
cannot be used directly with <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>grepl</span></b>. Therefore, consider this
function:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image516.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618876">Chapter 31: Run-length
encoding</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618877">Section 31.1: Run-length
Encoding with `rle`</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Run-length encoding captures the lengths of runs of
consecutive elements in a vector. Consider an example vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image517.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>rle</span></b> function extracts each run and
its length:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image518.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The values for each run are captured in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>r$values</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image519.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>This captures that we first saw a run of 1's, then a run of
2's, then a run of 3's, then a run of 1's, and so on.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The lengths of each run are captured in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>r$lengths</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image520.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:145%'>We see that the initial run of 1's was of
length 1, the run of 2's that followed was of length 3, and so on.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;margin-left:.75pt;
line-height:145%'><a name="_Toc618878">Section 31.2: Identifying and grouping
by runs in base R</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One might want to group their data by the runs of a variable
and perform some sort of analysis. Consider the following simple dataset:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image521.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The variable <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x</span> has three runs: a run of length 2 with value 1, a
run of length 3 with value 2, and a run of length 1 with value 1. We might want
to compute the mean value of variable <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>y</span> in each of the runs of variable <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span> (these
mean values are 1.5, 4, and 6).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In base R, we would first compute the run-length encoding of
the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>
variable using <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>rle</span></b>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image522.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The next step is to compute the run number of each row of
our dataset. We know that the total number of runs is</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>length</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>r$lengths</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:17.8pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>)</span>,
and the length of each run is <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>r$lengths</span>, so we can compute the run number of each
of our</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>runs with <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>rep</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image523.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now we can use <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>tapply</span></b> to compute the mean <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y</span> value for
each run by grouping on the run id:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image524.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618879">Section 31.3: Run-length
encoding to compress and decompress vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Long vectors with long runs of the same value can be
significantly compressed by storing them in their run-length encoding (the
value of each run and the number of times that value is repeated). As an
example, consider a vector of length 10 million with a huge number of 1's and
only a small number of 0's:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image525.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Storing 10 million entries will require significant space,
but we can instead create a data frame with the run-length encoding of this
vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image526.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rle.df</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>write.csv</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>From the run-length encoding, we see that the first 52,818
values in the vector are 1's, followed by a single 0, followed by 219,329
consecutive 1's, followed by a 0, and so on. The run-length encoding only has
207 entries, requiring us to store only 414 values instead of 10 million
values. As is a data frame, it can be stored using standard functions like .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Decompressing a vector in run-length encoding can be
accomplished in two ways. The first method is to simply call <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>rep</span></b>,
passing the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>values</span>
element of the run-length encoding as the first argument and the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lengths</span>
element of the run-length encoding as the second argument:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image527.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We can confirm that our decompressed data is identical to
our original data:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image528.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>inverse.rle</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The second method is to use R's built-in function on the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>rle</span></b>
object, for instance:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=92
src="R%20Notes%20for%20Professionals_files/image529.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can confirm again that this produces exactly the original
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dat</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image530.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618880">Section 31.4: Identifying
and grouping by runs in data.table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The data.table package provides a convenient way to group by
runs in data. Consider the following example data:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image531.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>The variable <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x</span> has three runs: a run of length 2 with value 1, a
run of length 3 with value 2, and a run of length 1 with value 1. We might want
to compute the mean value of variable <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>y</span> in each of the runs of variable x (these mean
values are 1.5, 4, and 6).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The data.table <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>rleid</span> function provides an id indicating the
run id of each element of a vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image532.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>One can then easily group on this run ID and summarize the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y</span> data:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image533.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618881">Chapter 32: Speeding up
tough-tovectorize code</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618882">Section 32.1: Speeding
tough-to-vectorize for loops with Rcpp</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cos</span></b><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>(</span><span style='font-size:9.0pt;line-height:107%'>x_</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>{</span><span
  style='font-size:9.0pt;line-height:107%'>i</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666'>-</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>}</span><span style='font-size:9.0pt;
  line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>+</span><span style='font-size:9.0pt;line-height:107%'> </span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>1</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Consider the following tough-to-vectorize for loop, which
creates a vector of length <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>len</span> where the first element is specified (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>first</span>) and
each element <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x_i</span>
is equal to :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image534.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cos</span></b><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>(</span><span style='font-size:9.0pt;line-height:107%'>x</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>[</span><span
  style='font-size:9.0pt;line-height:107%'>i</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666'>-</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>]</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666'>+</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This code involves a for loop with a fast operation (),
which often benefit from vectorization.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>However, it is not trivial to vectorize this operation with
base R, since R does not have a &quot;cumulative cosine of x+1&quot; function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>One possible approach to speeding this function would be to
implement it in C++, using the Rcpp package:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image535.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This often provides significant speedups for large
computations while yielding the exact same results:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image536.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.4pt;
margin-left:.75pt'>In this case, the Rcpp code generates a vector of length 1
million in 0.03 seconds instead of 1.31 seconds with the base R approach.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618883">Section 32.2: Speeding
tough-to-vectorize for loops by byte compiling</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Following the Rcpp example in this documentation entry,
consider the following tough-to-vectorize function, which creates a vector of
length <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>len</span>
where the first element is specified (<span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>first</span>) and each element <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>x_i</span> is equal to</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%;
background:#FAFAFA'><b><span style='font-size:9.0pt;line-height:107%;
color:blue'>cos</span></b><span style='font-size:9.0pt;line-height:107%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:107%'>x_</span><span
style='font-size:9.0pt;line-height:107%;color:#222222'>{</span><span
style='font-size:9.0pt;line-height:107%'>i</span><span style='font-size:9.0pt;
line-height:107%;color:#666666'>-</span><span style='font-size:9.0pt;
line-height:107%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:107%;color:#222222'>}</span><span style='font-size:9.0pt;
line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
color:#666666'>+</span><span style='font-size:9.0pt;line-height:107%'> </span><span
style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:107%;color:#222222'>)</span>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=24
src="R%20Notes%20for%20Professionals_files/image537.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=120
src="R%20Notes%20for%20Professionals_files/image538.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One simple approach to speeding up such a function without
rewriting a single line of code is byte compiling the code using the R compile
package:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image539.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The resulting function will often be significantly faster
while still returning the same results:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image540.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>In this case, byte compiling sped up the tough-to-vectorize
operation on a vector of length 1 million from 1.20 seconds to 0.34 seconds.</p>

<h4 style='margin-left:.75pt'>Remark</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The essence of <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>repeatedCosPlusOne</span>, as the cumulative
application of a single function, can be expressed more transparently with <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Reduce</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image541.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>repeatedCosPlusOne_vec</span> may be regarded as a
&quot;vectorization&quot; of <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>repeatedCosPlusOne</span>. However, it can be expected to
be <i>slower</i> by a factor of 2:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=207
src="R%20Notes%20for%20Professionals_files/image542.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618884">Chapter 33: Introduction to
Geographical Maps</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.75pt;
margin-left:.75pt'>See also I/O for geographic data</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618885">Section 33.1: Basic
map-making with map() from the package maps</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>map</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>The function from the package <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>maps</span> provides a simple starting
point for creating maps with R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A basic world map can be drawn as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image543.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=449 id="Picture 31077"
src="R%20Notes%20for%20Professionals_files/image544.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The color of the outline can be changed by setting the color
parameter, <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>col</span></b>, to either the character name or hex value
of a color:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image545.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=449 id="Picture 31108"
src="R%20Notes%20for%20Professionals_files/image546.gif"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fill </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To fill land masses with the color in <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>col</span></b>
we can set :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image547.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=449 id="Picture 31139"
src="R%20Notes%20for%20Professionals_files/image548.gif"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fill </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A vector of any length may be supplied to <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>col</span></b>
when is also set:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image549.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=449 id="Picture 31189"
src="R%20Notes%20for%20Professionals_files/image550.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In the example above colors from <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>col</span></b> are
assigned arbitrarily to polygons in the map representing regions and colors are
recycled if there are fewer colors than polygons.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>We can also use color coding to represent a statistical
variable, which may optionally be described in a legend. A map created as such
is known as a &quot;choropleth&quot;.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>map</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>county.fips</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The following choropleth example sets the first argument of <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>,
which is <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>database</span>
to <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;county&quot;</span>
and <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:
#FAFAFA'>&quot;state&quot;</span> to color code unemployment using data from
the built-in datasets <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>unemp</span> and while overlaying state lines in white:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=287
src="R%20Notes%20for%20Professionals_files/image551.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:200.0pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> leg.txt </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
</span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;&lt;2%&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;2-4%&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;4-6%&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;6-8%&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;8-10%&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;&gt;10%&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'> </span><span style='font-size:9.0pt;line-height:112%;color:forestgreen'>#
align data with map definitions by (partial) matching state,county</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:129.8pt;margin-bottom:
3.55pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895724032'><span style='left:0px;position:absolute;left:0px;
top:-112170px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image552.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:forestgreen'># names, which include multiple polygons
for some counties </span><span style='font-size:9.0pt;line-height:110%'>cnty.fips
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> county.fips$fips</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>match</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>map</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;county&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>plot</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'>FALSE</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>$names,
county.fips$polyname</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)] </span><span style='font-size:9.0pt;line-height:110%'>colorsmatched
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> unemp$colorBuckets</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>match</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>cnty.fips, unemp$fips</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)] </span><span
style='font-size:9.0pt;line-height:110%'></span><span style='font-size:9.0pt;
line-height:110%;color:forestgreen'># draw map </span><span style='font-size:
9.0pt;line-height:110%'></span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>par</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>mar</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>+</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>) </span><span style='font-size:9.0pt;line-height:110%'>map</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;county&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>col</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>colors</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>colorsmatched</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'>, fill </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> TRUE, resolution </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'>,
lty </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'>, projection </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;polyconic&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;state&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;white&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, fill </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
FALSE, add </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> TRUE, lty </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'>, lwd </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.1</span><span
style='font-size:9.0pt;line-height:110%'>, projection</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;polyconic&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'></span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>title</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;unemployment by county, 2009&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'></span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>legend</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;topright&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, leg.txt, horiz </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> TRUE, fill </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>colors</span></b><span style='font-size:
9.0pt;line-height:110%'>, cex</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.6</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>) }</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=449 id="Picture 31489"
src="R%20Notes%20for%20Professionals_files/image553.gif"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618886">Section 33.2: 50 State Maps
and Advanced Choropleths with Google Viz</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:169%'>A common <a
href="http://stackoverflow.com/questions/25530358/how-do-you-create-a-50-state-map-instead-of-just-lower-48"><span
style='color:#2066B9'>question</span></a> is how to juxtapose (combine)
physically separate geographical regions on the same map, such as in the case
of a choropleth describing all 50 American states (The mainland with Alaska and
Hawaii juxtaposed). Creating an attractive 50 state map is simple when
leveraging Google Maps. Interfaces to Google's API include the</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=121
src="R%20Notes%20for%20Professionals_files/image554.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=503
src="R%20Notes%20for%20Professionals_files/image555.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>gvisGeoChart</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>map</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:5.2pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>The function <span style='font-size:9.0pt;line-height:134%;color:#222222;
background:#FAFAFA'>()</span> requires far less coding to create a choropleth
compared to older mapping methods, such as <span style='font-size:9.0pt;
line-height:134%;color:#222222;background:#FAFAFA'>()</span> from the package <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>maps</span>. The <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>colorvar</span>
parameter allows easy coloring of a statistical variable, at a level specified
by the <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>locationvar</span>
parameter. The various options passed to <b><span style='font-size:9.0pt;
line-height:134%;color:blue;background:#FAFAFA'>options</span></b> as a list
allow customization of the map's details such as size (<span style='font-size:
9.0pt;line-height:134%;background:#FAFAFA'>height</span>), shape (<span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>markers</span>),
and color coding (<span style='font-size:9.0pt;line-height:134%;background:
#FAFAFA'>colorAxis</span> and <b><span style='font-size:9.0pt;line-height:134%;
color:blue;background:#FAFAFA'>colors</span></b>).</p>

<h2 style='margin-top:0in;margin-right:5.2pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618887">Section 33.3: Interactive plotly maps</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=143 style='width:107.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plot_ly</span></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> or </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ggplotly</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=172 style='width:128.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plot_geo</span></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> or </p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plot_mapbox</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>plotly</span> package allows many kind of interactive
plots, including maps. There are a few ways to create a map in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>plotly</span>.
Either supply the map data yourself (via <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span>), use plotly's
&quot;native&quot; mapping capabilities (via <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span>), or even a
combination of both. An example of supplying the map yourself would be:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image556.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=359 id="Picture 31750"
src="R%20Notes%20for%20Professionals_files/image557.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=261 style='width:196.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plot_ly</span></p>
  </td>
  <td width=39 valign=top style='width:29.5pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> for </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plot_geo</span></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> or </p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>plot_mapbox</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For a combination of both approaches, swap <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
in the above example.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>See the <a
href="https://cpsievert.github.io/plotly_book/maps.html"><span
style='color:#2066B9'>plotly book</span></a> for more examples.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>world.cities</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The next example is a &quot;strictly native&quot; approach
that leverages the <a href="https://plot.ly/r/reference/#layout-geo"><span
style='color:#2066B9'>layout.geo</span></a> attribute to set the aesthetics and
zoom level of the map. It also uses the database from <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>maps</span> to filter the Brazilian
cities and plot them on top of the &quot;native&quot; map.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The main variables: <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>poph</span>is a text with the city and its population
(which is shown upon mouse hover); <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>q</span>is a ordered factor from the population's
quantile. <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ge</span>
has information for the layout of the maps. See the <a
href="https://plot.ly/r/reference/#layout-geo"><span style='color:#2066B9'>package
</span></a><a href="https://plot.ly/r/reference/#layout-geo"><span
style='color:#2066B9'>documentation</span></a> for more information.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=371
src="R%20Notes%20for%20Professionals_files/image558.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=678
height=607 id="Picture 32033"
src="R%20Notes%20for%20Professionals_files/image559.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618888">Section 33.4: Making
Dynamic HTML Maps with Leaflet</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><a href="http://leafletjs.com/"><span style='color:#2066B9'>Leaflet</span></a>
is an open-source JavaScript library for making dynamic maps for the web.
RStudio wrote R bindings for Leaflet, available through its <a
href="http://rstudio.github.io/leaflet/"><span style='font-size:9.0pt;
line-height:108%;color:#2066B9;background:#FAFAFA'>leafle</span></a><a
href="http://rstudio.github.io/leaflet/"><span style='font-size:9.0pt;
line-height:108%;color:#2066B9;background:#FAFAFA'>t</span></a><a
href="http://rstudio.github.io/leaflet/"><span style='color:#2066B9'> package</span></a>,
built with <a href="http://www.htmlwidgets.org/showcase_leaflet.html"><span
style='font-size:9.0pt;line-height:108%;color:#2066B9;background:#FAFAFA'>htmlwidgets</span></a>.
Leaflet maps integrate well with the <a href="http://rmarkdown.rstudio.com/"><span
style='color:#2066B9'>RMarkdown</span></a> and <a
href="http://shiny.rstudio.com/"><span style='color:#2066B9'>Shiny</span></a>
ecosystems.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>leaflet</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>leaflet</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The interface is piped, using a <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> function to
initialize a map and subsequent functions adding (or removing) map layers. Many
kinds of layers are available, from markers with popups to polygons for
creating choropleth maps. Variables in the data.frame passed to <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
are accessed via function-style <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>~</span> quotation.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=189 style='width:141.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399'>state.</span></b></a><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399'>nam</span></b></a><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399'>e</span></b></a></p>
  </td>
  <td width=31 valign=top style='width:23.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><span
  style='color:#2066B9'>and </span></a></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399'>state</span></b></a><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399'>.cente</span></b></a><a
  href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><b><span
  style='font-size:9.0pt;line-height:107%;color:#333399'>r</span></b></a></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To map the <a
href="http://stat.ethz.ch/R-manual/R-patched/library/datasets/html/state.html"><span
style='color:#2066B9'>datasets</span></a>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image560.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.75pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=470 id="Picture 32187"
src="R%20Notes%20for%20Professionals_files/image561.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.6pt;margin-bottom:
0in;margin-left:-.25pt;line-height:145%'><a
href="https://alistaire47.github.io/leaflet/leaflet.nb.html"><span
style='color:#2066B9'>(Screenshot; click for dynamic version.)</span></a></p>

<h2 style='margin-top:0in;margin-right:48.6pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc618889">Section 33.5: Dynamic Leaflet
maps in Shiny applications</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'>The <a href="https://rstudio.github.io/leaflet/"><span
style='color:#2066B9'>Leaflet</span></a> package is designed to <a
href="https://rstudio.github.io/leaflet/shiny.html"><span style='color:#2066B9'>integerate
with Shiny</span></a></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=364 style='width:272.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>leafletOutput</span></p>
  </td>
  <td width=177 valign=top style='width:132.55pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and in the server you call </p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>renderLeaflet</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In the <b>ui</b> you call <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=339
src="R%20Notes%20for%20Professionals_files/image562.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>However, reactive inputs that affect the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>renderLeaflet</span>
expression will cause the entire map to be redrawn each time the reactive
element is updated.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>leafletProxy</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Therefore, to modify a map that's already running you should
use the <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>()</span> function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Normally you use <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>leaflet</span> to create the static aspects of the
map, and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>leafletProxy</span>
to manage the dynamic elements, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=733 id="Picture 603609"
src="R%20Notes%20for%20Professionals_files/image563.gif"></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=699 height=519 id="Picture 32568"
src="R%20Notes%20for%20Professionals_files/image564.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618890">Chapter 34: Set operations</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618891">Section 34.1: Set operators
for pairs of vectors</a></h2>

<h4 style='margin-left:.75pt'>Comparing sets</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In R, a vector may contain duplicated elements:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image565.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>However, a set contains only one copy of each element. R
treats a vector like a set by taking only its distinct elements, so the two
vectors above are regarded as the same:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image566.gif"></span></p>

<h4 style='margin-left:.75pt'>Combining sets</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The key functions have natural names:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image567.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>?</span><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>union</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:75.0pt;margin-bottom:
0in;margin-left:-.25pt;line-height:145%'>These are all documented on the same
page, .</p>

<h2 style='margin-top:0in;margin-right:75.0pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc618892">Section 34.2: Cartesian or
&quot;cross&quot; products of vectors</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>expand.grid</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To find every vector of the form (x, y) where x is drawn
from vector X and y from Y, we use :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image568.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>do.call</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The result is a data.frame with one column for each vector
passed to it. Often, we want to take the Cartesian product of sets rather than
to expand a &quot;grid&quot; of vectors. We can use <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>unique</span></b>, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>lapply</span></b>
and :</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=42
src="R%20Notes%20for%20Professionals_files/image569.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=87
src="R%20Notes%20for%20Professionals_files/image570.gif"></span></p>

<h4 style='margin-left:.75pt'>Applying functions to combinations</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x,y</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If you then want to apply a function to each resulting
combination <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>f</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>,
it can be added as another column:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image571.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This approach works for as many vectors as we need, but in
the special case of two, it is sometimes a better fit to have the result in a
matrix, which can be achieved with <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>outer</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image572.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:181.15pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>For related concepts and tools, see the
combinatorics topic.</p>

<h2 style='margin-top:0in;margin-right:181.15pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618893">Section 34.3: Set membership for
vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=173
src="R%20Notes%20for%20Professionals_files/image573.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Each element on the left is treated individually and tested
for membership in the set associated with the vector on the right (consisting
of all its distinct elements).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>in</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Unlike equality tests, <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>%%</span> always returns <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image574.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>in</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.9pt;
margin-left:.75pt'>The documentation is at <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>?</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>`</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%%</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>`</span>.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618894">Section 34.4: Make unique /
drop duplicates / select distinct elements from a vector</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>unique</span></b> drops duplicates so that each element in
the result is unique (only appears once):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image575.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:240.65pt;margin-bottom:
0in;margin-left:.75pt;line-height:217%'>Values are returned in the order they
first appeared. <b><span style='font-size:9.0pt;line-height:217%;color:blue;
background:#FAFAFA'>duplicated</span></b> tags each duplicated element:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image576.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=151 valign=top style='width:113.4pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>anyDuplicated</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>(</span><span style='font-size:9.0pt;line-height:107%'>x</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>)</span><span
  style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
  line-height:107%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
  line-height:107%'> 0L</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.75pt;
margin-left:113.9pt'>is a quick way of checking whether a vector contains any
duplicates.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618895">Section 34.5: Measuring set
overlaps / Venn diagrams for vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To count how many elements of two sets overlap, one could
write a custom function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="R%20Notes%20for%20Professionals_files/image577.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A Venn diagram, offered by various packages, can be used to
visualize overlap counts across multiple sets.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618896">Chapter 35: tidyverse</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618897">Section 35.1: tidyverse: an
overview</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:11.9pt;margin-bottom:
18.35pt;margin-left:.75pt;line-height:156%'><b>What is </b><b><span
style='font-size:9.0pt;line-height:156%;background:#FAFAFA'>tidyverse</span>? </b><a
href="https://github.com/tidyverse"><span style='font-size:9.0pt;line-height:
156%;color:#2066B9;background:#FAFAFA'>tidyverse</span></a> is the fast and
elegant way to turn basic <span style='font-size:9.0pt;line-height:156%;
background:#FAFAFA'>R</span> into an enhanced tool, redesigned by
Hadley/Rstudio. The development of all packages included in <span
style='font-size:9.0pt;line-height:156%;background:#FAFAFA'>tidyverse</span>
follow the principle rules of <a
href="https://mran.microsoft.com/web/packages/tidyverse/vignettes/manifesto.html"><span
style='color:#2066B9'>The tidy tools manifesto</span></a>. But first, let the
authors describe their masterpiece:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:22.25pt;margin-bottom:
12.65pt;margin-left:24.5pt'><img width=3 height=1
src="R%20Notes%20for%20Professionals_files/image578.gif" align=left hspace=12>The
tidyverse is a set of packages that work in harmony because they share common
data representations and API design. The tidyverse package is designed to make
it easy to install and load core packages from the tidyverse in a single
command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:12.2pt;margin-bottom:
12.65pt;margin-left:24.5pt'>The best place to learn about all the packages in
the tidyverse and how they fit together is R for Data Science. Expect to hear
more about the tidyverse in the coming months as I work on improved package
websites, making citation easier, and providing a common home for discussions
about data analysis with the tidyverse.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:24.25pt;
margin-left:24.5pt;line-height:110%'>(<a
href="https://blog.rstudio.org/2016/09/15/tidyverse-1-0-0/"><span
style='color:#2066B9'>source</span></a>))</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>How to use it?</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Just with the ordinary <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>R</span> packages, you need to install and
load the package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image579.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>The difference is, on a single command a couple of dozens of
packages are installed/loaded. As a bonus, one may rest assured that all the
installed/loaded packages are of compatible versions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>What are those packages?</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The commonly known and widely used packages:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:180.95pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image580.gif" align=left hspace=12><a
href="http://ggplot2.org/"><span style='color:#2066B9'>ggplot2</span></a>:
advanced data visualisation SO_doc <a href="https://github.com/hadley/dplyr"><span
style='color:#2066B9'>dplyr</span></a>: fast (Rcpp) and coherent approach to
data manipulation SO_doc <a href="https://github.com/tidyverse/tidyr"><span
style='color:#2066B9'>tidyr</span></a>: tools for data tidying SO_doc <a
href="https://github.com/tidyverse/readr"><span style='color:#2066B9'>readr</span></a>:
for data import.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:33.0pt;margin-bottom:
1.7pt;margin-left:21.4pt'><a href="https://github.com/hadley/purrr"><span
style='color:#2066B9'>purrr</span></a>: makes your pure functions purr by
completing R's functional programming tools with important features from other
languages, in the style of the JS packages underscore.js, lodash and lazy.js. <a
href="https://github.com/tidyverse/tibble"><span style='color:#2066B9'>tibble</span></a>:
a modern re-imagining of data frames.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:21.4pt'><a href="https://github.com/tidyverse/magrittr"><span
style='color:#2066B9'>magrittr</span></a>: piping to make code more readable
SO_doc</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Packages for manipulating specific data formats:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:34.2pt;margin-bottom:
12.65pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12><a
href="https://github.com/rstats-db/hms"><span style='color:#2066B9'>hms</span></a>:
easily read times <a href="https://github.com/tidyverse/stringr"><span
style='color:#2066B9'>stringr</span></a>: provide a cohesive set of functions
designed to make working with strings as easy as posssible <a
href="https://github.com/hadley/lubridate"><span style='color:#2066B9'>lubridate</span></a>:
advanced date/times manipulations SO_doc <a
href="https://github.com/tidyverse/forcats"><span style='color:#2066B9'>forcats</span></a>:
advanced work with factors.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Data import:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:47.75pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image580.gif" align=left hspace=12><a
href="https://github.com/rstats-db/DBI"><span style='color:#2066B9'>DBI</span></a>:
defines a common interface between the R and database management systems (DBMS)
<a href="https://github.com/tidyverse/haven"><span style='color:#2066B9'>haven</span></a>:
easily import SPSS, SAS and Stata files SO_doc</p>

<p class=MsoNormal style='margin-top:0in;margin-right:4.5pt;margin-bottom:12.65pt;
margin-left:21.4pt'><a href="https://github.com/hadley/httr/"><span
style='color:#2066B9'>httr</span></a>: the aim of httr is to provide a wrapper
for the curl package, customised to the demands of modern web APIs <a
href="https://github.com/jeroenooms/jsonlite"><span style='color:#2066B9'>jsonlite</span></a>:
a fast JSON parser and generator optimized for statistical data and the web <a
href="https://github.com/hadley/readxl"><span style='color:#2066B9'>readxl</span></a>:
read.xls and .xlsx files without need for dependency packages SO_doc <a
href="https://github.com/hadley/rvest"><span style='color:#2066B9'>rvest</span></a>:
rvest helps you scrape information from web pages SO_doc <a
href="https://github.com/hadley/xml2"><span style='color:#2066B9'>xml2</span></a>:
for XML</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>And modelling:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:94.3pt;margin-bottom:
12.9pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12><a
href="https://github.com/hadley/modelr"><span style='color:#2066B9'>modelr</span></a>:
provides functions that help you create elegant pipelines when modelling <a
href="https://github.com/tidyverse/broom"><span style='color:#2066B9'>broom</span></a>:
easily extract the models into tidy data</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Finally, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>tidyverse</span> suggest the use of:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12><a
href="https://github.com/yihui/knitr"><span style='color:#2066B9'>knitr</span></a>:
the amazing general-purpose literate programming engine, with lightweight API's
designed to give users full control of the output without heavy coding work.
SO_docs: one, two</p>

<p class=MsoNormal style='margin-top:0in;margin-right:11.75pt;margin-bottom:
0in;margin-left:.25pt;text-indent:5.5pt;line-height:145%'><a
href="http://rmarkdown.rstudio.com/"><span style='color:#2066B9'>rmarkdown</span></a>:
Rstudio's package for reproducible programming. SO_docs: one, two, three, four</p>

<h2 style='margin-top:0in;margin-right:11.75pt;margin-bottom:0in;margin-left:
.25pt;text-indent:5.5pt;line-height:145%'><a name="_Toc618898">Section 35.2:
Creating tbl_dfs</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>A tbl_df (pronounced <i>tibble diff</i>) is a variation of a
data frame that is often used in tidyverse packages. It is implemented in the <a
href="https://cran.r-project.org/package=tibble"><span style='color:#2066B9'>tibble</span></a>
package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Use the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>as_data_frame</span> function to turn a data frame into a
tbl_df:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image581.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>One of the most notable differences between data.frames and
tbl_dfs is how they print:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.65pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895716864'><span style='left:0px;position:absolute;left:0px;
top:-122199px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image582.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'># A tibble: 32 x 11 </span><span
style='font-size:9.0pt;line-height:110%'>mpg cyl disp hp drat
wt qsec vs am gear carb </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>*</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>21.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>160.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>110</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.90</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.620</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>16.46</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>21.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>160.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>110</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.90</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.875</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.02</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>22.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>108.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>93</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.85</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.320</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.61</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>21.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>258.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>110</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.08</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.215</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>19.44</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>360.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>175</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.15</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.440</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.02</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>225.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>105</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2.76</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.460</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>20.22</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>14.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>360.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>245</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.21</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.570</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>15.84</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>24.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>146.7</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.69</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.190</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>20.00</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>22.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>140.8</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>95</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.92</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.150</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>22.90</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>10<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>19.2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>167.6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>123</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.92</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.440</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.30</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:14.25pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># ... with 22 more rows</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>32</span><span style='font-size:9.0pt;line-height:107%'>
  x </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>11</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>The printed output includes a summary of the dimensions of
the table ()</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>It includes the type of each column (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dbl</span>)</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>number</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:135.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>options</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tibble.print_max </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:30.5pt'><span style='position:relative;z-index:-1895715840'><span
style='left:0px;position:absolute;left:566px;top:-122488px;width:7px;
height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image242.gif"></span></span>It
prints a limited number of rows. (To change this use <span style='font-size:
9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>[])</span>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>group_by</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Many functions in the dplyr package work naturally with
tbl_dfs, such as <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618899">Chapter 36: Rcpp</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618900">Section 36.1: Extending
Rcpp with Plugins</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Within C++, one can set different compilation flags using:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image583.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>List of the built-in plugins:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image584.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618901">Section 36.2: Inline Code
Compile</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>cppFunction</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=291 style='width:218.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>evalCpp</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
  <td width=147 valign=top style='width:110.2pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>. A third function called </p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>sourceCpp</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:1.85pt;
margin-bottom:1.85pt;margin-left:.5pt;text-align:right;line-height:110%'>Rcpp
features two functions that enable code compilation inline and exportation
directly into R: and exists to read in C++ code in a separate file though can
be used akin</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>cppFunction</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>to .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Below is an example of compiling a C++ function within <i>R</i>.
Note the use of <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;&quot;</span> to surround the source.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image585.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To quickly understand a C++ expression use:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image586.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618902">Section 36.3: Rcpp
Attributes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Rcpp Attributes makes the process of working with R and C++
straightforward. The form of attributes take:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image587.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The use of attributes is typically associated with:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image588.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>sourceCpp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>that is placed directly above a declared function header
when reading in a C++ file via <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Below is an example of an external C++ file that uses
attributes.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=667
src="R%20Notes%20for%20Professionals_files/image589.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To use this external <i>C++</i> file within <i>R</i>, we do
the following:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=49
src="R%20Notes%20for%20Professionals_files/image590.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=186
src="R%20Notes%20for%20Professionals_files/image591.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618903">Section 36.4: Specifying
Additional Build Dependencies</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rcpp.h</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To use additional packages within the Rcpp ecosystem, the
correct header file may not be but</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rcpp</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;</span><span
  style='font-size:9.0pt;line-height:107%'>PACKAGE</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>&gt;</span><span
  style='font-size:9.0pt;line-height:107%'>.h</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:15.2pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'>(as
<i>e.g.</i> for <a
href="https://cloud.r-project.org/web/packages/RcppArmadillo/index.html"><span
style='color:#2066B9'>RcppArmadillo</span></a>). It typically needs to be
imported and then the dependency is stated</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>within</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image592.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Examples:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image593.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618904">Chapter 37: Random Numbers
Generator</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618905">Section 37.1: Random
permutations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To generate random permutation of 5 numbers:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image594.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To generate random permutation of any vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image595.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=303
src="R%20Notes%20for%20Professionals_files/image596.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618906">Section 37.2: Generating
random numbers using various density functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Below are examples of generating 5 random numbers using
various probability distributions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.05pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Uniform distribution between 0 and 10 </b><span style='font-size:11.0pt;
line-height:109%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image597.gif"></span><b><span
style='font-size:9.0pt;line-height:109%;color:blue'>runif</span></b><span
style='font-size:9.0pt;line-height:109%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:109%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:109%'>, </span><b><span style='font-size:
9.0pt;line-height:109%;color:blue'>min</span></b><span style='font-size:9.0pt;
line-height:109%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:109%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:109%'>, </span><b><span style='font-size:9.0pt;line-height:109%;
color:blue'>max</span></b><span style='font-size:9.0pt;line-height:109%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:109%;
color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:109%;
color:#222222'>)</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Normal
distribution with 0 mean and standard deviation of 1</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image598.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.05pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Binomial distribution with 10 trials and success probability of 0.5 </b><span
style='font-size:11.0pt;line-height:109%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image599.gif"></span><b><span
style='font-size:9.0pt;line-height:109%;color:blue'>rbinom</span></b><span
style='font-size:9.0pt;line-height:109%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:109%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:109%'>, size</span><span style='font-size:
9.0pt;line-height:109%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:109%;color:#CC0A0A'>10</span><span style='font-size:9.0pt;
line-height:109%'>, prob</span><span style='font-size:9.0pt;line-height:109%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:109%;
color:#CC0A0A'>0.5</span><span style='font-size:9.0pt;line-height:109%;
color:#222222'>)</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Geometric
distribution with 0.2 success probability</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image600.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Hypergeometric
distribution with 3 white balls, 10 black balls and 5 draws</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image601.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Negative
Binomial distribution with 10 trials and success probability of 0.8</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image602.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Poisson
distribution with mean and variance (lambda) of 2</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image603.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Exponential
distribution with the rate of 1.5</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image604.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image605.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Chi-squared
distribution with 15 degrees of freedom</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image606.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image607.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image608.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.05pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Cauchy distribution with 0 location and scale of 1 </b><span
style='font-size:11.0pt;line-height:109%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image609.gif"></span><b><span
style='font-size:9.0pt;line-height:109%;color:blue'>rcauchy</span></b><span
style='font-size:9.0pt;line-height:109%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:109%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:109%'>, location</span><span
style='font-size:9.0pt;line-height:109%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:109%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:109%'>, </span><b><span style='font-size:
9.0pt;line-height:109%;color:blue'>scale</span></b><span style='font-size:9.0pt;
line-height:109%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:109%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:109%;color:#222222'>)</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Log-normal
distribution with 0 mean and standard deviation of 1 (on log scale)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image610.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image611.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Wilcoxon distribution with 10 observations in the first sample and 20
in second.</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image612.gif"></span></p>

<h4 style='margin-left:.75pt'>Multinomial distribution with 5 object and 3
boxes using the specified probabilities</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image613.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618907">Section 37.3: Random number
generator's reproducibility</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When expecting someone to reproduce an R code that has
random elements in it, the <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function becomes very handy. For
example, these two lines will always produce different output (because that is
the whole point of random number generators):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image614.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>These two will also produce different outputs:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image615.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>However, if we set the seed to something identical in both
cases (most people use 1 for simplicity), we get two identical samples:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=143
src="R%20Notes%20for%20Professionals_files/image616.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image617.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618908">Chapter 38: Parallel
processing</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618909">Section 38.1: Parallel
processing with parallel package</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>The base package <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>parallel</span> allows parallel computation through
forking, sockets, and random-number generation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Detect the number of cores present on the localhost:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image618.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create a cluster of the cores on the localhost:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image619.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>First, a function appropriate for parallelization must be
created. Consider the <b><span style='font-size:9.0pt;line-height:108%;
color:#333399;background:#FAFAFA'>mtcars</span></b> dataset. A regression on <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg </span>could be
improved by creating a separate regression model for each level of <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image620.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Create a function that can loop through all the possible
iterations of <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>zlevels</span>.
This is still in serial, but is an important step as it determines the exact
process that will be parallelized.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image621.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Curry this function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image622.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Parallel computing using <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>parallel</span> cannot access the global
environment. Luckily, each function creates a local environment <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>parallel</span> can
access. Creation of a wrapper function allows for parallelization. The function
to be applied also needs to be placed within the environment.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=58
src="R%20Notes%20for%20Professionals_files/image623.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=252
src="R%20Notes%20for%20Professionals_files/image624.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Now create a cluster and run the wrapper function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:183.05pt;margin-bottom:
0in;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:155%'><span style='position:relative;z-index:
-1895714816'><span style='left:0px;position:absolute;left:0px;top:-129084px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:155%'>parallelcluster </span><span
style='font-size:9.0pt;line-height:155%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:155%'> parallel</span><span
style='font-size:9.0pt;line-height:155%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:155%'>makeCluster</span><span
style='font-size:9.0pt;line-height:155%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:155%'>parallel</span><span style='font-size:
9.0pt;line-height:155%;color:#666666'>::</span><span style='font-size:9.0pt;
line-height:155%'>detectCores</span><span style='font-size:9.0pt;line-height:
155%;color:#222222'>()) </span><span style='font-size:9.0pt;line-height:155%'>models
</span><span style='font-size:9.0pt;line-height:155%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:155%'> parallel</span><span
style='font-size:9.0pt;line-height:155%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:155%'>parLapply</span><span
style='font-size:9.0pt;line-height:155%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:155%'>parallelcluster,zlevels,
wrapper</span><span style='font-size:9.0pt;line-height:155%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:155%'>datax, datay, dataz</span><span
style='font-size:9.0pt;line-height:155%;color:#222222'>)) </span>Always stop
the cluster when finished.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image625.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>apply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:67.05pt;margin-bottom:
0in;margin-left:.75pt;line-height:146%'>The <span style='font-size:9.0pt;
line-height:146%;background:#FAFAFA'>parallel</span> package includes the
entire <span style='font-size:9.0pt;line-height:146%;color:#222222;background:
#FAFAFA'>()</span> family, prefixed with <b><span style='font-size:9.0pt;
line-height:146%;color:blue;background:#FAFAFA'>par</span></b>.</p>

<h2 style='margin-top:0in;margin-right:67.05pt;margin-bottom:0in;margin-left:
.75pt;line-height:146%'><a name="_Toc618910">Section 38.2: Parallel processing
with foreach package</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>foreach</span> package brings the power of parallel
processing to R. But before you want to use multi core CPUs you have to assign
a multi core cluster. The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>doSNOW</span> package is one possibility.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A simple use of the foreach loop is to calculate the sum of
the square root and the square of all numbers from 1 to 100000.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image626.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>combine</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The structure of the output of <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>foreach</span> is controlled by the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span> argument.
The default output structure is a list. In the code above, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>c</span> is used to
return a vector instead. Note that a calculation function (or operator) such as
<span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;+&quot;
</span>may also be used to perform a calculation and return a further processed
object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>It is important to mention that the result of each
foreach-loop is the last call. Thus, in this example <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>k</span> will be added to the
result.</p>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:.75pt;
margin-left:0in;text-align:left;text-indent:0in'>Parameter Details</h4>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:7.85pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'>combine
Function. Determines how the results of the loop are combined. Possible values
are <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>c</span>,
<b><span style='font-size:9.0pt;line-height:110%;color:blue;background:#FAFAFA'>cbind</span></b>,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:404.7pt;margin-bottom:
1.7pt;margin-left:55.65pt;text-indent:-55.4pt'>.combine <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>rbind</span></b>,
<span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;+&quot;</span>,
<span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;*&quot;</span>...</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'>if <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>TRUE</span> the
result is ordered according to the order of the iteration vairable (here <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>i</span>). If <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>FALSE</span> the
result</p>

<p class=MsoNormal style='margin-top:0in;margin-right:8.65pt;margin-bottom:
0in;margin-left:55.65pt;text-indent:-55.4pt'>.inorder is not ordered. This can
have postive effects on computation time. for functions which are provided by
any package except <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>base</span>, like e.g. <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>mass</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>randomForest</span> or else, you</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;mass&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;randomForest&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:180.8pt;margin-bottom:
0in;margin-left:.75pt'>.packages</p>

<p class=MsoNormal style='margin-top:0in;margin-right:111.55pt;margin-bottom:
0in;margin-left:-.75pt;text-indent:56.4pt;line-height:156%'>have to provide
these packages with <b><span style='font-size:9.0pt;line-height:156%;
color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
line-height:156%;color:#222222;background:#FAFAFA'>()</span></p>

<h2 style='margin-top:0in;margin-right:111.55pt;margin-bottom:0in;margin-left:
-.75pt;text-indent:56.4pt;line-height:156%'><a name="_Toc618911">Section 38.3:
Random Number Generation</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>A major problem with parallelization is the used of RNG as
seeds. Random numbers by the number are iterated by the number of operations
from either the start of the session or the most recent <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>. Since
parallel processes arise from the same function, it can use the same seed,
possibly causing identical results! Calls will run in serial on the different
cores, provide no advantage.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A set of seeds must be generated and sent to each parallel
process. This is automatically done in some packages (<span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>parallel</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>snow</span>, etc.),
but must be explicitly addressed in others.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image627.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Seeds can be also be set for reproducibility.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image628.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618912">Section 38.4: mcparallelDo</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>mcparallelDo</span> package allows for the evaluation of R
code asynchronously on Unix-alike (e.g. Linux and MacOSX) operating systems.
The underlying philosophy of the package is aligned with the needs of
exploratory data analysis rather than coding. For coding asynchrony, consider
the <a href="https://cran.r-project.org/package=future"><span style='font-size:
9.0pt;line-height:108%;color:#2066B9;background:#FAFAFA'>future</span></a>
package.</p>

<h4 style='margin-left:.75pt'>Example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create data</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image629.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Trigger mcparallelDo to perform analysis on a fork</p>

<p class=MsoNormal style='margin-top:0in;margin-right:67.9pt;margin-bottom:
.2pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895713792'><span style='left:0px;position:
absolute;left:0px;top:-130428px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><span
style='font-size:9.0pt;line-height:240%'>mcparallelDo</span><span
style='font-size:9.0pt;line-height:240%;color:#222222'>({</span><b><span
style='font-size:9.0pt;line-height:240%;color:blue'>glm</span></b><span
style='font-size:9.0pt;line-height:240%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:240%'>len ~ supp </span><span
style='font-size:9.0pt;line-height:240%;color:#666666'>*</span><span
style='font-size:9.0pt;line-height:240%'> dose, </span><b><span
style='font-size:9.0pt;line-height:240%;color:blue'>data</span></b><span
style='font-size:9.0pt;line-height:240%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:240%;color:#333399'>ToothGrowth</span></b><span
style='font-size:9.0pt;line-height:240%;color:#222222'>)}</span><span
style='font-size:9.0pt;line-height:240%'>,</span><span style='font-size:9.0pt;
line-height:240%;color:#CC0A0A'>&quot;interactionPredictorModel&quot;</span><span
style='font-size:9.0pt;line-height:240%;color:#222222'>) </span>Do other
things, e.g.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.2pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895712768'><span style='left:0px;position:absolute;left:0px;
top:-130470px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>binaryPredictorModel </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>glm</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>len ~ supp, </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>data</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>ToothGrowth</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>gaussianPredictorModel </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>glm</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>len ~
dose, </span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>data</span></b><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>ToothGrowth</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The result from mcparallelDo returns in your
targetEnvironment, e.g. .GlobalEnv, when it is complete with a message (by
default)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image630.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Other
Examples</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=59
src="R%20Notes%20for%20Professionals_files/image631.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=218
src="R%20Notes%20for%20Professionals_files/image632.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618913">Chapter 39: Subsetting</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:10.0pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Given an R object, we may require separate analysis for one
or more parts of the data contained in it. The process of obtaining these parts
of the data from a given object is called <span style='font-size:9.0pt;
line-height:134%;background:#FAFAFA'>subsetting</span>.</p>

<h2 style='margin-top:0in;margin-right:10.0pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618914">Section 39.1: Data frames</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b>Subsetting a data frame into a smaller data frame</b> can
be accomplished the same as subsetting a list.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=421
src="R%20Notes%20for%20Professionals_files/image633.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Subsetting a dataframe into a column vector</b> can be
accomplished using double brackets [[ ]] or the dollar sign operator $.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image634.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Subsetting a data as a two dimensional matrix</b> can be accomplished
using <span style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>i</span>
and <span style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>j</span>
terms.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=59
src="R%20Notes%20for%20Professionals_files/image635.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=252
src="R%20Notes%20for%20Professionals_files/image636.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note: Subsetting by <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>j</span> (column) alone simplifies to the variable's
own type, but subsetting by <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>i</span> alone returns a</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:54.5pt'>, as the different variables may have different types and
classes. Setting the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>drop</span></b> parameter to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>keeps the data frame.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image637.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618915">Section 39.2: Atomic
vectors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Atomic vectors (which excludes lists and expressions, which
are also vectors) are subset using the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>[</span> operator:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image638.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[</span> operator can also take a vector as the argument.
For example, to select the first and third elements:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image639.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>v1</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>v1</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Some times we may require to omit a particular value from
the vector. This can be achieved using a negative sign(<span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>-</span>) before the index of that
value. For example, to omit to omit the first value from v1, use <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>.
This can be extended to more than one value in a straight forward way. For
example, <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>-</span><b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>c</span></b><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>,</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)]</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image640.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>On some occasions, we would like to know, especially, when
the length of the vector is large, index of a particular value, if it exists:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image641.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If the atomic vector has names (a <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>names</span></b>
attribute), it can be subset using a character vector of names:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image642.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[[</span> operator can also be used to index atomic
vectors, with differences in that it accepts a indexing vector with a length of
one and strips any names present:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image643.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.8pt;
margin-left:.75pt'>Vectors can also be subset using a logical vector. In
contrast to subsetting with numeric and character vectors, the logical vector
used to subset has to be equal to the length of the vector whose elements are
extracted, so if a logical vector <span style='font-size:11.0pt;line-height:
108%'><img border=0 width=721 height=271
src="R%20Notes%20for%20Professionals_files/image644.gif"></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y</span> is used to
subset <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>,
i.e. <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>,
if </p>

<h2 style='margin-left:-.25pt'><a name="_Toc618916">Section 39.3: Matrices</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>i, j</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For each dimension of an object, the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>[</span> operator takes one
argument. Vectors have one dimension and take one argument. Matrices and data
frames have two dimensions and take two arguments, given as <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[]</span>
where <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>i</span>
is the row and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>j</span>
is the column. Indexing starts at 1.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=53
src="R%20Notes%20for%20Professionals_files/image645.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="R%20Notes%20for%20Professionals_files/image646.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mat</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>i,j</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>]</span> is the element in the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>i</span>-th row, <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>j</span>-th column of the matrix <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mat</span>. For
example, an <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>i</span>
value of <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>2</span>
and a <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>j</span>
value of <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>1</span>
gives the number in the second row and the first column of the matrix. Omitting
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>i</span> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>j</span> returns
all values in that dimension.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image647.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When the matrix has row or column names (not required),
these can be used for subsetting:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image648.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>drop</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>By default, the result of a subset will be simplified if
possible. If the subset only has one dimension, as in the examples above, the
result will be a one-dimensional vector rather than a two-dimensional matrix.
This default can be overridden with the argument to <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>[</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image649.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Of course, dimensions cannot be dropped if the selection
itself has two dimensions:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image650.gif"></span></p>

<h4 style='margin-left:.75pt'>Selecting individual matrix entries by their
positions</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>1st </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>row</span></b><span
  style='font-size:9.0pt;line-height:107%'>, 1st column</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>1st </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>row</span></b><span
  style='font-size:9.0pt;line-height:107%'>, 3rd</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is also possible to use a Nx2 matrix to select N
individual elements from a matrix (like how a coordinate system works). If you
wanted to extract, in a vector, the entries of a matrix in the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=374 style='width:3.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>column</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>2nd </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>row</span></b><span
  style='font-size:9.0pt;line-height:107%'>, 3rd column</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>2nd </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>row</span></b><span
  style='font-size:9.0pt;line-height:107%'>, 1st column</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span> this can be done easily by creating a index matrix
with those coordinates and using that to subset the matrix:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image651.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=120
src="R%20Notes%20for%20Professionals_files/image652.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:33.0pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>In the above example, the 1st column of the <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>ind</span> matrix
refers to rows in <span style='font-size:9.0pt;line-height:134%;background:
#FAFAFA'>mat</span>, the 2nd column of <span style='font-size:9.0pt;line-height:
134%;background:#FAFAFA'>ind</span> refers to columns in <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>mat</span>.</p>

<h2 style='margin-top:0in;margin-right:33.0pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618917">Section 39.4: Lists</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=500
src="R%20Notes%20for%20Professionals_files/image653.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>l1</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note the result of <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>2</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
is still a list, as the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[</span> operator selects elements of a list, returning a
smaller list. The <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>[[ </span>operator extracts list elements, returning an object of the
type of the list element.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=216
src="R%20Notes%20for%20Professionals_files/image654.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="R%20Notes%20for%20Professionals_files/image655.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Compared to:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image656.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>which is equivalent to:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image657.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>$</span> operator allows you to select list elements solely
by name, but unlike <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>[</span> and <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>[[</span>, does not require quotes. As an infix operator, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span> can only
take a single name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image658.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Also, the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>$</span> operator allows for partial matching by default:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image659.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>in contrast with <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>[[</span> where it needs to be specified whether
partial matching is allowed:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image660.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=266 style='width:199.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>options</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=166 valign=top style='width:124.2pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>warnPartialMatchDollar </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Setting <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>)</span>, a &quot;warning&quot; is given when
partial matching happens with <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>$</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image661.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618918">Section 39.5: Vector
indexing</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For this example, we will use the vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image662.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R vectors are 1-indexed, so for example <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will return <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>11</span>.
We can also extract a sub-vector of <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>x</span> by passing a vector of indices to the bracket
operator:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image663.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If we pass a vector of negative indices, R will return a
sub-vector with the specified indices excluded:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image664.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We can also pass a boolean vector to the bracket operator,
in which case it returns a sub-vector corresponding to the coordinates where
the indexing vector is <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>TRUE</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image665.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If the indexing vector is shorter than the length of the
array, then it will be repeated, as in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image666.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618919">Section 39.6: Other objects</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[</span> and <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[[</span> operators are primitive functions that are
generic. This means that any <i>object</i> in R (specifically</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>isTRUE</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.object</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>(</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>))</span> --i.e. has an explicit
&quot;class&quot; attribute) can have its own specified behaviour when
subsetted; i.e. has its own <i>methods</i> for <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>[</span> and/or <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>[[</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=417 style='width:312.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.object</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>iris</span></b></p>
  </td>
  <td width=119 valign=top style='width:89.55pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span>) objects where <span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>[</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>frame</span></p>
  </td>
  <td width=52 valign=top style='width:39.25pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and <span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>[[</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>frame</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>frame</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For example, this is the case with &quot;data.frame&quot; (
methods are defined and they are made to exhibit both &quot;matrix&quot;-like
and &quot;list&quot;-like subsetting. With forcing an error when subsetting a
&quot;data.frame&quot;, we see that, actually, a function <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span> was called
when we -just- used <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>[</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image667.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Without further details on the current topic, an example<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[</span> method:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=191
src="R%20Notes%20for%20Professionals_files/image668.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=135 style='width:101.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>subset</span></p>
  </td>
  <td width=42 valign=top style='width:31.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>(and <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>subset2</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We can overcome the method dispatching of <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[</span> by using
the equivalent non-generic <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.</span> for <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[[</span>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>unclass</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:38.05pt;text-indent:-37.8pt'>This is especially useful and
efficient when programming our own &quot;class&quot;es and want to avoid
work-arounds (like <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>(</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>)</span>) when computing on our
&quot;class&quot;es efficiently (avoiding method dispatch and copying objects):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image669.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618920">Section 39.7: Elementwise
Matrix Operations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.55pt;
margin-left:.75pt'>Let A and B be two matrices of same dimension. The operators
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>+</span>,<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>-</span>,<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>/</span>,<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>*</span>,<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>^</span> when used
with matrices of same dimension perform the required operations on the
corresponding elements of the matrices and return a new matrix of the same
dimension. These operations are usually referred to as element-wise operations.</p>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;
margin-left:0in;text-align:left;text-indent:0in'>Operator A op B Meaning</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>+ A + B Addition
of corresponding elements of A and B</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>- A - B Subtracts
the elements of B from the corresponding elements of A</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>/ A / B Divides
the elements of A by the corresponding elements of B</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>* A * B Multiplies
the elements of A by the corresponding elements of B</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in'>^ A^(-1) For
example, gives a matrix whose elements are reciprocals of A</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>A </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>%*%</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:9.4pt;margin-bottom:1.7pt;
margin-left:.75pt'>For &quot;true&quot; matrix multiplication, as seen in <i>Linear
Algebra</i>, use <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>%*%</span>. For example, multiplication of A with B is: </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=199 style='width:149.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>ncol</span></b></p>
  </td>
  <td width=142 valign=top style='width:106.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> of <span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>A</span> be the same as </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>nrow</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>B</span>. The dimensional requirements are that the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
of <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>B</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
.75pt'>Some Functions used with Matrices Function Example Purpose</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:219.5pt;margin-bottom:
0in;margin-left:.75pt;line-height:141%'>nrow() nrow(A) determines the
number of rows of A ncol() ncol(A) determines the number of
columns of A</p>

<p class=MsoNormal style='margin-top:0in;margin-right:174.2pt;margin-bottom:
0in;margin-left:.75pt'>rownames() rownames(A) prints out the row names of the
matrix A colnames() colnames(A) prints out the column
names of the matrix A rowMeans() rowMeans(A) computes means of each row of the
matrix A</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=573
 style='width:430.05pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.65pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>colMeans()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>colMeans(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>computes
  means of each column of the matrix A</p>
  </td>
 </tr>
 <tr style='height:33.5pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>upper.tri()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>upper.tri(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:42.0pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'>returns a vector whose
  elements are the upper triangular matrix of square matrix A</p>
  </td>
 </tr>
 <tr style='height:33.5pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>lower.tri()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>lower.tri(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin-top:0in;margin-right:44.05pt;margin-bottom:
  0in;margin-left:0in;text-indent:0in;line-height:107%'>returns a vector whose
  elements are the lower triangular matrix of square matrix A</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>det()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>det(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>results
  in the determinant of the matrix A</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>solve()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>solve(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>results
  in the inverse of the non-singular matrix A</p>
  </td>
 </tr>
 <tr style='height:33.5pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>diag()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>diag(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:33.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>returns
  a diagonal matrix whose off-diagnal elemts are zeros and diagonals are the
  same as that of the square matrix A</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>t()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>t(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>returns
  the the transpose of the matrix A</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>eigen()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>eigen(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>retuens
  the eigenvalues and eigenvectors of the matrix A</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>is.matrix()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>is.matrix(A)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>returns TRUE or FALSE depending on whether
  A is a matrix or not.</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=78 valign=top style='width:58.45pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>as.matrix()</p>
  </td>
  <td width=86 valign=top style='width:.9in;padding:0in 0in 0in 0in;height:
  13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>as.matrix(x)</p>
  </td>
  <td width=409 valign=top style='width:306.85pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>creates
  a matrix out of the vector x</p>
  </td>
 </tr>
</table>

<h1 style='margin-left:-.25pt'><a name="_Toc618921">Chapter 40: Debugging</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618922">Section 40.1: Using debug</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can set any function for debugging with <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>debug</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image670.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>All subsequent calls to the function will enter debugging
mode. You can disable this behavior with <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>undebug</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image671.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If you know you only want to enter the debugging mode of a
function once, consider the use of <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>debugonce</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image672.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618923">Section 40.2: Using browser</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>browser</span></b> function can be used like a
breakpoint: code execution will pause at the point it is called. Then user can
then inspect variable values, execute arbitrary R code and step through the
code line by line.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>browser</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Once <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> is hit in the code the interactive
interpreter will start. Any R code can be run as normal, and in addition the
following commands are present,</p>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;
margin-left:0in;text-align:left;text-indent:0in'>Command Meaning</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:184.5pt;margin-bottom:
11.2pt;margin-left:.75pt;line-height:141%'>c Exit browser and
continue program f Finish current loop or function \ n Step
Over (evaluate next statement, stepping over function calls) s Step
Into (evaluate next statement, stepping into function calls) where Print
stack trace r Invoke &quot;resume&quot; restart Q Exit browser and quit</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For example we might have a script like,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image673.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When running the above script we initially see something
like,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image674.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We could then interact with the prompt as so,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=340
src="R%20Notes%20for%20Professionals_files/image675.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image676.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618924">Chapter 41: Installing
packages</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>repos </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>NULL</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:43.95pt;margin-bottom:
1.7pt;margin-left:22.75pt;text-indent:-15.25pt;line-height:130%'><b>Parameter Details
</b>pkgs character vector of the names of packages. If , a character
vector of file paths. lib character vector giving the library directories
where to install the packages.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:15.2pt;text-indent:5.05pt;line-height:142%'>repos character
vector, the base URL(s) of the repositories to use, can be <span
style='font-size:9.0pt;line-height:142%;background:#FAFAFA'>NULL</span> to
install from local files method download method</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>repos </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>NULL</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:9.35pt;margin-bottom:
0in;margin-left:.25pt;text-indent:16.2pt'>destdir directory where
downloaded packages are stored logical indicating whether to also install
uninstalled packages which these packages depend on/link dependencies</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:3.75pt;
margin-left:69.9pt'>to/import/suggest (and so on recursively). Not used if .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:69.9pt'>Arguments to be passed to <span style='font-family:"Arial",sans-serif'></span>download.file<span
style='font-family:"Arial",sans-serif'></span> or to the functions for binary
installs on OS X and</p>

<p class=MsoNormal style='margin-top:0in;margin-right:423.85pt;margin-bottom:
21.4pt;margin-left:69.4pt;text-indent:-39.8pt'>... Windows.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618925">Section 41.1: Install
packages from GitHub</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To install packages directly from GitHub use the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>devtools</span>
package:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image677.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To install <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>ggplot2</span> from github:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image678.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:23.35pt;margin-bottom:
10.9pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:168%'><span style='position:relative;z-index:-1895711744'><span
style='left:0px;position:absolute;left:0px;top:-140167px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image679.gif"></span></span>The
above command will install the version of <span style='font-size:9.0pt;
line-height:168%;background:#FAFAFA'>ggplot2</span> that corresponds to the <i>master</i>
branch. To install from a different branch of a repository use the <span
style='font-size:9.0pt;line-height:168%;background:#FAFAFA'>ref</span> argument
to provide the name of the branch. For example, the following command will
install the <span style='font-size:9.0pt;line-height:168%;background:#FAFAFA'>dev_general</span>
branch of the <span style='font-size:9.0pt;line-height:168%;background:#FAFAFA'>googleway</span>
package. <span style='font-size:9.0pt;line-height:168%'>devtools</span><span
style='font-size:9.0pt;line-height:168%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:168%'>install_github</span><span
style='font-size:9.0pt;line-height:168%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:168%;color:#CC0A0A'>&quot;SymbolixAU/googleway&quot;</span><span
style='font-size:9.0pt;line-height:168%'>, ref </span><span style='font-size:
9.0pt;line-height:168%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:168%'> </span><span style='font-size:9.0pt;line-height:168%;
color:#CC0A0A'>&quot;dev_general&quot;</span><span style='font-size:9.0pt;
line-height:168%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Another option is to use the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>ghit</span> package. It provides a
lightweight alternative for installing packages from github:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image680.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To install a package that is in a <b>private</b> repository
on Github, generate a <b>personal access token</b> at <a
href="http://www.github.com/settings/tokens/"><span style='color:#2066B9'>http://www.github.com/settings/tokens/</span></a>
(See ?install_github for documentation on the same). Follow these steps:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:19.85pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=692 height=173
src="R%20Notes%20for%20Professionals_files/image681.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:19.85pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=692 height=86
src="R%20Notes%20for%20Professionals_files/image682.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:30.0pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=678 height=21
src="R%20Notes%20for%20Professionals_files/image683.gif"></span></p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:15.3pt;
margin-bottom:13.95pt;margin-left:6.25pt;text-align:center;line-height:103%'>This
prevents the common error: &quot;Peer certificate cannot be authenticated with
given CA certificates&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:3.3pt;
margin-left:16.6pt'>6. Finally, use the following command to install your
package seamlessly</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.45pt;
margin-left:30.0pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=678 height=26
src="R%20Notes%20for%20Professionals_files/image684.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Alternatively, set an environment variable <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>GITHUB_PAT</span>,
using</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image685.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:20.55pt;margin-bottom:
18.45pt;margin-left:.75pt'>The PAT generated in Github is only visible once,
i.e., when created initially, so its prudent to save that token in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>. This is
also helpful if the organisation has many private repositories.</p>

<h2 style='margin-top:0in;margin-right:4.55pt;margin-bottom:2.7pt;margin-left:
-.25pt'><a name="_Toc618926">Section 41.2: Download and install packages from
repositories</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Packages are collections of R functions, data, and compiled
code in a <a href="http://r-pkgs.had.co.nz/description.html"><span
style='color:#2066B9'>well-defined format</span></a>. Public (and private)
repositories are used to host collections of R packages. The largest collection
of R packages is available from CRAN.</p>

<h4 style='margin-left:.75pt'>Using CRAN</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A package can be installed from <a
href="https://cran.r-project.org/"><span style='color:#2066B9'>CRAN</span></a>
using following code:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image686.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Where <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>&quot;dplyr&quot;</span> is referred to as a
character vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>More than one packages can be installed in one go by using
the combine function <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>c</span></b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> and passing a
series of character vector of package names:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image687.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>install.packages</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>getOption</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;repos&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:71.1pt;margin-bottom:
1.7pt;margin-left:92.05pt;text-indent:-91.8pt'>In some cases, may prompt for a
CRAN mirror or fail, depending on the value of <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span>. To prevent this,
specify a <a href="https://cran.r-project.org/mirrors.html"><span
style='color:#2066B9'>CRAN mirror</span></a> as <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>repos</span> argument:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image688.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>install.packages</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Using the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>repos</span> argument it is also possible to install from
other repositories. For complete information about all the available options,
run <span style='font-size:9.0pt;line-height:108%;color:#666666;background:
#FAFAFA'>?</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Most packages require functions, which were implemented in
other packages (e.g. the package ). In order to install a package (or multiple
packages) with all the packages, which are used by this given package, the
argument <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dependencies</span>
should be set to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image689.gif"></span></p>

<h4 style='margin-left:.75pt'>Using Bioconductor</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><a href="https://www.bioconductor.org/"><span
style='color:#2066B9'>Bioconductor</span></a> hosts a substantial collection of
packages related to Bioinformatics. They provide their own package management
centred around the <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>biocLite</span> function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image690.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>By default this installs a subset of packages that provide
the most commonly used functionality. Specific packages can be installed by
passing a vector of package names. For example, to install <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>RImmPort</span>
from Bioconductor:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image691.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618927">Section 41.3: Install
package from local source</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To install package from local source file:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image692.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Here, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>path_to_source</span> is absolute path of local source
file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Another command that opens a window to choose downloaded zip
or tar.gz source files is:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image693.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Another possible way is using the <i>GUI based RStudio</i>:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Step 1:</b> Go to <b>Tools</b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Step 2:</b> Go to <b>Install Packages</b>.</p>

<h4 style='margin-left:.75pt'>Step 3:<span style='font-weight:normal'> In the <i>Install
From</i> set it as </span>Package Archive File (.zip; .tar.gz)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
12.9pt;margin-left:-.25pt;line-height:107%'><b>Step 4:</b> Then <i>Browse</i>
find your package file (say crayon_1.3.1.zip) and <i>after some time (after it
shows the <b>Package path and file name</b> in the Package Archive tab)</i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>install_local</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Another way to install R package from local source is using <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function from devtools package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image694.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618928">Section 41.4: Install local
development version of a package</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>While working on the development of an R package it is often
necessary to install the latest version of the package. This can be achieved by
first building a source distribution of the package (on the command line)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image695.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>and then installing it in R. Any running R sessions with
previous version of the package loaded will need to reload it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image696.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A more convenient approach uses the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>devtools</span> package to simplify
the process. In an R session with the working directory set to the package
directory</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image697.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.75pt;
margin-left:.75pt'>will build, install and reload the package.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618929">Section 41.5: Using a CLI
package manager -- basic pacman usage</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>pacman</span> is a simple package manager for R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>pacman</span> allows a user to compactly load all desired packages,
installing any which are missing (and their dependencies), with a single
command, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>p_load</span>.
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pacman</span>
does not require the user to type quotation marks around a package name. Basic
usage is as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image698.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>install.packages</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The only package requiring a <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>library</span></b>, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>require</span></b>,
or statement with this approach is <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>pacman</span> itself:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image699.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>or, equally valid:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image700.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>In addition to saving time by requiring less code to manage
packages, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pacman</span>
also facilitates the construction of reproducible code by installing any needed
packages if and only if they are not already installed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Since you may not be sure if <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>pacman</span> is installed in the library
of a user who will use your code (or by yourself in future uses of your own
code) a best practice is to include a conditional statement to install <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pacman</span> if it
is not already loaded:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image701.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618930">Chapter 42: Inspecting
packages</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>Packages build on base R. This document explains how to inspect installed
packages and their functionality. Related Docs: Installing packages</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618931">Section 42.1: View Package Version</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Conditions: package should be at least installed. If not
loaded in the current session, not a problem.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=129
src="R%20Notes%20for%20Professionals_files/image702.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618932">Section 42.2: View Loaded
packages in Current Session</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To check the list of loaded packages</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image703.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>OR</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image704.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618933">Section 42.3: View package
information</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To retrieve information about dplyr package and its
functions' descriptions:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image705.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:135.25pt;margin-bottom:
0in;margin-left:-.25pt;line-height:145%'>No need to load the package first.</p>

<h2 style='margin-top:0in;margin-right:135.25pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc618934">Section 42.4: View package's
built-in data sets</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To see built-in data sets from package dplyr</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image706.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:114.75pt;margin-bottom:
0in;margin-left:-.25pt;line-height:145%'>No need to load the package first.</p>

<h2 style='margin-top:0in;margin-right:114.75pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc618935">Section 42.5: List a package's
exported functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To get the list of functions within package dplyr, we first
must load the package:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image707.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618936">Chapter 43: Creating
packages with devtools</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:70.9pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>This topic will cover the creation of R
packages from scratch with the devtools package.</p>

<h2 style='margin-top:0in;margin-right:70.9pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618937">Section 43.1: Creating and
distributing packages</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>This is a <i>compact guide</i> about how to quickly create
an R package from your code. Exhaustive documentations will be linked when
available and should be read if you want a deeper knowledge of the situation.
See <i>Remarks</i> for more resources.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:27.95pt;
margin-left:.75pt'>The directory where your code stands will be referred as <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>./</span>, and all
the commands are meant to be executed from a R prompt in this folder.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Creation of the
documentation</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>The documentation for your code has to be in a format which
is very similar to LaTeX.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>However, we will use a tool named <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>roxygen</span> in order to simplify
the process:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image708.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The full man page for roxygen is available <a
href="https://docs.google.com/viewer?docex=1&amp;url=http://roxygen.org/roxygen2-manual.pdf"><span
style='color:#2066B9'>here</span></a>. It is very similar to <i>doxygen</i>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here is a practical sample about how to document a function
with <i>roxygen</i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=355
src="R%20Notes%20for%20Professionals_files/image709.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.9pt;
margin-left:-.25pt;line-height:110%'>And <a
href="https://i.stack.imgur.com/qTbT4.png"><span style='color:#2066B9'>here
will be the result</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is also recommanded to create a vignette (see the topic <i>Creating
vignettes</i>), which is a full guide about your package.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Construction of the
package skeleton</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=168 style='width:125.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>script1.</span></p>
  </td>
  <td width=52 valign=top style='width:39.25pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>R</span> and <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>script2.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>Assuming that your code is written for instance in files <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>/</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span>, launch
the following command in order to create the file tree of your package:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.3pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895710720'><span style='left:0px;position:absolute;left:0px;top:-144985px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>package.skeleton</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>name</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;MyPackage&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, code_files</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;script1.R&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;script2.R&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MyPackage</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>man</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Then delete all the files in <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>//</span>. You have now to
compile the documentation:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image710.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:27.95pt;
margin-left:.75pt'>You should also generate a reference manual from your
documentation using <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>R CMD Rd2pdf MyPackage</span> from a <i>command prompt</i> started in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>./</span>.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Edition of the package
properties 1. Package description</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MyPackage</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DESCRIPTION</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Modify <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>/</span> according to your needs. The fields <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Package</span>, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Version</span></b>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>License</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Description</span>,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>Title</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Author</span> and <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>Maintainer</span> are mandatory, the other are
optional.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
12.9pt;margin-left:-.25pt;line-height:107%'><i>If your package depends on
others packages, specify them in a field named </i><i><span style='font-size:
9.0pt;line-height:107%;background:#FAFAFA'>Depends</span> (R version &lt;
3.2.0) or </i><i><span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>Imports</span>
(R version &gt; 3.2.0).</i></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>2. Optional folders</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=199 style='width:149.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MyPackage</span></p>
  </td>
  <td width=113 valign=top style='width:84.6pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span> only had <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>R/</span> and </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>man</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Once you launched the skeleton build, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>//</span>
subfolders. However, it can have some others:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=430 style='width:322.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>RData</span></p>
  </td>
  <td width=291 valign=top style='width:218.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>extension, and you can load it at runtime
  with </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://www.rdocumentation.org/packages/utils/versions/3.4.1/topics/data"><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>data</span></b></a></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://www.rdocumentation.org/packages/utils/versions/3.4.1/topics/data"><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>(</span></a><a
  href="https://www.rdocumentation.org/packages/utils/versions/3.4.1/topics/data"><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>)</span></a>
  and </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://www.rdocumentation.org/packages/base/versions/3.4.1/topics/load"><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>load</span></b></a></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tests</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>src</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>exec</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>misc</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>/</span>:
here you can place the data that your library needs and that isn't code. It
must be saved as dataset with the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>.</span><a
href="https://www.rdocumentation.org/packages/base/versions/3.4.1/topics/load"><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span></a><a
href="https://www.rdocumentation.org/packages/base/versions/3.4.1/topics/load"><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span></a></p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#666666;background:#FAFAFA'>/</span>:
all the code files in this folder will be ran at install time. If there is any
error, the installation will fail.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>/</span>: for C/C++/Fortran source files you need (using <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Rcpp</span>...).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>/</span>: for other executables.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:25.4pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>/</span>: for barely everything else.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Finalization and build</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=202 style='width:151.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MyPackage</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Read</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>and</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>delete</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>me</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>You can delete <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>/</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>As it is now, your package is ready to be installed.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>devtools</span><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>::</span><span style='font-size:9.0pt;line-height:107%'>install</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;MyPackage&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>You can install it with <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To build your package as a source tarball, you need to
execute the following command, from a <i>command prompt</i> in</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:28.75pt;
margin-left:.75pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>./</span> : <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>R CMD build MyPackage</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Distribution of your
package Through Github</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MyPackage</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Simply create a new repository called <i>MyPackage</i> and
upload everything in <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>/</span> to the master branch. Here is <a
href="https://github.com/klutometis/roxygen"><span style='color:#2066B9'>an
example</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Then anyone can install your package from github with
devtools:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image711.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Through CRAN</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Your package needs to comply to the <a
href="https://www.rdocumentation.org/packages/base/versions/3.4.1/topics/load"><span
style='color:#2066B9'>CRAN Repository Policy</span></a>. Including but not
limited to: your package must be cross-platforms (except some very special
cases), it should pass the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>R CMD check</span> test.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.75pt;
margin-left:.75pt'>Here is the <a href="https://cran.r-project.org/submit.html"><span
style='color:#2066B9'>submission form</span></a>. You must upload the source
tarball.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:13.7pt;margin-left:
-.25pt'><a name="_Toc618938">Section 43.2: Creating vignettes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:24.05pt;margin-bottom:
23.85pt;margin-left:24.5pt'><img width=3 height=1
src="R%20Notes%20for%20Professionals_files/image578.gif" align=left hspace=12>A
vignette is a long-form guide to your package. Function documentation is great
if you know the name of the function you need, but it<span style='font-family:
"Arial",sans-serif'></span>s useless otherwise. A vignette is like a book
chapter or an academic paper: it can describe the problem that your package is
designed to solve, and then show the reader how to solve it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Vignettes will be created entirely in markdown.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image712.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>vignettes</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>MyVignette.Rmd</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>You can now edit your vignette at <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>/</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The text in your vignette is formatted as <a
href="https://daringfireball.net/projects/markdown/syntax"><span
style='color:#2066B9'>Markdown</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The only addition to the original Markdown, is a tag that
takes R code, runs it, captures the output, and translates it into formatted
Markdown:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image713.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Will display as:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image714.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DESCRIPTION</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Thus, all the packages you will use in your vignettes must
be listed as dependencies in <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>.</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>/</span>.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618939">Chapter 44: Using pipe
assignment in your own package %&lt;&gt;%: How to ?</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:10.5pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>In order to use the pipe in a user-created package, it must
be listed in the NAMESPACE like any other function you choose to import.</p>

<h2 style='margin-top:0in;margin-right:10.5pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618940">Section 44.1: Putting the pipe in a utility-functions file</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=107 style='width:80.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>zzz.R</span></p>
  </td>
  <td width=20 valign=top style='width:15.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>utils.R</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:80.35pt;text-indent:-80.1pt'>One option for doing this is to export
the pipe from within the package itself. This may be done in the 'traditional'
files that many packages utilise for useful little functions that are not
exported as part of the</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>package. For example, putting:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image715.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618941">Chapter 45: Arima Models</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618942">Section 45.1: Modeling an
AR1 Process with Arima</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We will model the process</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=257
src="R%20Notes%20for%20Professionals_files/image716.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=629 id="Picture 39407"
src="R%20Notes%20for%20Professionals_files/image717.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We will fit an Arima model with autoregressive order 1, 0
degrees of differencing, and an MA order of 0.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=306
src="R%20Notes%20for%20Professionals_files/image718.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice that our coefficient is close to the true value from
the generated data</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image719.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=629 id="Picture 39474"
src="R%20Notes%20for%20Professionals_files/image720.jpg"></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image721.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=629 id="Picture 39492"
src="R%20Notes%20for%20Professionals_files/image722.jpg"></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=385
src="R%20Notes%20for%20Professionals_files/image723.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image724.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=629 id="Picture 39632"
src="R%20Notes%20for%20Professionals_files/image725.jpg"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618943">Chapter 46: Distribution
Functions</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Distributions</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:145%'>R has many built-in functions to work with
probability distributions, with official docs starting at <span
style='font-size:9.0pt;line-height:145%;color:#666666;background:#FAFAFA'>?</span>.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;margin-left:.75pt;
line-height:145%'><a name="_Toc618944">Section 46.1: Normal distribution</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>norm</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's use <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>*</span> as an example. From the
documentation:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image726.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>So if I wanted to know the value of a standard normal
distribution at 0, I would do</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image727.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Which gives us <span style='font-size:9.0pt;line-height:
108%;color:#CC0A0A;background:#FAFAFA'>0.3989423</span>, a reasonable answer.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>pnorm</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>qnorm</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>.5</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:3.8pt;margin-bottom:.15pt;
margin-left:.75pt;line-height:217%'>In the same way <span style='font-size:
9.0pt;line-height:217%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:217%;color:#CC0A0A;background:#FAFAFA'>0</span><span
style='font-size:9.0pt;line-height:217%;color:#222222;background:#FAFAFA'>)</span>
gives <span style='font-size:9.0pt;line-height:217%;background:#FAFAFA'>.5</span>.
Again, this makes sense, because half of the distribution is to the left of 0. <b><span
style='font-size:9.0pt;line-height:217%;color:blue;background:#FAFAFA'>qnorm</span></b>
will essentially do the opposite of <b><span style='font-size:9.0pt;line-height:
217%;color:blue;background:#FAFAFA'>pnorm</span></b>. <span style='font-size:
9.0pt;line-height:217%;color:#222222;background:#FAFAFA'>)</span> gives <span
style='font-size:9.0pt;line-height:217%;background:#FAFAFA'>0</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Finally, there's the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>rnorm</span></b> function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image728.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Will generate 10 samples from standard normal.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.9pt;
margin-left:.75pt'>If you want to change the parameters of a given
distribution, simply change them like so</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rnorm</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:107%'>,
  </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>mean</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>4</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>sd</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:242.85pt;margin-bottom:
0in;margin-left:-.25pt;line-height:142%'><span style='position:relative;
z-index:-1895707648'><span style='left:0px;position:absolute;left:151px;
top:-151680px;width:7px;height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image729.gif"></span></span><span
style='font-size:9.0pt;line-height:142%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:142%'> </span><span style='font-size:9.0pt;
line-height:142%;color:#CC0A0A;background:#FAFAFA'>3</span><span
style='font-size:9.0pt;line-height:142%;color:#222222;background:#FAFAFA'>)</span></p>

<h2 style='margin-top:0in;margin-right:242.85pt;margin-bottom:0in;margin-left:
-.25pt;line-height:142%'><a name="_Toc618945">Section 46.2: Binomial
Distribution</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>We now illustrate the functions <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>dbinom</span></b>,<b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>pbinom</span></b>,<b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>qbinom</span></b>
and <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>rbinom</span></b> defined for <i>Binomial distribution</i>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dbinom</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.4pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>The <span style='font-size:9.0pt;line-height:134%;color:#222222;
background:#FAFAFA'>()</span> function gives the probabilities for various
values of the binomial variable. Minimally it requires three arguments. The
first argument for this function must be a vector of quantiles(the possible
values of the random variable <span style='font-size:9.0pt;line-height:134%;
background:#FAFAFA'>X</span>). The second and third arguments are the <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>defining parameters</span>
of the distribution, namely, <span style='font-size:9.0pt;line-height:134%;
background:#FAFAFA'>n</span>(the number of independent trials) and <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>p</span>(the
probability of success in each trial). For example, for a binomial distribution
with <span style='font-size:11.0pt;line-height:134%'><img border=0 width=718
height=193 src="R%20Notes%20for%20Professionals_files/image730.gif"></span><span
style='font-size:9.0pt;line-height:134%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:134%'> </span><span style='font-size:9.0pt;
line-height:134%;color:#CC0A0A;background:#FAFAFA'>5</span>, </p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The binomial probability distribution plot can be displayed
as in the following figure:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=466
src="R%20Notes%20for%20Professionals_files/image731.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>p </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>0.5</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that the binomial distribution is symmetric when . To
demonstrate that the binomial distribution is negatively skewed when <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>p</span> is larger
than <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:
#FAFAFA'>0.5</span>, consider the following example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=433
src="R%20Notes%20for%20Professionals_files/image732.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>p</span> is smaller than <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>0.5</span> the binomial
distribution is positively skewed as shown below.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=433
src="R%20Notes%20for%20Professionals_files/image733.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>pbinom</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>X </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;=</span><span
  style='font-size:9.0pt;line-height:107%'> x </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We will now illustrate the usage of the cumulative
distribution function <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>. This function can be used to calculate
probabilities such as <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>P</span><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>. The first argument to this function is a vector
of quantiles(values of x).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image734.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The above probability can also be obtained as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image735.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=107
src="R%20Notes%20for%20Professionals_files/image736.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Presenting the binomial distribution in the form of a table:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=165
src="R%20Notes%20for%20Professionals_files/image737.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=153
src="R%20Notes%20for%20Professionals_files/image738.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rbinom</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> is used to generate random samples
of specified sizes with a given parameter values.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=466
src="R%20Notes%20for%20Professionals_files/image739.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618946">Chapter 47: Shiny</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618947">Section 47.1: Create an app</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Shiny is an <a
href="https://cran.r-project.org/web/packages/shiny/index.html"><span
style='color:#2066B9'>R</span></a> package developed by <a
href="https://www.rstudio.com/home/"><span style='color:#2066B9'>RStudio</span></a>
that allows the creation of web pages to interactively display the results of
an analysis in R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>There are two simple ways to create a Shiny app:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=110 style='width:82.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ui.</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>R</span> and </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>server.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:362.8pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>in
one <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.R</span>
file, or in two files: <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>R</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=367
src="R%20Notes%20for%20Professionals_files/image740.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=165
src="R%20Notes%20for%20Professionals_files/image741.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image742.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618948">Section 47.2: Checkbox
Group</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Create a group of checkboxes that can be used to toggle
multiple choices independently. The server will receive the input as a
character vector of the selected values.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=62
src="R%20Notes%20for%20Professionals_files/image743.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=423
src="R%20Notes%20for%20Professionals_files/image744.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>It's possible to change the settings :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:232.05pt;margin-bottom:
12.65pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>label
: title choices : selected values selected : The initially selected value (NULL
for no selection) inline : horizontal or vertical width</p>

<p class=MsoNormal style='margin-top:0in;margin-right:308.9pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>It is also possible to add HTML.</p>

<h2 style='margin-top:0in;margin-right:308.9pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618949">Section 47.3: Radio Button</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>You can create a set of radio buttons used to select an item
from a list.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>It's possible to change the settings :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:201.5pt;margin-bottom:
12.65pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>selected
: The initially selected value (character(0) for no selection) inline :
horizontal or vertical width</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It is also possible to add HTML.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=182
src="R%20Notes%20for%20Professionals_files/image745.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=305
src="R%20Notes%20for%20Professionals_files/image746.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618950">Section 47.4: Debugging</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=626 style='width:469.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>debug</span></b></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>debugonce</span></p>
  </td>
  <td width=430 valign=top style='width:322.25pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> won't work well in the
  context of most Shiny debugging. However, </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>browser</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>browser</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> statements inserted in critical places can give
you a lot of insight into how your Shiny code is (not) working. See also:
Debugging using <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span></p>

<h4 style='margin-left:.75pt'>Showcase mode</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><a
href="http://shiny.rstudio.com/articles/display-modes.html"><span
style='color:#2066B9'>Showcase mode</span></a> displays your app alongside the
code that generates it and highlights lines of code in server.R as it runs
them.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>There are two ways to enable Showcase mode:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=209 style='width:156.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>runApp</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;MyApp&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>, display.mode </span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;showcase&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=151 style='width:113.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DisplayMode</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Showcase</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>Launch
Shiny app with the argument display.mode = &quot;showcase&quot;, e.g., <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:1.95pt;margin-bottom:
2.25pt;margin-left:29.75pt;line-height:107%'><span style='font-size:9.0pt;
line-height:107%;color:#222222;background:#FAFAFA'>)</span>.</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:4.5pt;
margin-bottom:10.9pt;margin-left:21.4pt;text-align:center;line-height:103%'>Create
file called <span style='font-size:9.0pt;line-height:103%;background:#FAFAFA'>DESCRIPTION</span>
in your Shiny app folder and add this line in it: .</p>

<h4 style='margin-left:.75pt'>Reactive Log Visualizer</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><a
href="http://shiny.rstudio.com/reference/shiny/latest/showReactLog.html"><span
style='color:#2066B9'>Reactive Log Visualizer</span></a> provides an
interactive browser-based tool for visualizing reactive dependencies and</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>options</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>shiny.reactlog</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>execution in your application. To enable Reactive Log
Visualizer, execute <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span> in R</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>console and or add that line of code in your server.R file. To start
Reactive Log Visualizer, hit Ctrl+F3 on Windows or Command+F3 on Mac when your
app is running. Use left and right arrow keys to navigate in Reactive Log
Visualizer.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618951">Section 47.5: Select box</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create a select list that can be used to choose a single or
multiple items from a list of values.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=186
src="R%20Notes%20for%20Professionals_files/image747.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="R%20Notes%20for%20Professionals_files/image748.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>It's possible to change the settings :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:232.05pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>label
: title choices : selected values selected : The initially selected value (NULL
for no selection) multiple : TRUE or FALSE width size</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:21.4pt'>selectize: TRUE or FALSE (for use or not selectize.js,
change the display)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:253.15pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>It is also possible to add HTML.</p>

<h2 style='margin-top:0in;margin-right:253.15pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618952">Section 47.6: Launch a Shiny app</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=110 style='width:82.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ui.</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>R</span> and </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>server.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>You can launch an application in several ways, depending on
how you create you app. If your app is divided in two files <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span> or if all
of your app is in one file.</p>

<h4 style='margin-left:.75pt'>1. Two files app</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=110 style='width:82.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ui.</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>R</span> and </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>server.</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>shinyApp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Your two files <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>R</span>have to be in the same folder. You could then
launch your app by running in the console the <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> function and by
passing the path of the directory that contains the Shiny app.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image749.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=100 style='width:74.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ui.</span></p>
  </td>
  <td width=28 valign=top style='width:20.7pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>R</span> or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>server.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can also launch the app directly from Rstudio by
pressing the <b>Run App</b> button that appear on Rstudio when you an <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span> file open.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=85 id="Picture 41257"
src="R%20Notes%20for%20Professionals_files/image750.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>runApp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Or you can simply write <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> on the console if
your working directory is Shiny App directory.</p>

<h4 style='margin-left:.75pt'>2. One file app</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>shinyApp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.55pt;
margin-left:.75pt'>If you create your in one <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>R</span> file you can also launch it with
the <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>()</span> function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:108%'><img
border=0 width=5 height=5 id="Group 548362"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>inside of your
code :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=177
src="R%20Notes%20for%20Professionals_files/image751.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618953">Section 47.7: Control
widgets</a></h2>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;
margin-left:0in;text-align:left;text-indent:0in'><span style='font-size:11.0pt;
line-height:109%;font-weight:normal'> </span>Function Widget</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>actionButton Action
Button</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>checkboxGroupInput A group of check boxes</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=413
 style='width:4.3in;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.65pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>checkboxInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A
  single check box</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>dateInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A
  calendar to aid date selection</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>dateRangeInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>A pair of calendars for selecting a date
  range</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>fileInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A file
  upload control wizard</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>helpText</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>Help text that can be added to an input
  form</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>numericInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A
  field to enter numbers</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>radioButtons</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A set
  of radio buttons</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>selectInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A box
  with choices to select from</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>sliderInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A
  slider bar</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>submitButton</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A
  submit button</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=135 valign=top style='width:101.6pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>textInput</p>
  </td>
  <td width=277 valign=top style='width:208.05pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>A
  field to enter text</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=485
src="R%20Notes%20for%20Professionals_files/image752.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=892 id="Picture 603626"
src="R%20Notes%20for%20Professionals_files/image753.gif"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618954">Chapter 48: spatial
analysis</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618955">Section 48.1: Create
spatial points from XY data set</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>When it comes to geographic data, R shows to be a powerful
tool for data handling, analysis and visualisation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Often, spatial data is avaliable as an XY coordinate data
set in tabular form. This example will show how to create a spatial data set
from an XY data set.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Spatial</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>*</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>DataFrame</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:30.15pt;margin-bottom:
12.95pt;margin-left:.75pt'>The packages <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>rgdal</span> and <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>sp</span> provide powerful
functions. Spatial data in R can be stored as (where <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>*</span> can be <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Points</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Lines</span> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Polygons</span>).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>This example uses data which can be downloaded at <a
href="http://www.opengeocode.org/download/worldcities.zip"><span
style='color:#2066B9'>OpenGeocode</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>At first, the working directory has to be set to the folder
of the downloaded CSV data set. Furthermore, the package <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>rgdal</span> has to
be loaded.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image754.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:51.45pt;margin-bottom:
0in;margin-left:.75pt'>Afterwards, the CSV file storing cities and their
geographical coordinates is loaded into R as a </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image755.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Often, it is useful to get a glimpse of the data and its
structure (e.g. column names, data types etc.).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image756.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This shows that the latitude and longitude columns are
interpreted as character values, since they hold entries like</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SpatialPointsDataFrame</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>&quot;-33.532&quot;. Yet, the later used function <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
which creates the spatial data set requires the coordinate values to be of the
data type <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>numeric</span></b>. Thus the two columns have to be
converted.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image757.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Few of the values cannot be converted into numeric data and
thus, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>
values are created. They have to be removed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image758.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, the XY data set can be converted into a spatial
data set. This requires the coordinates and the specification of the Coordinate
Refrence System (CRS) in which the coordinates are stored.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image759.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The basic plot function can easily be used to sneak peak the
produced spatial points.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image760.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=365 id="Picture 42032"
src="R%20Notes%20for%20Professionals_files/image761.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618956">Section 48.2: Importing a
shape file (.shp)</a></h2>

<h4 style='margin-left:.75pt'>rgdal</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>readOGR</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>ESRI shape files can easily be imported into R by using the
function <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> from the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>rgdal</span> package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image762.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>shp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.1pt;
margin-left:.75pt;line-height:217%'>It is important to know, that the <span
style='font-size:9.0pt;line-height:217%;background:#FAFAFA'>dsn</span> must not
end with <span style='font-size:9.0pt;line-height:217%;background:#FAFAFA'>/</span>
and the <span style='font-size:9.0pt;line-height:217%;background:#FAFAFA'>layer</span>
does not allow the file ending (e.g. <span style='font-size:9.0pt;line-height:
217%;background:#FAFAFA'>.</span>) <b>raster</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Another possible way of importing shapefiles is via the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>raster</span>
library and the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>shapefile</span>
function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image763.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Note how the path definition is different from the rgdal
import statement.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rgdal</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>readORG</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:205.25pt;margin-bottom:
0in;margin-left:.75pt;line-height:217%'><b>tmap </b><span style='font-size:
9.0pt;line-height:217%;background:#FAFAFA'>tmap</span> package provides a nice
wrapper for the function.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image764.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618957">Chapter 49: sqldf</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618958">Section 49.1: Basic Usage
Examples</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>sqldf</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.25pt;text-indent:27.0pt'><span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> from the package <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>sqldf</span> allows
the use of SQLite queries to select and manipulate data in R. SQL queries are
entered as character strings.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>To select the first 10 rows of the &quot;diamonds&quot;
dataset from the package <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>ggplot2</span>, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:372.85pt;margin-bottom:
18.85pt;margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>data</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;diamonds&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>diamonds</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:149.05pt;margin-bottom:
.2pt;margin-left:28.25pt;line-height:110%'><span style='position:relative;
z-index:-1895701504'><span style='left:0px;position:absolute;left:0px;
top:-162462px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image765.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'># A tibble: 6 x 10 </span><span
style='font-size:9.0pt;line-height:110%'>carat </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>cut</span></b><span
style='font-size:9.0pt;line-height:110%'> color clarity depth </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>table</span></b><span
style='font-size:9.0pt;line-height:110%'> price x y z </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>ord</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>ord</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>ord</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>int</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Ideal E SI2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>61.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>55</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>326</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.95</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.98</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.43</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.21</span><span
style='font-size:9.0pt;line-height:110%'> Premium E SI1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>61</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>326</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.89</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.84</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.31</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Good E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>56.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>65</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>327</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.05</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.07</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.31</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.29</span><span
style='font-size:9.0pt;line-height:110%'> Premium </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>I</span></b><span
style='font-size:9.0pt;line-height:110%'> VS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>58</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>334</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.20</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.23</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.63</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.31</span><span
style='font-size:9.0pt;line-height:110%'> Good J SI2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>58</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>335</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.34</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.35</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.75</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:18.9pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.24</span><span
style='font-size:9.0pt;line-height:110%'> Very Good J VVS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>57</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>336</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.94</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.96</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.48</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:318.8pt;margin-bottom:
18.85pt;margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>require</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>sqldf</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>) </span><span style='font-size:9.0pt;line-height:110%'>sqldf</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;select * from
diamonds limit 10&quot;</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:154.45pt;margin-bottom:
.2pt;margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> carat </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>cut</span></b><span style='font-size:9.0pt;
line-height:110%'> color clarity depth </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:110%'> price x y z </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.23</span><span style='font-size:9.0pt;line-height:110%'>
Ideal E SI2 </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>61.5</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>55</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>326</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.95</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.98</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2.43</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.21</span><span
style='font-size:9.0pt;line-height:110%'> Premium E SI1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>61</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>326</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.89</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.84</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.31</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Good E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>56.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>65</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>327</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.05</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.07</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.31</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.29</span><span
style='font-size:9.0pt;line-height:110%'> Premium </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>I</span></b><span
style='font-size:9.0pt;line-height:110%'> VS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>58</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>334</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.20</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.23</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.63</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.31</span><span
style='font-size:9.0pt;line-height:110%'> Good J SI2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>58</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>335</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.34</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.35</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.75</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.24</span><span
style='font-size:9.0pt;line-height:110%'> Very Good J VVS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>57</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>336</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.94</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.96</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.48</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.24</span><span
style='font-size:9.0pt;line-height:110%'> Very Good </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>I</span></b><span
style='font-size:9.0pt;line-height:110%'> VVS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>57</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>336</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.95</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.98</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.47</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.26</span><span
style='font-size:9.0pt;line-height:110%'> Very Good H SI1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>61.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>55</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>337</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.07</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.53</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.22</span><span
style='font-size:9.0pt;line-height:110%'> Fair E VS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>61</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>337</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.87</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.78</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.49</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.25pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>10<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Very Good H VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>61</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>338</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.00</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.05</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.39</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>To select the first 10 rows where for the color
&quot;E&quot;:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:18.9pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>sqldf</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;select * from
diamonds where color = 'E' limit 10&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:154.45pt;margin-bottom:
.2pt;margin-left:28.25pt;line-height:110%'><span style='position:relative;
z-index:-1895700480'><span style='left:0px;position:absolute;left:0px;
top:-162965px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image766.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> carat </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>cut</span></b><span
style='font-size:9.0pt;line-height:110%'> color clarity depth </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>table</span></b><span
style='font-size:9.0pt;line-height:110%'> price x y z </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.23</span><span style='font-size:9.0pt;
line-height:110%'> Ideal E SI2 </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>61.5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>55</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>326</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.95</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.98</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2.43</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.21</span><span
style='font-size:9.0pt;line-height:110%'> Premium E SI1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>61</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>326</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.89</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.84</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.31</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Good E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>56.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>65</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>327</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.05</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.07</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.31</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.22</span><span
style='font-size:9.0pt;line-height:110%'> Fair E VS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>61</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>337</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.87</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.78</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.49</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.20</span><span
style='font-size:9.0pt;line-height:110%'> Premium E SI2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>60.2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>62</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>345</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.79</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.75</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.27</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.32</span><span
style='font-size:9.0pt;line-height:110%'> Premium E I1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>60.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>58</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>345</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.38</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.42</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.68</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Very Good E VS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>55</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>352</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.85</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.92</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.48</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Very Good E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>60.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>59</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>402</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.97</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.01</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.42</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Very Good E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>58</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>402</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.01</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4.06</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.40</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.25pt;
margin-left:49.35pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>10<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.23</span><span
style='font-size:9.0pt;line-height:110%'> Good E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>64.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>59</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>402</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.83</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.85</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2.46</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice in the example above that quoted strings within the
SQL query are quoted using '' if the overall query is quoted with &quot;&quot;
(this also works in reverse).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Suppose that we wish to add a new column to count the number
of Premium cut diamonds over 1 carat:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=85
src="R%20Notes%20for%20Professionals_files/image767.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Results of created values can also be returned as new
columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:18.85pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895699456'><span style='left:0px;position:absolute;left:0px;top:-163384px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image768.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>sqldf</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;select *, count(*) as
cnt_big_E_colored_stones from diamonds where carat &gt; 1 and color = 'E' group
by clarity&quot;</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:24.85pt;margin-bottom:
.2pt;margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> carat </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>cut</span></b><span style='font-size:9.0pt;
line-height:110%'> color clarity depth </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>table</span></b><span style='font-size:9.0pt;
line-height:110%'> price x y z cnt_big_E_colored_stones </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1.30</span><span style='font-size:9.0pt;
line-height:110%'> Fair E I1 </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>66.5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>58</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2571</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6.79</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.75</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.50</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.28</span><span
style='font-size:9.0pt;line-height:110%'> Ideal E IF </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>60.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>57</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18700</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7.09</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6.99</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.27</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>28</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2.02</span><span
style='font-size:9.0pt;line-height:110%'> Very Good E SI1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>59</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18731</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8.11</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8.20</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.88</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>499</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2.03</span><span
style='font-size:9.0pt;line-height:110%'> Premium E SI2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>61.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>59</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18477</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8.24</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8.16</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5.04</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>666</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.51</span><span
style='font-size:9.0pt;line-height:110%'> Ideal E VS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>61.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>57</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18729</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7.34</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>7.40</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.53</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>158</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.72</span><span
style='font-size:9.0pt;line-height:110%'> Very Good E VS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>56</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18557</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7.65</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>7.55</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.82</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>318</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.20</span><span
style='font-size:9.0pt;line-height:110%'> Ideal E VVS1 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>61.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>56</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>16256</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.78</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6.87</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.22</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>52</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.6pt;
margin-left:43.95pt;text-indent:-16.2pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.55</span><span
style='font-size:9.0pt;line-height:110%'> Ideal E VVS2 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>62.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>55</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18188</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7.38</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>7.40</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.62</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>106</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If one would be interested what is the <b>max</b> <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>price</span> of the
diamond <b>according</b> to the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>cut</span></b>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image769.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618959">Chapter 50: Code profiling</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618960">Section 50.1: Benchmarking
using microbenchmark</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>You can use the <a
href="https://cran.r-project.org/web/packages/microbenchmark/index.html"><span
style='font-size:9.0pt;line-height:108%;color:#2066B9;background:#FAFAFA'>microbenchmark</span></a>
package to conduct &quot;sub-millisecond accurate timing of expression
evaluation&quot;.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In <a href="http://stackoverflow.com/a/35761008/5977215"><span
style='color:#2066B9'>this example</span></a> we are comparing the speeds of
six equivalent expressions for updating elements in a group, based on a
certain condition.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=839 id="Picture 603631"
src="R%20Notes%20for%20Professionals_files/image770.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:140.6pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895698432'><span style='left:0px;position:absolute;left:0px;
top:-164770px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image771.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'> times </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> 10L </span><span style='font-size:
9.0pt;line-height:112%;color:forestgreen'>## specify the number of times each
expression is evaluated </span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Unit: milliseconds</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expr min lq mean
median uq max neval</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expression_1 11.646149 13.201670 16.808399
15.643384 18.78640 26.321346 10</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expression_2 8051.898126 8777.016935 9238.323459
8979.553856 9281.93377 12610.869058 10</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expression_3 3.208773 3.385841 4.207903
4.089515 4.70146 5.654702 10</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expression_4 15.758441 16.247833 20.677038
19.028982 21.04170 36.373153 10</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expression_5 7552.970295 8051.080753 8702.064620
8861.608629 9308.62842 9722.234921 10</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.35pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># expression_6 18.403105 18.812785 22.427984
21.966764 24.66930 28.607064 10</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:251.25pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:198%'>The output shows that in this test <span style='font-size:
9.0pt;line-height:198%;background:#FAFAFA'>expression_3</span> is the fastest. <b>References
</b>data.table - Adding and modifying columns data.table - special grouping
symbols in data.table</p>

<h2 style='margin-top:0in;margin-right:251.25pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:198%'><a
name="_Toc618961">Section 50.2: proc.time()</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>proc.time</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>At its simplest, <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> gives the total elapsed CPU
time in seconds for the current process. Executing it in the console gives the
following type of output:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image772.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This is particularly useful for benchmarking specific lines
of code. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="R%20Notes%20for%20Professionals_files/image773.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This gives the following output:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image774.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image775.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=263 style='width:197.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>system.time</span></b></p>
  </td>
  <td width=119 valign=top style='width:89.55pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> is a wrapper for </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>proc.time</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>
that returns the elapsed time for a particular command/expression.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image776.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>proc.time</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Note that the returned object, of class , is slightly more
complicated than it appears on the surface:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=60
src="R%20Notes%20for%20Professionals_files/image777.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618962">Section 50.3:
Microbenchmark</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Microbenchmark is useful for estimating the time taking for
otherwise fast procedures. For example, consider estimating the time taken to
print hello world.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image778.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=372 style='width:279.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>system.time</span></b></p>
  </td>
  <td width=228 valign=top style='width:171.25pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>is essentially a wrapper function for </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>proc.time</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This is because , which measures in seconds. As</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>printing &quot;hello world&quot; takes less than a second it
appears that the time taken is less than a second, however this is not true. To
see this we can use the package microbenchmark:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image779.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=137 style='width:102.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;hello world&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Here we can see after running <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span> 100 times, the
average time taken was in fact 44</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cat</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;hello world</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\n</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:61.1pt;margin-bottom:
0in;margin-left:.75pt;line-height:215%'>microseconds. (Note that running this
code will print &quot;hello world&quot; 100 times onto the console.) We can
compare this against an equivalent procedure, <span style='font-size:9.0pt;
line-height:215%;color:#CC0A0A;background:#FAFAFA'>&quot;</span><span
style='font-size:9.0pt;line-height:215%;color:#222222;background:#FAFAFA'>)</span>,
to see if it is faster than</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=124
src="R%20Notes%20for%20Professionals_files/image780.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=231 style='width:173.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cat</span></b></p>
  </td>
  <td width=174 valign=top style='width:130.15pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> is almost twice as fast as </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>print</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>In this case <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Alternatively one can compare two procedures within the same
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>microbenchmark</span>
call:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=67
src="R%20Notes%20for%20Professionals_files/image781.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># print(&quot;hello world&quot;) 29.122 31.654 39.64255
34.5275 38.852 192.779 100</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.85pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895697408'><span style='left:0px;position:absolute;left:0px;top:-166746px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image782.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># cat(&quot;hello
world\\n&quot;) 9.381 12.356 13.83820 12.9930 13.715 52.564 100</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618963">Section 50.4: System.time</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>System time gives you the CPU time required to execute a R
expression, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image783.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can add larger pieces of code through use of braces:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image784.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Or use it to test functions:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image785.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618964">Section 50.5: Line
Profiling</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>auto.arima</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One package for line profiling is <a
href="https://github.com/hadley/lineprof"><span style='color:#2066B9'>lineprof</span></a>
which is written and maintained by Hadley Wickham. Here is a quick
demonstration of how it works with in the forecast package:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image786.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This will provide you with a shiny app, which allows you to
delve deeper into every function call. This enables you to see with ease what
is causing your R code to slow down. There is a screenshot of the shiny app
below:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=645 height=514 id="Picture 43827"
src="R%20Notes%20for%20Professionals_files/image787.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618965">Chapter 51: Control flow
structures</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618966">Section 51.1: Optimal
Construction of a For Loop</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>To illustrate the effect of good for loop construction, we
will calculate the mean of each column in four different ways:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Using
a poorly optimized for loop</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Using
a well optimized for for loop</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>apply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Using
an <span style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>*</span>
family of functions</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Using
the <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>colMeans</span></b> function</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Each of these options will be shown in code; a comparison of
the computational time to execute each option will be shown; and lastly a
discussion of the differences will be given.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=131
src="R%20Notes%20for%20Professionals_files/image788.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.4pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image789.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:9.0pt;line-height:109%;background:#FAFAFA'>vapply</span>
Function</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.45pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image790.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'><span
style='font-size:9.0pt;line-height:109%;color:blue;background:#FAFAFA'>colMeans</span>
Function</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image791.gif"></span></p>

<h4 style='margin-left:.75pt'>Efficiency comparison</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>The results of benchmarking these four approaches is shown
below (code not displayed)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:146.05pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895696384'><span style='left:0px;position:absolute;left:0px;
top:-168751px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image365.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>Unit</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>:</span><span style='font-size:9.0pt;
line-height:110%'> microseconds expr </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>min</span></b><span style='font-size:9.0pt;
line-height:110%'> lq </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>mean</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>median</span></b><span style='font-size:9.0pt;line-height:110%'>
uq </span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>max</span></b><span
style='font-size:9.0pt;line-height:110%'> neval cld poor </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>240.986</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>262.0820</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>287.1125</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>275.8160</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>307.2485</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>442.609</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:110%'> d optimal </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>220.313</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>237.4455</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>258.8426</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>247.0735</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>280.9130</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>362.469</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c </span></b><span style='font-size:9.0pt;
line-height:110%'>vapply </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>107.042</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>109.7320</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>124.4715</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>113.4130</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>132.6695</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>202.473</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>100</span><span style='font-size:9.0pt;line-height:110%'> a </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>colMeans</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>155.183</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>161.6955</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>180.2067</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>175.0045</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>194.2605</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>259.958</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>100</span><span style='font-size:9.0pt;
line-height:110%'> b</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Notice that the optimized <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>for</span></b> loop edged out
the poorly constructed for loop. The poorly constructed for loop is constantly
increasing the length of the output object, and at each change of the length, R
is reevaluating the class of the object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Some of this overhead burden is removed by the optimized for
loop by declaring the type of output object and its length before starting the
loop.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>In this example, however, the use of an <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>vapply</span>
function doubles the computational efficiency, largely because we told R that
the result had to be numeric (if any one result were not numeric, an error
would be returned).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Use of the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>colMeans</span></b> function is a touch slower
than the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>vapply</span>
function. This difference is attributable to some</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=341 style='width:256.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.matrix</span></b></p>
  </td>
  <td width=205 valign=top style='width:153.5pt;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>conversion (because <b><span
  style='font-size:9.0pt;line-height:107%;color:#333399;background:#FAFAFA'>mtcars</span></b>
  is a </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>error checks performed in <b><span style='font-size:9.0pt;line-height:
134%;color:blue;background:#FAFAFA'>colMeans</span></b> and mainly to the )
that weren't performed in the <span style='font-size:9.0pt;line-height:134%;
background:#FAFAFA'>vapply</span> function.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618967">Section 51.2: Basic For Loop Construction</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:215%'>In this example we will calculate the
squared deviance for each column in a data frame, in this case the <b><span
style='font-size:9.0pt;line-height:215%;color:#333399;background:#FAFAFA'>mtcars</span></b>.
Option A: integer index</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image792.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>squared_deviance</span> is an 11 elements list, as expected.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image793.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Option B: character index</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image794.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>What if we want a as a result? Well, there are many options
for transforming a list into other objects. However, and maybe the simplest in
this case, will be to store the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>for</span></b> results in a .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image795.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:13.5pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>The result will be the same event
though we use the character option (B).</p>

<h2 style='margin-top:0in;margin-right:13.5pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc618968">Section 51.3: The Other Looping
Constructs: while and repeat</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:28.25pt;
margin-left:.75pt'>R provides two additional looping constructs, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>while</span></b>
and <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>repeat</span></b>, which are typically used in situations where the
number of iterations required is indeterminate.</p>

<h4 style='margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:
109%;color:blue;background:#FAFAFA'>while</span> loop</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The general form of a <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>while</span></b> loop is as
follows,</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=62
src="R%20Notes%20for%20Professionals_files/image796.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image797.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>where <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>condition</span> is evaluated prior to entering the loop
body. If <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>condition</span>
evaluates to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>,
the code inside of the loop body is executed, and this process repeats until <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>condition</span>
evaluates to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>
(or a <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>break</span></b> statement is reached; see below). Unlike the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>for</span></b>
loop, if a <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>while</span></b> loop uses a variable to perform
incremental iterations, the variable must be declared and initialized ahead of
time, and must be updated within the loop body. For example, the following
loops accomplish the same task:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.75pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=357
src="R%20Notes%20for%20Professionals_files/image798.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Additionally, it is possible to terminate a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>while</span></b>
loop with a call to <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>break</span></b> from inside the loop body:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image799.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:28.3pt;
margin-left:.75pt'>In this example, <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>condition</span> is always <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>, so the only way to
terminate the loop is with a call to <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>break</span></b> inside the
body. Note that the final value of <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>iter</span> will depend on the state of your PRNG when
this example is run, and should produce different results (essentially) each
time the code is executed.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.0pt;margin-left:
.75pt'>The <span style='font-size:9.0pt;line-height:109%;color:blue;background:
#FAFAFA'>repeat</span> loop</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=107
src="R%20Notes%20for%20Professionals_files/image800.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The extra <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>{}</span> are not required, but the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>()</span> are. Rewriting the
previous example using <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>repeat</span></b>,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image801.gif"></span></p>

<h4 style='margin-left:.75pt'>More on <span style='font-size:9.0pt;line-height:
109%;color:blue;background:#FAFAFA'>break</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It's important to note that <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>break</span></b> will <i>only
terminate the immediately enclosing loop</i>. That is, the following is an
infinite loop:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image802.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>With a little creativity, however, it is possible to break
entirely from within a nested loop. As an example, consider the following
expression, which, in its current state, will loop infinitely:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image803.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>return</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One possibility is to recognize that, unlike <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>break</span></b>,
the <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>return</span></b> expression <b>does</b> have the ability to return
control across multiple levels of enclosing loops. However, since <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>return</span></b>
is only valid when used within a function, we cannot simply replace <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>break</span></b>
with <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>()</span> above, but also need to wrap the entire expression as an
anonymous function:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=231
src="R%20Notes%20for%20Professionals_files/image804.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image805.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Alternatively, we can create a dummy variable (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>exit</span>) prior
to the expression, and activate it via <span style='font-size:9.0pt;line-height:
108%;color:#666666;background:#FAFAFA'>&lt;&lt;-</span> from the inner loop
when we are ready to terminate:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image806.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618969">Chapter 52: Column wise
operation</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618970">Section 52.1: sum of each
column</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Suppose we need to do the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sum</span></b> of each column
in a dataset</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image807.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>There are many ways to do this. Using <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>base R</span>, the
best option would be <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>colSums</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image808.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>na.rm </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Here, we removed the first column as it is non-numeric and
did the <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>sum</span></b> of each column, specifying the <span style='font-size:
9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>TRUE</span> (in case there are any NAs in the dataset)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This also works with <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>matrix</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image809.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sapply</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>vapply</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:283.75pt;margin-bottom:
0in;margin-left:.75pt'>This can be done in a loop with </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image810.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It should be noted that the output is a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>list</span></b>.
If we need a <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>vector</span></b> output</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image811.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Or</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=103
src="R%20Notes%20for%20Professionals_files/image812.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:235.75pt;margin-bottom:
0in;margin-left:.75pt'>There are ways to do this with packages like <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span> or </p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image813.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>\\d</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Here, we are passing a regular expression to match the
column names that we need to get the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sum</span></b> in <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>summarise_at</span>.
The regex will match all columns that start with <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>V</span> followed by one or more numbers (<span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>+</span>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A option is</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image814.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>setDT</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>df1</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We convert the 'data.frame' to 'data.table' (<span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>),
specified the columns to be applied the function in</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=337 style='width:252.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SDcols</span></p>
  </td>
  <td width=279 valign=top style='width:209.6pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and loop through the Subset of Data.table
  (<span style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SD</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>.</span>) and get the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>sum</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If we need to use a group by operation, we can do this
easily by specifying the group by column/columns</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image815.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In cases where we need the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sum</span></b> of all the
columns, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>summarise_each</span>
can be used instead of <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>summarise_at</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image816.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.table</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The option is</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image817.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618971">Chapter 53: JSON</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618972">Section 53.1: JSON to /
from R objects</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=146 style='width:109.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>fromJSON</span></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>toJSON</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>data.frames</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>The <a
href="https://cran.r-project.org/web/packages/jsonlite/index.html"><span
style='font-size:9.0pt;line-height:108%;color:#2066B9;background:#FAFAFA'>jsonlite</span></a><a
href="https://cran.r-project.org/web/packages/jsonlite/index.html"><span
style='color:#2066B9'> package</span></a> is a fast JSON parser and generator
optimized for statistical data and the web. The two main functions used to read
and write JSON are <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> respecitively, and are designed to work with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>vectors</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>matrices</span> and
, and streams of JSON from the web.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create a JSON array from a vector, and vice versa</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image818.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create a named JSON array from a list, and vice versa</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image819.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>More complex list structures</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image820.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create JSON from a , and vice versa</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=168
src="R%20Notes%20for%20Professionals_files/image821.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=252
src="R%20Notes%20for%20Professionals_files/image822.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Read JSON direct from the internet</p>

<p class=MsoNormal style='margin-top:0in;margin-right:59.6pt;margin-bottom:
12.45pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895695360'><span style='left:0px;position:absolute;left:0px;
top:-174744px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image252.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'>## Reading JSON from
URL </span><span style='font-size:9.0pt;line-height:110%'>googleway_issues </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> fromJSON</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;https://api.github.com/repos/SymbolixAU/googleway/issues&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:173.05pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%'>googleway_issues$url </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># [1]
&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/20&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/19&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># [3]
&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/14&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/11&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># [5]
&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/9&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/5&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># [7]
&quot;https://api.github.com/repos/SymbolixAU/googleway/issues/2&quot;</span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618973">Chapter 54: RODBC</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618974">Section 54.1: Connecting to
Excel Files via RODBC</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>While <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>RODBC</span> is restricted to Windows computers with
compatible architecture between R and any target RDMS, one of its key
flexibilities is to work with Excel files as if they were SQL databases.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:70.4pt;margin-bottom:
22.8pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895694336'><span style='left:0px;position:absolute;left:0px;
top:-175088px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image365.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>require</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>RODBC</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:112%'>con </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'>
odbcConnectExcel</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;myfile.xlsx&quot;</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># open a connection to the Excel file </span><span
style='font-size:9.0pt;line-height:112%'>sqlTables</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>con</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'>$TABLE_NAME </span><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># show all sheets </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>df</span></b><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> sqlFetch</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>con, </span><span style='font-size:
9.0pt;line-height:112%;color:#CC0A0A'>&quot;Sheet1&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># read a sheet </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>df</span></b><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%'> sqlQuery</span><span style='font-size:9.0pt;line-height:
112%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%'>con,
</span><span style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;select
* from [Sheet1 $]&quot;</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># read a sheet
(alternative SQL syntax) </span><b><span style='font-size:9.0pt;line-height:
112%;color:blue'>close</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%'>con</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># close the connection to the file</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618975">Section 54.2: SQL Server
Management Database connection to get individual table</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Another use of RODBC is in connecting with SQL Server
Management Database. We need to specify the 'Driver' i.e. SQL Server here, the
database name &quot;Atilla&quot; and then use the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>sqlQuery</span> to extract either the full
table or a fraction of it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image823.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618976">Section 54.3: Connecting to relational databases</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=76
src="R%20Notes%20for%20Professionals_files/image824.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>This will connect to a SQL Server instance. For more
information on what your connection string should look like, visit <a
href="http://connectionstrings.com/"><span style='color:#2066B9'>connectionstrings.com</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Also, since there's no database specified, you should make
sure you fully qualify the object you're wanting to query like this
databasename.schema.objectname</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618977">Chapter 55: lubridate</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618978">Section 55.1: Parsing dates
and datetimes from strings with lubridate</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>lubridate</span> package provides convenient functions to
format date and datetime objects from character strings.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The functions are permutations of</p>

<h4 align=left style='margin:0in;text-align:left;text-indent:0in'><span
style='font-size:11.0pt;line-height:109%;font-weight:normal'> </span>Letter Element
to parse Base R equivalent</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=297
 style='width:222.9pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.75pt'>
  <td width=219 valign=top style='width:164.55pt;padding:.05pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>y year</p>
  </td>
  <td width=78 valign=top style='width:58.35pt;padding:.05pt 0in 0in 0in;
  height:13.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%y</span>, <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%Y</span></p>
  </td>
 </tr>
 <tr style='height:16.9pt'>
  <td width=219 valign=top style='width:164.55pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>m
  (with y and d) month</p>
  </td>
  <td width=78 valign=top style='width:58.35pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>%m</span>, <span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>%b</span>, <span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>%h</span>, <span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>%B</span></p>
  </td>
 </tr>
 <tr style='height:16.9pt'>
  <td width=219 valign=top style='width:164.55pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>d day</p>
  </td>
  <td width=78 valign=top style='width:58.35pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%d</span>, <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%e</span></p>
  </td>
 </tr>
 <tr style='height:16.9pt'>
  <td width=219 valign=top style='width:164.55pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>h hour</p>
  </td>
  <td width=78 valign=top style='width:58.35pt;padding:.05pt 0in 0in 0in;
  height:16.9pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%H</span>, <span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>%</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>I</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>%</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>p</span></p>
  </td>
 </tr>
 <tr style='height:16.8pt'>
  <td width=219 valign=top style='width:164.55pt;padding:.05pt 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>m
  (with h and s) minute</p>
  </td>
  <td width=78 valign=top style='width:58.35pt;padding:.05pt 0in 0in 0in;
  height:16.8pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%M</span></p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=219 valign=top style='width:164.55pt;padding:.05pt 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>s seconds</p>
  </td>
  <td width=78 valign=top style='width:58.35pt;padding:.05pt 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>%S</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ymd</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ymd_hms</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:27.7pt;margin-bottom:
13.25pt;margin-left:.75pt'>e.g. <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> for parsing a date with the year
followed by the month followed by the day, e.g. <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;2016-07-22&quot;</span>,
or <span style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
for parsing a datetime in the order year, month, day, hours, minutes, seconds,
e.g. <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:
#FAFAFA'>&quot;2016-07-22 13:04:47&quot;</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:27.95pt;
margin-left:.75pt'>The functions are able to recognize most separators (such as
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>/</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>-</span>, and
whitespace) without additional arguments. They also work with inconsistent
separators.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.6pt;margin-left:
.75pt'>Dates</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=194
src="R%20Notes%20for%20Professionals_files/image825.gif"></span></p>

<h4 style='margin-left:.75pt'>Utility functions</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.POSIXct</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Datetimes can be parsed using <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>ymd_hms</span> variants including <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ymd_hm</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ymd_h</span>. All
datetime functions can accept a <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>tz </span>timezone argument akin to that of or <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>strptime</span></b>,
but which defaults to <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;UTC&quot;</span> instead of the local timezone.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=172
src="R%20Notes%20for%20Professionals_files/image826.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.POSIXct</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:218%'><b>Parser functions </b><span
style='font-size:9.0pt;line-height:218%;background:#FAFAFA'>lubridate</span>
also includes three functions for parsing datetimes with a formatting string
like or <b><span style='font-size:9.0pt;line-height:218%;color:blue;
background:#FAFAFA'>strptime</span></b>:</p>

<h4 align=left style='margin-top:0in;margin-right:0in;margin-bottom:1.0pt;
margin-left:0in;text-align:left;text-indent:0in'><span style='font-size:11.0pt;
line-height:109%;font-weight:normal'> </span>Function Output
Class Formatting
strings accepted</h4>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:37.65pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'>Flexible.
Will accept <b><span style='font-size:9.0pt;line-height:110%;color:blue;
background:#FAFAFA'>strptime</span></b>-style with <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>%</span> or <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>lubridate</span> datetime</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:3.85pt;
margin-left:200.35pt;text-indent:-200.1pt'><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>parse_date_time </span>POSIXct function
name style, e.g <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;ymd hms&quot;</span>. Will accept a vector of orders
for heterogeneous data and guess which is appropriate.</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'>Default
POSIXct; if <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>lt
</span>Strict. Accepts only <b><span style='font-size:9.0pt;line-height:110%;
color:blue;background:#FAFAFA'>strptime</span></b> tokens (with or without <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>%</span>) from a
limited</p>

<p class=MsoNormal style='margin-top:0in;margin-right:415.55pt;margin-bottom:
0in;margin-left:.75pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>parse_date_time2</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in'><span style='font-size:11.0pt;line-height:
108%'> </span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>=</span>,
POSIXlt set.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>lt </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:183.05pt;margin-left:30.5pt;text-align:right;line-height:110%'><img
width=718 height=1 src="R%20Notes%20for%20Professionals_files/image827.gif"
align=left hspace=12>Default POSIXlt; if <span style='font-size:9.0pt;
line-height:110%;color:#666666;background:#FAFAFA'>= </span>Strict. Accepts
only <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>%</span>-delimited
<b><span style='font-size:9.0pt;line-height:110%;color:blue;background:#FAFAFA'>strptime</span></b>
tokens with delimiters (<span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>-</span>, <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>/</span>, <span style='font-size:9.0pt;line-height:110%;
background:#FAFAFA'>:</span>,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>parse_date_time2</span> and <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>fast_strptime</span> use a fast C parser for
efficiency.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>parse_date_time</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.8pt;
margin-left:.75pt'>See <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span> for formatting tokens.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc618979">Section 55.2:
Di&#57379;erence between period and duration</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Unlike durations, periods can be used to accurately model
clock times without knowing when events such as leap seconds, leap days, and
DST changes occur.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image828.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618980">Section 55.3: Instants</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>is.instant</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>An instant is a specific moment in time. Any date-time
object that refers to a moment of time is recognized as an instant. To test if
an object is an instant, use .</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=131
src="R%20Notes%20for%20Professionals_files/image829.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=169
src="R%20Notes%20for%20Professionals_files/image830.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618981">Section 55.4: Intervals,
Durations and Periods</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Intervals</b> are simplest way of recording timespans in
lubridate. An interval is a span of time that occurs between two specific <b>instants</b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="R%20Notes%20for%20Professionals_files/image831.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b>Durations</b> measure the exact amount of time that
occurs between two instants.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image832.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.45pt;
margin-left:.75pt'><b>Note:</b> Units larger than weeks are not used due to
their variability.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Durations can be created using <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>dseconds</span>, <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>dminutes</span> and other duration
helper functions.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>quick_durations</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Run <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span> for complete list.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image833.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Durations can be subtracted and added to instants to get new
instants.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=33
src="R%20Notes%20for%20Professionals_files/image834.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="R%20Notes%20for%20Professionals_files/image835.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Durations can be created from intervals.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image836.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.45pt;
margin-left:.75pt'><b>Periods</b> measure the change in clock time that occurs
between two instants.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>quick_periods</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Periods can be created using <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>period</span> function as well other
helper functions like <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>seconds</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>hours</span>, etc. To get a complete list of period helper
functions, Run <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>?</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image837.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>is.period</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:49.1pt'>function can be used to check if an object is a period.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image838.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618982">Section 55.5: Manipulating date and time in lubridate</a></h2>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=320
src="R%20Notes%20for%20Professionals_files/image839.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image840.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618983">Section 55.6: Time Zones</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>with_tz</span> returns a date-time as it would appear in a different
time zone.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image841.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>force_tz</span> returns a the date-time that has the same clock time
as x in the new time zone.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image842.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618984">Section 55.7: Parsing date
and time in lubridate</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ymd</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Lubridate provides series of functions for parsing
character strings into dates. The letters y, m, and d correspond to the year,
month, and day elements of a date-time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image843.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618985">Section 55.8: Rounding dates</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image844.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>round_date</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:42.35pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'>takes
a date-time object and rounds it to the nearest integer value of the specified
time unit.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=79
src="R%20Notes%20for%20Professionals_files/image845.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=71
src="R%20Notes%20for%20Professionals_files/image846.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>floor_date</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> takes a date-time object and rounds it down to
the nearest integer value of the specified time unit.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image847.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ceiling_date</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:16.7pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>
takes a date-time object and rounds it up to the nearest integer value of the
specified time unit.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image848.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618986">Chapter 56: Time Series and
Forecasting</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618987">Section 56.1: Creating a ts
object</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Time series data can be stored as a <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>ts</span> object. <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ts</span> objects
contain information about seasonal frequency that is used by ARIMA functions.
It also allows for calling of elements in the series by date using the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>window</span></b>
command.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=520
src="R%20Notes%20for%20Professionals_files/image849.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image850.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc618988">Section 56.2: Exploratory Data Analysis with time-series data</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image851.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In the spirit of Exploratory Data Analysis (EDA) a good
first step is to look at a plot of your time-series data:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><b><span style='font-size:9.0pt;line-height:
112%;color:blue'>plot</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:#333399'>AirPassengers</span></b><span style='font-size:9.0pt;line-height:
112%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># plot the raw data</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.05in;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895692288'><span style='left:0px;position:absolute;left:0px;top:-181915px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>abline</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>reg</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>lm</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>AirPassengers</span></b><span style='font-size:
9.0pt;line-height:110%'>~</span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>time</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>AirPassengers</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)))</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'># fit a trend line</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=311 id="Picture 47100"
src="R%20Notes%20for%20Professionals_files/image852.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>For further EDA we examine cycles across years:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:18.9pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>cycle</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>AirPassengers</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:28.25pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1949<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1950<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1951<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1952<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1953<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1954<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1955<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1956<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1957<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1958<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1959<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:18.9pt;
margin-left:65.55pt;text-indent:-37.8pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1960<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:3.45pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895691264'><span style='left:0px;position:absolute;left:0px;top:-182603px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image853.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>boxplot</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:112%;color:#333399'>AirPassengers</span></b><span
style='font-size:9.0pt;line-height:112%'>~</span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>cycle</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:112%;color:#333399'>AirPassengers</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>))</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'>#Box plot across months to explore seasonal effects</span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=282 id="Picture 47420"
src="R%20Notes%20for%20Professionals_files/image854.jpg"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc618989">Chapter 57: strsplit
function</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618990">Section 57.1: Introduction</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>strsplit</span></b> is a useful function for breaking up a
vector into an list on some character pattern. With typical R tools, the whole
list can be reincorporated to a data.frame or part of the list might be used in
a graphing exercise.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here is a common usage of <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>strsplit</span></b>: break a
character vector along a comma separator:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image855.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>As hinted above, the split argument is not limited to
characters, but may follow a pattern dictated by a regular expression. For
example, temp2 is identical to temp above except that the separators have been
altered for each item. We can take advantage of the fact that the split
argument accepts regular expressions to alleviate the irregularity in the
vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image856.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
13.55pt;margin-left:-.25pt;line-height:107%'><i>Notes</i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>breaking
down the regular expression syntax is out of scope for this example.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Sometimes
matching regular expressions can slow down a process. As with many R functions
that allow the use of regular expressions, the fixed argument is available to
tell R to match on the split characters literally.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618991">Chapter 58: Web scraping
and parsing</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618992">Section 58.1: Basic
scraping with rvest</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'><a href="https://github.com/hadley/rvest"><span
style='font-size:9.0pt;line-height:108%;color:#2066B9;background:#FAFAFA'>rvest</span></a>
is a package for web scraping and parsing by Hadley Wickham inspired by
Python's <a href="https://www.crummy.com/software/BeautifulSoup/"><span
style='color:#2066B9'>Beautiful Soup</span></a>. It leverages Hadley's <a
href="https://github.com/hadley/xml2"><span style='font-size:9.0pt;line-height:
108%;color:#2066B9;background:#FAFAFA'>xml2</span></a> package's <a
href="http://xmlsoft.org/"><span style='font-size:9.0pt;line-height:108%;
color:#2066B9;background:#FAFAFA'>libxml2</span></a> bindings for HTML parsing.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>As part of the tidyverse, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>rvest</span> is piped. It uses</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>to scrape the HTML of a webpage,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xml2</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>read_html</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>which
can then be subset with its <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>html_node</span> and <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>html_nodes</span> functions using CSS or
XPath selectors, and parsed to R objects with functions like <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>html_text</span>
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>html_table</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>To scrape the table of milestones from <a
href="https://en.wikipedia.org/wiki/R_(programming_language)"><span
style='color:#2066B9'>the Wikipedia page on R</span></a>, the code would look
like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:194.6pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:224%'><b><span style='font-size:9.0pt;
line-height:224%;color:blue'>library</span></b><span style='font-size:9.0pt;
line-height:224%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:224%'>rvest</span><span style='font-size:9.0pt;line-height:224%;
color:#222222'>) </span><b><span style='font-size:9.0pt;line-height:224%;
color:blue'>url</span></b><span style='font-size:9.0pt;line-height:224%'> </span><span
style='font-size:9.0pt;line-height:224%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:224%'> </span><span style='font-size:9.0pt;
line-height:224%;color:#CC0A0A'>'https://en.wikipedia.org/wiki/R_(programming_language)'</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:216.25pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># scrape HTML from website </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>url</span></b><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>%&gt;%</span><span style='font-size:9.0pt;line-height:112%'>
read_html</span><span style='font-size:9.0pt;line-height:112%;color:#222222'>()</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>%&gt;% </span><span style='font-size:9.0pt;
line-height:112%'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># select HTML tag with class=&quot;wikitable&quot; </span><span
style='font-size:9.0pt;line-height:112%'>html_node</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>css </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>'.wikitable'</span><span style='font-size:9.0pt;line-height:
112%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>%&gt;% </span><span
style='font-size:9.0pt;line-height:112%'></span><span style='font-size:
9.0pt;line-height:112%;color:forestgreen'># parse table into data.frame </span><span
style='font-size:9.0pt;line-height:112%'>html_table</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>()</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>%&gt;% </span><span style='font-size:9.0pt;
line-height:112%'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># trim for printing </span><span style='font-size:9.0pt;
line-height:112%'>dplyr</span><span style='font-size:9.0pt;line-height:
112%;color:#666666'>::</span><span style='font-size:9.0pt;line-height:112%'>mutate</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>Description </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>substr</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>Description, </span><span style='font-size:9.0pt;line-height:
112%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:112%'>, </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>70</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## Release
Date Description</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## 1 0.16 This is the last alpha version
developed primarily by Ihaka</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:65.0pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>## 2 0.49 1997-04-23 This is the oldest
source release which is currently availab ## 3 0.60 1997-12-05 R becomes an
official part of the GNU Project. The code is h ## 4 0.65.1 1999-10-07 First
versions of update.packages and install.packages funct ## 5 1.0 2000-02-29
Considered by its developers stable enough for production us ## 6 1.4
2001-12-19 S4 methods are introduced and the first version for Mac OS X</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## 7 2.0 2004-10-04 Introduced lazy loading, which
enables fast loading of data</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:65.0pt;margin-bottom:
17.05pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895689216'><span style='left:0px;position:absolute;left:0px;
top:-184215px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image857.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>## 8 2.1
2005-04-18 Support for UTF-8 encoding, and the beginnings of internatio ##
9 2.11 2010-04-22 Support for Windows 64 bit
systems. ## 10 2.13 2011-04-14 Adding a new compiler function that allows
speeding up funct ## 11 2.14 2011-10-31 Added mandatory namespaces for
packages. Added a new paralle ## 12 2.15 2012-03-30 New load balancing
functions. Improved serialization speed f ## 13 3.0 2013-04-03 Support for
numeric index values 231 and larger on 64 bit sy</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>While this returns a data.frame, note that as is typical for
scraped data, there is still further data cleaning to be done: here, formatting
dates, inserting <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>s,
and so on.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:10.25pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Note that data in a less consistently rectangular format may
take looping or other further munging to successfully parse. If the website
makes use of jQuery or other means to insert content, <span style='font-size:
9.0pt;line-height:134%;background:#FAFAFA'>read_html</span> may be insufficient
to scrape, and a more robust scraper like <span style='font-size:9.0pt;
line-height:134%;background:#FAFAFA'>RSelenium</span> may be necessary.</p>

<h2 style='margin-top:0in;margin-right:10.25pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc618993">Section 58.2: Using rvest when login is required</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>I common problem encounter when scrapping a web is how to
enter a userid and password to log into a web site.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In this example which I created to track my answers posted
here to stack overflow. The overall flow is to login, go to a web page collect
information, add it a dataframe and then move to the next page.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
14.8pt;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=684 id="Picture 603636"
src="R%20Notes%20for%20Professionals_files/image858.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The loop in this case is limited to only 5 pages, this needs
to change to fit your application. I replaced the user specific values with
******, hopefully this will provide some guidance for you problem.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618994">Chapter 59: Generalized
linear models</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc618995">Section 59.1: Logistic
regression on Titanic dataset</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Logistic regression is a particular case of the <i>generalized
linear model</i>, used to model dichotomous outcomes (<i>probit </i>and <i>complementary
log-log</i> models are closely related).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The name comes from the <i>link function</i> used, the <i>logit</i>
or <i>log-odds</i> function. The inverse function of the <i>logit</i> is called
the <i>logistic function</i> and is given by:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=185
height=42 id="Picture 48022"
src="R%20Notes%20for%20Professionals_files/image859.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>This function takes a value between <i>]-Inf;+Inf[</i> and
returns a value between <i>0</i> and <i>1</i>; i.e the <i>logistic function</i>
takes a linear predictor and returns a probability.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>family</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>binomial</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Logistic regression can be performed using the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>glm</span></b>
function with the option (shortcut for</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>family</span></b><span style='font-size:9.0pt;line-height:
  107%'> </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>binomial</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>link</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;logit&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:162.5pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span>; the <i>logit</i> being the default link function
for the binomial family).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>In this example, we try to predict the fate of the
passengers aboard the RMS Titanic.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Read the data:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:86.6pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895688192'><span style='left:0px;position:absolute;left:0px;
top:-185741px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>url</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;http://biostat.mc.vanderbilt.edu/wiki/pub/Main/DataSets/titanic.txt&quot;
</span><span style='font-size:9.0pt;line-height:110%'>titanic </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>read.csv</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>file</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>url</span></b><span
style='font-size:9.0pt;line-height:110%'>, stringsAsFactors </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> FALSE</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Clean the missing values:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:178.4pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:247%'><span style='position:relative;z-index:-1895687168'><span
style='left:0px;position:absolute;left:0px;top:-185834px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>In that
case, we replace the missing values by an approximation, the average. <span
style='font-size:9.0pt;line-height:247%'>titanic$age</span><span
style='font-size:9.0pt;line-height:247%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:247%;color:blue'>is.na</span></b><span
style='font-size:9.0pt;line-height:247%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:247%'>titanic$age</span><span
style='font-size:9.0pt;line-height:247%;color:#222222'>)]</span><span
style='font-size:9.0pt;line-height:247%'> </span><span style='font-size:9.0pt;
line-height:247%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:247%'> </span><b><span style='font-size:9.0pt;line-height:247%;
color:blue'>mean</span></b><span style='font-size:9.0pt;line-height:247%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:247%'>titanic$age,
na.rm </span><span style='font-size:9.0pt;line-height:247%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:247%'> TRUE</span><span style='font-size:
9.0pt;line-height:247%;color:#222222'>) </span>Train the model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:216.25pt;margin-bottom:
0in;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.75pt;line-height:176%'><span style='position:relative;z-index:
-1895686144'><span style='left:0px;position:absolute;left:0px;top:-185920px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:176%'>titanic.train </span><span
style='font-size:9.0pt;line-height:176%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:176%'> </span><b><span style='font-size:
9.0pt;line-height:176%;color:blue'>glm</span></b><span style='font-size:9.0pt;
line-height:176%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:176%'>survived ~ pclass </span><span style='font-size:9.0pt;
line-height:176%;color:#666666'>+</span><span style='font-size:9.0pt;
line-height:176%'> sex </span><span style='font-size:9.0pt;line-height:176%;
color:#666666'>+</span><span style='font-size:9.0pt;line-height:176%'>
age, </span><b><span style='font-size:9.0pt;
line-height:176%;color:blue'>family</span></b><span style='font-size:9.0pt;
line-height:176%'> </span><span style='font-size:9.0pt;line-height:176%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:176%'> </span><b><span
style='font-size:9.0pt;line-height:176%;color:blue'>binomial</span></b><span
style='font-size:9.0pt;line-height:176%'>, </span><b><span style='font-size:
9.0pt;line-height:176%;color:blue'>data</span></b><span style='font-size:9.0pt;
line-height:176%'> </span><span style='font-size:9.0pt;line-height:176%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:176%'> titanic</span><span
style='font-size:9.0pt;line-height:176%;color:#222222'>) </span>Summary of the
model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image860.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The output:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=214
src="R%20Notes%20for%20Professionals_files/image861.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.5pt;
margin-left:30.25pt;text-indent:-30.0pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=721 height=258
src="R%20Notes%20for%20Professionals_files/image862.gif"></span>Next we see the
deviance residuals, which are a measure of model fit. This part of output shows
the distribution of the deviance residuals for individual cases used in the
model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.25pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 552057"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>The next part
of the output shows the coefficients, their standard errors, the z-statistic
(sometimes called a Wald z-statistic), and the associated p-values.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:51.55pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image863.gif" align=left hspace=12>The
qualitative variables are &quot;dummified&quot;. A modality is considered as
the reference. The reference modality can be change with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>I</span> in the
formula.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:51.55pt'>All four predictors are statistically significant at a 0.1
% level.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:51.55pt'>The logistic regression coefficients give the change in
the log odds of the outcome for a one unit increase in the predictor variable.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:51.55pt'>To see the <i>odds ratio</i> (multiplicative change in the
odds of survival per unit increase in a predictor variable), exponentiate the
parameter.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.7pt;
margin-left:51.55pt'>To see the confidence interval (CI) of the parameter, use <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>confint</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:17.25pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 552059"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Below the
table of coefficients are fit indices, including the null and deviance
residuals and the Akaike Information Criterion (AIC), which can be used for
comparing model performance.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:51.55pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image864.gif" align=left hspace=12>When
comparing models fitted by maximum likelihood to the same data, the smaller the
AIC, the better the fit.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:21.2pt;
margin-left:51.55pt'>One measure of model fit is the significance of the
overall model. This test asks whether the model with predictors fits
significantly better than a model with just an intercept (i.e., a null model).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Example of odds ratios:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image865.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>With this model, compared to the first class, the 3rd class
passengers have about a tenth of the odds of survival.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Example of confidence interval for the parameters:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=136
src="R%20Notes%20for%20Professionals_files/image866.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=38
src="R%20Notes%20for%20Professionals_files/image867.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Exemple of calculating the significance of the overall model:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The test statistic is distributed chi-squared with degrees
of freedom equal to the differences in degrees of freedom between the current
and the null model (i.e., the number of predictor variables in the model).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image868.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The p-value is near 0, showing a strongly significant model.<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618996">Chapter 60: Reshaping data
between long and wide forms</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:145%'>In R, tabular data is stored in data
frames. This topic covers the various ways of transforming a single table.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;margin-left:.75pt;
line-height:145%'><a name="_Toc618997">Section 60.1: Reshaping data</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Often data comes in tables. Generally one can divide this
tabular data in wide and long formats. In a wide format, each variable has its
own column.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Person Height [cm] Age
[yr]</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Alison 178 20</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Bob 174 45</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in'>Carl 182 31</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>However, sometimes it is more convenient to have a long
format, in which all variables are in one column and the values are in a second
column.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:387.55pt;margin-bottom:
3.8pt;margin-left:.75pt'><b>Person Variable Value </b>Alison Height [cm] 178</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Bob Height [cm] 174</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Carl Height [cm] 182</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Alison Age [yr] 20</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Bob Age [yr] 45</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in'>Carl Age [yr] 31</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Base R, as well as third party packages can be used to
simplify this process. For each of the options, the <b><span style='font-size:
9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>mtcars </span></b>dataset
will be used. By default, this dataset is in a long format. In order for the
packages to work, we will insert the row names as the first column.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image869.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Base R</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>stack</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>unstack</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:30.75pt;margin-bottom:
0in;margin-left:38.05pt;text-indent:-37.8pt;line-height:129%'>There are two
functions in base R that can be used to convert between wide and long format: <span
style='font-size:9.0pt;line-height:129%;color:#222222;background:#FAFAFA'>()</span>
and <span style='font-size:9.0pt;line-height:129%;color:#222222;background:
#FAFAFA'>()</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image870.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.9pt;margin-bottom:5.75pt;
margin-left:.75pt;line-height:170%'>However, these functions can become very
complex for more advanced use cases. Luckily, there are other options using
third party packages. <b>The tidyr package</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=311 style='width:233.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>gather</span></p>
  </td>
  <td width=225 valign=top style='width:168.8pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> to convert from wide to long
  and </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>spread</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>This package uses <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> to convert from long to wide.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.2pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895683072'><span style='left:0px;position:absolute;left:0px;
top:-188431px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image871.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>library</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>tidyr</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>long </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
gather</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>data</span></b><span
style='font-size:9.0pt;line-height:110%'>, variable, value, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>12</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:forestgreen'># where variable is the name of the</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># variable column, value indicates the name of the
value column and 2:12 refers to</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=90
src="R%20Notes%20for%20Professionals_files/image872.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>melt</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>dcast</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:27.25pt;text-indent:-27.0pt'>The data.table package extends the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>reshape2</span>
functions and uses the function <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> to go from wide to long and <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
to go from long to wide.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image873.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc618998">Section 60.2: The reshape
function</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>reshape</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.75pt;
margin-left:.75pt'>The most flexible base R function for reshaping data is <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>reshape</span></b>.
See <span style='font-size:9.0pt;line-height:108%;color:#666666;background:
#FAFAFA'>?</span> for its syntax.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.2pt;margin-bottom:
12.45pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895682048'><span style='left:0px;position:absolute;left:0px;
top:-188801px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image874.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'># create unbalanced
longitudinal (panel) data set </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>set.seed</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1234</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>df</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>data.frame</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>identifier</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>rep</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'>, each</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, location</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>rep</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;up&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;down&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;left&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;up&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;center&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, each</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
period</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>rep</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, counts</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>sample</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>35</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>15</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>replace</span></b><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'>TRUE</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
values</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>runif</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>15</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))[</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>-</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>] </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>df</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:286.4pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> identifier location period counts values </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9.186478</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>22</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.431116</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>22</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.334104</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:143.35pt;margin-bottom:
.2pt;margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> down </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>31</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.161130</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:143.35pt;margin-bottom:
.2pt;margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> down </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>23</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.583062 7</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> left </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.513467</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:281.0pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>9</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'>
left </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>24</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5.199980 10</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>18</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.093998</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>12<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>20</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>7.628488</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>13<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'> center </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>10</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9.573291</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>14<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'> center </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>33</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9.156725</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.25pt;
margin-left:67.8pt;text-indent:-.9in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>15<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'> center </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>11</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5.228851</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Note that the data.frame is unbalanced, that is, unit 2 is
missing an observation in the first period, while units 3 and 4 are missing
observations in the second period. Also, note that there are two variables that
vary over the periods: counts and values, and two that do not vary: identifier
and location.</p>

<h4 style='margin-left:.75pt'>Long to Wide</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>To reshape the data.frame to wide format,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:210.8pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># reshape wide on time variable </span><span
style='font-size:9.0pt;line-height:112%'>df.wide </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>reshape</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>df</span></b><span style='font-size:9.0pt;line-height:112%'>, idvar</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;identifier&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, timevar</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;period&quot;</span><span
style='font-size:9.0pt;line-height:112%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:124.4pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895681024'><span style='left:0px;position:absolute;left:0px;
top:-189286px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image875.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> v.names</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;values&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;counts&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, direction</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;wide&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>df.wide identifier location
values.1 counts.1 values.2 counts.2 values.3 counts.3 </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9.186478</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.431116</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>22</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6.334104</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>22</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:119.05pt;margin-bottom:
17.65pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895680000'><span style='left:0px;position:absolute;left:0px;
top:-189321px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image314.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> down NA NA </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.161130</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>31</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6.583062</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>23 7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'> left </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.513467</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> NA NA </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5.199980</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>24 10</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> up </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.093998</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>18</span><span style='font-size:9.0pt;
line-height:110%'> NA NA </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>7.628488</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>20 13</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'> center </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9.573291</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>10</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9.156725</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>33</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5.228851</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>11</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Notice that the missing time periods are filled in with NAs.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In reshaping wide, the &quot;v.names&quot; argument
specifies the columns that vary over time. If the location variable is not
necessary, it can be dropped prior to reshaping with the &quot;drop&quot;
argument. In dropping the only non-varying / nonid column from the data.frame,
the v.names argument becomes unnecessary.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image876.gif"></span></p>

<h4 style='margin-left:.75pt'>Wide to Long</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To reshape long with the current df.wide, a minimal syntax
is</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image877.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>However, this is typically trickier:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:65.0pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895678976'><span style='left:0px;position:absolute;left:0px;
top:-189703px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># remove
&quot;.&quot; separator in df.wide names for counts and values </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>names</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>df.wide</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>)[</span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>grep</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;</span><b><span style='font-size:9.0pt;
line-height:112%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>.&quot;</span><span style='font-size:9.0pt;
line-height:112%'>, </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>names</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%'>df.wide</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))]</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>&lt;-</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>gsub</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\\</span></b><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>.&quot;</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>names</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>df.wide</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)[</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>grep</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\\</span></b><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>.&quot;</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>names</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>df.wide</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>))])</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Now the simple syntax will produce an error about undefined
columns.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>With column names that are more difficult for the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>reshape</span></b>
function to automatically parse, it is sometimes necessary to add the
&quot;varying&quot; argument which tells <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>reshape</span></b> to group
particular variables in wide format for the transformation into long format.
This argument takes a list of vectors of variable names or indices.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image878.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>In reshaping long, the &quot;v.names&quot; argument can be
provided to rename the resulting varying variables.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Sometimes the specification of &quot;varying&quot; can be
avoided by use of the &quot;sep&quot; argument which tells <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>reshape</span></b>
what part of the variable name specifies the value argument and which specifies
the time argument.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc618999">Chapter 61: RMarkdown and
knitr presentation</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Parameter definition</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:334.9pt;margin-bottom:
0in;margin-left:.75pt;line-height:141%'>title the title of the document
author The author of the document</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=230 style='width:2.4in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>r </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>format</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>Sys.time</span></b></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>'%d
  %B, %Y'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:103.35pt;margin-bottom:
0in;margin-left:.75pt;line-height:142%'>date The date of the document:
Can be &quot;<span style='font-size:9.0pt;line-height:142%;color:#222222;
background:#FAFAFA'>)</span>&quot; author The author of the
document</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.25pt;text-indent:55.4pt'>The output format of the document: at
least 10 format available. For html document, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>html_output</span>. For output</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:21.4pt;
margin-left:56.9pt'>PDF document, <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>pdf_document</span>, ..</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619000">Section 61.1: Adding a
footer to an ioslides presentation</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.35pt;
margin-left:.75pt'>Adding a footer is not natively possible. Luckily, we can
make use of jQuery and CSS to add a footer to the slides of an ioslides
presentation rendered with knitr. First of all we have to include the jQuery
plugin. This is done by the line</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.5pt;
margin-left:3.75pt;text-indent:0in;line-height:107%'><b><span style='font-size:
9.0pt;line-height:107%'>&lt;script</span></b><span style='font-size:9.0pt;
line-height:107%;color:#666666'> </span><span style='font-size:9.0pt;
line-height:107%;color:#000066'>src</span><span style='font-size:9.0pt;
line-height:107%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:107%;color:red'>&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js&quot;</span><b><span
style='font-size:9.0pt;line-height:107%'>&gt;&lt;/script&gt;</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='position:relative;z-index:-1895677952'><span
style='left:0px;position:absolute;left:0px;top:-190363px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image879.gif"></span></span>Now we
can use jQuery to alter the DOM (<i>document object model</i>) of our
presentation. In other words: we alter the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>...</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=173 style='width:1.8in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>document</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ready</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>function</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>HTML structure of the document. As soon as the presentation
is loaded (<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>$</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(()</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>{</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=218 style='width:163.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>title</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>slide</span></p>
  </td>
  <td width=14 valign=top style='width:10.45pt;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, <span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>backdrop</span></p>
  </td>
  <td width=31 valign=top style='width:23.15pt;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, or <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.1pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>segue</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>})</span>), we select all slides, that do not have the
class attributes <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>
and add the tag</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=447 style='width:335.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>&lt;footer</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>&gt;</span></b>&nbsp;</p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>&lt;/footer</span></b></p>
  </td>
  <td width=282 valign=top style='width:211.25pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>&gt;</span></b> right before each slide is 'closed'
  (so before </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>&lt;/slide</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>&gt;</span></b>). The attribute <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>label</span> carries the content that will
be displayed later on.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>All we have to do now is to layout our footer with CSS:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=159 style='width:119.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>&lt;footer</span></b></p>
  </td>
  <td width=15 valign=top style='width:10.95pt;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>&gt;</span></b> (</p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.35pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>footer</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>after</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>After each ):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:123.65pt;margin-bottom:
12.65pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>display
the content of the attribute <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>label </span>use font size 12 position the footer (20
pixels from the bottom of the slide and 60 pxs from the left)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>(the other properties can be ignored but might have to be
modified if the presentation uses a different style template).</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=306
src="R%20Notes%20for%20Professionals_files/image880.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=222
src="R%20Notes%20for%20Professionals_files/image881.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The result will look like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=539 id="Picture 49425"
src="R%20Notes%20for%20Professionals_files/image882.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619001">Section 61.2: Rstudio
example</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>This is a script saved as .Rmd, on the contrary of r scripts
saved as .R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To knit the script, either use the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>render</span> function or use the
shortcut button in Rstudio.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=90
src="R%20Notes%20for%20Professionals_files/image883.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=719 height=429
src="R%20Notes%20for%20Professionals_files/image884.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619002">Chapter 62: Scope of
variables</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619003">Section 62.1: Environments
and Functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Variables declared inside a function only exist (unless
passed) inside that function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=224
src="R%20Notes%20for%20Professionals_files/image885.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Variables passed into a function and then reassigned are
overwritten, <i>but only inside the function</i>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=259
src="R%20Notes%20for%20Professionals_files/image886.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Variables assigned in a higher environment than a function
exist within that function, without being passed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image887.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619004">Section 62.2: Function Exit</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>on.exit</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The function is handy for variable clean up if global
variables must be assigned.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Some parameters, especially those for graphics, can only be
set globally. This small function is common when creating more specialized
plots.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image888.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619005">Section 62.3: Sub functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Functions called within a function (ie subfunctions) must be
defined within that function to access any variables defined in the local
environment without being passed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=336
src="R%20Notes%20for%20Professionals_files/image889.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image890.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619006">Section 62.4: Global
Assignment</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>bar</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Variables can be assigned globally from any environment
using <span style='font-size:9.0pt;line-height:108%;color:#666666;background:
#FAFAFA'>&lt;&lt;-</span>. <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> can now access <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>y</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=35
src="R%20Notes%20for%20Professionals_files/image891.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=252
src="R%20Notes%20for%20Professionals_files/image892.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.4pt;
margin-left:.75pt'>Global assignment is highly discouraged. Use of a wrapper
function or explicitly calling variables from another local environment is
greatly preferred.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619007">Section 62.5: Explicit
Assignment of Environments and Variables</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Environments in R can be explicitly call and named.
Variables can be explicitly assigned and call to or from those environments.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=352 style='width:264.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>package</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>base</span></p>
  </td>
  <td width=179 valign=top style='width:134.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or a subenvironment within </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>package</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>base</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A commonly created environment is one which encloses .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image893.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Variables can be explicitly assigned and call to or from
those environments.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=161
src="R%20Notes%20for%20Professionals_files/image894.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Since <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>e2</span> inherits from <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>e1</span>, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>a</span> is <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>3</span> in both <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>e1</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>e2</span>. However,
assigning <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span>
within <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>e2</span>
does not change the value of <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>a</span> in</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=190
src="R%20Notes%20for%20Professionals_files/image895.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619008">Chapter 63: Performing a
Permutation Test</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619009">Section 63.1: A fairly
general function</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>We will use the built in <a
href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/ToothGrowth.html"><span
style='color:#2066B9'>tooth growth dataset</span></a>. We are interested in
whether there is a statistically significant difference in tooth growth when
the guinea pigs are given vitamin C vs orange juice.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here's the full example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=388
src="R%20Notes%20for%20Professionals_files/image896.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>After we read in the CSV, we define the function</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image897.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>This function takes two vectors, and shuffles their contents
together, then performs the function <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>testStat</span> on the shuffled vectors. The result of
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>teststat</span>
is added to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>trials</span>,
which is the return value.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>N </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'></span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>10</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>It does this <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>^</span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>5</span> times. Note that
the value <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>N</span>
could very well have been a parameter to the function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>This leaves us with a new set of data, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>trials</span>, the
set of means that might result if there truly is no relationship between the
two variables.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Now to define our test statistic:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image898.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Perform the test:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image899.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Calculate our actual observed mean difference:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image900.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's see what our observation looks like on a histogram of
our test statistic.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=354
src="R%20Notes%20for%20Professionals_files/image901.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>It doesn't <i>look</i> like our observed result is very
likely to occur by random chance...</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We want to calculate the p-value, the likeliehood of the
original observed result if their is no relationship between the two variables.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image902.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's break that down a bit:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image903.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Will create a boolean vector, like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image904.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>With <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>TRUE</span> every time the value of <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>result</span> is greater than or
equal to the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>observedMean</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The function <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>mean</span></b> will interpret this vector
as <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>1</span>
for <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>0</span>
for <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>,
and give us the percentage of <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>1</span>'s in the mix, ie the number of times our shuffled
vector mean difference surpassed or equalled what we observed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, we multiply by 2 because the distribution of our
test statistic is highly symmetric, and we really want to know which results
are &quot;more extreme&quot; than our observed result.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>All that's left is to output the p-value, which turns out to
be <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>0.06093939</span>.
Interpretation of this value is subjective, but I would say that it looks like
Vitamin C promotes tooth growth quite a lot more than Orange Juice does.<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619010">Chapter 64: xgboost</a></h1>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc619011">Section 64.1: Cross Validation and Tuning with xgboost</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=934 id="Picture 603641"
src="R%20Notes%20for%20Professionals_files/image905.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=991 id="Picture 603643"
src="R%20Notes%20for%20Professionals_files/image906.gif"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619012">Chapter 65: R code
vectorization best practices</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619013">Section 65.1: By row
operations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The key in vectorizing R code, is to reduce or eliminate
&quot;by row operations&quot; or method dispatching of R functions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>That means that when approaching a problem that at first
glance requires &quot;by row operations&quot;, such as calculating the means of
each row, one needs to ask themselves:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>What
are the classes of the data sets I'm dealing with?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Is there an existing compiled code that can achieve this
without the need of repetitive evaluation of R functions?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>If not, can I do these operation by columns instead by row?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:21.4pt'>Finally, is it worth spending a lot of time on developing
complicated vectorized code instead of just running a simple <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>apply</span></b>
loop? In other words, is the data big/sophisticated enough that R can't handle
it efficiently using a simple loop?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Putting aside the memory pre-allocation issue and growing
object in loops, we will focus in this example on how to possibly avoid <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>apply</span></b>
loops, method dispatching or re-evaluating R functions within loops.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>A standard/easy way of calculating mean by row would be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>apply</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>,
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>mean</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>Mazda RX4 Mazda RX4 Wag Datsun </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>710</span><span
style='font-size:9.0pt;line-height:110%'> Hornet </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> Drive Hornet Sportabout</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Valiant Duster </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>360</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895674880'><span style='left:0px;position:absolute;left:0px;top:-199620px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image907.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>29.90727</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>29.98136</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>23.59818</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>38.73955</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>53.66455 </span><span
style='font-size:9.0pt;line-height:110%'></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>35.04909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.72000 </span><span
style='font-size:9.0pt;line-height:110%'>Merc 240D Merc </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>230</span><span
style='font-size:9.0pt;line-height:110%'> Merc </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>280</span><span
style='font-size:9.0pt;line-height:110%'> Merc 280C Merc
450SE</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Merc 450SL Merc 450SLC</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>24.63455</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>27.23364</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>31.86000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>31.78727</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.43091 </span><span
style='font-size:9.0pt;line-height:110%'></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.50000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.35000 </span><span
style='font-size:9.0pt;line-height:110%'>Cadillac Fleetwood Lincoln
Continental Chrysler Imperial Fiat </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>128</span><span style='font-size:9.0pt;
line-height:110%'> Honda Civic</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Toyota Corolla Toyota Corona</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>66.23273</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>66.05855</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65.97227</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>19.44091</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.74227</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18.81409</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>24.88864</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Dodge Challenger AMC Javelin Camaro Z28 Pontiac
Firebird Fiat X1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>-</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9 </span><span style='font-size:9.0pt;line-height:110%'>Porsche
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>914</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> Lotus Europa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>47.24091</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.00773</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>58.75273</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>57.37955</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.92864</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.25pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>24.77909</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>24.88027 </span><span style='font-size:9.0pt;line-height:110%'>Ford
Pantera L Ferrari Dino Maserati Bora Volvo 142E</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>60.97182</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>34.50818</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.15545</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>26.26273</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.65pt;
margin-left:.75pt'>But can we do better? Lets's see what happened here:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:5.75pt;
margin-bottom:2.3pt;margin-left:19.65pt;text-align:center;text-indent:-13.9pt;
line-height:103%'><span style='line-height:103%'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>First, we converted a to a <b><span style='font-size:9.0pt;
line-height:103%;color:blue;background:#FAFAFA'>matrix</span></b>. (Note that
his happens within the <b><span style='font-size:9.0pt;line-height:103%;
color:blue;background:#FAFAFA'>apply</span></b> function.) This is both
inefficient and dangerous. a <b><span style='font-size:9.0pt;line-height:103%;
color:blue;background:#FAFAFA'>matrix</span></b> can't hold several column
types at a time. Hence, such conversion will</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>apply</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:
  107%'>, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>2</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>class</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=245 style='width:183.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>str</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>iris</span></b></p>
  </td>
  <td width=58 valign=top style='width:43.3pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>)</span> or with </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sapply</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:
  107%'>, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>class</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>probably lead to loss of information and some times to
misleading results (compare <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>) </span>with <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>)</span>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>nrow</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>mtcars</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:5.75pt;
margin-bottom:1.7pt;margin-left:19.65pt;text-align:center;text-indent:-13.9pt'><span
style='line-height:108%'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>Second of all, we performed an operation repetitively, one time
for each row. Meaning, we had to evaluate some R function <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
times. In this specific case, <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>mean</span></b> is not a computationally
expensive function, hence R could likely easily handle it even for a big data
set, but what would happen if we need to calculate the standard deviation by
row (which involves an expensive square root operation)? Which brings us to the
next point:</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:5.75pt;
margin-bottom:13.45pt;margin-left:19.65pt;text-align:center;text-indent:-13.9pt;
line-height:103%'><span style='line-height:103%'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span>We evaluated the R function many times, but maybe there already
is a compiled version of this operation?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Indeed we could simply do:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>rowMeans</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>) </span><span style='font-size:9.0pt;line-height:110%'>Mazda
RX4 Mazda RX4 Wag Datsun </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>710</span><span style='font-size:9.0pt;
line-height:110%'> Hornet </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;line-height:110%'>
Drive Hornet Sportabout</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Valiant Duster </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>360</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895673856'><span style='left:0px;position:absolute;left:0px;top:-200155px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image907.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>29.90727</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>29.98136</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>23.59818</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>38.73955</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>53.66455 </span><span
style='font-size:9.0pt;line-height:110%'></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>35.04909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>59.72000 </span><span
style='font-size:9.0pt;line-height:110%'>Merc 240D Merc </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>230</span><span
style='font-size:9.0pt;line-height:110%'> Merc </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>280</span><span
style='font-size:9.0pt;line-height:110%'> Merc 280C Merc
450SE</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Merc 450SL Merc 450SLC</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>24.63455</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>27.23364</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>31.86000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>31.78727</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.43091 </span><span
style='font-size:9.0pt;line-height:110%'></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.50000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.35000 </span><span
style='font-size:9.0pt;line-height:110%'>Cadillac Fleetwood Lincoln
Continental Chrysler Imperial Fiat </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>128</span><span style='font-size:9.0pt;
line-height:110%'> Honda Civic</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Toyota Corolla Toyota Corona</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>66.23273</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>66.05855</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65.97227</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>19.44091</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.74227</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18.81409</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>24.88864</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Dodge Challenger AMC Javelin Camaro Z28 Pontiac
Firebird Fiat X1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>-</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>9 </span><span style='font-size:9.0pt;line-height:110%'>Porsche
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>914</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'> Lotus Europa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>47.24091</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.00773</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>58.75273</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>57.37955</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.92864</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:108.25pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>24.77909</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>24.88027 </span><span style='font-size:9.0pt;line-height:110%'>Ford
Pantera L Ferrari Dino Maserati Bora Volvo 142E</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.5pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>60.97182</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>34.50818</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.15545</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>26.26273</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This involves no by row operations and therefore no
repetitive evaluation of R functions. <b>However</b>, we still converted a to
a <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>matrix</span></b>.
Though <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>rowMeans</span></b> has an error handling mechanism and it won't run
on a data set that it can't handle, it's still has an efficiency cost.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image908.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.45pt;
margin-left:.75pt'>But still, can we do better? We could try instead of a
matrix conversion with error handling, a different method that will allow us to
use <b><span style='font-size:9.0pt;line-height:108%;color:#333399;background:
#FAFAFA'>mtcars</span></b> as a vector (because a is essentially a <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>list</span></b>
and a <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>list</span></b> is a <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>vector</span></b>).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>Reduce</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>`</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>+</span><span
style='font-size:9.0pt;line-height:110%'>`, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>/</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>ncol</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>29.90727</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>29.98136</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>23.59818</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>38.73955</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>53.66455</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>35.04909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>59.72000</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>24.63455</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>27.23364</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>31.86000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:27.25pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895672832'><span style='left:0px;position:absolute;left:0px;
top:-200603px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image909.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>31.78727</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>46.43091</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>46.50000</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.35000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>66.23273</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>66.05855 </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>17</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>65.97227</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>19.44091</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>17.74227</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.81409</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>24.88864</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>47.24091</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>46.00773</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>58.75273</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>57.37955</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>18.92864</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.3pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>24.77909</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>24.88027</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>60.97182</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>34.50818</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63.15545</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>26.26273</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Now for possible speed gain, we lost column names and error
handling (including <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>NA</span> handling).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Another example would be calculating mean by group, using
base R we could try</p>

<p class=MsoNormal style='margin-top:0in;margin-right:5.65pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895671808'><span style='left:0px;position:absolute;left:0px;
top:-200752px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image909.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>aggregate</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>. ~ cyl, </span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>mean</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>cyl mpg disp hp drat wt
qsec vs am gear carb </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>26.66364</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>105.1364</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>82.63636</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.070909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2.285727</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>19.13727</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.9090909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.7272727</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.090909</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.545455</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>19.74286</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>183.3143</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>122.28571</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.585714</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.117143</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.97714</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.5714286</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.4285714</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.857143</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.428571</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>15.10000</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>353.1000</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>209.21429</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.229286</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.999214</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>16.77214</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.0000000</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.1428571</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.285714</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.500000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Still, we are basically evaluating an R function in a loop,
but the loop is now hidden in an internal C function (it matters little whether
it is a C or an R loop).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>Could we avoid it? Well there is a compiled function in R
called <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>rowsum</span></b>, hence we could do:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:65.05pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895670784'><span style='left:0px;position:absolute;left:0px;
top:-200938px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image871.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>rowsum</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span style='font-size:
9.0pt;line-height:110%'>$cyl</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>/</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>table</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>$cyl</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>mpg disp hp drat
wt qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:24.6pt;text-indent:-.3in;line-height:110%'><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>26.66364</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>105.1364</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>82.63636</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.070909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2.285727</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>19.13727</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.9090909</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.7272727</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>4.090909</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.545455</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895669760'><span style='left:0px;position:absolute;left:0px;top:-200973px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image782.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>19.74286</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>183.3143</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>122.28571</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.585714</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.117143</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>17.97714</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.5714286</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.4285714</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.857143</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.428571</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>15.10000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>353.1000</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>209.21429</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.229286</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3.999214</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>16.77214</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.0000000</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0.1428571</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3.285714</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.500000</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Though we had to convert to a matrix first too.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>A this point we may question whether our current data
structure is the most appropriate one. Is a is the best practice? Or should
one just switch to a <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>matrix</span></b> data structure in order to
gain efficiency?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>By row operations will get more and more expensive (even in
matrices) as we start to evaluate expensive functions each time. Lets us
consider a variance calculation by row example.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>Lets say we have a matrix <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>m</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:231.7pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895668736'><span style='left:0px;position:absolute;left:0px;
top:-201215px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image910.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>set.seed</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>m </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>matrix</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>sample</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>1e2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>10</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>m </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>8</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>9</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>8</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>33</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>39</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>86</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>71</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>100</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>81</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>68</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>89</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>84</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>12</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>16</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>57</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>80</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>32</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>82</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>69</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>11</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>41</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>92</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>62</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>91</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>53</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>13</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>42</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>31</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>60</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>70</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>98</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>79</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>66</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>94</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>29</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>67</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>45</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>59</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>20</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>96</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>64</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>36</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>63</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>76</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>48</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>85</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>75</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>99</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>18</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>27</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>19</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>44</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>56</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>37</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>95</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>26</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>40</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>24</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>21</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>25</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>52</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>51</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>83</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>28</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>49</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>17</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>46</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>22</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>43</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>47</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>74</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>35</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>97</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>77</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>65</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>55</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>54</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>78</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>34</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>50</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>90</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>30</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>61</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>14</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>58</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:212.9pt;margin-bottom:
.2pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='font-size:9.0pt;line-height:240%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:240%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:240%'>,</span><span style='font-size:9.0pt;
line-height:240%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:240%'> </span><span style='font-size:9.0pt;line-height:240%;
color:#CC0A0A'>88</span><span style='font-size:9.0pt;line-height:240%'> </span><span
style='font-size:9.0pt;line-height:240%;color:#CC0A0A'>73</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:#CC0A0A'>38</span><span style='font-size:9.0pt;
line-height:240%'> </span><span style='font-size:9.0pt;line-height:240%;
color:#CC0A0A'>15</span><span style='font-size:9.0pt;line-height:240%'> </span><span
style='font-size:9.0pt;line-height:240%;color:#CC0A0A'>9</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:#CC0A0A'>72</span><span style='font-size:9.0pt;
line-height:240%'> </span><span style='font-size:9.0pt;line-height:240%;
color:#CC0A0A'>7</span><span style='font-size:9.0pt;line-height:240%'> </span><span
style='font-size:9.0pt;line-height:240%;color:#CC0A0A'>93</span><span
style='font-size:9.0pt;line-height:240%'> </span><span style='font-size:9.0pt;
line-height:240%;color:#CC0A0A'>23</span><span style='font-size:9.0pt;
line-height:240%'> </span><span style='font-size:9.0pt;line-height:240%;
color:#CC0A0A'>87 </span>One could simply do:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image911.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>On the other hand, one could also completely vectorize this
operation by following the formula of variance</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image912.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619014">Chapter 66: Missing values</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:53.6pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>When we don't know the value a variable
takes, we say its value is missing, indicated by <span style='font-size:9.0pt;
line-height:145%;background:#FAFAFA'>NA</span>.</p>

<h2 style='margin-top:0in;margin-right:53.6pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619015">Section 66.1: Examining missing
data</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.na</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>anyNA</span> reports whether any missing values are present; while
reports missing values elementwise:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image913.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=32 style='width:24.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=32 valign=top style='width:24.1pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;font-family:"Arial",sans-serif'></span><span style='font-size:9.0pt;
  line-height:107%'>s.na</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>returns a logical vector that is coerced to integer values
under arithmetic operations (with FALSE=0, TRUE=1). We can use this to find out
how many missing values there are:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image914.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>is.na</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Extending this approach, we can use <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>colSums</span></b>
and on a data frame to count NAs per column:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image915.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:145%'>The <a
href="https://github.com/njtierney/naniar"><span style='color:#2066B9'>naniar
package</span></a> (currently on github but not CRAN) offers further tools for
exploring missing values.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;margin-left:.75pt;
line-height:145%'><a name="_Toc619016">Section 66.2: Reading and writing data
with NA values</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>read.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When reading tabular datasets with the <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>*</span>
functions, R automatically looks for missing values that look like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;NA&quot;</span>. However, missing values are not
always represented by <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>NA</span>. Sometimes a dot (<span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>.</span>), a hyphen(<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>-</span>) or a character-</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=221 style='width:165.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>na.strings</span></p>
  </td>
  <td width=113 valign=top style='width:84.55pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>parameter of the </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>read.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>value (e.g.: <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>empty</span>) indicates that a value is <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>. The <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>*</span>
function can be used to tell</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>R which symbols/characters need to be treated as <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span> values:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image916.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It is also possible to indicate that more than one symbol
needs to be read as <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>NA</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image917.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>write.csv</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:13.7pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Similarly, <span style='font-size:9.0pt;line-height:134%;
background:#FAFAFA'>NA</span>s can be written with customized strings using the
<span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>na</span>
argument to . Other tools for reading and writing tables have similar options.</p>

<h2 style='margin-top:0in;margin-right:13.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619017">Section 66.3: Using NAs of di&#57379;erent classes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The symbol <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>NA</span> is for a <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>logical</span></b> missing
value:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image918.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This is convenient, since it can easily be coerced to other
atomic vector types, and is therefore usually the only <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>NA </span>you will need:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image919.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you do need a single <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>NA</span> value of another type, use <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA_character_</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA_integer_</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA_real_</span>
or <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA_complex_</span>.
For missing values of fancy classes, subsetting with <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>NA_integer_</span> usually works;
for example, to get a missing-value Date:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image920.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619018">Section 66.4: TRUE/FALSE
and/or NA</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>NA</span> is a logical type and a logical operator with an <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span> will
return <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>
if the outcome is ambiguous. Below, <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>NA OR TRUE </span>evaluates to <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span> because at least one
side evaluates to <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>TRUE</span>, however <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>NA OR FALSE</span> returns <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>NA</span> because we do not know whether <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span> would
have been <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>
or <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image921.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>These properties are helpful if you want to subset a data
set based on some columns that contain <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>NA</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=322
src="R%20Notes%20for%20Professionals_files/image922.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619019">Chapter 67: Hierarchical
Linear Modeling</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619020">Section 67.1: basic model
fitting</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'><b>apologies</b>: <i>since I don't know of a channel for
discussing/providing feedback on requests for improvement, I'm going to put my
question here. Please feel free to point out a better place for this!</i>
@DataTx states that this is &quot;completely unclear, incomplete, or has severe
formatting problems&quot;. Since I don't see any big formatting problems (:-)
), a little bit more guidance about what's expected here for improving clarity
or completeness, and why what's here is unsalvageable, would be useful.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The primary packages for fitting hierarchical (alternatively
&quot;mixed&quot; or &quot;multilevel&quot;) linear models in R are <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>nlme</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>(older) and <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>lme4</span> (newer). These packages differ in many minor
ways but should generally result in very similar fitted models.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image923.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Differences to consider:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=216 style='width:2.25in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>vignette</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;lmer&quot;</span><span style='font-size:9.0pt;
  line-height:107%'>,package</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;lme4&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:28.9pt;margin-bottom:
1.7pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image864.gif" align=left hspace=12>formula
syntax is slightly different <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>nlme</span> is (still) somewhat better documented (e.g.
Pinheiro and Bates 2000 <i>Mixed-effects models in S-PLUS</i>;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>however, see Bates <i>et al.</i> 2015 <i>Journal of
Statistical Software</i>/<span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>)</span> for <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>lme4</span>) <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>lme4</span> is faster and allows easier
fitting of crossed random effects</p>

<p class=MsoNormal style='margin-top:0in;margin-right:33.65pt;margin-bottom:
12.6pt;margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>nlme</span> provides p-values for linear mixed models out
of the box, <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lme4</span>
requires add-on packages such as <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>lmerTest</span> or <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>afex nlme</span> allows modeling of heteroscedasticity
or residual correlations (in space/time/phylogeny)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The unofficial <a href="http://tinyurl.com/glmmFAQ.html"><span
style='color:#2066B9'>GLMM FAQ</span></a> provides more information, although
it is focused on <i>generalized</i> linear mixed models (GLMMs).</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619021">Chapter 68: *apply family
of functions (functionals)</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619022">Section 68.1: Using
built-in functionals</a></h2>

<h4 style='margin-left:.75pt'>Built-in functionals: lapply(), sapply(), and
mapply()</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>R comes with built-in functionals, of which perhaps the most
well-known are the apply family of functions. Here is a description of some of
the most common apply functions:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sapply</span></b></p>
  </td>
  <td width=107 valign=top style='width:80.35pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> = the same as </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=189 style='width:141.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>vapply</span></p>
  </td>
  <td width=103 valign=top style='width:76.9pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> = a variant of </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sapply</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=140 style='width:105.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>mapply</span></b></p>
  </td>
  <td width=54 valign=top style='width:40.25pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> = like </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=46 height=1
src="R%20Notes%20for%20Professionals_files/image924.gif" align=left hspace=12><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
= takes a list as an argument and applies the specified function to the list.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> but attempts to simplify the output to a vector
or a matrix.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> in which the output object's type must be
specified.</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>
but can pass multiple vectors as input to the specified function. Can be
simplified</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sapply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>like <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=326 style='width:244.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>Map</span></b></p>
  </td>
  <td width=98 valign=top style='width:73.3pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> is an alias to </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>mapply</span></b></p>
  </td>
  <td width=48 valign=top style='width:.5in;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> with </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>SIMPLIFY </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:25.85pt;
margin-left:0in;text-indent:0in;line-height:103%'><span style='font-size:11.0pt;
line-height:103%'> <img border=0 width=5 height=5
id="Group 598711" src="R%20Notes%20for%20Professionals_files/image197.gif"></span> .</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:1.7pt;margin-left:
.75pt'>lapply()</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=175
src="R%20Notes%20for%20Professionals_files/image925.gif"></span></p>

<h4 style='margin-left:.75pt'>sapply()</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>sapply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:32.9pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> will attempt to resolve its output to either a
vector or a matrix.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:151.4pt;margin-bottom:
21.1pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895665664'><span style='left:0px;position:absolute;left:0px;
top:-204797px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image232.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># Two examples to
show the different outputs of sapply() </span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>sapply</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>letters</span></b><span style='font-size:9.0pt;
line-height:112%'>, </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>print</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>## produces a vector
</span><span style='font-size:9.0pt;line-height:112%'>x </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>list</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>a </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:112%'>, </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>beta</span></b><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>exp</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'>, logic </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%'>TRUE,FALSE,FALSE,TRUE</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)) </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>sapply</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>x, </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>quantile</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'>## produces a matrix</span></p>

<h4 style='margin-left:.75pt'>mapply()</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=208 style='width:156.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>mapply</span></b></p>
  </td>
  <td width=122 valign=top style='width:91.4pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> works much like </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:26.7pt;
margin-bottom:0in;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>
except it can take multiple vectors as input (hence the m for multivariate).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:25.4pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image926.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619023">Section 68.2: Combining
multiple `data.frames` (`lapply`, `mapply`)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In this exercise, we will generate four bootstrap linear
regression models and combine the summaries of these models into a single data
frame.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="R%20Notes%20for%20Professionals_files/image927.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>At this point, we can take two approaches to inserting the
names into the data.frame.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=322
src="R%20Notes%20for%20Professionals_files/image928.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you're a fan of <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>magrittr</span> style pipes, you can accomplish the
entire task in a single chain (though it may not be prudent to do so if you
need any of the intermediary objects, such as the model objects themselves):</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image929.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619024">Section 68.3: Bulk File
Loading</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>for a large number of files which may need to be operated on
in a similar process and with well structured file names.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>firstly a vector of the file names to be accessed must be
created, there are multiple options for this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:22.8pt;
margin-left:20.9pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=691 height=114
src="R%20Notes%20for%20Professionals_files/image930.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:25.6pt;
margin-left:34.25pt;line-height:110%'><span style='position:relative;
z-index:-1895664640'><span style='left:0px;position:absolute;left:40px;
top:-206299px;width:678px;height:1px'><img width=678 height=1
src="R%20Notes%20for%20Professionals_files/image931.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>files </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>list.files</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;./&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, pattern </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>.rds$&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, full.names </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> TRUE</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rds</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:110.8pt;margin-bottom:
0in;margin-left:.75pt;line-height:216%'>where <span style='font-size:9.0pt;
line-height:216%;background:#FAFAFA'>X</span> is a vector of part of the files
naming format used. <b><span style='font-size:9.0pt;line-height:216%;
color:blue;background:#FAFAFA'>lapply</span></b> will output each response as
element of a list. <span style='font-size:9.0pt;line-height:216%;background:
#FAFAFA'>readRDS</span> is specific to <span style='font-size:9.0pt;line-height:
216%;background:#FAFAFA'>.</span> files and will change depending on the
application of the process.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image932.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>This is not necessarily faster than a for loop from testing
but allows all files to be an element of a list without assigning them
explicitly.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>library</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.2in;
margin-left:.75pt;line-height:188%'><span style='position:relative;z-index:
-1895663616'><span style='left:0px;position:absolute;left:0px;top:-206566px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>Finally,
we often need to load multiple packages at once. This trick can do it quite
easily by applying <span style='font-size:9.0pt;line-height:188%;color:#222222;
background:#FAFAFA'>()</span> to all libraries that we wish to import: <b><span
style='font-size:9.0pt;line-height:188%;color:blue'>lapply</span></b><span
style='font-size:9.0pt;line-height:188%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:188%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:188%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:188%;color:#CC0A0A'>&quot;jsonlite&quot;</span><span
style='font-size:9.0pt;line-height:188%'>,</span><span style='font-size:9.0pt;
line-height:188%;color:#CC0A0A'>&quot;stringr&quot;</span><span
style='font-size:9.0pt;line-height:188%'>,</span><span style='font-size:9.0pt;
line-height:188%;color:#CC0A0A'>&quot;igraph&quot;</span><span
style='font-size:9.0pt;line-height:188%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:188%'>,</span><b><span style='font-size:
9.0pt;line-height:188%;color:blue'>library</span></b><span style='font-size:
9.0pt;line-height:188%'>,character.only</span><span style='font-size:9.0pt;
line-height:188%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:188%'>TRUE</span><span style='font-size:9.0pt;line-height:188%;
color:#222222'>)</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619025">Section 68.4: Using
user-defined functionals</a></h2>

<h4 style='margin-left:.75pt'>User-defined functionals</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Users can create their own functionals to varying degrees of
complexity. The following examples are from <a
href="http://adv-r.had.co.nz/Functionals.html"><span style='color:#2066B9'>Functionals</span></a>
by Hadley Wickham:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image933.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In the first case, <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>randomise</span> accepts a single argument <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>f</span>, and calls
it on a sample of Uniform random variables. To demonstrate equivalence, we
call below:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=48
src="R%20Notes%20for%20Professionals_files/image934.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=235
src="R%20Notes%20for%20Professionals_files/image935.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>base</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>lapply</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>na.rm</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:10.65pt;margin-bottom:
1.7pt;margin-left:.75pt'>The second example is a re-implementation of , which
uses functionals to apply an operation (<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>f</span>) to each element in a list (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>). The <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>...</span>
parameter allows the user to pass additional arguments to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>f</span>, such as
the option in the <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>mean</span></b> function:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=470
src="R%20Notes%20for%20Professionals_files/image936.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619026">Chapter 69: Text mining</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619027">Section 69.1: Scraping Data
to build N-gram Word Clouds</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>The following example utilizes the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>tm</span> text mining package to
scrape and mine text data from the web to build word clouds with symbolic
shading and ordering.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:383.65pt;margin-bottom:
12.45pt;margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>require</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>RWeka</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>) </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>require</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>tau</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>require</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>tm</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>require</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>tm.plugin.webmining</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>require</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>wordcloud</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:129.35pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape Google Finance
--------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>googlefinance </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>GoogleFinanceSource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;NASDAQ:LFVN&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)) </span><span
style='font-size:9.0pt;line-height:112%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:59.15pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape Google News
-----------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>lv.googlenews </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>GoogleNewsSource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;LifeVantage&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:156.8pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>p.googlenews </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
WebCorpus</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>GoogleNewsSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Protandim&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)) </span><span
style='font-size:9.0pt;line-height:110%'>ts.googlenews </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>GoogleNewsSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;TrueScience&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.75pt;text-indent:0in;line-height:107%'><span style='font-size:
9.0pt;line-height:107%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:75.3pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape NYTimes
---------------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>lv.nytimes </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>NYTimesSource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>query </span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>&quot;LifeVantage&quot;</span><span style='font-size:9.0pt;
line-height:112%'>, appid </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'>
nytimes_appid</span><span style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:124.4pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>p.nytimes </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
WebCorpus</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>NYTimesSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Protandim&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, appid </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> nytimes_appid</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)) </span><span style='font-size:9.0pt;line-height:110%'>ts.nytimes
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>NYTimesSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;TrueScience&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, appid </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> nytimes_appid</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)) </span><span style='font-size:9.0pt;line-height:110%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:53.7pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape Reuters
---------------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>lv.reutersnews </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>ReutersNewsSource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;LifeVantage&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:140.6pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>p.reutersnews </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> WebCorpus</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>ReutersNewsSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Protandim&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)) </span><span
style='font-size:9.0pt;line-height:110%'>ts.reutersnews </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>ReutersNewsSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;TrueScience&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.75pt;text-indent:0in;line-height:107%'><span style='font-size:
9.0pt;line-height:107%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.35pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape Yahoo! Finance
--------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>lv.yahoofinance </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>YahooFinanceSource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;LFVN&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.75pt;text-indent:0in;line-height:107%'><span style='font-size:
9.0pt;line-height:107%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:64.55pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape Yahoo! News
-----------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>lv.yahoonews </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>YahooNewsSource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;LifeVantage&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:173.0pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>p.yahoonews </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
WebCorpus</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>YahooNewsSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;Protandim&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)) </span><span
style='font-size:9.0pt;line-height:110%'>ts.yahoonews </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>YahooNewsSource</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;TrueScience&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:3.75pt;text-indent:0in;line-height:107%'><span style='font-size:
9.0pt;line-height:107%'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:53.75pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># Scrape Yahoo! Inplay
---------------------------------------------------</span><span
style='font-size:9.0pt;line-height:112%'>lv.yahooinplay </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:112%'> WebCorpus</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>YahooInplaySource</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;LifeVantage&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:21.8pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895662592'><span style='left:0px;position:absolute;left:0px;
top:-208429px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image937.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'># Text Mining the
Results ------------------------------------------------</span><span
style='font-size:9.0pt;line-height:110%'>corpus </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>googlefinance,
lv.googlenews, p.googlenews, ts.googlenews, lv.yahoofinance, lv.yahoonews,
p.yahoonews, ts.yahoonews, lv.yahooinplay</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:forestgreen'>#lv.nytimes, p.nytimes, ts.nytimes,lv.reutersnews,
p.reutersnews, ts.reutersnews, </span><span style='font-size:9.0pt;line-height:
110%'>inspect</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>corpus</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>wordlist </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
</span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;lfvn&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;lifevantage&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;protandim&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;truescience&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;company&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;fiscal&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;nasdaq&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:243.2pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>ds0.1g </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
tm_map</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>corpus, content_transformer</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>tolower</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>ds1.1g </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>ds0.1g, content_transformer</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>removeWords</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
wordlist</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.8pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>ds1.1g </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
tm_map</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>ds1.1g, content_transformer</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>removeWords</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, stopwords</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;english&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)) </span><span
style='font-size:9.0pt;line-height:110%'>ds2.1g </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> tm_map</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>ds1.1g,
stripWhitespace</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>)
</span><span style='font-size:9.0pt;line-height:110%'>ds3.1g </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>ds2.1g, removePunctuation</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>ds4.1g </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
tm_map</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>ds3.1g, stemDocument</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:340.4pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>tdm.1g </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
TermDocumentMatrix</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>ds4.1g</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>dtm.1g </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> DocumentTermMatrix</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>ds4.1g</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=662 id="Picture 603648"
src="R%20Notes%20for%20Professionals_files/image938.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=348
height=363 id="Picture 54597"
src="R%20Notes%20for%20Professionals_files/image939.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>random.order</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Note the use of and a sequential pallet from RColorBrewer,
which allows the programmer to capture more information in the cloud by
assigning meaning to the order and coloring of terms.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Above is the 1-gram case.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>We can make a major leap to n-gram word clouds and in doing
so we<span style='font-family:"Arial",sans-serif'></span>ll see how to make
almost any text-mining analysis flexible enough to handle n-grams by
transforming our TDM.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>The initial difficulty you run into with n-grams in R is
that <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tm</span>,
the most popular package for text mining, does not inherently support
tokenization of bi-grams or n-grams. Tokenization is the process of
representing a word, part of a word, or group of words (or symbols) as a single
data element called a token.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>textcnt</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.35pt;
margin-left:.75pt'>Fortunately, we have some hacks which allow us to continue
using <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tm</span>
with an upgraded tokenizer. There<span style='font-family:"Arial",sans-serif'></span>s
more than one way to achieve this. We can write our own simple tokenizer using
the <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>()</span> function from tau:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>tokenize_ngrams </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>function</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x, n</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:135.9pt;margin-bottom:
0in;margin-left:.25pt;text-indent:3.75pt;line-height:241%'><span
style='position:relative;z-index:-1895661568'><span style='left:0px;position:
absolute;left:0px;top:-209945px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:241%;color:blue'>return</span></b><span
style='font-size:9.0pt;line-height:241%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:241%;color:blue'>rownames</span></b><span
style='font-size:9.0pt;line-height:241%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:241%;color:blue'>as.data.frame</span></b><span
style='font-size:9.0pt;line-height:241%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:241%;color:blue'>unclass</span></b><span
style='font-size:9.0pt;line-height:241%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:241%'>textcnt</span><span style='font-size:
9.0pt;line-height:241%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:241%'>x,method</span><span style='font-size:9.0pt;line-height:241%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:241%;
color:#CC0A0A'>&quot;string&quot;</span><span style='font-size:9.0pt;
line-height:241%'>,n</span><span style='font-size:9.0pt;line-height:241%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:241%'>n</span><span
style='font-size:9.0pt;line-height:241%;color:#222222'>))))) </span>or we can
invoke <span style='font-size:9.0pt;line-height:241%;background:#FAFAFA'>RWeka</span>'s
tokenizer within <span style='font-size:9.0pt;line-height:241%;background:#FAFAFA'>tm</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image940.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>From this point you can proceed much as in the 1-gram case:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=189
src="R%20Notes%20for%20Professionals_files/image941.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=729
src="R%20Notes%20for%20Professionals_files/image942.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The example above is <a
href="http://hack-r.com/n-gram-wordclouds-in-r/"><span style='color:#2066B9'>reproduced</span></a>
with permission from Hack-R's data science blog. Additional commentary may be
found in the original article.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619028">Chapter 70: ANOVA</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619029">Section 70.1: Basic usage
of aov()</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Analysis of Variance (aov) is used to determine if the means
of two or more groups differ significantly from each other. Responses are
assumed to be independent of each other, Normally distributed (within each
group), and the within-group variances are assumed equal.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>aov</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=21 style='width:15.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=21 valign=top style='width:15.85pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>aov</span></i></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In order to complete the analysis data must be in long
format (see reshaping data topic). <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> is a wrapper around the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function, using Wilkinson-Rogers formula notation <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>y~f</span> where <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>y</span> is the response
(independent) variable and <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>f</span> is a factor (categorical) variable representing
group membership. <i>If </i><i><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>f</span> is numeric rather than a factor variable, </i><i><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>() </span>will
report the results of a linear regression in ANOVA format, which may surprise
inexperienced users.</i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>aov</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function uses Type I (sequential)
Sum of Squares. This type of Sum of Squares tests all of the (main and
interaction) effects sequentially. The result is that the first effect tested
is also assigned shared variance between it and other effects in the model. For
the results from such a model to be reliable, data should be balanced (all
groups are of the same size).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>When the assumptions for Type I Sum of Squares do not hold,
Type II or Type III Sum of Squares may be applicable. Type II Sum of Squares
test each main effect after every other main effect, and thus controls for any
overlapping variance. However, Type II Sum of Squares assumes no interaction
between the main effects.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Lastly, Type III Sum of Squares tests each main effect after
every other main effect <i>and</i> every interaction. This makes Type III Sum
of Squares a necessity when an interaction is present.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Anova</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Type II and Type III Sums of Squares are implemented in the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Using the <b><span style='font-size:9.0pt;line-height:108%;
color:#333399;background:#FAFAFA'>mtcars</span></b> data set as an example.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image943.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To view summary of ANOVA model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image944.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>One can also extract the coefficients of the underlying <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
model:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image945.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619030">Section 70.2: Basic usage
of Anova()</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Anova</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>When dealing with an unbalanced design and/or non-orthogonal
contrasts, Type II or Type III Sum of Squares are necessary. The <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function from the <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>car</span> package implements these. Type II Sum of Squares assumes no
interaction between main effects. If interactions are assumed, Type III Sum of
Squares is appropriate.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=237 style='width:177.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Anova</span></p>
  </td>
  <td width=187 valign=top style='width:140.15pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function wraps around the </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lm</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Using the <b><span style='font-size:9.0pt;line-height:108%;
color:#333399;background:#FAFAFA'>mtcars</span></b> data sets as an example,
demonstrating the difference between Type II and Type III when an interaction
is tested.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=67
src="R%20Notes%20for%20Professionals_files/image946.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=354 id="Picture 603653"
src="R%20Notes%20for%20Professionals_files/image947.gif"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619031">Chapter 71: Raster and
Image Analysis</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:209.5pt;margin-bottom:
0in;margin-left:-.25pt;line-height:145%'>See also I/O for Raster Images</p>

<h2 style='margin-top:0in;margin-right:209.5pt;margin-bottom:0in;margin-left:
-.25pt;line-height:145%'><a name="_Toc619032">Section 71.1: Calculating GLCM
Texture</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><a href="https://en.wikipedia.org/wiki/Co-occurrence_matrix"><span
style='color:#2066B9'>Gray Level Co-Occurrence Matrix</span></a> (Haralick et
al. 1973) texture is a powerful image feature for image analysis. The <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>glcm</span> package
provides a easy-to-use function to calculate such texutral features for <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>RasterLayer</span>
objects in R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=469
src="R%20Notes%20for%20Professionals_files/image948.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Calculating
GLCM textures in one direction</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image949.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=639
height=549 id="Picture 55288"
src="R%20Notes%20for%20Professionals_files/image950.jpg"></p>

<h4 style='margin-left:.75pt'>Calculation rotation-invariant texture features</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The textural features can also be calculated in all 4
directions (0<span style='font-family:"Arial",sans-serif'></span>, 45<span
style='font-family:"Arial",sans-serif'></span>, 90<span style='font-family:
"Arial",sans-serif'></span> and 135<span style='font-family:"Arial",sans-serif'></span>)
and then combined to one rotation-invariant texture. The key for this is the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>shift</span>
parameter:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image951.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=449 id="Picture 55395"
src="R%20Notes%20for%20Professionals_files/image952.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619033">Section 71.2: Mathematical
Morphologies</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The package <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>mmand</span> provides functions for the calculation of
Mathematical Morphologies for n-dimensional arrays. With a little workaround,
these can also be calculated for raster images.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=439
src="R%20Notes%20for%20Professionals_files/image953.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>At first, a kernel (moving window) has to be set with a size
(e.g. 9x9) and a shape type (e.g. <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>disc</span>, <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>box</span></b> or <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>diamond</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image954.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>erode</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Afterwards, the raster layer has to be converted into an
array wich is used as input for the <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image955.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=474 style='width:355.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>erode</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, also the morphological
  functions </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>dilate</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>opening</span></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>closing</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Besides <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> can be applied like this.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=380
src="R%20Notes%20for%20Professionals_files/image956.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619034">Chapter 72: Survival
analysis</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619035">Section 72.1: Random Forest
Survival Analysis with randomForestSRC</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Just as the <a
href="https://en.wikipedia.org/wiki/Random_forest"><span style='color:#2066B9'>random
forest</span></a> algorithm may be applied to regression and classification
tasks, it can also be extended to survival analysis.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In the example below a survival model is fit and used for
prediction, scoring, and performance analysis using the package <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>randomForestSRC</span><a
href="https://cran.r-project.org/web/packages/randomForestSRC/index.html"><span
style='color:black;text-decoration:none'> </span></a><a
href="https://cran.r-project.org/web/packages/randomForestSRC/index.html"><span
style='color:#2066B9'>from CRAN</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=792 id="Picture 603658"
src="R%20Notes%20for%20Professionals_files/image957.gif"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619036">Section 72.2: Introduction
- basic fitting and plotting of parametric survival models with the survival
package</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>survreg</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>survfit</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:11.05pt;margin-bottom:
12.75pt;margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>survival</span> is the most commonly used package for
survival analysis in R. Using the built-in <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>lung</span> dataset we can get started
with Survival Analysis by fitting a regression model with the function,
creating a curve with , and plotting predicted survival curves by calling the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>predict</span></b>
method for this package with new data.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In the example below we plot 2 predicted curves and vary <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>sex</span> between
the 2 sets of new data, to visualize its effect:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=454 id="Picture 603660"
src="R%20Notes%20for%20Professionals_files/image958.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=614 id="Picture 56102"
src="R%20Notes%20for%20Professionals_files/image959.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619037">Section 72.3: Kaplan Meier
estimates of survival curves and risk set tables with survminer</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Base plot</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image960.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=502 id="Picture 56192"
src="R%20Notes%20for%20Professionals_files/image961.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>More advanced</p>

<p class=MsoNormal style='margin-top:0in;margin-right:146.0pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895660544'><span style='left:0px;position:absolute;left:0px;
top:-218595px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image910.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>ggsurvplot</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>( </span><span
style='font-size:9.0pt;line-height:112%'>fit, </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># survfit object
with calculated statistics. </span><span style='font-size:9.0pt;line-height:
112%'>risk.table </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'>
TRUE, </span><span style='font-size:9.0pt;line-height:112%;color:forestgreen'>#
show risk table. </span><span style='font-size:9.0pt;line-height:112%'>pval </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> TRUE, </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># show p-value of
log-rank test. </span><span style='font-size:9.0pt;line-height:112%'>conf.int
</span><span style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> TRUE, </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># show confidence
intervals for </span><span style='font-size:9.0pt;line-height:112%'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># point estimaes of
survival curves.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'> xlim </span><span style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:112%'>,</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>2000</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'>, </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># present narrower X
axis, but not affect</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.65pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:
9.0pt;line-height:112%;color:forestgreen'># survival estimates. </span><span
style='font-size:9.0pt;line-height:112%'>break.time.by </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>500</span><span style='font-size:9.0pt;
line-height:112%'>, </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># break X axis in time intervals by 500.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:27.25pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%'> ggtheme </span><span style='font-size:9.0pt;line-height:
112%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'>
theme_RTCGA</span><span style='font-size:9.0pt;line-height:112%;color:#222222'>()</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># customize plot and risk table with a
theme. </span><span style='font-size:9.0pt;line-height:112%'>risk.table.y.text.col
</span><span style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>T</span></b><span style='font-size:9.0pt;
line-height:112%'>, </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># colour risk table text annotations.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'> risk.table.y.text </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> FALSE </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># show bars instead
of names in text annotations</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># in legend of risk table</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:231.7pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=502 id="Picture 56284"
src="R%20Notes%20for%20Professionals_files/image962.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:202.95pt;margin-bottom:
12.9pt;margin-left:-.25pt;line-height:215%'>Based on <a
href="http://r-addict.com/2016/05/23/Informative-Survival-Plots.html"><span
style='color:#2066B9'>http://r-addict.com/2016/05/23/Informative-Survival-Plots.html</span></a></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619038">Chapter 73:
Fault-tolerant/resilient code</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:.8pt;margin-left:0in;
text-indent:0in;line-height:109%'><span style='font-size:11.0pt;line-height:
109%;color:black;font-weight:normal'> </span><span style='font-size:
10.0pt;line-height:109%;color:black'>Parameter Details</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:87.6pt'>In case the &quot;try part&quot; was completed successfully
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>tryCatch</span></b>
will return the <b>last evaluated expression</b>. Hence, the actual value being
returned in case everything went well and there is no</p>

<p class=MsoNormal style='margin:0in;text-indent:0in'>expr condition
(i.e. a <i>warning</i> or an <i>error</i>) is the return value of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>readLines</span></b>.
Note that you don't need to</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:8.7pt;
margin-bottom:4.15pt;margin-left:68.25pt;text-align:center;line-height:103%'>explicilty
state the return value via <b><span style='font-size:9.0pt;line-height:103%;
color:blue;background:#FAFAFA'>return</span></b> as code in the &quot;try
part&quot; is not wrapped insided a function environment (unlike that for the
condition handlers for warnings and error below)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:87.6pt'>Provide/define a handler function for all the conditions
that you want to handle explicitly. AFAIU, you can provide handlers for <i>any</i>
type of conditions (not just <i>warnings</i> and <i>errors</i>, but also</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:4.05pt;
margin-left:86.35pt;text-indent:-86.1pt'>warning/error/etc <i>custom</i>
conditions; see <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>simpleCondition</span></b> and friends for that) as long as
the <b>name of the respective handler function matches the class of the
respective condition</b> (see the <i>Details </i>part of the doc for <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>tryCatch</span></b>).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.25pt;text-indent:86.1pt'>Here goes everything that should be
executed at the very end, <b>regardless</b> if the expression in the &quot;try
part&quot; succeeded or if there was any condition. If you want more than one
expression to finally</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>expression</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>finally </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:21.4pt;
margin-left:87.6pt'><span style='position:relative;z-index:251824128'><span
style='left:0px;position:absolute;left:229px;top:-219636px;width:7px;
height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image295.gif"></span></span>be
executed, then you need to wrap them in curly brackets, otherwise you could
just have written <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>=</span><span style='font-size:9.0pt;line-height:108%'> </span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&lt;&gt;</span>
(i.e. the same logic as for &quot;try part&quot;.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619039">Section 73.1: Using
tryCatch()</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We're defining a robust version of a function that reads the
HTML code from a given URL. <i>Robust</i> in the sense that we want it to
handle situations where something either goes wrong (error) or not quite the
way we planned it to</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>(warning). The umbrella term for errors and warnings is <i>condition</i></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=573
src="R%20Notes%20for%20Professionals_files/image963.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=334
src="R%20Notes%20for%20Professionals_files/image964.gif"></span></p>

<h4 style='margin-left:.75pt'>Testing things out</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's define a vector of URLs where one element isn't a
valid URL</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=92
src="R%20Notes%20for%20Professionals_files/image965.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>And pass this as input to the function we defined above</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=256
src="R%20Notes%20for%20Professionals_files/image966.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;margin-left:
.75pt'>Investigating the output</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:480.85pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>length</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>y</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>) </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># [1] 3</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:231.7pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>head</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>y</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]])</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.85pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895658496'><span style='left:0px;position:absolute;left:0px;
top:-221298px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image967.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># [1]
&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD HTML 4.01
Transitional//EN\&quot;&gt;&quot; # [2]
&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;R: Functions to Manipulate
Connections&lt;/title&gt;&quot; # [3] &quot;&lt;meta http-equiv=\&quot;Content-Type\&quot;
content=\&quot;text/html; charset=utf-8\&quot;&gt;&quot; # [4] &quot;&lt;link
rel=\&quot;stylesheet\&quot; type=\&quot;text/css\&quot;
href=\&quot;R.css\&quot;&gt;&quot; </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># [5]
&quot;&lt;/head&gt;&lt;body&gt;&quot;
</span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=71
src="R%20Notes%20for%20Professionals_files/image968.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619040">Chapter 74: Reproducible R</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.4pt;
margin-left:.75pt'>With 'Reproducibility' we mean that someone else (perhaps
you in the future) can repeat the steps you performed and get the same result.
See the <a href="https://cran.r-project.org/web/views/ReproducibleResearch.html"><span
style='color:#2066B9'>Reproducible Research Task View</span></a>.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619041">Section 74.1: Data
reproducibility</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=104 style='width:78.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dput</span></b></p>
  </td>
  <td width=47 valign=top style='width:34.95pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </b></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dget</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.7pt;
margin-left:78.65pt;line-height:108%'><b><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dput</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The easiest way to share a (preferable small) data frame is
to use a basic function <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>. It will export an R object in a
plain text form.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>getwd</span></i></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>setwd</span></i></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
1.55pt;margin-left:-.25pt;line-height:107%'><i>Note: Before making the example
data below, make sure you're in an empty folder you can write to. Run </i><i><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>()</span>
and read </i><i><span style='font-size:9.0pt;line-height:107%;color:#666666;
background:#FAFAFA'>?</span> if you need to change folders.</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image969.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dget</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Then, anyone can load the precise R object to their
GlobalEnvironment using the <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image970.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:8.75pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>For larger R objects, there are a
number of ways of saving them reproducibly. See Input and output .</p>

<h2 style='margin-top:0in;margin-right:8.75pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619042">Section 74.2: Package
reproducibility</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Package reproducibility is a very common issue in
reproducing some R code. When various packages get updated, some
interconnections between them may break. The ideal solution for the problem is
to reproduce the image of the R code writer's machine on your computer at the
date when the code was written. And here comes <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>checkpoint </span>package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>Starting from 2014-09-17, the authors of the package make
daily copies of the whole CRAN package repository to their own mirror
repository -- Microsoft R Archived Network. So, to avoid package reproduciblity
issues when creating a reproducible R project, all you need is to:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Make
sure that all your packages (and R version) are up-to-date.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=252 style='width:189.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>checkpoint</span><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>::</span><span style='font-size:9.0pt;line-height:107%'>checkpoint</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>'YYYY-MM-DD'</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Include
<span style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
line in your code.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>checkpoint</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=136 style='width:101.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>library</span></b></p>
  </td>
  <td width=35 valign=top style='width:26.1pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> or </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>require</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>checkpoint</span> will create a directory <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>.</span> in your R_home directory (<span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;~/&quot;</span>).
To this technical directory it will install all the packages, that are used in
your project. That means, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>checkpoint</span> looks through all the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.R</span> files in
your project directory to pick up all the <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> calls and install
all the required packages in the form they existed at CRAN on the specified
date.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>PRO</b> You are freed from the package reproducibility
issue.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>CONTRA</b> For each specified date you have to download
and install all the packages that are used in a certain project that you aim to
reproduce. That may take quite a while.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619043">Chapter 75: Fourier Series
and Transformations</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The Fourier transform decomposes a function of time (a
signal) into the frequencies that make it up, similarly to how a musical chord
can be expressed as the amplitude (or loudness) of its constituent notes. The
Fourier transform of a function of time itself is a complex-valued function of
frequency, whose absolute value represents the amount of that frequency present
in the original function, and whose complex argument is the phase offset of the
basic sinusoid in that frequency.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The Fourier transform is called the frequency domain
representation of the original signal. The term Fourier transform refers to
both the frequency domain representation and the mathematical operation that
associates the frequency domain representation to a function of time. The
Fourier transform is not limited to functions of time, but in order to have a
unified language, the domain of the original function is commonly referred to
as the time domain. For many functions of practical interest one can define an
operation that reverses this: the inverse Fourier transformation, also called
Fourier synthesis, of a frequency domain representation combines the
contributions of all the different frequencies to recover the original function
of time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Linear operations performed in one domain (time or
frequency) have corresponding operations in the other domain, which are
sometimes easier to perform. The operation of differentiation in the time
domain corresponds to multiplication by the frequency, so some differential
equations are easier to analyze in the frequency domain. Also, convolution in
the time domain corresponds to ordinary multiplication in the frequency domain.
Concretely, this means that any linear time-invariant system, such as an electronic
filter applied to a signal, can be expressed relatively simply as an operation
on frequencies. So significant simplification is often achieved by transforming
time functions to the frequency domain, performing the desired operations, and
transforming the result back to time.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Harmonic analysis is the systematic study of the
relationship between the frequency and time domains, including the kinds of
functions or operations that are &quot;simpler&quot; in one or the other, and
has deep connections to almost all areas of modern mathematics.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Functions that are localized in the time domain have Fourier
transforms that are spread out across the frequency domain and vice versa. The
critical case is the Gaussian function, of substantial importance in
probability theory and statistics as well as in the study of physical phenomena
exhibiting normal distribution (e.g., diffusion), which with appropriate
normalizations goes to itself under the Fourier transform. Joseph Fourier
introduced the transform in his study of heat transfer, where Gaussian functions
appear as solutions of the heat equation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The Fourier transform can be formally defined as an improper
Riemann integral, making it an integral transform, although this definition is
not suitable for many applications requiring a more sophisticated integration
theory.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>For example, many relatively simple applications use the
Dirac delta function, which can be treated formally as if it were a function,
but the justification requires a mathematically more sophisticated viewpoint.
The Fourier transform can also be generalized to functions of several variables
on Euclidean space, sending a function of 3dimensional space to a function of
3-dimensional momentum (or a function of space and time to a function of
4momentum).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This idea makes the spatial Fourier transform very natural
in the study of waves, as well as in quantum mechanics, where it is important
to be able to represent wave solutions either as functions either of space or
momentum and sometimes both. In general, functions to which Fourier methods are
applicable are complex-valued, and possibly vector-valued. Still further
generalization is possible to functions on groups, which, besides the original
Fourier transform on <span style='font-family:"Arial",sans-serif'>&#8477;</span>
or <span style='font-family:"Arial",sans-serif'>&#8477;</span>n (viewed as
groups under addition), notably includes the discrete-time Fourier transform
(DTFT, group = <span style='font-family:"Arial",sans-serif'>&#8484;</span>),
the discrete Fourier transform (DFT, group = <span style='font-family:"Arial",sans-serif'>&#8484;</span>
mod N) and the Fourier series or circular Fourier transform (group = S1, the
unit circle <span style='font-family:"Arial",sans-serif'>&#8776;</span> closed
finite interval with endpoints identified). The latter is routinely employed to
handle periodic functions. The Fast Fourier transform (FFT) is an algorithm for
computing the DFT.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;margin-left:
.75pt;line-height:108%'><a name="_Toc619044">Section 75.1: Fourier Series</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Joseph Fourier showed that any periodic wave can be
represented by a sum of simple sine waves. This sum is called the Fourier
Series. The Fourier Series only holds while the system is linear. If there is,
eg, some overflow effect (a threshold where the output remains the same no
matter how much input is given), a non-linear effect enters the picture,
breaking the sinusoidal wave and the superposition principle.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image971.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=737 id="Picture 57043"
src="R%20Notes%20for%20Professionals_files/image972.jpg"></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image973.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=737 id="Picture 57096"
src="R%20Notes%20for%20Professionals_files/image974.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Also, the Fourier Series only holds if the waves are
periodic, ie, they have a repeating pattern (non periodic waves are dealt by
the Fourier Transform, see below). A periodic wave has a frequency f and a
wavelength <span style='font-family:"Arial",sans-serif'>&#955;</span> (a
wavelength is the distance in the medium between the beginning and end of a
cycle, <span style='font-family:"Arial",sans-serif'>&#955;</span>=v/f0, where v
is the wave velocity) that are defined by the repeating pattern. A non-periodic
wave does not have a frequency or wavelength.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Some concepts:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>The
fundamental period, T, is the period of all the samples taken, the time between
the first sample and the last</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>The sampling rate, sr, is the number of samples taken over
a time period (aka acquisition frequency). For simplicity we will make the time
interval between samples equal. This time interval is called the sample
interval, si, which is the fundamental period time divided by the number of
samples N. So, si=TN</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 561966"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>The
fundamental frequency, f0, which is 1T. The fundamental frequency is the
frequency of the repeating pattern or how long the wavelength is. In the
previous waves, the fundamental frequency was 12<span style='font-family:"Arial",sans-serif'>&#960;</span>.
The frequencies of the wave components must be integer multiples of the
fundamental frequency. f0 is called the first harmonic, the second harmonic is
2<span style='font-family:"Arial",sans-serif'>&#8727;</span>f0, the third is 3<span
style='font-family:"Arial",sans-serif'>&#8727;</span>f0, etc.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image975.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=750 id="Picture 57230"
src="R%20Notes%20for%20Professionals_files/image976.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here<span style='font-family:"Arial",sans-serif'></span>s a
R function for plotting trajectories given a fourier series:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=37
src="R%20Notes%20for%20Professionals_files/image977.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895656448'><span style='left:0px;position:absolute;left:0px;top:-226365px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image269.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> w </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>*</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>pi</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>*</span><span style='font-size:9.0pt;
line-height:110%'>f.0 trajectory </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>sapply</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>ts</span></b><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>function</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>t</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> fourier.series</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>t</span></b><span
style='font-size:9.0pt;line-height:110%'>,w</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)) </span><span style='font-size:9.0pt;
line-height:110%'></span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>plot</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>ts</span></b><span style='font-size:9.0pt;
line-height:110%'>, trajectory, type</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;l&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, xlab</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;time&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, ylab</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;f(t)&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>; </span><span
style='font-size:9.0pt;line-height:110%'></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>abline</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>h</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:110%'>,lty</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>3</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)}</span><br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619045">Chapter 76: .Rprofile</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619046">Section 76.1: .Rprofile -
the first chunk of code executed</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>.</span> is a file containing R code that is executed when you launch
R from the directory containing the</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=309 style='width:232.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile</span></p>
  </td>
  <td width=158 valign=top style='width:118.6pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>file. The similarly named </p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile.site</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=311 style='width:233.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile.site</span></p>
  </td>
  <td width=160 valign=top style='width:120.15pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and to a greater extend <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.45pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>.</span>, located in R's home directory, is executed by default every
time you load R from any directory. can be used to initialize an R session
with personal preferences and various utility functions that you have defined.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rprofile</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.75pt;
margin-left:0in;text-indent:0in;line-height:103%'><span style='font-size:11.0pt;
line-height:103%'> <img border=0 width=3 height=51 id="Group 592380"
src="R%20Notes%20for%20Professionals_files/image978.gif"></span> Important
note: if you use RStudio, you can have a separate <span style='font-size:9.0pt;
line-height:103%;background:#FAFAFA'>. </span>
in every RStudio project directory.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Here are some examples of code that you might include in an
.Rprofile file.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Setting
your R home directory</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image979.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;margin-left:
.75pt'>Setting page size options</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:275.65pt;margin-bottom:
6.25pt;margin-left:3.5pt;line-height:110%'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif" align=left hspace=12><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>options</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>papersize</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;a4&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>options</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>editor</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;notepad&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>options</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>pager</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;internal&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;margin-left:
.75pt'>set the default help type <span style='font-size:11.0pt;line-height:
109%'><img border=0 width=718 height=26 id="Group 592375"
src="R%20Notes%20for%20Professionals_files/image980.gif"></span><span
style='font-size:9.0pt;line-height:109%;color:blue'>options</span><span
style='font-size:9.0pt;line-height:109%;color:#222222;font-weight:normal'>(</span><span
style='font-size:9.0pt;line-height:109%;font-weight:normal'>help_type</span><span
style='font-size:9.0pt;line-height:109%;color:#666666;font-weight:normal'>=</span><span
style='font-size:9.0pt;line-height:109%;color:#CC0A0A;font-weight:normal'>&quot;html&quot;</span><span
style='font-size:9.0pt;line-height:109%;color:#222222;font-weight:normal'>) </span>set
a site library</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895654400'><span style='left:0px;position:absolute;left:0px;top:-227038px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>.Library.site </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>file.path</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>chartr</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;/&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>R.home</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>())</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;site-library&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=94
src="R%20Notes%20for%20Professionals_files/image981.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This will allow you to not have to install all the packages
again with each R version update.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image982.gif"></span></p>

<h4 style='margin-left:.75pt'>Custom shortcuts or functions</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Last</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>value</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Sometimes it is useful to have a shortcut for a long R
expression. A common example of this setting an active binding to access the
last top-level expression result without having to type out <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image983.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Because .Rprofile is just an R file, it can contain any
arbitrary R code.</p>

<h4 style='margin-left:.75pt'>Pre-loading the most useful packages</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>This is bad practice and should generally be avoided because
it separates package loading code from the scripts where those packages are
actually used.</p>

<h4 style='margin-left:.75pt'>See Also</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Startup</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Profile.site</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>RHOME</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>}</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>etc</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Renviron.site</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Renviron</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>See <span style='font-size:9.0pt;line-height:134%;color:#222222;
background:#FAFAFA'>)</span> for all the different startup scripts, and further
aspects. In particular, two system-wide <span style='font-size:9.0pt;
line-height:134%;background:#FAFAFA'>Profile </span>files can be loaded as
well. The first, <span style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>Rprofile</span>,
may contain global settings, the other file may contain local choices the
system administrator can make for all users. Both files are found in the <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>$</span><span
style='font-size:9.0pt;line-height:134%;color:#222222;background:#FAFAFA'>{</span>
directory of the R installation. This directory also contains global files <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>Renviron</span>
and which both can be completemented with a local file <span style='font-size:
9.0pt;line-height:134%;background:#FAFAFA'>~</span><span style='font-size:9.0pt;
line-height:134%;color:#666666;background:#FAFAFA'>/</span><span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>.</span> in the
user's home directory.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619047">Section 76.2: .Rprofile example</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Startup</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image984.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Options</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image985.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Custom
Functions</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image986.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619048">Chapter 77: dplyr</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619049">Section 77.1: dplyr's
single table verbs</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'><a
href="https://cran.r-project.org/web/packages/dplyr/index.html"><span
style='color:#2066B9'>dplyr</span></a> introduces a grammar of data
manipulation in <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span>.
It provides a consistent interface to work with data no matter where it is
stored: data.frame, data.table, or a <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>database</span>. The key pieces of <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span> are
written using Rcpp, which makes it very fast for working with in-memory data.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>dplyr</span>'s philosophy is to have small functions that do one thing
well. The five simple functions (<b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>filter</span></b>, <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>arrange</span>, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>SELECT</span></b>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mutate</span>,
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>summarise</span>)
can be used to reveal new ways to describe data. When combined with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>group_by</span>,
these functions can be used to calculate group wise summary statistics.</p>

<h4 style='margin-left:.75pt'>Syntax commonalities</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>All these functions have a similar syntax:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>The
first argument to all these functions is always a data frame</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Columns can be referred directly using bare variable names
(i.e., without using <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>$</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:21.4pt'>These functions do not modify the original data itself,
i.e., they don't have side effects. Hence, the results should always be saved
to an object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.25pt;
margin-left:.75pt'>We will use the built-in <a
href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html"><span
style='color:#2066B9'>mtcars</span></a> dataset to explore <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span>'s
single table verbs. Before converting the type of <b><span style='font-size:
9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>mtcars</span></b> to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tbl_df</span>
(since it makes printing cleaner), we add the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>rownames</span></b> of the
dataset as a column using <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>rownames_to_column </span>function from the <a
href="https://cran.r-project.org/web/packages/tibble/index.html"><span
style='color:#2066B9'>tibble</span></a> package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:119.05pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:224%'><span style='position:relative;
z-index:-1895652352'><span style='left:0px;position:absolute;left:0px;
top:-228833px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image987.gif"></span></span><b><span
style='font-size:9.0pt;line-height:224%;color:blue'>library</span></b><span
style='font-size:9.0pt;line-height:224%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:224%'>dplyr</span><span style='font-size:
9.0pt;line-height:224%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:224%'> </span><span style='font-size:9.0pt;line-height:224%;
color:forestgreen'># This documentation was written using version 0.5.0 </span><span
style='font-size:9.0pt;line-height:224%'>mtcars_tbl </span><span
style='font-size:9.0pt;line-height:224%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:224%'> as_data_frame</span><span
style='font-size:9.0pt;line-height:224%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:224%'>tibble</span><span style='font-size:
9.0pt;line-height:224%;color:#666666'>::</span><span style='font-size:9.0pt;
line-height:224%'>rownames_to_column</span><span style='font-size:9.0pt;
line-height:224%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:224%;color:#333399'>mtcars</span></b><span style='font-size:9.0pt;
line-height:224%'>, </span><span style='font-size:9.0pt;line-height:224%;
color:#CC0A0A'>&quot;cars&quot;</span><span style='font-size:9.0pt;line-height:
224%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:281.0pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># examine the structure of data </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>mtcars_tbl</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 6 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cars mpg cyl disp hp drat
wt qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Mazda RX4 21.0 6 160 110 3.90
2.620 16.46 0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Mazda RX4 Wag 21.0 6 160 110 3.90
2.875 17.02 0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Datsun 710 22.8 4 108 93 3.85
2.320 18.61 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#4 Hornet 4 Drive 21.4 6 258 110 3.08
3.215 19.44 1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#5 Hornet Sportabout 18.7 8 360 175 3.15
3.440 17.02 0 0 3 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:45.65pt;margin-bottom:
8.15pt;margin-left:0in;text-indent:3.75pt;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;color:forestgreen'>#6
Valiant 18.1 6 225 105 2.76 3.460 20.22 1 0 3 1 </span><b>filter</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>filter</span></b> helps subset rows that match certain
criteria. The first argument is the name of the and the second (and
subsequent) arguments are the criteria that filter the data (these criteria
should evaluate to either <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>TRUE </span>or <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>FALSE</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>Subset all cars that have 4 <i>cylinders</i> - <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>filter</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>mtcars_tbl,
cyl </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 11 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895651328'><span style='left:0px;position:absolute;left:0px;top:-229262px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image988.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># cars
mpg cyl disp hp drat wt qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Datsun 710 22.8 4 108.0 93 3.85 2.320
18.61 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Merc 240D 24.4 4 146.7 62 3.69 3.190
20.00 1 0 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Merc 230 22.8 4 140.8 95 3.92 3.150
22.90 1 0 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:70.45pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895650304'><span style='left:0px;position:absolute;left:0px;
top:-229350px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image989.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#4 Fiat 128
32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 #5 Honda
Civic 30.4 4 75.7 52 4.93 1.615 18.52 1 1 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># ... with 6 more rows</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.45pt;
margin-left:.75pt'>We can pass multiple criteria separated by a comma. To
subset the cars which have either 4 or 6 <i>cylinders</i> - <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span> and have
5 <i>gears</i> - <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>gear</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>filter</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>mtcars_tbl,
cyl </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>|</span><span style='font-size:9.0pt;line-height:110%'> cyl </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>==</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%'>, gear </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>==</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 3 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cars mpg cyl disp hp drat wt
qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:92.0pt;margin-bottom:
0in;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
line-height:112%'><span style='position:relative;z-index:-1895649280'><span
style='left:0px;position:absolute;left:0px;top:-229552px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image248.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#
&lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; #1
Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.7 0 1 5 2
#2 Lotus Europa 30.4 4 95.1 113 3.77 1.513 16.9 1 1
5 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Ferrari Dino 19.7 6 145.0 175 3.62 2.770
15.5 0 1 5 6</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>filter</span></b> selects rows based on criteria, to select
rows by position, use <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>slice</span>. <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>slice</span> takes only 2 arguments: the first one is a
and the second is integer row values.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>To select rows 6 through 9:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>slice</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>mtcars_tbl, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 4 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cars mpg cyl disp hp drat wt
qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Valiant 18.1 6 225.0 105 2.76 3.46
20.22 1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Duster 360 14.3 8 360.0 245 3.21 3.57
15.84 0 0 3 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Merc 240D 24.4 4 146.7 62 3.69 3.19
20.00 1 0 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:93.7pt;margin-bottom:
.15pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='position:relative;z-index:-1895648256'><span style='left:0px;position:
absolute;left:0px;top:-229861px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image404.gif"></span></span><span
style='font-size:9.0pt;line-height:240%;color:forestgreen'>#4 Merc 230
22.8 4 140.8 95 3.92 3.15 22.90 1 0 4 2 </span>Or:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image990.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>slice</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mtcars_tbl, </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>This results in the same output as <span style='font-size:
9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>6</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>:</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:200.9pt;margin-bottom:
.05pt;margin-left:.75pt;line-height:217%'><span style='font-size:9.0pt;
line-height:217%;background:#FAFAFA'>n</span><span style='font-size:9.0pt;
line-height:217%;color:#222222;background:#FAFAFA'>()</span> represents the
number of observations in the current group <b>arrange</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>arrange</span> is used to sort the data by a specified variable(s).
Just like the previous verb (and all other functions in <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span>), the first argument is
a , and consequent arguments are used to sort the data. If more than one
variable is passed, the data is first sorted by the first variable, and then by
the second variable, and so on..</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>To order the data by <i>horsepower</i> - <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>hp</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>arrange</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>mtcars_tbl, hp</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 32 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cars mpg cyl disp hp drat wt
qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Honda Civic 30.4 4 75.7 52 4.93 1.615
18.52 1 1 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Merc 240D 24.4 4 146.7 62 3.69 3.190
20.00 1 0 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Toyota Corolla 33.9 4 71.1 65 4.22 1.835
19.90 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:70.45pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895647232'><span style='left:0px;position:absolute;left:0px;
top:-230277px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image991.gif"></span></span><span
style='position:relative;z-index:-1895646208'><span style='left:0px;position:
absolute;left:0px;top:-230277px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image782.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#4 Fiat 128
32.4 4 78.7 66 4.08 2.200 19.47 1 1 4 1 #5 Fiat
X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 #6
Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2
# ... with 26 more rows</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.75pt;
margin-left:.75pt'>To <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>arrange</span> the data by <i>miles per gallon</i> - <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span> in
descending order, followed by <i>number of cylinders</i> - <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>arrange</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>mtcars_tbl, desc</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>mpg</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, cyl</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 32 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cars mpg cyl disp hp drat wt
qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Toyota Corolla 33.9 4 71.1 65 4.22 1.835
19.90 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Fiat 128 32.4 4 78.7 66 4.08 2.200
19.47 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Honda Civic 30.4 4 75.7 52 4.93 1.615
18.52 1 1 4 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:81.2pt;margin-bottom:
0in;margin-left:3.5pt;text-align:justify;text-justify:inter-ideograph;
line-height:112%'><span style='position:relative;z-index:-1895645184'><span
style='left:0px;position:absolute;left:0px;top:-230514px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image992.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#4 Lotus Europa
30.4 4 95.1 113 3.77 1.513 16.90 1 1 5 2 #5 Fiat
X1-9 27.3 4 79.0 66 4.08 1.935 18.90 1 1 4 1 #6
Porsche 914-2 26.0 4 120.3 91 4.43 2.140 16.70 0 1 5 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:381.3pt;margin-bottom:
8.4pt;margin-left:0in;text-indent:3.75pt;line-height:150%'><span
style='font-size:9.0pt;line-height:150%;color:forestgreen'># ... with 26 more
rows </span><b>select</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>SELECT</span></b> is used to select only a subset of
variables. To select only <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>mpg</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>disp</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>wt</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>qsec</span>, and <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>vs</span> from <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>mtcars_tbl</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image993.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.6pt;
margin-left:.75pt;line-height:130%'><span style='font-size:9.0pt;line-height:
130%;background:#FAFAFA'>:</span> notation can be used to select consecutive
columns. To select columns from <b><span style='font-size:9.0pt;line-height:
130%;color:#333399;background:#FAFAFA'>cars</span></b> through <span
style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>disp</span> and <span
style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>vs</span> through <span
style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>carb</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>SELECT</span></b><span style='font-size:9.0pt;line-height:
110%;color:#AAAAAA'>(</span><span style='font-size:9.0pt;line-height:110%'>mtcars_tbl</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>,</span><span
style='font-size:9.0pt;line-height:110%'> cars:disp</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>,</span><span
style='font-size:9.0pt;line-height:110%'> vs:carb</span><span style='font-size:
9.0pt;line-height:110%;color:#AAAAAA'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'># A tibble: </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>32</span><span style='font-size:9.0pt;line-height:110%'> x </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>8</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'># cars mpg cyl disp vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'># </span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>chr</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CCCCCC'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#CCCCCC'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CCCCCC'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>&lt;</span><span
style='font-size:9.0pt;line-height:110%'>dbl</span><span style='font-size:9.0pt;
line-height:110%;color:#CCCCCC'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>&lt;</span><span style='font-size:9.0pt;line-height:110%'>dbl</span><span
style='font-size:9.0pt;line-height:110%;color:#CCCCCC'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CCCCCC'>&lt;</span><span style='font-size:9.0pt;
line-height:110%'>dbl</span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>#</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>1</span><span
style='font-size:9.0pt;line-height:110%'> Mazda RX4 </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>21.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>160.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>4</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>#</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>2</span><span
style='font-size:9.0pt;line-height:110%'> Mazda RX4 Wag </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>21.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>6</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>160.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>4</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>#</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>3</span><span
style='font-size:9.0pt;line-height:110%'> Datsun </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>710</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>22.8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>4</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>108.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>1</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>#</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>4</span><span
style='font-size:9.0pt;line-height:110%'> Hornet </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>4</span><span
style='font-size:9.0pt;line-height:110%'> Drive </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>21.4</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>258.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>#</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>5</span><span
style='font-size:9.0pt;line-height:110%'> Hornet Sportabout </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>18.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>8</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>360.0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>0</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>3</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:189.25pt;margin-bottom:
17.85pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895644160'><span style='left:0px;position:absolute;left:0px;
top:-231047px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image994.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>#</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>6</span><span style='font-size:9.0pt;
line-height:110%'> Valiant </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>18.1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>6</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>225.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>0</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>1 </span><span style='font-size:9.0pt;
line-height:110%'># </span><span style='font-size:9.0pt;line-height:110%;
color:#CCCCCC'>...</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>WITH</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>26</span><span style='font-size:9.0pt;
line-height:110%'> more </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>ROWS</span></b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>hp:qsec</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>SELECT</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#AAAAAA;background:#FAFAFA'>(</span></p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>mtcars_tbl</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.55pt;
margin-left:0in;text-indent:0in;line-height:107%'>or <span style='font-size:
9.0pt;line-height:107%;color:#CCCCCC;background:#FAFAFA'>,</span><span
style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
line-height:107%;color:#CCCCCC;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:107%;color:#AAAAAA;background:#FAFAFA'>())</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For datasets that contain several columns, it can be tedious
to select several columns by name. To make life easier,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=315 style='width:236.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>starts_with</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ends_with</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>contains</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>matches</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>there are a number of helper functions (such as <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=250 style='width:187.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>num_range</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>one_of</span></p>
  </td>
  <td width=48 valign=top style='width:36.3pt;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, and </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.15pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>everything</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:8.35pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>)
that can be used in <b><span style='font-size:9.0pt;line-height:110%;
color:blue;background:#FAFAFA'>SELECT</span></b>. To learn more about how to
use them, see</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=182 style='width:136.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>select_helpers</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and <span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>?</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>select</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.75pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:9.0pt;
line-height:107%;color:#666666;background:#FAFAFA'>?</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>SELECT</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'><b><i>Note</i></b>: While referring to columns directly in <span
style='font-size:9.0pt;line-height:108%;color:#AAAAAA;background:#FAFAFA'>()</span>,
we use bare column names, but quotes should be used while referring to columns
in helper functions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To rename columns while selecting:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image995.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>As expected, this drops all other variables.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:133.45pt;margin-bottom:
0in;margin-left:4.0pt;text-indent:-3.75pt;line-height:254%'>To rename columns
without dropping other variables, use <span style='font-size:9.0pt;line-height:
254%;background:#FAFAFA'>rename</span>: <span style='font-size:9.0pt;
line-height:254%'>rename</span><span style='font-size:9.0pt;line-height:254%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:254%'>mtcars_tbl,
cylinders </span><span style='font-size:9.0pt;line-height:254%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:254%'> cyl, displacement </span><span
style='font-size:9.0pt;line-height:254%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:254%'> disp</span><span style='font-size:
9.0pt;line-height:254%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 32 x 12</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cars mpg cylinders displacement
hp drat wt qsec vs</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;chr&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Mazda RX4 21.0 6 160.0
110 3.90 2.620 16.46 0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Mazda RX4 Wag 21.0 6 160.0
110 3.90 2.875 17.02 0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Datsun 710 22.8 4 108.0
93 3.85 2.320 18.61 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#4 Hornet 4 Drive 21.4 6 258.0
110 3.08 3.215 19.44 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#5 Hornet Sportabout 18.7 8 360.0
175 3.15 3.440 17.02 0</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#6 Valiant 18.1 6 225.0
105 2.76 3.460 20.22 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:71.2pt;margin-bottom:
8.2pt;margin-left:0in;text-indent:3.75pt;line-height:150%'><span
style='position:relative;z-index:-1895643136'><span style='left:0px;position:
absolute;left:0px;top:-231808px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image992.gif"></span></span><span
style='font-size:9.0pt;line-height:150%;color:forestgreen'># ... with 26 more
rows, and 3 more variables: am &lt;dbl&gt;, gear &lt;dbl&gt;, carb &lt;dbl&gt; </span><b>mutate</b></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>mutate</span> can be used to add new columns to the data. Like all
other functions in <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>dplyr</span>, mutate doesn't add the newly created columns to the
original data. Columns are added at the end of the .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>mutate</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>mtcars_tbl, weight_ton </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> wt</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>/</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>2</span><span style='font-size:9.0pt;
line-height:110%'>, weight_pounds </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> weight_ton </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>*</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2000</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:5.65pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895642112'><span style='left:0px;position:absolute;left:0px;
top:-231936px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image996.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># A tibble: 32 x 14
# cars mpg cyl disp hp drat wt qsec vs am
gear carb weight_ton weight_pounds # &lt;chr&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 Mazda RX4 21.0 6 160.0 110 3.90
2.620 16.46 0 1 4 4 1.3100</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> 2620</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 Mazda RX4 Wag 21.0 6 160.0 110 3.90
2.875 17.02 0 1 4 4 1.4375</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> 2875</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 Datsun 710 22.8 4 108.0 93 3.85
2.320 18.61 1 1 4 1 1.1600</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> 2320</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#4 Hornet 4 Drive 21.4 6 258.0 110 3.08
3.215 19.44 1 0 3 1 1.6075</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> 3215</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#5 Hornet Sportabout 18.7 8 360.0 175 3.15
3.440 17.02 0 0 3 2 1.7200</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> 3440</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#6 Valiant 18.1 6 225.0 105 2.76
3.460 20.22 1 0 3 1 1.7300</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'> 3460</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># ... with 26 more rows</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'><b><i>Note</i></b> the use of <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>weight_ton</span> while creating <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>weight_pounds</span>.
Unlike base <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mutate</span>
allows us to refer to columns that we just created to be used for a subsequent
operation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To retain only the newly created columns, use <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>transmute</span>
instead of <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mutate</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=226
src="R%20Notes%20for%20Professionals_files/image997.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:7.95pt;margin-bottom:
0in;margin-left:.75pt;line-height:169%'><span style='font-size:9.0pt;
line-height:169%;background:#FAFAFA'>summarise</span> calculates summary
statistics of variables by collapsing multiple values to a single value. It can
calculate multiple statistics and we can name these summary columns in the same
statement. To calculate the <i>mean</i> and <i>standard deviation</i> of <span
style='font-size:9.0pt;line-height:169%;background:#FAFAFA'>mpg</span> and <span
style='font-size:9.0pt;line-height:169%;background:#FAFAFA'>disp</span> of all
cars in the dataset:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=144
src="R%20Notes%20for%20Professionals_files/image998.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>group_by</span> can be used to perform group wise operations on data.
When the verbs defined above are applied on this grouped data, they are
automatically applied to each group separately.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To find <b><i><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>mean</span></i></b> and <i><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>sd</span></i> of <i><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span></i> by <i><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span></i>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=194
src="R%20Notes%20for%20Professionals_files/image999.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We select columns from <b><span style='font-size:9.0pt;
line-height:108%;color:#333399;background:#FAFAFA'>cars</span></b> through <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>hp</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>gear</span>, order
the rows by <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>
and from highest to lowest <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>mpg</span>, group the data by <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>gear</span>, and finally subset only those
cars have <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>mpg</span>
&gt; 20 and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>hp</span>
&gt; 75</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=90
src="R%20Notes%20for%20Professionals_files/image1000.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=186
src="R%20Notes%20for%20Professionals_files/image1001.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Maybe we are not interested the intermediate results, we can
achieve the same result as above by wrapping the function calls:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1002.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This can be a little difficult to read. So, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span>
operations can be chained using the pipe <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>%&gt;%</span> operator. The
above code transalates to:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:16.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=112
src="R%20Notes%20for%20Professionals_files/image1003.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>summarise_all</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>dplyr</span> provides <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> to apply functions to all
(non-grouping) columns.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To find the number of distinct values for each column:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1004.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To find the number of distinct values for each column by <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=172
src="R%20Notes%20for%20Professionals_files/image1005.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.2pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895641088'><span style='left:0px;position:absolute;left:0px;top:-234176px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image314.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#3 8 14
12 11 9 11 13 14 1 2 2 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Note that we just had to add the <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>group_by</span> statement and the
rest of the code is the same. The output now consists of three rows - one for
each unique value of <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>cyl</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>summarise</span> specific multiple columns, use <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>summarise_at</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image1006.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>select_helpers</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:57.5pt;margin-bottom:
0in;margin-left:.75pt;line-height:215%'><span style='font-size:9.0pt;
line-height:215%;background:#FAFAFA'>helper</span> functions (<span
style='font-size:9.0pt;line-height:215%;color:#666666;background:#FAFAFA'>?</span>)
can be used in place of column names to select specific columns To apply
multiple functions, either pass the function names as a character vector:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1007.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>or wrap them inside <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>funs</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image1008.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Column names are now be appended with function names to keep
them distinct. In order to change this, pass the name to be appended with the
function:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=257
src="R%20Notes%20for%20Professionals_files/image1009.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895640064'><span style='left:0px;position:absolute;left:0px;top:-235187px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image782.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#2 6 19.74286
183.3143 122.28571 1.453567 41.56246 24.26049</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.35pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 8 15.10000 353.1000 209.21429 2.560048 67.77132
50.97689</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.45pt;
margin-left:.75pt'>To select columns conditionally, use <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>summarise_if</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Take the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>mean</span></b> of all columns that are <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>numeric</span></b>
grouped by <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image1010.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.2pt;
margin-left:.75pt'>However, some variables are discrete, and <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>mean</span></b>
of these variables doesn't make sense.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.75pt;
margin-left:.75pt'>To take the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>mean</span></b> of only continuous
variables by <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>cyl</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:162.2pt;margin-bottom:
12.45pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895639040'><span style='left:0px;position:absolute;left:0px;
top:-235604px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image318.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>mtcars_tbl </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>%&gt;% </span><span
style='font-size:9.0pt;line-height:110%'>group_by</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>cyl</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>%&gt;% </span><span style='font-size:9.0pt;line-height:110%'>summarise_if</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>function</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>is.numeric</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&amp;</span><span style='font-size:9.0pt;
line-height:110%'> n_distinct</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>mean</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># A tibble: 3 x 7</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># cyl mpg disp hp drat
wt qsec</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
&lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#1 4 26.66364 105.1364 82.63636 4.070909 2.285727
19.13727</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#2 6 19.74286 183.3143 122.28571 3.585714 3.117143
17.97714</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.85pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>#3 8 15.10000 353.1000 209.21429 3.229286 3.999214
16.77214</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619050">Section 77.2: Aggregating
with %&gt;% (pipe) operator</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>help</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;mtcars&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The pipe (%&gt;%) operator could be used in combination with
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dplyr</span>
functions. In this example we use the <b><span style='font-size:9.0pt;
line-height:108%;color:#333399;background:#FAFAFA'>mtcars </span></b>dataset
(see <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>)</span> for more information) to show how to sumarize a data frame,
and to add variables to the data with the result of the application of a
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1011.gif"></span></p>

<h4 style='margin-left:.75pt'>1. Sumarize the data</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To compute statistics we use <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>summarize</span> and the appropriate
functions. In this case <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>n</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> is used for counting the number of
cases.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1012.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image1013.gif"></span></p>

<h4 style='margin-left:.75pt'>2. Compute statistics by group</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is possible to compute the statistics by groups of the
data. In this case by <i>Number of cylinders</i> and <i>Number of forward gears</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=306
src="R%20Notes%20for%20Professionals_files/image1014.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619051">Section 77.3: Subset
Observation (Rows)</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>dplyr</span></b><b><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>::</span></b><b><span style='font-size:9.0pt;line-height:107%;
  color:blue'>filter</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;
margin-left:70.7pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b><span style='font-size:9.0pt;line-height:109%;color:#222222;
background:#FAFAFA'>()</span> - Select a subset of rows in a data frame that
meet a logical criteria:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:173.05pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%'>dplyr</span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>::</span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>filter</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:112%'>,Sepal.Length</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># Sepal.Length
Sepal.Width Petal.Length Petal.Width Species</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 1 7.1 3.0 5.9
2.1 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 2 7.6 3.0 6.6
2.1 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 3 7.3 2.9 6.3
1.8 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 4 7.2 3.6 6.1
2.5 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 5 7.7 3.8 6.7
2.2 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 6 7.7 2.6 6.9
2.3 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 7 7.7 2.8 6.7
2.0 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 8 7.2 3.2 6.0
1.8 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 9 7.2 3.0 5.8
1.6 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 10 7.4 2.8 6.1
1.9 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.65pt;margin-bottom:
21.2pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895638016'><span style='left:0px;position:absolute;left:0px;
top:-236864px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image910.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># 11
7.9 3.8 6.4 2.0 virginica # 12 7.7
3.0 6.1 2.3 virginica</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>dplyr</span></b><b><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>::</span></b><b><span style='font-size:9.0pt;line-height:107%'>distinct</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.7pt;
margin-left:81.5pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b><span style='font-size:9.0pt;line-height:109%;color:#222222;
background:#FAFAFA'>()</span> - Remove duplicate rows:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.65pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895636992'><span style='left:0px;position:absolute;left:0px;
top:-236933px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image1015.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>distinct</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:112%;color:#333399'>iris</span></b><span style='font-size:9.0pt;
line-height:112%'>, Sepal.Length, .keep_all </span><span style='font-size:9.0pt;
line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%'> TRUE</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>) </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># Sepal.Length Sepal.Width Petal.Length Petal.Width
Species</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 1 5.1 3.5 1.4
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 2 4.9 3.0 1.4
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 3 4.7 3.2 1.3
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 4 4.6 3.1 1.5
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 5 5.0 3.6 1.4
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 6 5.4 3.9 1.7
0.4 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 7 4.4 2.9 1.4
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 8 4.8 3.4 1.6
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 9 4.3 3.0 1.1
0.1 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 10 5.8 4.0 1.2
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 11 5.7 4.4 1.5
0.4 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 12 5.2 3.5 1.5
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895635968'><span style='left:0px;position:absolute;left:0px;top:-237182px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image1016.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># 13
5.5 4.2 1.4 0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 14 4.5 2.3 1.3
0.3 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 15 5.3 3.7 1.5
0.2 setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 16 7.0 3.2 4.7
1.4 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 17 6.4 3.2 4.5
1.5 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 18 6.9 3.1 4.9
1.5 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 19 6.5 2.8 4.6
1.5 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 20 6.3 3.3 4.7
1.6 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 21 6.6 2.9 4.6
1.3 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 22 5.9 3.0 4.2
1.5 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 23 6.0 2.2 4.0
1.0 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 24 6.1 2.9 4.7
1.4 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 25 5.6 2.9 3.6
1.3 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 26 6.7 3.1 4.4
1.4 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 27 6.2 2.2 4.5
1.5 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 28 6.8 2.8 4.8
1.4 versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 29 7.1 3.0 5.9
2.1 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 30 7.6 3.0 6.6
2.1 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 31 7.3 2.9 6.3
1.8 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 32 7.2 3.6 6.1
2.5 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 33 7.7 3.8 6.7
2.2 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 34 7.4 2.8 6.1
1.9 virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.85pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># 35 7.9 3.8 6.4
2.0 virginica</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619052">Section 77.4: Examples of
NSE and string variables in dpylr</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>dplyr</span> uses Non-Standard Evaluation(NSE), which is why we
normally can use the variable names without quotes. However, sometimes during
the data pipeline, we need to get our variable names from other sources such as
a</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Shiny selection box. In case of functions like <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>SELECT</span></b>,
we can just use <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>select_</span>
to use a string variable to select</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image1017.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>But if we want to use other features such as summarize or
filter we need to use <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>interp</span> function from <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>lazyeval </span>package</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image1018.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619053">Chapter 78: caret</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>caret</span> is an R package that aids in data processing needed for
machine learning problems. It stands for classification and regression
training. When building models for a real dataset, there are some tasks other
than the actual learning algorithm that need to be performed, such as cleaning
the data, dealing with incomplete observations, validating our model on a test
set, and compare different models.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:87.1pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'><span style='font-size:9.0pt;
line-height:145%;background:#FAFAFA'>caret</span> helps in these scenarios,
independent of the actual learning algorithms used.</p>

<h2 style='margin-top:0in;margin-right:87.1pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619054">Section 78.1: Preprocessing</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>preProcess</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>preProcess</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:14.0pt;margin-bottom:
12.75pt;margin-left:54.25pt;text-indent:-.75in'>Pre-processing in caret is done
through the <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> function. Given a matrix or data frame type
object <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>,
<span style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
applies transformations on the training data which can then be applied to
testing data.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>preProcess</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.6pt;
margin-left:.75pt'>The heart of the <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> function is the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>method</span>
argument. Method operations are applied in this order:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Zero-variance filter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Near-zero variance filter</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Box-Cox/Yeo-Johnson/exponential transformation</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Centering</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Scaling</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Range</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Imputation</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>PCA</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>ICA</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:35.7pt;text-indent:-19.6pt'><span style='line-height:108%'>10.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Spatial
Sign</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Below, we take the mtcars data set and perform centering,
scaling, and a spatial sign transform.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image1019.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619055">Chapter 79: Extracting and
Listing Files in Compressed Archives</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619056">Section 79.1: Extracting
files from a .zip archive</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Unzipping a zip archive is done with <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>unzip</span></b>
function from the <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>utils</span> package (which is included in base R).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1020.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This will extract all files in <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;bar.zip&quot;</span>
to the <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:
#FAFAFA'>&quot;foo&quot;</span> directory, which will be created if necessary.
Tilde expansion is done automatically from your working directory.
Alternatively, you can pass the whole path name to the zipfile.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619057">Chapter 80: Probability
Distributions with R</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619058">Section 80.1: PDF and PMF
for di&#57379;erent distributions in R</a></h2>

<h4 style='margin-left:.75pt'>PMF FOR THE BINOMIAL DISTRIBUTION</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Suppose that a fair die is rolled 10 times. What is the
probability of throwing exactly two sixes?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can answer the question using the dbinom function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1021.gif"></span></p>

<h4 style='margin-left:.75pt'>PMF FOR THE POISSON DISTRIBUTION</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The number of sandwhich ordered in a restaurant on a given
day is known to follow a Poisson distribution with a mean of 20. What is the
probability that exactly eighteen sandwhich will be ordered tomorrow?</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can answer the question with the dpois function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1022.gif"></span></p>

<h4 style='margin-left:.75pt'>PDF FOR THE NORMAL DISTRIBUTION</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To find the value of the pdf at x=2.5 for a normal
distribution with a mean of 5 and a standard deviation of 2, use the command:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1023.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619059">Chapter 81: R in LaTeX with
knitr</a></h1>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Option Details</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:70.4pt;margin-bottom:
16.95pt;margin-left:.75pt;line-height:141%'>echo (TRUE/FALSE) - whether
to include R source code in the output file message (TRUE/FALSE) - whether to
include messages from the R source execution in the output file warning (TRUE/FALSE)
- whether to include warnings from the R source execution in the output file
error (TRUE/FALSE) - whether to include errors from the R source execution
in the output file cache (TRUE/FALSE) - whether to cache the results of the R
source execution fig.width (numeric) - width of the plot generated by the R
source execution fig.height (numeric) - height of the plot generated by the R
source execution</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619060">Section 81.1: R in LaTeX
with Knitr and Code Externalization</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Knitr is an R package that allows us to intermingle R code
with LaTeX code. One way to achieve this is external code chunks. External code
chunks allow us to develop/test R Scripts in an R development environment and
then include the results in a report. It is a powerful organizational
technique. This approach is demonstrated below.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=289
src="R%20Notes%20for%20Professionals_files/image1024.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When using this approach we keep our code in a separate R
file as shown below.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=174
src="R%20Notes%20for%20Professionals_files/image1025.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619061">Section 81.2: R in LaTeX
with Knitr and Inline Code Chunks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Knitr is an R package that allows us to intermingle R code
with LaTeX code. One way to achieve this is inline code chunks. This apporach
is demonstrated below.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=41
src="R%20Notes%20for%20Professionals_files/image1026.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=218
src="R%20Notes%20for%20Professionals_files/image1027.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619062">Section 81.3: R in LaTex
with Knitr and Internal Code Chunks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Knitr is an R package that allows us to intermingle R code
with LaTeX code. One way to achieve this is internal code chunks. This apporach
is demonstrated below.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image1028.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619063">Chapter 82: Web Crawling in
R</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619064">Section 82.1: Standard
scraping approach using the RCurl package</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We try to extract imdb top chart movies and ratings</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=341
src="R%20Notes%20for%20Professionals_files/image1029.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619065">Chapter 83: Creating
reports with RMarkdown</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619066">Section 83.1: Including
bibliographies</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>bibliography</span><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>:</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>biblio</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>-</span><span
  style='font-size:9.0pt;line-height:107%'>style</span><span style='font-size:
  9.0pt;line-height:107%;color:#666666'>:</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A bibtex catalogue cna easily be included with the YAML
option . A certain style for the bibliography can be added with . The
references are added at the end of the document.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=388
src="R%20Notes%20for%20Professionals_files/image1030.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619067">Section 83.2: Including
LaTeX Preample Commands</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>There are two possible ways of including LaTeX preamble
commands (e.g. <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>\usepackage</span>)
in a RMarkdown document.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%'>header</span></b><b><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>-</span></b><b><span style='font-size:9.0pt;line-height:107%'>includes</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>1. Using the YAML option :</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=285
src="R%20Notes%20for%20Professionals_files/image1031.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.5pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=320
height=152 id="Picture 60755"
src="R%20Notes%20for%20Professionals_files/image1032.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>2.
Including External Commands with <span style='font-size:9.0pt;line-height:109%;
background:#FAFAFA'>includes</span>, <span style='font-size:9.0pt;line-height:
109%;background:#FAFAFA'>in_header</span></h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=269
src="R%20Notes%20for%20Professionals_files/image1033.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>header</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>includes</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Here, the content of includes.tex are the same three
commands we included with .</p>

<h4 style='margin-left:.75pt'>Writing a whole new template</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A possible third option is to write your own LaTex template
and include it with <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>template</span>. But this covers a lot more of the structure than only
the preamble.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image1034.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619068">Section 83.3: Printing
tables</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>There are several packages that allow the output of data
structures in form of HTML or LaTeX tables. They mostly differ in flexibility.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Here I use the packages:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:458.45pt;margin-bottom:
12.9pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>knitr
xtable pander</p>

<h4 style='margin-left:.75pt'>For HTML documents</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=818
src="R%20Notes%20for%20Professionals_files/image1035.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>For
PDF documents</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=161
src="R%20Notes%20for%20Professionals_files/image1036.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=668
src="R%20Notes%20for%20Professionals_files/image1037.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.1pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>How can I stop xtable printing the comment ahead of each table?</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.5pt;
margin-left:-.25pt;line-height:107%;background:#FAFAFA'><b><span
style='font-size:9.0pt;line-height:107%;color:blue'>options</span></b><span
style='font-size:9.0pt;line-height:107%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:107%'>xtable.comment </span><span
style='font-size:9.0pt;line-height:107%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:107%'> FALSE</span><span style='font-size:
9.0pt;line-height:107%;color:#222222'>)</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619069">Section 83.4: Basic
R-markdown document structure</a></h2>

<h4 style='margin-left:.75pt'>R-markdown code chunks</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>R-markdown is a markdown file with embedded blocks of R code
called <i>chunks</i>. There are two types of R code chunks: <b>inline</b> and <b>block</b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b>Inline</b> chunks are added using the following syntax:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1038.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>They are evaluated and inserted their output answer in
place.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Block</b> chunks have a different syntax:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1039.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>And they come with several possible options. Here are the
main ones (but there are many others):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:103.7pt;margin-bottom:
12.85pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12><b>echo</b>
(boolean) controls wether the code inside chunk will be included in the
document <b>include</b> (boolean) controls wether the output should be included
in the document <b>fig.width</b> (numeric) sets the width of the output figures
<b>fig.height</b> (numeric) sets the height of the output figures <b>fig.cap</b>
(character) sets the figure captions</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tag</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>value</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>They are written in a simple format like in the example
above.</p>

<h4 style='margin-left:.75pt'>R-markdown document example</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Below is a basic example of R-markdown file illustrating the
way R code chunks are embedded inside r-markdown.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=503
src="R%20Notes%20for%20Professionals_files/image1040.gif"></span></p>

<h4 style='margin-left:.75pt'>Converting R-markdown to other formats</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The R <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>knitr</span> package can be used to evaluate R chunks
inside R-markdown file and turn it into a regular markdown file.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The following steps are needed in order to turn R-markdown
file into pdf/html:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Convert
R-markdown file to markdown file using <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>knitr</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Convert
the obtained markdown file to pdf/html using specialized tools like <i>pandoc</i>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=168 style='width:125.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>knit2html</span></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>knit2pdf</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>In addition to the above <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>knitr</span> package has wrapper functions
<span style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
that can be used to produce the final document without the intermediate step of
manually converting it to the markdown format:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>income.Rmd</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If the above example file was saved as it can be converted
to a <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>pdf</span></b> file using the following R commands:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1041.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The final document will be similar to the one below.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=706 height=572 id="Picture 61136"
src="R%20Notes%20for%20Professionals_files/image1042.jpg"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619070">Chapter 84: GPU-accelerated
computing</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619071">Section 84.1: gpuR
gpuMatrix objects</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:11.1pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>library(gpuR) # gpuMatrix objects X &lt;-
gpuMatrix(rnorm(100), 10, 10) Y &lt;- gpuMatrix(rnorm(100), 10, 10) # transfer
data to GPU when operation called # automatically copied back to CPU Z &lt;- X
%*% Y</p>

<h2 style='margin-top:0in;margin-right:11.1pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619072">Section 84.2: gpuR vclMatrix objects</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>library(gpuR) # vclMatrix objects X &lt;-
vclMatrix(rnorm(100), 10, 10) Y &lt;- vclMatrix(rnorm(100), 10, 10) # data
always on GPU # no data transfer Z &lt;- X %*% Y<br clear=all style='page-break-before:
always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619073">Chapter 85: heatmap and
heatmap.2</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619074">Section 85.1: Examples from
the o&#57380;cial documentation</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>stats::heatmap
Example 1 (Basic usage)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=760
src="R%20Notes%20for%20Professionals_files/image1043.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;margin-left:
.75pt'>Example 2 (no column dendrogram (nor reordering) at all)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:183.85pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895632896'><span style='left:0px;position:absolute;left:0px;
top:-248466px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image232.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>heatmap</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x, Colv </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> NA, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>cm.colors</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>256</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>scale</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;column&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, RowSideColors </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> rc, margins </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>,
xlab </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;specification variables&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, ylab </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;Car Models&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, main </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;heatmap(&lt;Mtcars data&gt;, ..., scale = </span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\&quot;</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>column</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\&quot;</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>)&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61371"
src="R%20Notes%20for%20Professionals_files/image1044.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Example
3 (&quot;no nothing&quot;)</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1045.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61404"
src="R%20Notes%20for%20Professionals_files/image1046.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;margin-left:
.75pt'>Example 4 (with reorder())</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>round</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>Ca </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>cor</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#333399'>attitude</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># rating complaints privileges learning
raises critical advance</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># rating 1.00 0.83 0.43 0.62
0.59 0.16 0.16</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># complaints 0.83 1.00 0.56 0.60
0.67 0.19 0.22</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># privileges 0.43 0.56 1.00 0.49
0.45 0.15 0.34</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># learning 0.62 0.60 0.49 1.00
0.64 0.12 0.53</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># raises 0.59 0.67 0.45 0.64
1.00 0.38 0.57</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:135.25pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895631872'><span style='left:0px;position:absolute;left:0px;
top:-249732px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image1047.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># critical
0.16 0.19 0.15 0.12 0.38 1.00 0.28 # advance
0.16 0.22 0.34 0.53 0.57 0.28 1.00 </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>symnum</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>Ca</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># simple graphic # rt cm p l rs cr a</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># rating 1 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># complaints + 1 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># privileges . . 1 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># learning , . . 1 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># raises . , . , 1 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># critical . 1 </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># advance . . . 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:1.25pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># attr(,&quot;legend&quot;)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:224.65pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'># [1] 0 </span><span style='font-size:9.0pt;
line-height:112%;font-family:"Arial",sans-serif;color:forestgreen'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'> </span><span
style='font-size:9.0pt;line-height:112%;font-family:"Arial",sans-serif;
color:forestgreen'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'> 0.3 </span><span style='font-size:9.0pt;line-height:112%;
font-family:"Arial",sans-serif;color:forestgreen'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>.</span><span
style='font-size:9.0pt;line-height:112%;font-family:"Arial",sans-serif;
color:forestgreen'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'> 0.6 </span><span style='font-size:9.0pt;line-height:112%;
font-family:"Arial",sans-serif;color:forestgreen'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>,</span><span
style='font-size:9.0pt;line-height:112%;font-family:"Arial",sans-serif;
color:forestgreen'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'> 0.8 </span><span style='font-size:9.0pt;line-height:112%;
font-family:"Arial",sans-serif;color:forestgreen'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>+</span><span
style='font-size:9.0pt;line-height:112%;font-family:"Arial",sans-serif;
color:forestgreen'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'> 0.9 </span><span style='font-size:9.0pt;line-height:112%;
font-family:"Arial",sans-serif;color:forestgreen'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>*</span><span
style='font-size:9.0pt;line-height:112%;font-family:"Arial",sans-serif;
color:forestgreen'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'> 0.95 </span><span style='font-size:9.0pt;line-height:112%;
font-family:"Arial",sans-serif;color:forestgreen'></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>B</span><span
style='font-size:9.0pt;line-height:112%;font-family:"Arial",sans-serif;
color:forestgreen'></span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'> 1 </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>heatmap</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%'>Ca,
symm </span><span style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> TRUE, margins </span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:112%'>,</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61493"
src="R%20Notes%20for%20Professionals_files/image1048.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Example
5 (<i>NO</i> reorder())</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1049.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61526"
src="R%20Notes%20for%20Professionals_files/image1050.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Example
6 (slightly artificial with color bar, without ordering)</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1051.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61572"
src="R%20Notes%20for%20Professionals_files/image1052.jpg"></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image1053.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61606"
src="R%20Notes%20for%20Professionals_files/image1054.jpg"></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Example
8 (For variable clustering, rather use distance based on cor())</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=324
src="R%20Notes%20for%20Professionals_files/image1055.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=1028
src="R%20Notes%20for%20Professionals_files/image1056.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># `--[dendrogram w/ 2 branches and 5 members
at h = 0.0584]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># |--leaf &quot;RTEN&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:119.0pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895630848'><span style='left:0px;position:absolute;left:0px;
top:-253549px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image1057.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>#
`--[dendrogram w/ 2 branches and 4 members at h = 0.0187] #
|--[dendrogram w/ 2 branches and 2 members at h = 0.00657]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># | |--leaf &quot;ORAL&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># | `--leaf &quot;WRIT&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># `--[dendrogram w/ 2 branches and 2
members at h = 0.0101]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># |--leaf &quot;PREP&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.85pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># `--leaf &quot;FAMI&quot;</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619075">Section 85.2: Tuning
parameters in heatmap.2</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Given:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1058.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>One can use <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>heatmap.2</span> - a more recent optimized version of <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>heatmap</span></b>,
by loading the following library:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=538
src="R%20Notes%20for%20Professionals_files/image1059.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To add a title, x- or y-label to your heatmap, you need to
set the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>main</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>xlab</span>
and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ylab</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1060.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you wish to define your own color palette for your
heatmap, you can set the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>col</span></b> parameter by using the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>colorRampPalette</span></b>
function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=538
src="R%20Notes%20for%20Professionals_files/image1061.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.45pt;
margin-left:.75pt'>As you can notice, the labels on the y axis (the car names)
don't fit in the figure. In order to fix this, the user can tune the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>margins</span>
parameter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895629824'><span style='left:0px;position:absolute;left:0px;top:-255124px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>heatmap.2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>trace</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;none&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, key</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>TRUE,</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>colorRampPalette</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;darkblue&quot;</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;white&quot;</span><span style='font-size:9.0pt;line-height:
110%'>,</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;darkred&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>100</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, margins</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>8</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61962"
src="R%20Notes%20for%20Professionals_files/image1062.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Further, we can change the dimensions of each section of our
heatmap (the key histogram, the dendograms and the heatmap itself), by tuning <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lhei</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>lwid</span> :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 61984"
src="R%20Notes%20for%20Professionals_files/image1063.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=168 style='width:126.3pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Colv</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
  <td width=24 valign=top style='width:18.3pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>(or </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rowv</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>FALSE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.55pt;
margin-left:.75pt'>If we only want to show a row(or column) dendogram, we need
to set ) and adjust the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>dendogram</span> parameter:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895628800'><span style='left:0px;position:absolute;left:0px;top:-256241px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>heatmap.2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>trace</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;none&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, key</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>TRUE,
Colv</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>FALSE, dendrogram </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;row&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>= </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>colorRampPalette</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;darkblue&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;white&quot;</span><span style='font-size:
9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;darkred&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>))(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>100</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, margins</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, lwid </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>15</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, lhei </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>= </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>15</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=480
height=480 id="Picture 62076"
src="R%20Notes%20for%20Professionals_files/image1064.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=194 style='width:145.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=194 valign=top style='width:145.8pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>cex.main, cex.lab, cex.axis</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.5pt;
margin-left:.75pt'>For changing the font size of the legend title,labels and
axis, the user needs to set in the <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>par</span></b> list:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:27.25pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895627776'><span style='left:0px;position:absolute;left:0px;
top:-256834px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image232.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>par</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>cex.main</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'>, cex.lab</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>0.7</span><span style='font-size:9.0pt;line-height:110%'>,
cex.axis</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.7</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>heatmap.2</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>trace</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;none&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, key</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>TRUE,
Colv</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>FALSE, dendrogram </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;row&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>= </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>colorRampPalette</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;darkblue&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;white&quot;</span><span style='font-size:
9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;darkred&quot;</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>))(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>100</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:110%'>, margins</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, lwid </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>15</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, lhei </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>= </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>15</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))</span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=480 height=480 id="Picture 62179"
src="R%20Notes%20for%20Professionals_files/image1065.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619076">Chapter 86: Network
analysis with the igraph package</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619077">Section 86.1: Simple
Directed and Non-directed Network Graphing</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>The igraph package for R is a wonderful tool that can be
used to model networks, both real and virtual, with simplicity. This example is
meant to demonstrate how to create two simple network graphs using the igraph
package within R v.3.2.3.</p>

<h4 style='margin-left:.75pt'>Non-Directed Network</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The network is created with this piece of code:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=415
src="R%20Notes%20for%20Professionals_files/image1066.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Directed
Network</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1067.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This code will then generate a network with arrows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=664
height=357 id="Picture 62257"
src="R%20Notes%20for%20Professionals_files/image1068.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Code example of how to make a double sided arrow:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=406
src="R%20Notes%20for%20Professionals_files/image1069.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619078">Chapter 87: Functional
programming</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619079">Section 87.1: Built-in
Higher Order Functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'>R has a set of built in higher order functions: <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Map</span></b>,
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Reduce</span></b>,
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Filter</span></b>,
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Find</span></b>,
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Position</span></b>,
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>Negate</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Map</span></b> applies a given function to a list of
values:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1070.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Reduce</span></b> successively applies a binary function to
a list of values in a recursive fashion.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1071.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Filter</span></b> given a predicate function and a list of
values returns a filtered list containing only values for whom predicate
function is TRUE.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1072.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Find</span></b> given a predicate function and a list of
values returns the first value for which the predicate function is TRUE.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1073.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Position</span></b> given a predicate function and a list
of values returns the position of the first value in the list for which the
predicate function is TRUE.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1074.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Negate</span></b> inverts a predicate function making it
return FALSE for values where it returned TRUE and vice versa.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1075.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619080">Chapter 88: Get user input</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619081">Section 88.1: User input in
R</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>Sometimes it can be interesting to have a cross-talk between
the user and the program, one example being the <a href="http://swirlstats.com/"><span
style='color:#2066B9'>swirl</span></a> package that had been designed to teach
R in R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>One can ask for user input using the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>readline</span></b>
command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1076.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The user can then give any answer, such as a number, a
character, vectors, and scanning the result is here to make sure that the user
has given a proper answer. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1077.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>However, it is to be noted that this code be stuck in a
never-ending loop, as user input is saved as a character.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.numeric</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We have to coerce it to a number, using :</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1078.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619082">Chapter 89: Spark API
(SparkR)</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619083">Section 89.1: Setup Spark
context</a></h2>

<h4 style='margin-left:.75pt'>Setup Spark context in R</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To start working with Sparks distributed dataframes, you
must connect your R program with an existing Spark Cluster.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1079.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'><a
href="https://spark.apache.org/docs/1.6.0/sparkr.html#starting-up-from-rstudio"><span
style='color:#2066B9'>Here are infos</span></a> how to connect your IDE to a
Spark cluster.</p>

<h4 style='margin-left:.75pt'>Get Spark Cluster</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:28.6pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>There is an Apache Spark introduction topic with install
instructions. Basically, you can employ a Spark Cluster locally via java (<a
href="http://spark.apache.org/docs/latest/"><span style='color:#2066B9'>see
instructions</span></a>) or use (non-free) cloud applications (e.g. <a
href="https://azure.microsoft.com/en-us/services/hdinsight/apache-spark/"><span
style='color:#2066B9'>Microsoft Azure</span></a> [topic site], <a
href="http://www.ibm.com/analytics/us/en/technology/spark/"><span
style='color:#2066B9'>IBM</span></a>).</p>

<h2 style='margin-top:0in;margin-right:28.6pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619084">Section 89.2: Cache data</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>What:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Caching can optimize computation in Spark. Caching stores
data in memory and is a special case of persistence. <a
href="http://stackoverflow.com/a/28983767/3889242"><span style='color:#2066B9'>Here
is explained</span></a> what happens when you cache an RDD in Spark.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Why:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Basically, caching saves an interim partial result - usually
after transformations - of your original data. So, when you use the cached RDD,
the already transformed data from memory is accessed without recomputing the
earlier transformations.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>How:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Here is an example how to quickly access large data <i>(here
3 GB big csv)</i> from in-memory storage when accessing it more then once:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=256
src="R%20Notes%20for%20Professionals_files/image1080.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619085">Section 89.3: Create RDDs
(Resilient Distributed Datasets)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>From dataframe:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1081.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>From csv:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For csv's, you need to add the <a
href="https://github.com/databricks/spark-csv"><span style='color:#2066B9'>csv
package</span></a> to the environment before initiating the Spark context:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=76
src="R%20Notes%20for%20Professionals_files/image1082.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Then, you can load the csv either by infering the data
schema of the data in the columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895626752'><span style='left:0px;position:absolute;left:0px;top:-261244px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>train </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> read.df</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>sqlContext,
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;/train.csv&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, header</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;true&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;color:blue'>source</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;com.databricks.spark.csv&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, inferSchema </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;true&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Or by specifying the data schema beforehand:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=125
src="R%20Notes%20for%20Professionals_files/image1083.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619086">Chapter 90: Meta:
Documentation Guidelines</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619087">Section 90.1: Style</a></h2>

<h4 style='margin-left:.75pt'>Prompts</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>If you want your code to be copy-pastable, remove prompts
such as <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&gt;</span>,
<span style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&gt;</span>,
or <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>+</span>
at the beginning of each new line. Some Docs authors prefer to not make
copy-pasting easy, and that is okay.</p>

<h4 style='margin-left:.75pt'>Console output</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Console output should be clearly distinguished from code.
Common approaches include:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>Include
prompts on input (as seen when using the console).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Comment out all output, with <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>#</span> or <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>##</span> starting each line.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:117.2pt;margin-bottom:
10.0pt;margin-left:21.4pt'>Print as-is, trusting the leading <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
to make the output stand out from the input. Add a blank line between code and
console output.</p>

<h4 style='margin-left:.75pt'>Assignment</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=248 style='width:185.7pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666'>&lt;-</span></p>
  </td>
  <td width=145 valign=top style='width:108.65pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>1</span> (ambiguous between </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x </span><span style='font-size:9.0pt;line-height:107%;color:#666666'>&lt;-</span><span
  style='font-size:9.0pt;line-height:107%'> </span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>1</span> and </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'><span style='position:relative;z-index:251858944'><span
style='left:0px;position:absolute;left:354px;top:-261827px;width:7px;
height:1px'><img width=7 height=1
src="R%20Notes%20for%20Professionals_files/image242.gif"></span></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>=</span> and <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>&lt;-</span>
are fine for assigning R objects. Use white space appropriately to avoid
writing code that is difficult to parse, such as <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>x</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>&lt;</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span>)</p>

<h4 style='margin-left:.75pt'>Code comments</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Be sure to explain the purpose and function of the code
itself. There isn't any hard-and-fast rule on whether this explanation should
be in prose or in code comments. Prose may be more readable and allows for
longer explanations, but code comments make for easier copy-pasting. Keep both
options in mind.</p>

<h4 style='margin-left:.75pt'>Sections</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:58.2pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Many examples are short enough to not
need sections, but if you use them, start with <a
href="http://stackoverflow.com/editing-help#headers"><span style='color:#2066B9'>H1</span></a>.</p>

<h2 style='margin-top:0in;margin-right:58.2pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619088">Section 90.2: Making good examples</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Most of the guidance for <a
href="http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example"><span
style='color:#2066B9'>creating good examples</span></a> for Q&amp;A carries
over into the documentation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:23.25pt;
margin-left:20.9pt;text-indent:0in;line-height:107%'><span style='font-size:
11.0pt;line-height:107%'><img border=0 width=693 height=123
src="R%20Notes%20for%20Professionals_files/image1084.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.55pt;
margin-left:.75pt'>There are some additional considerations in the context of
Docs:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:9.5pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 590422"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Refer to
built-in docs like <span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>? </span> whenever relevant. The SO Docs are not an
attempt to replace the built-in docs. It is important to make sure new R users
know that the built-in docs exist as well as how to find them.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:108%'><img
border=0 width=5 height=5 id="Group 590423"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Move content
that applies to multiple examples to the Remarks section.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619089">Chapter 91: Input and
output</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619090">Section 91.1: Reading and
writing data frames</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Data frames are R's tabular data structure. They can be
written to or read from in a variety of ways.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>This example illustrates a couple common situations. See the
links at the end for other resources.</p>

<h4 style='margin-left:.75pt'>Writing</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>getwd</span></i></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>setwd</span></i></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
1.5pt;margin-left:-.25pt;line-height:107%'><i>Before making the example data
below, make sure you're in a folder you want to write to. Run </i><i><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>()</span>
to verify the folder you're in and read </i><i><span style='font-size:9.0pt;
line-height:107%;color:#666666;background:#FAFAFA'>?</span> if you need to
change folders.</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1085.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Now, we have three similarly-formatted CSV files on disk.</p>

<h4 style='margin-left:.75pt'>Reading</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We have three similarly-formatted files (from the last
section) to read in. Since these files are related, we should store them
together after reading in, in a <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>list</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image1086.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>str</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>file_contents</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=269 style='width:201.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rbind</span></b></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>or iterating over the list with <span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>?</span></p>
  </td>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>To work with this list of files, first examine the structure
with <span style='font-size:9.0pt;line-height:108%;color:#222222;background:
#FAFAFA'>)</span>, then read about stacking the list with <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>?</span>.</p>

<h4 style='margin-left:.75pt'>Further resources</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=189 style='width:141.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and <span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>?</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>write.table</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>Check out <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>?</span> to extend this example. Also:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>R binary formats (for tables and other objects)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:317.35pt;margin-bottom:
3.35pt;margin-left:60.0pt;text-indent:-30.0pt'><span style='position:relative;
z-index:-1895623680'><span style='left:0px;position:absolute;left:28px;
top:-263320px;width:46px;height:1px'><img width=46 height=1
src="R%20Notes%20for%20Professionals_files/image196.gif"></span></span>Plain-text
table formats comma-delimited CSVs tab-delimited TSVs Fixed-width formats</p>

<p class=MsoNormal style='margin-top:0in;margin-right:288.4pt;margin-bottom:
1.7pt;margin-left:60.0pt;text-indent:-30.0pt'><img width=46 height=1
src="R%20Notes%20for%20Professionals_files/image196.gif" align=left hspace=12>Language-agnostic
binary table formats Feather</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>Foreign table and spreadsheet formats</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>SAS</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>SPSS</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Stata</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Excel</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'>Relational database table formats</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>MySQL</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>SQLite</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>PostgreSQL<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619091">Chapter 92: I/O for foreign
tables (Excel, SAS, SPSS, Stata)</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619092">Section 92.1: Importing
data with rio</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A very simple way to import data from many common file
formats is with <a href="https://cran.r-project.org/web/packages/rio/index.html"><span
style='color:#2066B9'>rio</span></a>. This package provides a function</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>import</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>import</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.25pt;text-indent:.45in'><span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> that wraps many commonly used
data import functions, thereby providing a standard interface. It works simply
by passing a file name or URL to <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1087.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>import</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.25pt;text-indent:.45in'><span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> can also read from compressed
directories, URLs (HTTP or HTTPS), and the clipboard. A comprehensive list of
all supported file formats is available on the <a
href="https://github.com/leeper/rio"><span style='color:#2066B9'>rio package
github repository</span></a>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>import</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.35pt;
margin-left:.75pt'>It is even possible to specify some further parameters
related to the specific file format you are trying to read, passing them
directly within the <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.8pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895621632'><span style='left:0px;position:absolute;left:0px;top:-264063px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'>import</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;example.csv&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>format</span></b><span style='font-size:
9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;,&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#for csv file where comma is used as
separator </span><span style='font-size:9.0pt;line-height:112%'>import</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;example.csv&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>format</span></b><span style='font-size:
9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;;&quot;</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>#for csv file where semicolon is used as
separator</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619093">Section 92.2: Read and
write Stata, SPSS and SAS files</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The packages <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>foreign</span> and <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>haven</span> can be used to import and export files
from a variety of other statistical packages like Stata, SPSS and SAS and
related software. There is a <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>read</span> function for each of the supported data types
to import the files.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1088.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Some examples for the most common data types:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1089.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>foreign</span> package can read in stata (.dta) files for
versions of Stata 7-12. According to the development page, the <span
style='font-size:9.0pt;line-height:108%'>read.dta</span> is more or less frozen
and will not be updated for reading in versions 13+. For more recent versions
of Stata, you can use either the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>readstata13</span> package or <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>haven</span>. For <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>readstata13</span>, the files are</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1090.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For reading in SPSS and SAS files</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image1091.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.fwf</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>SAScii</span> package provides functions that will accept
SAS SET import code and construct a text file that can be processed with . It
has proved very robust for import of large public-released datasets. Support is
at <a href="https://github.com/ajdamico/SAScii"><span style='color:#2066B9'>https://github.com/ajdamico/SAScii</span></a></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>write.foreign</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To export data frames to other statistical packages you can
use the write functions <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>. This will write 2 files, one
containing the data and one containing instructions the other package needs to
read the data.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=355
src="R%20Notes%20for%20Professionals_files/image1092.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>read.spss</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>File stored by the SPSS can also be read with in this way:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:32.6pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'>foreign</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>::</span><span style='font-size:9.0pt;line-height:110%'>read.spss</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'data.sav'</span><span
style='font-size:9.0pt;line-height:110%'>, to.data.frame</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>TRUE, use.value.labels</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>FALSE,
use.missings</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'>TRUE, reencode</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'UTF-8'</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># to.data.frame if TRUE: return a data frame</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># use.value.labels if TRUE: convert variables with
value labels into R factors with those levels</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># use.missings if TRUE: information on user-defined
missing values will used to set the corresponding values to NA.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:22.8pt;
margin-left:3.5pt;line-height:112%'><span style='position:relative;z-index:
-1895620608'><span style='left:0px;position:absolute;left:0px;top:-265455px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image248.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># reencode character
strings will be re-encoded to the current locale. The default, NA, means to do
so in a UTF-8 locale, only.</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619094">Section 92.3: Importing
Excel files</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>There are several R packages to read excel files, each of
which using different languages or resources, as summarized in the following
table:</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
.75pt'>R package Uses</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>xlsx Java</p>

<p class=MsoNormal style='margin-top:0in;margin-right:438.15pt;margin-bottom:
0in;margin-left:.75pt;line-height:141%'>XLconnect Java openxlsx C++
readxl C++</p>

<p class=MsoNormal style='margin-top:0in;margin-right:430.95pt;margin-bottom:
11.2pt;margin-left:.75pt;line-height:141%'>RODBC ODBC gdata Perl</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>For the packages that use Java or ODBC it is important to
know details about your system because you may have compatibility issues
depending on your R version and OS. For instance, if you are using R 64 bits
then you also must have Java 64 bits to use <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>xlsx</span> or <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>XLconnect</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>package</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>function</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:7.3pt;margin-bottom:13.0pt;
margin-left:.75pt'>Some examples of reading excel files with each package are
provided below. Note that many of the packages have the same or very similar
function names. Therefore, it is useful to state the package explicitly, like .
The package <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>openxlsx</span>
requires prior installation of RTools.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Reading
excel files with the xlsx package</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1093.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt;line-height:196%'>The index or name of the sheet is required
to import. <span style='font-size:11.0pt;line-height:196%'><img border=0
width=718 height=60 src="R%20Notes%20for%20Professionals_files/image1094.gif"></span><span
style='font-size:9.0pt;line-height:196%'>xlsx</span><span style='font-size:
9.0pt;line-height:196%;color:#666666'>::</span><span style='font-size:9.0pt;
line-height:196%'>read.xlsx</span><span style='font-size:9.0pt;line-height:
196%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:196%;
color:#CC0A0A'>&quot;Book1.xlsx&quot;</span><span style='font-size:9.0pt;
line-height:196%'>, sheetName</span><span style='font-size:9.0pt;line-height:
196%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:196%;
color:#CC0A0A'>&quot;Sheet1&quot;</span><span style='font-size:9.0pt;
line-height:196%;color:#222222'>)</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Reading
Excel files with the XLconnect package</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1095.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Book1.xlsx</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Book1.xlsx</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>XLConnect</span> automatically imports the pre-defined Excel
cell-styles embedded in . This is useful when you wish to format your workbook
object and export a perfectly formatted Excel document. Firstly, you will need
to create the desired cell formats in and save them, for example, as <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>myHeader</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>myBody</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>myPcts</span>.
Then, after loading the workbook in <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>R</span> (see above):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895619584'><span style='left:0px;position:absolute;left:0px;top:-266368px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>Headerstyle </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> XLConnect</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>getCellStyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wb, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;myHeader&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Bodystyle </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
XLConnect</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>getCellStyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wb, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;myBody&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.3pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Pctsstyle </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
XLConnect</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>getCellStyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wb, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;myPcts&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>The cell styles are now saved in your <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span>
environment. In order to assign the cell styles to certain ranges of your data,
you need to define the range and then assign the style:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Headerrange </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>expand.grid</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>row</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>8</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Bodyrange </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>expand.grid</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>row</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>Pctrange </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>expand.grid</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>row</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'>, </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>6</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:151.45pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895618560'><span style='left:0px;position:absolute;left:0px;
top:-266569px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image1096.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>XLConnect</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>setCellStyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wb, sheet </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;sheet1&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>row</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
Headerrange$row, </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>col</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
Headerrange$col, cellstyle </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
Headerstyle</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>XLConnect</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>setCellStyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wb, sheet </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;sheet1&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>row</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
Bodyrange$row,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:167.65pt;margin-bottom:
17.25pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895617536'><span style='left:0px;position:absolute;left:0px;
top:-266621px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image269.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>col</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> Bodyrange$col, cellstyle </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> Bodystyle</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>) </span><span style='font-size:9.0pt;line-height:110%'>XLConnect</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>setCellStyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>wb, sheet </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;sheet1&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>row</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>
Pctrange$row, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> Pctrange$col, cellstyle </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> Pctsstyle</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Note that <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>XLConnect</span> is easy, but can become extremely slow in
formatting. A much faster, but more cumbersome formatting option is offered by <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>openxlsx</span>.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.6pt;margin-left:
.75pt'>Reading excel files with the openxlsx package</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=139
src="R%20Notes%20for%20Professionals_files/image1097.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The sheet, which should be read into R can be selected
either by providing its position in the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>sheet</span> argument:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1098.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>or by declaring its name:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1099.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:12.15pt;margin-bottom:
4.9pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:177%'><span style='position:relative;z-index:-1895616512'><span
style='left:0px;position:absolute;left:0px;top:-267050px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>Additionally,
<span style='font-size:9.0pt;line-height:177%;background:#FAFAFA'>openxlsx</span>
can detect date columns in a read sheet. In order to allow automatic detection
of dates, an argument <span style='font-size:9.0pt;line-height:177%;background:
#FAFAFA'>detectDates</span> should be set to <span style='font-size:9.0pt;
line-height:177%;background:#FAFAFA'>TRUE</span>: <span style='font-size:9.0pt;
line-height:177%'>openxlsx</span><span style='font-size:9.0pt;line-height:177%;
color:#666666'>::</span><span style='font-size:9.0pt;line-height:177%'>read.xlsx</span><span
style='font-size:9.0pt;line-height:177%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:177%;color:#CC0A0A'>&quot;spreadsheet1.xlsx&quot;</span><span
style='font-size:9.0pt;line-height:177%'>, sheet </span><span style='font-size:
9.0pt;line-height:177%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:177%'> </span><span style='font-size:9.0pt;line-height:177%;
color:#CC0A0A'>&quot;Sheet1&quot;</span><span style='font-size:9.0pt;
line-height:177%'>, detectDates</span><span style='font-size:9.0pt;line-height:
177%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:177%'>
TRUE</span><span style='font-size:9.0pt;line-height:177%;color:#222222'>) </span><b>Reading
excel files with the readxl package</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Excel files can be imported as a data frame into <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span> using the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>readxl</span>
package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1100.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=88 style='width:66.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xls</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xlsx</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It can read both <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>.</span> files.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1101.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The sheet to be imported can be specified by number or name.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1102.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>col_names </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:4.0pt;text-indent:-3.75pt;line-height:253%'><span style='position:
relative;z-index:-1895615488'><span style='left:0px;position:absolute;
left:0px;top:-267383px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>The
argument sets the first row as the column names. <span style='font-size:9.0pt;
line-height:253%'>readxl</span><span style='font-size:9.0pt;line-height:253%;
color:#666666'>::</span><span style='font-size:9.0pt;line-height:253%'>read_excel</span><span
style='font-size:9.0pt;line-height:253%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:253%;color:#CC0A0A'>&quot;spreadsheet.xls&quot;</span><span
style='font-size:9.0pt;line-height:253%'>, sheet </span><span style='font-size:
9.0pt;line-height:253%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:253%'> </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:253%'>,
col_names </span><span style='font-size:9.0pt;line-height:253%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:253%'> TRUE</span><span style='font-size:
9.0pt;line-height:253%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.75pt;
margin-left:.75pt'>The argument <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>col_types</span> can be used to specify the column types in
the data as a vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:129.85pt;margin-bottom:
6.25pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895614464'><span style='left:0px;position:absolute;left:0px;
top:-267508px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>readxl</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>::</span><span style='font-size:9.0pt;
line-height:110%'>read_excel</span><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;spreadsheet.xls&quot;</span><span style='font-size:9.0pt;
line-height:110%'>, sheet </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'>, col_names </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> TRUE, col_types </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;text&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;date&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;numeric&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;numeric&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<h4 style='margin-left:.75pt'>Reading excel files with the RODBC package</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Excel files can be read using the ODBC Excel Driver that
interfaces with Windows' Access Database Engine (ACE), formerly JET. With the
RODBC package, R can connect to this driver and directly query workbooks.
Worksheets are assumed to maintain column headers in first row with data in
organized columns of similar types. <b>NOTE:</b> This approach is limited to
only Windows/PC machines as JET/ACE are installed .dll files and not available
on other operating systems.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=125
src="R%20Notes%20for%20Professionals_files/image1103.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>Connecting with an SQL engine in this approach, Excel
worksheets can be queried similar to database tables including <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>JOIN</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>UNION</span>
operations. Syntax follows the JET/ACE SQL dialect. <b>NOTE:</b> Only data
access DML statements, specifically <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>SELECT</span></b> can be run on workbooks,
considered not updateable queries.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>joindf </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> sqlQuery</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>xlconn, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;SELECT t1.*, t2.* FROM [Sheet1$] t1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:243.25pt;margin-bottom:
12.45pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895613440'><span style='left:0px;position:absolute;left:0px;
top:-267904px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image304.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>
INNER JOIN [Sheet2$] t2 ON t1.[ID] = t2.[ID]&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>uniondf </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> sqlQuery</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>xlconn, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;SELECT * FROM [Sheet1$]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'> UNION </span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.25pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'> SELECT * FROM [Sheet2$]&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Even other workbooks can be queried from the same ODBC
channel pointing to a current workbook:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>otherwkbkdf </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
sqlQuery</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>xlconn, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;SELECT * FROM</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'> [Excel 12.0 Xml;HDR=Yes;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.1pt;margin-bottom:
.1pt;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.25pt;line-height:174%'><span style='position:relative;z-index:
-1895612416'><span style='left:0px;position:absolute;left:0px;top:-268104px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:174%;color:#CC0A0A'>
Database=C:</span><b><span style='font-size:9.0pt;line-height:174%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:174%;color:#CC0A0A'>Path</span><b><span
style='font-size:9.0pt;line-height:174%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:174%;color:#CC0A0A'>To</span><b><span
style='font-size:9.0pt;line-height:174%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:174%;color:#CC0A0A'>Other</span><b><span
style='font-size:9.0pt;line-height:174%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:174%;color:#CC0A0A'>Workbook.xlsx].[Sheet1$];&quot;</span><span
style='font-size:9.0pt;line-height:174%;color:#222222'>) </span><b>Reading
excel files with the gdata package example here</b></p>

<h2 style='margin-top:0in;margin-right:48.1pt;margin-bottom:.1pt;margin-left:
-.75pt;text-align:justify;text-justify:inter-ideograph;text-indent:3.25pt;
line-height:174%'><a name="_Toc619095">Section 92.4: Import or Export of
Feather file</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><a href="https://github.com/wesm/feather"><span
style='color:#2066B9'>Feather</span></a> is an implementation of <a
href="https://arrow.apache.org/"><span style='color:#2066B9'>Apache Arrow</span></a>
designed to store data frames in a language agnostic manner while maintaining
metadata (e.g. date classes), increasing interoperability between Python and R.
Reading a feather file will produce a tibble, not a standard data.frame.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=274
src="R%20Notes%20for%20Professionals_files/image1104.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## 4 21.4 6 258 110 3.08 3.215 19.44
1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:146.05pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%;color:forestgreen'>## 5 18.7 8 360 175 3.15 3.440
17.02 0 0 3 2 ## 6 18.1 6 225 105 2.76 3.460
20.22 1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:151.45pt;margin-bottom:
.15pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895611392'><span style='left:0px;position:absolute;left:0px;
top:-268620px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image771.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>df</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'>##
mpg cyl disp hp drat wt qsec vs am gear carb</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## Mazda RX4 21.0 6 160 110 3.90 2.620
16.46 0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## Mazda RX4 Wag 21.0 6 160 110 3.90 2.875
17.02 0 1 4 4</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## Datsun 710 22.8 4 108 93 3.85 2.320
18.61 1 1 4 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## Hornet 4 Drive 21.4 6 258 110 3.08 3.215
19.44 1 0 3 1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'>## Hornet Sportabout 18.7 8 360 175 3.15 3.440
17.02 0 0 3 2</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:134.15pt;margin-bottom:
8.1pt;margin-left:0in;text-indent:3.75pt;line-height:240%'><span
style='font-size:9.0pt;line-height:240%;color:forestgreen'>## Valiant
18.1 6 225 105 2.76 3.460 20.22 1 0 3 1 </span>The current
documentation contains this warning:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:6.15pt;margin-bottom:
1.7pt;margin-left:24.5pt'><img width=3 height=1
src="R%20Notes%20for%20Professionals_files/image578.gif" align=left hspace=12>Note
to users: Feather should be treated as alpha software. In particular, the file
format is likely to evolve over the coming year. Do not use Feather for
long-term data storage.<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619096">Chapter 93: I/O for
database tables</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619097">Section 93.1: Reading Data
from MySQL Databases</a></h2>

<h4 style='margin-left:.75pt'>General</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Using the package <a
href="https://cran.r-project.org/web/packages/RMySQL/index.html"><span
style='color:#2066B9'>RMySQL</span></a> we can easily query MySQL as well as
MariaDB databases and store the result in an R dataframe:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1105.gif"></span></p>

<h4 style='margin-left:.75pt'>Using limits</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is also possible to define a limit, e.g. getting only the
first 100,000 rows. In order to do so, just change the SQL query regarding the
desired limit. The mentioned package will consider these options. Example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1106.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619098">Section 93.2: Reading Data
from MongoDB Databases</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In order to load data from a MongoDB database into an R
dataframe, use the library <a href="https://github.com/jeroen/mongolite"><span
style='color:#2066B9'>MongoLite</span></a>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.3pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=191
src="R%20Notes%20for%20Professionals_files/image1107.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The code connects to the server <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>HOSTNAME</span> as <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>USERNAME</span> with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>PASSWORD</span>,
tries to open the database <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>TweetCollector </span>and read the collection <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Tweets</span>. The
query tries to read the field i.e. column <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Text</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The results is a dataframe with columns as the yielded data
set. In case of this example, the dataframe contains the column <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Text</span>, e.g. <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>documents$Text</span>.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619099">Chapter 94: I/O for
geographic data (shapefiles, etc.)</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:167.45pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>See also Introduction to Geographical
Maps and Input and Output</p>

<h2 style='margin-top:0in;margin-right:167.45pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619100">Section 94.1: Import and Export
Shapefiles</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>map.shp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>With the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>rgdal</span> package it is possible to import and export
shapfiles with R. The function <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>readOGR</span> can be used to imports shapfiles. If you
want to import a file from e.g. ArcGIS the first argument <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>dsn</span> is the
path to the folder which contains the shapefile. <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>layer</span> is the name of the shapefile
without the file ending (just <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>map</span> and not ).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1108.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To export a shapefile use the<span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>writeOGR</span> function. The first
argument is the spatial object produced in R. <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>dsn</span> and <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>layer</span> are the same as above.
The obligatory 4. argument is the driver used to generate the shapefile. The
function</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=689 style='width:516.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ogrDrivers</span></p>
  </td>
  <td width=566 valign=top style='width:5.9in;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> lists all available drivers.
  If you want to export a shapfile to ArcGis or QGis you could use </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>driver </span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:16.55pt;
margin-bottom:12.65pt;margin-left:0in;text-align:right;text-indent:0in;
line-height:130%'><span style='font-size:9.0pt;line-height:130%;color:#666666;
background:#FAFAFA'>= </span><span style='font-size:9.0pt;line-height:130%;
color:#CC0A0A;background:#FAFAFA'>&quot;ESRI Shapefile&quot;</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:59.6pt;margin-bottom:
17.3pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895609344'><span style='left:0px;position:absolute;left:0px;
top:-270056px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>writeOGR</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>Rmap, dsn </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;path</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\t</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>o</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\t</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>he</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\f</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>older</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>ontaining</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\t</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>he</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\s</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>hapefile&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, layer </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;map&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, driver </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;ESRI
Shapefile&quot;</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=335 style='width:251.55pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>read_shape</span></p>
  </td>
  <td width=163 valign=top style='width:121.95pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, which is a wrapper for </p>
  </td>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rgdal</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>reagOGR</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>tmap</span> package has a very convenient function <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>.
The</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>read_shape</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>
function simplifies the process of importing a shapefile a lot. On the
downside, <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>tmap</span>
is quite heavy.<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619101">Chapter 95: I/O for raster
images</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:208.1pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>See also Raster and Image Analysis and
Input and Output</p>

<h2 style='margin-top:0in;margin-right:208.1pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619102">Section 95.1: Load a multilayer
raster</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The R-Logo is a multilayer raster file (red, green, blue)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=597
src="R%20Notes%20for%20Professionals_files/image1109.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The individual layers of the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>RasterStack</span> object can be addressed
by <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>[[</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1110.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=516 height=523 id="Picture 64827"
src="R%20Notes%20for%20Professionals_files/image1111.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619103">Chapter 96: I/O for R's
binary format</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619104">Section 96.1: Rds and RData
(Rda) files</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=223 style='width:167.15pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rds</span></p>
  </td>
  <td width=38 valign=top style='width:28.45pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rdata</span></p>
  </td>
  <td width=106 valign=top style='width:79.35pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>(also known as <span style='font-size:
  9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rda</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>write.table</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>.</span>) files can be used to store R objects in a format native to
R. There are multiple advantages of saving this way when contrasted with
non-native storage approaches, e.g. :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>It
is faster to restore the data to R</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:21.4pt'>It keeps R specific information encoded in the data (e.g.,
attributes, variable types, etc).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>saveRDS</span>/<span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>readRDS</span> only handle a single R object. However, they
are more flexible than the multi-object storage approach in that the object
name of the restored object need not be the same as the object name when the
object was stored.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Using an .rds file, for example, saving the <b><span
style='font-size:9.0pt;line-height:108%;color:#333399;background:#FAFAFA'>iris</span></b>
dataset we would use:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1112.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To load it data back in:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1113.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:134.85pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>save</span></b></p>
  </td>
  <td width=115 valign=top style='width:86.25pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and output as <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rdata</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>To save a multiple objects we can use .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Example, to save 2 dataframes: iris and cars</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1114.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To load:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1115.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619105">Section 96.2: Enviromments</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The functions <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>save</span></b> and <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>load</span></b>
allow us to specify the environment where the object will be hosted:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1116.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619106">Chapter 97: Recycling</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619107">Section 97.1: Recycling use
in subsetting</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Recycling can be used in a clever way to simplify code.</p>

<h4 style='margin-left:.75pt'>Subsetting</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If we want to keep every third element of a vector we can do
the following:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1117.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Here the logical expression was expanded to the length of
the vector.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can also perform comparisons using recycling:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1118.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Here &quot;bar&quot; gets recycled.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619108">Chapter 98: Expression:
parse + eval</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619109">Section 98.1: Execute code
in string format</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In this exemple, we want to execute code which is stored in
a string format.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=306
src="R%20Notes%20for%20Professionals_files/image1119.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619110">Chapter 99: Regular
Expression Syntax in R</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><a
  href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html"><span
  style='font-size:9.0pt;line-height:107%;color:#2066B9'>regex</span></a></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:15.5pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>This document introduces the basics of regular expressions as
used in R. For more information about R's regular expression syntax, see <a
href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html"><span
style='font-size:9.0pt;line-height:134%;color:#666666;background:#FAFAFA'>?</span></a>.
For a comprehensive list of regular expression operators, see <a
href="http://userguide.icu-project.org/strings/regexp"><span style='color:#2066B9'>this
ICU guide on </span></a><a
href="http://userguide.icu-project.org/strings/regexp"><span style='color:#2066B9'>regular
expressions</span></a>.</p>

<h2 style='margin-top:0in;margin-right:15.5pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619111">Section 99.1: Use `grep` to find a string in a character
vector</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image1120.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>x</span><span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>|</span><span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>y</span> means look for &quot;x&quot; or &quot;y&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1121.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>.</span> is a special character in Regex. It means &quot;match any
character&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1122.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Be careful when trying to match dots!</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1123.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To match a literal character, you have to escape the string
with a backslash (<span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>\</span>). However, R tries to look for escape characters when
creating strings, so you actually need to escape the backslash itself (i.e. you
need to <i>double escape </i>regular expression characters.)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1124.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If you want to match one of several characters, you can wrap
those characters in brackets (<span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>[]</span>)</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=24
src="R%20Notes%20for%20Professionals_files/image1125.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=54
src="R%20Notes%20for%20Professionals_files/image1126.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>z0</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It may be useful to indicate character sequences. E.g. <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>0</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>4</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will match 0, 1, 2, 3, or 4, <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>A</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Z</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will match any uppercase letter, <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>A</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>z</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will match any uppercase or lowercase letter, and <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>A</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>--</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will match any letter or number (i.e. all alphanumeric characters)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1127.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=204 style='width:152.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>lower</span></p>
  </td>
  <td width=132 valign=top style='width:98.65pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>]</span> is short for <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>a</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>-</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>z</span>, <span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>[</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>:</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>upper</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>R also has several shortcut classes that can be used in
brackets. For instance, <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>[</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>::</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=343 style='width:257.05pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>alpha</span></p>
  </td>
  <td width=74 valign=top style='width:55.35pt;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>]</span> is <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>A</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>-</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>z</span>, <span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>[</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>:</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>digit</span></p>
  </td>
  <td width=101 valign=top style='width:75.8pt;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>]</span> is <span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>0</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>-</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A;background:#FAFAFA'>9</span>,
  and <span style='font-size:9.0pt;line-height:107%;color:#222222;background:
  #FAFAFA'>[</span><span style='font-size:9.0pt;line-height:107%;color:#666666;
  background:#FAFAFA'>:</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>alnum</span></p>
  </td>
  <td width=45 valign=top style='width:34.1pt;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>:</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>]</span> is <span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>A</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.3pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>z0</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>is short for <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>A</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>-</span><span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Z</span>, <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>:-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span>.
Note that these <i>whole expressions</i></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>digit</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>digit</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>must be used inside brackets; for instance, to match a
single digit, you can use <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>[[</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>::</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]]</span>
(note the double brackets). As another example, <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>@</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>::</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>/</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will match the characters <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>@</span>, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>/</span> or <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>0</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1128.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Brackets can also be used to negate a match with a carat (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>^</span>). For
instance, <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>^</span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>5</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>
will match any character other than &quot;5&quot;.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1129.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619112">Chapter 100: Regular
Expressions (regex)</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>regex</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:7.85pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Regular expressions (also called &quot;regex&quot; or
&quot;regexp&quot;) define patterns that can be matched against a string. Type <span
style='font-size:9.0pt;line-height:134%;color:#666666;background:#FAFAFA'>?</span>
for the official R documentation and see the Regex Docs for more details. The
most important 'gotcha' that will not be learned in the SO regex/topics is that
most R-regex functions need the use of paired backslashes to escape in a <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>pattern</span>
parameter.</p>

<h2 style='margin-top:0in;margin-right:7.85pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619113">Section 100.1: Di&#57379;erences between Perl and POSIX regex</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are two ever-so-slightly different engines of regular
expressions implemented in R. The default is called</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>perl </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>POSIX-consistent; all regex functions in R are also equipped
with an option to turn on the latter type: .</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Look-ahead/look-behind</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>perl </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>=</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>TRUE</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:59.9pt'>enables look-ahead and look-behind in regular expressions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:35.3pt;margin-bottom:
.25pt;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:20.9pt;line-height:134%'><span style='font-size:11.0pt;line-height:
134%'><img border=0 width=5 height=5 id="Group 593430"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span><span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A;background:#FAFAFA'>&quot;(?&lt;=A)B&quot;</span>
matches an appearance of the letter <span style='font-size:9.0pt;line-height:
134%;background:#FAFAFA'>B</span> <i>only if</i> it's preceded by <span
style='font-size:9.0pt;line-height:134%;background:#FAFAFA'>A</span>, i.e. <span
style='font-size:9.0pt;line-height:134%;color:#CC0A0A;background:#FAFAFA'>&quot;ABACADABRA&quot;</span>
would be matched, but <span style='font-size:9.0pt;line-height:134%;color:#CC0A0A;
background:#FAFAFA'>&quot;abacadabra&quot;</span> and <span style='font-size:
9.0pt;line-height:134%;color:#CC0A0A;background:#FAFAFA'>&quot;aBacadabra&quot;</span>
would not.</p>

<h2 style='margin-top:0in;margin-right:35.3pt;margin-bottom:.25pt;margin-left:
-.75pt;text-align:justify;text-justify:inter-ideograph;text-indent:20.9pt;
line-height:134%'><a name="_Toc619114">Section 100.2: Validate a date in a
&quot;YYYYMMDD&quot; format</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is a common practice to name files using the date as
prefix in the following format: <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>YYYYMMDD</span>, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#CC0A0A'>20170101</span><span
style='font-size:9.0pt;line-height:108%'>_results.csv</span>. A date in such
string format can be verified using the following regular expression:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1130.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=319 style='width:239.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>0000</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>9999</span></p>
  </td>
  <td width=119 valign=top style='width:89.25pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, months between: </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>01</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>12</span></p>
  </td>
  <td width=63 valign=top style='width:47.15pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>and days </p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>01</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>31</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>The above expression considers dates from year: .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1131.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Note</b>: It validates the date syntax, but we can have a
wrong date with a valid syntax, for example: <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>20170229</span> (2017 it is
not a leap year).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1132.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:81.2pt;margin-bottom:
1.7pt;margin-left:4.0pt;text-indent:-3.75pt;line-height:253%'><span
style='position:relative;z-index:-1895607296'><span style='left:0px;position:
absolute;left:0px;top:-275306px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>If
you want to validate a date, it can be done via this user defined function: <span
style='font-size:9.0pt;line-height:253%'>is.Date </span><span style='font-size:
9.0pt;line-height:253%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:253%'> </span><b><span style='font-size:9.0pt;line-height:253%;
color:blue'>function</span></b><span style='font-size:9.0pt;line-height:253%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:253%'>x</span><span
style='font-size:9.0pt;line-height:253%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:253%'> </span><span style='font-size:9.0pt;
line-height:253%;color:#222222'>{</span><b><span style='font-size:9.0pt;
line-height:253%;color:blue'>return</span></b><span style='font-size:9.0pt;
line-height:253%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:253%;color:#666666'>!</span><b><span style='font-size:9.0pt;
line-height:253%;color:blue'>is.na</span></b><span style='font-size:9.0pt;
line-height:253%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:253%;color:blue'>as.Date</span></b><span style='font-size:9.0pt;
line-height:253%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:253%;color:blue'>as.character</span></b><span style='font-size:
9.0pt;line-height:253%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:253%'>x</span><span style='font-size:9.0pt;line-height:253%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:253%'>, </span><b><span
style='font-size:9.0pt;line-height:253%;color:blue'>format</span></b><span
style='font-size:9.0pt;line-height:253%'> </span><span style='font-size:9.0pt;
line-height:253%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:253%'> </span><span style='font-size:9.0pt;line-height:253%;
color:#CC0A0A'>'%Y%m%d'</span><span style='font-size:9.0pt;line-height:253%;
color:#222222'>)))}</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Then</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1133.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619115">Section 100.3: Escaping
characters in R regex patterns</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#000099'>\&quot;</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Since both R and regex share the escape character ,<span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;</span>,
building correct patterns for <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>grep</span></b>, <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sub</span></b>, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>gsub</span></b>
or any other function that accepts a pattern argument will often need pairing
of backslashes. If you build a three item character vector in which one items
has a linefeed, another a tab character and one neither, and hte desire is to
turn either the linefeed or the tab into 4-spaces then a single backslash is
need for the construction, but tpaired backslashes for matching:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1134.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that the pattern argument (which is optional if it
appears first and only needs partial spelling) is the only argument to require
this doubling or pairing. The replacement argument does not require the
doubling of characters needing to be escaped. If you wanted all the linefeeds
and 4-space occurrences replaces with tabs it would be:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1135.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619116">Section 100.4: Validate US
States postal abbreviations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.95pt;
margin-left:.75pt'>The following <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>regex</span> includes 50 states and also
Commonwealth/Territory (see <a href="http://www.50states.com/abbreviations.htm"><span
style='color:#2066B9'>www.50states.com</span></a>):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:-.25pt;line-height:107%;background:#FAFAFA'><span style='font-size:
9.0pt;line-height:107%'>regex </span><span style='font-size:9.0pt;line-height:
107%;color:#666666'>&lt;-</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.45pt;
margin-left:-.25pt;line-height:107%'><span style='font-size:9.0pt;line-height:
107%;color:#CC0A0A;background:#FAFAFA'>&quot;(A[LKSZR])|(C[AOT])|(D[EC])|(F[ML])|(G[AU])|(HI)|(I[DLNA])|(K[SY])|(LA)|(M[EHDAINSOT])|(N[EVHJMYCD</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:139.9pt;margin-bottom:
2.3pt;margin-left:-.25pt;line-height:210%'><span style='font-size:9.0pt;
line-height:210%;color:#CC0A0A;background:#FAFAFA'>])|(MP)|(O[HKR])|(P[WAR])|(RI)|(S[CD])|(T[NX])|(UT)|(V[TIA])|(W[AVIY])&quot;
</span>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895606272'><span style='left:0px;position:absolute;left:0px;top:-276010px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image232.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&gt;</span><span
style='font-size:9.0pt;line-height:110%'> test </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>c</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;AL&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;AZ&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;AR&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;AJ&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;AS&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;DC&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;FM&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;GU&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;PW&quot;</span><span style='font-size:
9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;FL&quot;</span><span style='font-size:9.0pt;line-height:
110%'>, </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;AJ&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;AP&quot;</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>grepl</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>us.states.pattern, test</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> TRUE TRUE TRUE FALSE TRUE TRUE
TRUE TRUE TRUE TRUE FALSE FALSE</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.5pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span>&nbsp;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Note</b>:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#333399'>state.abb</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you want to verify only the 50 States, then we recommend
to use the R-dataset: from <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>state</span>, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=60
src="R%20Notes%20for%20Professionals_files/image1136.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:174.85pt;margin-bottom:
0in;margin-left:.75pt;line-height:146%'>We get <span style='font-size:9.0pt;
line-height:146%;background:#FAFAFA'>TRUE</span> only for 50-States
abbreviations: <span style='font-size:9.0pt;line-height:146%;background:#FAFAFA'>AL,
AZ, AR, FL</span>.</p>

<h2 style='margin-top:0in;margin-right:174.85pt;margin-bottom:0in;margin-left:
.75pt;line-height:146%'><a name="_Toc619117">Section 100.5: Validate US phone
numbers</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The following regular expression:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.3pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895605248'><span style='left:0px;position:absolute;left:0px;top:-276333px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>us.phones.regex </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;^</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s*(</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>+</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s*1(-?|</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s+))*[0-9]{3}</span><b><span style='font-size:
9.0pt;line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s*-?</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s*[0-9]{3}</span><b><span style='font-size:
9.0pt;line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s*-?</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>s*[0-9]{4}$&quot;</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xxx</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xxx</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xxxx</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=94 style='width:70.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xxx</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xxx</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>xx xx</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>Validates a phone number in the form of: <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>+</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span>,
including optional leading/trailing blanks at the beginning/end of each group
of numbers, but not in the middle, for example: <span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>+</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span>
is not valid. The delimiter can be replaced by blanks: <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>xxx xxx xxx</span> or without
delimiter: <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>xxxxxxxxxx</span>.
The <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>+1</span>
prefix is optional.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>Let's check it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>us.phones.regex </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;^</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s*(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>+</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s*1(-?|</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s+))*[0-9]{3}</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s*-?</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s*[0-9]{3}</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s*-?</span><b><span
style='font-size:9.0pt;line-height:110%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>s*[0-9]{4}$&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>phones.OK </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>c</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;305-123-4567&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;305 123 4567&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;+1-786-123-4567&quot;</span><span
style='font-size:9.0pt;line-height:110%'>,</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;+1
786 123 4567&quot;</span><span style='font-size:9.0pt;line-height:110%'>, </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;7861234567&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;786 - 123 4567&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;+ 1 786 - 123 4567&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:189.15pt;margin-bottom:
.1pt;margin-left:-.75pt;text-align:justify;text-justify:inter-ideograph;
text-indent:3.25pt;line-height:174%'><span style='position:relative;z-index:
-1895604224'><span style='left:0px;position:absolute;left:0px;top:-276571px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image304.gif"></span></span><span
style='font-size:9.0pt;line-height:174%'>phones.NOK </span><span
style='font-size:9.0pt;line-height:174%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:174%'> </span><b><span style='font-size:
9.0pt;line-height:174%;color:blue'>c</span></b><span style='font-size:9.0pt;
line-height:174%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:174%;color:#CC0A0A'>&quot;124-456-78901&quot;</span><span
style='font-size:9.0pt;line-height:174%'>, </span><span style='font-size:9.0pt;
line-height:174%;color:#CC0A0A'>&quot;124-456-789&quot;</span><span
style='font-size:9.0pt;line-height:174%'>, </span><span style='font-size:9.0pt;
line-height:174%;color:#CC0A0A'>&quot;124-456-78 90&quot;</span><span
style='font-size:9.0pt;line-height:174%'>, </span><span style='font-size:
9.0pt;line-height:174%;color:#CC0A0A'>&quot;124-45 6-7890&quot;</span><span
style='font-size:9.0pt;line-height:174%'>, </span><span style='font-size:9.0pt;
line-height:174%;color:#CC0A0A'>&quot;12 4-456-7890&quot;</span><span
style='font-size:9.0pt;line-height:174%;color:#222222'>) </span>Valid cases:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1137.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Invalid cases:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1138.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Note</b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:108%'><img
border=0 width=5 height=5 id="Group 592662"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>\\s</span> Matches
any space, tab or newline character</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619118">Chapter 101: Combinatorics</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619119">Section 101.1: Enumerating
combinations of a specified length</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:2.6pt;margin-left:
.75pt'>Without replacement</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image1139.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>expand.grid</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>With , each vector appears in a row:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=273
src="R%20Notes%20for%20Professionals_files/image1140.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>For the special case of pairs, <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>outer</span></b> can be
used, putting each vector into a cell:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># FUN here is used as a function executed on each
resulting pair.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:237.85pt;margin-bottom:
12.3pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895603200'><span style='left:0px;position:absolute;left:0px;
top:-277542px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image987.gif"></span></span><span
style='font-size:9.0pt;line-height:112%;color:forestgreen'># in this case it's
string concatenation. </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>outer</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>LETTERS</span></b><span style='font-size:9.0pt;line-height:112%'>, </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>LETTERS</span></b><span
style='font-size:9.0pt;line-height:112%'>, FUN</span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%'>paste0</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.15pt;
margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;line-height:
112%;color:forestgreen'># Showing only first 10 rows and columns</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:231.7pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>2</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>3</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>6</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>,</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>8</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>9</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>10</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;AA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;AB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;AC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;AD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;AE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;AF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;AG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;AH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;AI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;AJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;BA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;BB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;BC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;BD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;BE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;BF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;BG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;BH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;BI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;BJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;CA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;CB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;CC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;CD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;CE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;CF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;CG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;CH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;CI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;CJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;DA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;DB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;DC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;DD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;DE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;DF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;DG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;DH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;DI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;DJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;EA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;EB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;EC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;ED&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;EE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;EF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;EG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;EH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;EI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;EJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;FA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;FB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;FC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;FD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;FE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;FF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;FG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;FH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;FI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;FJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>7</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;GA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;GB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;GC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;GD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;GE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;GF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;GG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;GH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;GI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;GJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>8</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;HA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;HB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;HC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;HD&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;HE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;HF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;HG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;HH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;HI&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;HJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'></span><span style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>9</span><span
style='font-size:9.0pt;line-height:110%'>,</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;IA&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;IB&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;IC&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;ID&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;IE&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;IF&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;IG&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;IH&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;II&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;IJ&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>10</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;JA&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;JB&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;JC&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;JD&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;JE&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;JF&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;JG&quot;</span><span style='font-size:
9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;JH&quot;</span><span style='font-size:9.0pt;line-height:
110%'> </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;JI&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;JJ&quot;</span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619120">Section 101.2: Counting
combinations of a specified length</a></h2>

<p class=MsoNormal style='margin-bottom:1.8pt;line-height:110%'><span
style='font-size:11.0pt;line-height:110%'><img border=0 width=718 height=58
src="R%20Notes%20for%20Professionals_files/image1141.gif"></span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>65780</span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:3.65pt;margin-left:
.75pt'>With replacement</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif" align=left hspace=12><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>length</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>letters</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>^</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#222222'>[</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>]</span><span style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>11881376</span><br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619121">Chapter 102: Solving ODEs
in R</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:165.65pt;margin-bottom:
3.8pt;margin-left:23.8pt;text-indent:-23.55pt'><b>Parameter Details </b>y
(named) numeric vector: the initial (state) values for the ODE system</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.5pt;
margin-left:0in;text-indent:0in;line-height:103%'><span style='font-size:11.0pt;
line-height:103%'> </span>times time sequence for
which output is wanted; the first value of times must be the initial time</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'><span style='font-size:11.0pt;line-height:
108%'> </span>func name of the function that
computes the values of the derivatives in the ODE system</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'><span style='font-size:11.0pt;line-height:
108%'> </span>parms (named) numeric vector: parameters passed
to func</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:21.0pt;
margin-left:0in;text-indent:0in'>method the integrator to use,
by default: lsoda</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619122">Section 102.1: The Lorenz
model</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The Lorenz model describes the dynamics of three state
variables, X, Y and Z. The model equations are:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=185
height=42 id="Picture 66867"
src="R%20Notes%20for%20Professionals_files/image1142.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=185
height=42 id="Picture 66869"
src="R%20Notes%20for%20Professionals_files/image1142.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=185
height=42 id="Picture 66871"
src="R%20Notes%20for%20Professionals_files/image1142.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The initial conditions are:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=185
height=42 id="Picture 66874"
src="R%20Notes%20for%20Professionals_files/image1143.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>and a, b and c are three parameters with</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=721 height=453
src="R%20Notes%20for%20Professionals_files/image1144.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=844
src="R%20Notes%20for%20Professionals_files/image1145.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc619123">Section 102.2: Lotka-Volterra or: Prey vs. predator</a></h2>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=126
src="R%20Notes%20for%20Professionals_files/image1146.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=720 height=1004
src="R%20Notes%20for%20Professionals_files/image1147.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc619124">Section 102.3: ODEs in compiled languages - definition in R</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=842
src="R%20Notes%20for%20Professionals_files/image1148.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc619125">Section 102.4: ODEs in compiled languages - definition in C</a></h2>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=90
src="R%20Notes%20for%20Professionals_files/image1149.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=1023
src="R%20Notes%20for%20Professionals_files/image1150.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc619126">Section 102.5: ODEs in compiled languages - definition in
fortran</a></h2>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=967
src="R%20Notes%20for%20Professionals_files/image1151.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=318
src="R%20Notes%20for%20Professionals_files/image1152.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619127">Section 102.6: ODEs in
compiled languages - a benchmark test</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When you compiled and loaded the code in the three examples
before (ODEs in compiled languages - definition in R, ODEs in compiled
languages - definition in C and ODEs in compiled languages - definition in
fortran) you are able to run a benchmark test.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="R%20Notes%20for%20Professionals_files/image1153.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Check if results are equal:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1154.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Make a benchmark (Note: On your machine the times are, of
course, different):</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=97
src="R%20Notes%20for%20Professionals_files/image1155.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=631
src="R%20Notes%20for%20Professionals_files/image1156.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We see clearly, that R is slow in contrast to the definition
in C and fortran. For big models it's worth to translate the problem in a
compiled language. The package <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>cOde</span> is one possibility to translate ODEs from R to
C.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619128">Chapter 103: Feature
Selection in R -Removing Extraneous Features</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619129">Section 103.1: Removing
features with zero or near-zero variance</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>A feature that has near zero variance is a good candidate
for removal.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can manually detect numerical variance below your own
threshold:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1157.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Or, you can use the caret package to find near zero
variance. An advantage here is that is defines near zero variance not in the
numerical calculation of variance, but rather as a function of rarity:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=721 height=168
src="R%20Notes%20for%20Professionals_files/image1158.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619130">Section 103.2: Removing
features with high numbers of NA</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>If a feature is largely lacking data, it is a good candidate
for removal:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=142
src="R%20Notes%20for%20Professionals_files/image1159.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:17.35pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>In this case, we may want to remove NonD and Dream, which
each have around 20% missing values (your cutoff may vary)</p>

<h2 style='margin-top:0in;margin-right:17.35pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619131">Section 103.3: Removing closely correlated features</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Closely correlated features may add variance to your model,
and removing one of a correlated pair might help reduce that. There are lots of
ways to detect correlation. Here's one:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=113
src="R%20Notes%20for%20Professionals_files/image1160.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=218
src="R%20Notes%20for%20Professionals_files/image1161.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>I'll want to look at what MPG is correlated to so strongly,
and decide what to keep and what to toss. Same for cyl and disp. Alternatively,
I might need to combine some strongly correlated features.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619132">Chapter 104: Bibliography
in RMD</a></h1>

<h3 style='margin:0in;text-indent:0in;line-height:109%'><span style='font-size:
10.0pt;line-height:109%;color:black'>Parameter in YAML header Detail</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=416
 style='width:311.75pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:13.65pt'>
  <td width=182 valign=top style='width:136.35pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>toc</span></p>
  </td>
  <td width=234 valign=top style='width:175.4pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>table
  of contents</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=182 valign=top style='width:136.35pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>number_sections</span></p>
  </td>
  <td width=234 valign=top style='width:175.4pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>numbering the sections automatically</p>
  </td>
 </tr>
 <tr style='height:16.75pt'>
  <td width=182 valign=top style='width:136.35pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>bibliography</span></p>
  </td>
  <td width=234 valign=top style='width:175.4pt;padding:0in 0in 0in 0in;
  height:16.75pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>path
  to the bibliography file</p>
  </td>
 </tr>
 <tr style='height:13.65pt'>
  <td width=182 valign=top style='width:136.35pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>csl</span></p>
  </td>
  <td width=234 valign=top style='width:175.4pt;padding:0in 0in 0in 0in;
  height:13.65pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>path
  to the style file</p>
  </td>
 </tr>
</table>

<h2 style='margin-left:-.25pt'><a name="_Toc619133">Section 104.1: Specifying a
bibliography and cite authors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The most important part of your RMD file is the YAML header.
For writing an academic paper, I suggest to use PDF output, numbered sections
and a table of content (toc).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=190
src="R%20Notes%20for%20Professionals_files/image1162.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>bibliography.bib</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In this example, our file looks like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1163.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To cite an author mentioned in your .bib file write <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>@</span> and the
bibkey, e.g. <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Meyer2000</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=223
src="R%20Notes%20for%20Professionals_files/image1164.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=317 style='width:237.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=317 valign=top style='width:237.65pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>rmarkdown</span><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>::</span><span style='font-size:9.0pt;line-height:107%'>render</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>(</span><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>&quot;&lt;path-to-your-RMD-file&quot;</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666'>&gt;</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:5.9pt;margin-bottom:1.7pt;
margin-left:.75pt'>Rendering the RMD file via RStudio (Ctrl+Shift+K) or via
console results in the following output:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=906 id="Picture 67852"
src="R%20Notes%20for%20Professionals_files/image1165.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619134">Section 104.2: Inline
references</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you have no *.bib file, you can use a references field in
the document<span style='font-family:"Arial",sans-serif'></span>s YAML
metadata. This should include an array of YAML-encoded references, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=603
src="R%20Notes%20for%20Professionals_files/image1166.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:69.25pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Rendering this file results in the same
output as in example &quot;Specifying a bibliography&quot;.</p>

<h2 style='margin-top:0in;margin-right:69.25pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619135">Section 104.3: Citation styles</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>By default, <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>pandoc</span> will use a Chicago author-date format for
citations and references. To use another style, you will need to specify a CSL
1.0 style file in the csl metadata field. In the following a often used
citation style, the elsevier style, is presented (download at <a
href="https://github.com/citation-style-language/styles"><span
style='color:#2066B9'>https://github.com/citation-style-language/styles</span></a>
). The style-file has to be stored in the same directory as the RMD file OR the
absolute path to the file has to be submitted.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>To use another style then the default one, the following
code is used:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=202
src="R%20Notes%20for%20Professionals_files/image1167.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=222
src="R%20Notes%20for%20Professionals_files/image1168.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=629
height=803 id="Picture 67961"
src="R%20Notes%20for%20Professionals_files/image1169.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice the differences to the output of example
&quot;Specifying a bibliography and cite authors&quot;</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619136">Chapter 105: Writing
functions in R</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619137">Section 105.1: Anonymous
functions</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>apply</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>An anonymous function is, as the name implies, not assigned
a name. This can be useful when the function is a part of a larger operation,
but in itself does not take much place. One frequent use-case for anonymous
functions is within the <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>*</span> family of Base functions.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Calculate the root mean square for each column in a :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1170.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Create a sequence of step-length one from the smallest to
the largest value for each row in a matrix.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1171.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>An anonymous function can also stand on its own:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1172.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>is equivalent to</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1173.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619138">Section 105.2: RStudio code
snippets</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:187.9pt;margin-bottom:
1.7pt;margin-left:.75pt'>This is just a small hack for those who use
self-defined functions often. Type &quot;fun&quot; RStudio IDE and hit TAB.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=145 id="Picture 68155"
src="R%20Notes%20for%20Professionals_files/image1174.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The result will be a skeleton of a new function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1175.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>One can easily define their own snippet template, i.e. like
the one below</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1176.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:1.65in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=158 valign=top style='width:1.65in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Global Options </span><span style='font-size:9.0pt;line-height:107%;
  color:#666666'>-&gt;</span><span style='font-size:9.0pt;line-height:107%'>
  Code</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:19.0pt;
margin-left:.75pt'>The option is <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Edit Snippets</span> in the menu.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619139">Section 105.3: Named
functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>R is full of functions, it is after all a <a
href="https://en.wikipedia.org/wiki/Functional_programming#R"><span
style='color:#2066B9'>functional programming language</span></a>, but sometimes
the precise function you need isn't provided in the Base resources. You could
conceivably install a package containing the function, but maybe your
requirements are just so specific that no pre-made function fits the bill? Then
you're left with the option of making your own.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:8.9pt;
margin-left:.75pt'>A function can be very simple, to the point of being being
pretty much pointless. It doesn't even need to take an argument:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>What's between the curly braces <span style='font-size:11.0pt;
line-height:108%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1177.gif"></span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>{</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>}</span> is the function
proper. As long as you can fit everything on a single line they aren't strictly
needed, but can be useful to keep things organized.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A function can be very simple, yet highly specific. This
function takes as input a vector (<span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>vec</span> in this example) and outputs the same
vector with the vector's length (6 in this case) subtracted from each of the
vector's elements.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1178.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>length</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice that <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> is in itself a pre-supplied (i.e. <i>Base</i>)
function. You can of course use a previously self-made function within another
self-made function, as well as assign variables and perform other operations
while spanning several lines:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image1179.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>multiplier</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:11.65pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#666666;background:#FAFAFA'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A;background:#FAFAFA'>4</span>
makes sure that <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>4</span>
is the default value of the argument <span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>multiplier</span>, if no value is given when calling</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>the function <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>4</span> is what will be used.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>subtract.length</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:81.25pt;text-indent:-81.0pt'>The above are all examples of <i>named</i>
functions, so called simply because they have been given names (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>one</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>two</span>, etc.)<br
clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619140">Chapter 106: Color schemes
for graphics</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619141">Section 106.1: viridis -
print and colorblind friendly palettes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:1.65pt;
margin-left:-.25pt;line-height:110%'>Viridis (named after the <a
href="https://en.wikipedia.org/wiki/Chromis_viridis"><span style='color:#2066B9'>chromis
viridis fish</span></a>) is a recently <a
href="http://matplotlib.org/style_changes.html"><span style='color:#2066B9'>developed
color scheme for the Python library </span></a><a
href="http://matplotlib.org/style_changes.html"><span style='font-size:9.0pt;
line-height:110%;color:#2066B9;background:#FAFAFA'>matplotlib</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>(the video presentation by the link explains how the color
scheme was developed and what are its main advantages). It is seamlessly ported
to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are 4 variants of color schemes: <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>magma</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>plasma</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>inferno</span>, and
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>viridis</span>
(default). They are chosen with the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>option</span> parameter and are coded as <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>A</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>B</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>C</span>, and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>D</span>,
correspondingly. To have an impression of the 4 color schemes, look at the
maps:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.75pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=539 id="Picture 68521"
src="R%20Notes%20for%20Professionals_files/image1180.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.9pt;
margin-left:-.25pt;line-height:110%'>(<a
href="https://github.com/sjmgarnier/viridis"><span style='color:#2066B9'>image
souce</span></a>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>The package can be installed from <a
href="https://cran.r-project.org/web/packages/viridis/index.html"><span
style='color:#2066B9'>CRAN</span></a> or <a
href="https://github.com/sjmgarnier/viridis"><span style='color:#2066B9'>github</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>The <a
href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html"><span
style='color:#2066B9'>vignette</span></a> for <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>viridis</span> package is just brilliant.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=312 style='width:233.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=137 valign=top style='width:102.6pt;background:#FAFAFA;padding:
  1.2pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>scale_color_viridis</span></p>
  </td>
  <td width=45 valign=top style='width:33.85pt;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> and </p>
  </td>
  <td width=130 valign=top style='width:1.35in;background:#FAFAFA;padding:1.2pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>scale_fill_viridis</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Nice feature of the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>viridis</span> color scheme is integration with <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>ggplot2</span>.
Within the package two <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>ggplot2</span>-specific functions are defined: <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>.
See the example below:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=85
src="R%20Notes%20for%20Professionals_files/image1181.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=235
src="R%20Notes%20for%20Professionals_files/image1182.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=404 id="Picture 68745"
src="R%20Notes%20for%20Professionals_files/image1183.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619142">Section 106.2: A handy
function to glimse a vector of colors</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Quite often there is a need to glimpse the chosen color
palette. One elegant solution is the following self defined function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1184.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>An
example of use</h4>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1185.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=481 id="Picture 68798"
src="R%20Notes%20for%20Professionals_files/image1186.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619143">Section 106.3: colorspace -
click&amp;drag interface for colors</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=115 style='width:1.2in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=115 valign=top style='width:1.2in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>choose_palette</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The package <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>colorspace</span> provides GUI for selecting a palette. On
the call of function the following window pops-up:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=404
height=670 id="Picture 68827"
src="R%20Notes%20for%20Professionals_files/image1187.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>When the palette is chosen, just hit <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>OK</span> and do not forget to store
the output in a variable, e.g. <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>pal</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1188.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The output is a function that takes <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>n</span> (number) as input and
produces a color vector of length <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>n</span> according to the selected palette.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1189.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619144">Section 106.4:
Colorblind-friendly palettes</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Even though colorblind people can recognize a wide range of
colors, it might be hard to differentiate between certain colors.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>RColorBrewer</span> provides colorblind-friendly palettes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1190.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=500 id="Picture 68913"
src="R%20Notes%20for%20Professionals_files/image1191.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The <a href="http://jfly.iam.u-tokyo.ac.jp/color/"><span
style='color:#2066B9'>Color Universal Design</span></a> from the University of
Tokyo proposes the following palettes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1192.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619145">Section 106.5: RColorBrewer</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'><a href="http://colorbrewer2.org/"><span style='color:#2066B9'>ColorBrewer</span></a>
project is a very popular tool to select harmoniously matching color palettes. <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>RColorBrewer</span>
is a port of the project for <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>R</span> and provides also colorblind-friendly palettes.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>An
example of use</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.55pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1193.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>RColorBrewer</span> creates coloring options for <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>ggplot2</span>: <span
style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>scale_color_brewer</span>
and <span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>scale_fill_brewer</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=37
src="R%20Notes%20for%20Professionals_files/image1194.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=87
src="R%20Notes%20for%20Professionals_files/image1195.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=404 id="Picture 69095"
src="R%20Notes%20for%20Professionals_files/image1196.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619146">Section 106.6: basic R
color functions</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>colors</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>Function <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span> lists all the color names that are
recognized by R. There is <a
href="http://www.stat.columbia.edu/%7Etzheng/files/Rcolor.pdf"><span
style='color:#2066B9'>a nice PDF</span></a> where one can actually see those
colors.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>colorRampPalette</span></b> creates a function that
interpolate a set of given colors to create new color palettes. This output
function takes <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>n</span>
(number) as input and produces a color vector of length <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>n</span> interpolating the initial
colors.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1197.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rgb</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Any specific color may be produced with an <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1198.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>produces <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>green</span> color.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619147">Chapter 107: Hierarchical
clustering with hclust</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.85pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>stats</span> package provides the <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>hclust</span></b>
function to perform hierarchical clustering.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619148">Section 107.1: Example 1 -
Basic use of hclust, display of dendrogram, plot clusters</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>The cluster library contains the ruspini data - a standard
set of data for illustrating cluster analysis.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:129.85pt;margin-bottom:
3.4pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895601152'><span style='left:0px;position:absolute;left:0px;
top:-298418px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>library</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>cluster</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'>
</span><span style='font-size:9.0pt;line-height:112%;color:forestgreen'>## to
get the ruspini data </span><span style='font-size:9.0pt;line-height:112%'></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>plot</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>ruspini, asp</span><span
style='font-size:9.0pt;line-height:112%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'>, pch</span><span style='font-size:
9.0pt;line-height:112%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>20</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'>## take a look at the data</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=695 id="Picture 69218"
src="R%20Notes%20for%20Professionals_files/image1199.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>hclust expects a distance matrix, not the original data. We
compute the tree using the default parameters and display it. The hang
parameter lines up all of the leaves of the tree along the baseline.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1200.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=353 id="Picture 69289"
src="R%20Notes%20for%20Professionals_files/image1201.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Cut the tree to give four clusters and replot the data
coloring the points by cluster. k is the desired number of clusters.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1202.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=646
height=613 id="Picture 69328"
src="R%20Notes%20for%20Professionals_files/image1203.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>This clustering is a little odd. We can get a better
clustering by scaling the data first.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:178.4pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895600128'><span style='left:0px;position:absolute;left:0px;
top:-300433px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> scaled_ruspini_hc_defaults </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>hclust</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>dist</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>scale</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>ruspini</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))) </span><span style='font-size:9.0pt;line-height:110%'>srhc_def_4
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>cutree</span></b><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>scaled_ruspini_hc_defaults,</span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>4</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'></span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>plot</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>ruspini,
pch</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>20</span><span
style='font-size:9.0pt;line-height:110%'>, asp</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1</span><span style='font-size:9.0pt;
line-height:110%'>, </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>col</span></b><span style='font-size:9.0pt;line-height:110%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%'>srhc_def_4</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=644
height=613 id="Picture 69380"
src="R%20Notes%20for%20Professionals_files/image1204.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The default dissimilarity measure for comparing clusters is
&quot;complete&quot;. You can specify a different measure with the method
parameter.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1205.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619149">Section 107.2: Example 2 -
hclust and outliers</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>With hierarchical clustering, outliers often show up as
one-point clusters.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Generate three Gaussian distributions to illustrate the
effect of outliers.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1206.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=672
height=671 id="Picture 69499"
src="R%20Notes%20for%20Professionals_files/image1207.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Build the cluster structure, split it into three cluster.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1208.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>hclust found two outliers and put everything else into one
big cluster. To get the &quot;real&quot; clusters, you may need to set k
higher.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1209.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=650
height=612 id="Picture 69604"
src="R%20Notes%20for%20Professionals_files/image1210.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>This <a
href="http://stackoverflow.com/questions/15376075/cluster-analysis-in-r-determine-the-optimal-number-of-clusters/15376462#15376462"><span
style='color:#2066B9'>StackOverflow post</span></a> has some guidance on how to
pick the number of clusters, but be aware of this behavior in hierarchical
clustering.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619150">Chapter 108: Random Forest
Algorithm</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:4.0pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>RandomForest is an ensemble method for classification or regression that
reduces the chance of overfitting the data. Details of the method can be found
in the <a href="https://en.wikipedia.org/wiki/Random_forest"><span
style='color:#2066B9'>Wikipedia article on Random Forests</span></a>. The main
implementation for R is in the randomForest package, but there are other
implementations. See the <a
href="https://CRAN.R-project.org/view=MachineLearning"><span style='color:#2066B9'>CRAN
view on Machine Learning</span></a>.</p>

<h2 style='margin-top:0in;margin-right:4.0pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619151">Section 108.1: Basic examples - Classification and Regression</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image1211.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>This example tested on the training data, but illustrates
that RF can make very good models.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image1212.gif"></span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=718 height=369 id="Picture 69907"
src="R%20Notes%20for%20Professionals_files/image1213.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619152">Chapter 109: RESTful R
Services</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:88.25pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'><a href="https://www.opencpu.org/"><span
style='color:#2066B9'>OpenCPU</span></a> uses standard R packaging to develop,
ship and deploy web applications.</p>

<h2 style='margin-top:0in;margin-right:88.25pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619153">Section 109.1: opencpu Apps</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:113.7pt;margin-bottom:
0in;margin-left:.75pt;line-height:215%'>The official website contain good
exemple of apps: <a href="https://www.opencpu.org/apps.html"><span
style='color:#2066B9'>https://www.opencpu.org/apps.html </span></a>The
following code is used to serve a R session:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1214.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>After this code is executed, you can use URLs to access the
functions of the R session. The result could be XML, html, JSON or some other
defined formats.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>For exemple, the previous R session can be accessed by a
cURL call:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:156.8pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895599104'><span style='left:0px;position:absolute;left:0px;
top:-304484px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:forestgreen'>#curl uses http post
method for -X POST or -d &quot;arg=value&quot; </span><span style='font-size:
9.0pt;line-height:110%'>curl http</span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>://</span><span style='font-size:9.0pt;
line-height:110%'>localhost</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>:</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>5936</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>/</span><span style='font-size:9.0pt;line-height:110%'>ocpu</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>/</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>library</span></b><span
style='font-size:9.0pt;line-height:110%;color:#666666'>/</span><span
style='font-size:9.0pt;line-height:110%'>MASS</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>/</span><span style='font-size:9.0pt;
line-height:110%'>scripts</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>/</span><span style='font-size:9.0pt;line-height:110%'>ch01.R </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:110%'>X POST curl http</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>://</span><span
style='font-size:9.0pt;line-height:110%'>localhost</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>:</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5936</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>/</span><span
style='font-size:9.0pt;line-height:110%'>ocpu</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>/</span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>library</span></b><span style='font-size:9.0pt;
line-height:110%;color:#666666'>/</span><span style='font-size:9.0pt;
line-height:110%'>stats</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>/</span><span style='font-size:9.0pt;line-height:110%'>R</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>/</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>rnorm</span></b><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>-</span><span style='font-size:9.0pt;
line-height:110%'>d </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>&quot;n=10&amp;mean=5&quot;</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>The call is asynchronous, meaning that the R session is not
blocked while waiting for the call to finish (contrary to shiny).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ocpu</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tmp</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:219.3pt;margin-bottom:
0in;margin-left:.75pt;line-height:215%'>The call result is kept in a temporary
session stored in <span style='font-size:9.0pt;line-height:215%;color:#666666;
background:#FAFAFA'>// </span>An exemple of how to retrieve the temporary
session:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1215.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.5pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>x009f9e7630</span> is the name of the session.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=435 style='width:326.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ocpu</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tmp</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x009f9e7630</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>R</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>/</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>val</span></p>
  </td>
  <td width=205 valign=top style='width:153.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>will return the value resulting of </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rnorm</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Pointing to <span style='font-size:9.0pt;line-height:108%;
color:#666666;background:#FAFAFA'>/</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>5</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=505 style='width:378.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>ocpu</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tmp</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>x009f9e7630</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>R</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>console</span></p>
  </td>
  <td width=253 valign=top style='width:189.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>will return the content of the console of </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rnorm</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><span style='font-size:9.0pt;line-height:108%;color:#666666;
background:#FAFAFA'>/</span><span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>5</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>,
etc..</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619154">Chapter 110: Machine
learning</a></h1>

<h2 style='margin-left:-.25pt'><a name="_Toc619155">Section 110.1: Creating a
Random Forest model</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>One example of machine learning algorithms is the Random
Forest alogrithm (Breiman, L. (2001). Random Forests. <i>Machine Learning 45(5)</i>,
p. 5-32). This algorithm is implemented in R according to Breiman's original
Fortran implementation in the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>randomForest</span> package.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Random Forest classifier objects can be created in R by
preparing the class variable as <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>factor</span></b>, which is already
apparent in the <b><span style='font-size:9.0pt;line-height:108%;color:#333399;
background:#FAFAFA'>iris</span></b> data set. Therefore we can easily create a
Random Forest by:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:3.4pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=373
src="R%20Notes%20for%20Professionals_files/image1216.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:13.7pt;margin-bottom:
0in;margin-left:.75pt'>x a data frame holding the describing
variables of the classes the classes of the individual obserbations. If this
vector is <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>factor</span></b>, a classification model is created, if y</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:4.05pt;
margin-left:61.95pt'>not a regression model is created.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:111.4pt;margin-bottom:
1.7pt;margin-left:.75pt;line-height:141%'>ntree The number of individual
CART trees built do.trace every i<i>th</i> step, the out-of-the-box errors
overall and for each class are returned</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619156">Chapter 111: Using texreg
to export models in a paper-ready way</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:31.0pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>The texreg package helps to export a model (or several
models) in a neat paper-ready way. The result may be exported as HTML or .doc
(MS Office Word).</p>

<h2 style='margin-top:0in;margin-right:31.0pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619157">Section 111.1: Printing linear regression results</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image1217.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The result looks like a table in a paper.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=298
height=344 id="Picture 70327"
src="R%20Notes%20for%20Professionals_files/image1218.jpg"></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=122 valign=top style='width:91.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>texreg</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>htmlreg</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>There are several additional handy parameters in function.
Here is a use case for the most helpful parameters.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1219.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Which result in a table like this</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=480 height=259 id="Picture 70400"
src="R%20Notes%20for%20Professionals_files/image1220.jpg"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619158">Chapter 112: Publishing</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:119.15pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>There are many ways of formatting R
code, tables and graphs for publishing.</p>

<h2 style='margin-top:0in;margin-right:119.15pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619159">Section 112.1: Formatting tables</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'>Here, &quot;table&quot; is meant broadly (covering , <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>table</span></b>,</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Printing to plain text</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Printing (as seen in the console) might suffice for a
plain-text document to be viewed in monospaced font:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>getwd</span></i></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>setwd</span></i></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
1.55pt;margin-left:-.25pt;line-height:107%'><i>Note: Before making the example
data below, make sure you're in an empty folder you can write to. Run </i><i><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>()</span>
and read </i><i><span style='font-size:9.0pt;line-height:107%;color:#666666;
background:#FAFAFA'>?</span> if you need to change folders.</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1221.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Printing delimited tables</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Writing to CSV (or another common format) and then opening
in a spreadsheet editor to apply finishing touches is another option:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>getwd</span></i></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=35 style='width:26.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=35 valign=top style='width:26.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><i><span style='font-size:9.0pt;
  line-height:107%;color:blue'>setwd</span></i></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
1.55pt;margin-left:-.25pt;line-height:107%'><i>Note: Before making the example
data below, make sure you're in an empty folder you can write to. Run </i><i><span
style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>()</span>
and read </i><i><span style='font-size:9.0pt;line-height:107%;color:#666666;
background:#FAFAFA'>?</span> if you need to change folders.</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1222.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:12.0pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Further resources</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>knitr</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>kable</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>tables</span><span style='font-size:9.0pt;line-height:107%;color:#666666'>::</span><span
  style='font-size:9.0pt;line-height:107%'>tabular</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:5.15pt;margin-right:.7pt;margin-bottom:
3.5pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>stargazer</p>

<p class=MsoNormal style='margin-top:5.15pt;margin-right:167.95pt;margin-bottom:
0in;margin-left:-.75pt;text-indent:5.5pt;line-height:134%'>texreg xtable</p>

<h2 style='margin-top:5.15pt;margin-right:167.95pt;margin-bottom:0in;
margin-left:-.75pt;text-indent:5.5pt;line-height:134%'><a name="_Toc619160">Section
112.2: Formatting entire documents</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>Sweave</span></b> from the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>utils</span> package allows for formatting
code, prose, graphs and tables together in a LaTeX document.</p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:.15in;margin-left:
.75pt'>Further Resources</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:11.0pt;line-height:108%'><img
border=0 width=5 height=5 id="Group 579414"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span>Knitr and
RMarkdown</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619161">Chapter 113: Implement
State Machine Pattern using S4 Class</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'><a href="https://en.wikipedia.org/wiki/Finite-state_machine"><span
style='color:#2066B9'>Finite States Machine</span></a> concepts are usually
implemented under Object Oriented Programming (OOP) languages, for example
using <a href="https://en.wikipedia.org/wiki/State_pattern"><span
style='color:#2066B9'>Java language, based on the State pattern</span></a>
defined in GOF (refers to the book: &quot;Design Patterns&quot;).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:16.2pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>R provides several mechanisms to simulate the OO paradigm,
let's apply <a href="http://adv-r.had.co.nz/"><span style='color:#2066B9'>S4
Object System</span></a> for implementing this pattern.</p>

<h2 style='margin-top:0in;margin-right:16.2pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619162">Section 113.1: Parsing Lines using State Machine</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>Let's apply the <a
href="https://en.wikipedia.org/wiki/State_pattern"><span style='color:#2066B9'>State
Machine pattern</span></a> for parsing lines with the specific pattern using S4
Class feature from R.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>PROBLEM ENUNCIATION</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Name</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>;</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Address</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>;</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>]</span></p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Phone</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We need to parse a file where each line provides information
about a person, using a delimiter (<span style='font-size:9.0pt;line-height:
108%;color:#CC0A0A;background:#FAFAFA'>&quot;;&quot;</span>), but some
information provided is optional, and instead of providing an empty field, it
is missing. On each line we can have the following information: . Where the
address information is optional, sometimes we have it and sometimes don<span
style='font-family:"Arial",sans-serif'></span>t, for example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1223.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>The second line does not provide address information.
Therefore the number of delimiters may be deferent like in this case with one
delimiter and for the other lines two delimiters. Because the number of
delimiters may vary, one way to atack this problem is to recognize the presence
or not of a given field based on its pattern. In such case we can use a <a
href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html"><span
style='color:#2066B9'>regular expression</span></a> for identifying such
patterns. For example:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=533 style='width:399.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=533 valign=top style='width:399.65pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;^([A-Z]'?</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>s+)* *[A-Z]+(</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#000099'>\\</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>s+[A-Z]{1,2}</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#000099'>\\</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>.?,? +)*[A-Z]+((-|</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#000099'>\\</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>s+)[A-Z]+)*$&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=612 style='width:459.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=382 valign=top style='width:286.2pt;background:#FAFAFA;padding:
  1.05pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>RAFAEL REAL, DAVID R. SMITH, ERNESTO PEREZ GONZALEZ, </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.05pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>0</span></p>
  </td>
  <td width=223 valign=top style='width:167.4pt;background:#FAFAFA;padding:
  1.05pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>' CONNOR BROWN, LUIS PEREZ-MENA</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=475 style='width:356.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=475 valign=top style='width:356.45pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;^</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>s[0-9]{1,4}(</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>s+[A-Z]{1,2}[0-9]{1,2}[A-Z]{1,2}|[A-Z</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#000099'>\\</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>s0-9]+)$&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12><b>Name</b>:
. For example:</p>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:27.95pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'>,
etc.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><b>Address</b>: . For example: <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>11020</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>87</span><span style='font-size:9.0pt;line-height:107%'>
  SW 27TH</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>LE JEUNE ROAD</span>, . For the sake of simplicity we don't include
here the zipcode, city, state, but I can be included in this field or adding
additional fields.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=454 style='width:340.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=454 valign=top style='width:340.25pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;^</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>s*(</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>+1(-|</span><b><span style='font-size:9.0pt;line-height:
  107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>s+))*[0-9]{3}(-|</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>s+)[0-9]{3}(-|</span><b><span
  style='font-size:9.0pt;line-height:107%;color:#000099'>\\</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>s+)[0-9]{4}$&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:0in;text-indent:0in'><span
style='font-size:11.0pt;line-height:108%'> <img border=0 width=5
height=5 id="Group 595854"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span><b>Phone</b>:  .
For example:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=310 style='width:232.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>305</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>123</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>4567</span><span style='font-size:9.0pt;line-height:107%'>,
  </span><span style='font-size:9.0pt;line-height:107%;color:#CC0A0A'>305</span><span
  style='font-size:9.0pt;line-height:107%'> </span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>123</span><span style='font-size:9.0pt;
  line-height:107%'> </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>4567</span><span style='font-size:9.0pt;line-height:107%'>, </span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>+</span><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A;background:#FAFAFA'>1</span><span
  style='font-size:9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>786</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>123</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>4567</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:17.2pt;
margin-bottom:13.7pt;margin-left:6.25pt;text-align:center;line-height:103%'>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Notes</b>:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:#000099'>\&quot;</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>I
am considering the most common pattern of US addresses and phones, it can be
easy extended to consider more general situations.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>In R the sign <span style='font-size:9.0pt;line-height:
108%;color:#CC0A0A;background:#FAFAFA'>&quot;</span> has special meaning for
character variables, therefore we need to escape it.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:21.4pt'>In order to simplify the process of defining regular
expressions a good recommendation is to use the following web page: <a
href="https://regex101.com/"><span style='color:#2066B9'>regex101.com</span></a>,
so you can play with it, with a given example, until you get the expected
result for all possible combinations.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The idea is to identify each line field based on previously
defined patterns. The State pattern define the following entities (classes)
that collaborate to control the specific behavior (The State Pattern is a
behavior pattern):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=470
height=170 id="Picture 70837"
src="R%20Notes%20for%20Professionals_files/image1224.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Let's describe each element considering the context of our
problem:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 590670"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Context</span>:
Stores the context information of the parsing process, i.e. the current state
and handles the entire State Machine Process. For each state, an action is
executed (<span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>), but the context delegates it, based on the
state, on the action method defined for a particular state (<span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
from <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>State</span>
class). It defines the interface of interest to clients. Our <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Context</span>
class can be defined like this:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=46 height=1
src="R%20Notes%20for%20Professionals_files/image196.gif" align=left hspace=12>Attributes:
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>state</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'>Methods: <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>, ...</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.5pt'><span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>State</span>: The abstract class that represents any state of the
State Machine. It defines an interface for encapsulating the behavior
associated with a particular state of the context. It can be defined like this:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>doAction</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:2.2pt;
margin-left:51.55pt;line-height:110%'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image259.gif" align=left hspace=12>Attributes:
<span style='font-size:9.0pt;line-height:110%;background:#FAFAFA'>name, pattern</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:51.55pt'>Methods: <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>()</span>, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>isState</span> (using <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pattern</span>
attribute verify whether the input argument belong to this state pattern or
not), <span style='font-family:"Arial",sans-serif'></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:30.0pt;text-indent:-9.1pt'><span style='font-size:11.0pt;
line-height:108%'><img border=0 width=5 height=5 id="Group 590673"
src="R%20Notes%20for%20Professionals_files/image015.gif"></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Concrete States</span>
(state sub-classes): Each subclass of the class <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>State</span> that implements a behavior
associated with a state of the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>Context</span>. Our sub-classes are: <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>InitState</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NameState</span>, <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>AddressState</span>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>PhoneState</span>.
Such classes just implements the generic method using the specific logic for
such states. No additional attributes are required.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.45pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
  <td width=21 valign=top style='width:15.85pt;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>, </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.5pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>doAction</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Note:</b> It is a matter of preference how to name the
method that carries out the action, <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> or</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=240 style='width:180.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>goNext</span></p>
  </td>
  <td width=139 valign=top style='width:104.5pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>. The method name </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>doAction</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:1.9pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#222222;background:#FAFAFA'>()</span>
can be the same for both classes (<span style='font-size:9.0pt;line-height:
110%;background:#FAFAFA'>State</span>or <span style='font-size:9.0pt;
line-height:110%;background:#FAFAFA'>Context</span>) we preferred to name</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>as <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> in the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>Context</span> class for avoiding a confusion when
defining two generic methods with the same input arguments, but different
class.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>PERSON CLASS</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Using the S4 syntax we can define a Person class like this:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1225.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:135.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=180 valign=top style='width:135.0pt;background:#FAFAFA;padding:
  1.8pt 0in 0in 0in;height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>prototype</span></b><span style='font-size:9.0pt;line-height:
  107%'>, </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>representation</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It is a good recommendation to initialize the class
attributes. The <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>setClass</span></b> documentation suggests using a generic
method labeled as <span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;
background:#FAFAFA'>&quot;initialize&quot;</span>, instead of using deprecated
attributes such as: .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1226.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Because the initialize method is already a standard generic
method of package <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>methods</span></b>, we need to respect the original
argument definition. We can verify it typing on R prompt:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1227.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It returns the entire function definition, you can see at
the top who the function is defined like:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1228.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Object</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Therefore when we use <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>setMethod</span></b> we need to
follow <i>exaclty</i> the same syntax (<span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>.</span>).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>toString</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Another existing generic method is <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>show</span></b>,
it is equivalent <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> method from Java and it is a good idea to have a
specific implementation for class domain:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image1229.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>toString</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.35pt;
margin-left:.75pt'><b>Note</b>: We use the same convention as in the default <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
Java implementation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Let's say we want to save the parsed information (a list of <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Person</span>
objects) into a dataset, then we should be able first to convert a list of
objects to into something the R can transform (for example coerce the object as
a list). We can define the following additional method (for more detail about
this see the <a
href="http://stackoverflow.com/questions/30386009/how-to-extend-as-list-in-a-canonical-way-to-s4-objects"><span
style='color:#2066B9'>post</span></a>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=371
src="R%20Notes%20for%20Professionals_files/image1230.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:14.2pt;margin-bottom:
7.6pt;margin-left:.75pt;line-height:155%'>R does not provide a sugar syntax for
OO because the language was initially conceived to provide valuable functions
for Statisticians. Therefore each user method requires two parts: 1) the
Definition part (via <b><span style='font-size:9.0pt;line-height:155%;
color:blue;background:#FAFAFA'>setGeneric</span></b>) and 2) the implementation
part (via <b><span style='font-size:9.0pt;line-height:155%;color:blue;
background:#FAFAFA'>setMethod</span></b>). Like in the above example. <b>STATE
CLASS</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Following S4 syntax, let's define the abstract <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>State</span> class.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=404
src="R%20Notes%20for%20Professionals_files/image1231.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>isState</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Every sub-class from <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>State</span> will have associated a <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>name</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pattern</span>, but
also a way to identify whether a given input belongs to this state or not (<span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
method), and also implement the corresponding actions for this state</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>doAction</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>(<span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> method).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>In order to understand the process, let's define the
transition matrix for each state based on the input received:</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:1.2pt;margin-left:
0in;text-indent:0in;line-height:109%'><span style='font-size:10.0pt;line-height:
109%;color:black'>Input/Current State Init Name Address
Phone</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Name Name</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Address Address</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.05pt;
margin-left:0in;text-indent:0in'>Phone Phone Phone</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.5pt;
margin-left:0in;text-indent:0in'>End End</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>row</span></b><span style='font-size:9.0pt;line-height:107%'>,
  </span><b><span style='font-size:9.0pt;line-height:107%;color:blue'>col</span></b></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>]</span><span style='font-size:9.0pt;
  line-height:107%;color:#666666;background:#FAFAFA'>=</span><span
  style='font-size:9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>[</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>i,j</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.15in;
margin-left:.75pt;line-height:130%'><b>Note:</b> The cell <span
style='font-size:9.0pt;line-height:130%;color:#222222;background:#FAFAFA'>[]</span>
represents the destination state for the current state <span style='font-size:
9.0pt;line-height:130%;background:#FAFAFA'>j</span>, when it receives the input
<span style='font-size:9.0pt;line-height:130%;background:#FAFAFA'>i</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>It means that under the state Name it can receive two
inputs: an address or a phone number. Another way to represents the transaction
table is using the following <a
href="https://en.wikipedia.org/wiki/UML_state_machine"><span style='color:#2066B9'>UML
State Machine</span></a> diagram:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=535 id="Picture 71608"
src="R%20Notes%20for%20Professionals_files/image1232.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.3pt;
margin-left:.75pt'>Let's implement each particular state as a sub-state of the
class <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>State</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>STATE SUB-CLASSES</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>Init State</b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>The initial state will be implemented via the following
class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image1233.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In R to indicate a class is a sub-class of other class is
using the attribute <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>contains</span> and indicating the class name of the parent class.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=101 style='width:1.05in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=101 valign=top style='width:1.05in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>callNextMethod</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.7pt;
margin-left:.75pt'>Because the sub-classes just implement the generic methods,
without adding additional attributes, then the <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>show </span></b>method, just
call the equivalent method from the upper class (via method: <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.8pt;
margin-left:.75pt'>The initial state does not have associated a pattern, it
just represents the beginning of the process, then we initialize the class with
an <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>NA</span>
value.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now lets to implement the generic methods from the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>State</span> class:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1234.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>For this particular state (without <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>pattern</span>), the idea it just
initializes the parsing process expecting the first field will be a <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>name</span>,
otherwise it will be an error.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image1235.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>doAction</span> method provides the transition and updates
the context with the information extracted. Here we are</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=257 style='width:192.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>operator</span></p>
  </td>
  <td width=149 valign=top style='width:111.9pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>. Instead, we can define </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>get</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>set</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>accessing to context information via the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>@</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>-</span>
methods, to encapsulate this</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>get</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>set</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>process (as it is mandated in OO best practices:
encapsulation), but that would add four more methods per without adding value
for the purpose of this example.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>It is a good recommendation in all <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>doAction</span> implementation, to
add a safeguard when the input argument is not properly identified.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Name State</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here is the definition of this class definition:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=196
src="R%20Notes%20for%20Professionals_files/image1236.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=87
src="R%20Notes%20for%20Professionals_files/image1237.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We use the function <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>grepl</span></b> for verifying
the input belongs to a given pattern.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1238.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now we define the action to carry out for a given state:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=339
src="R%20Notes%20for%20Professionals_files/image1239.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.95pt;
margin-left:.75pt'>Here we consider to possible transitions: one for Address
state and the other one for Phone state. In all cases we update the context
information:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:177.15pt;margin-bottom:
12.75pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>The
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>person</span></b>
information: <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>address</span>
or <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>phone</span>
with the input argument. The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>state</span> of the process</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>isState</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>The way to identify the state is to invoke the method: <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
for a particular state. We create a default specific states (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>addressState,
phoneState</span>) and then ask for a particular validation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>The logic for the other sub-classes (one per state)
implementation is very similar.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt;
text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Address State</span></h3>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=144
src="R%20Notes%20for%20Professionals_files/image1240.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=514
src="R%20Notes%20for%20Professionals_files/image1241.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt;
text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Phone State</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=388
src="R%20Notes%20for%20Professionals_files/image1242.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Here is where we add the person information into the list of
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>persons</span>
of the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>context</span>.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1243.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=104
src="R%20Notes%20for%20Professionals_files/image1244.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>CONTEXT CLASS</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Now the lets to explain the <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Context</span> class implementation. We
can define it considering the following attributes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1245.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>Where</p>

<p class=MsoNormal style='margin-top:0in;margin-right:26.35pt;margin-bottom:
13.05pt;margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>state</span>: The
current state of the process <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>person</span></b>: The current person, it
represents the information we have already parsed from the current line. <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>persons</span>: The
list of parsed persons processed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><b>Note</b>: Optionally, we can add a <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>name</span> to
identify the context by name in case we are working with more than one parser
type.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
14.9pt;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=552 id="Picture 603695"
src="R%20Notes%20for%20Professionals_files/image1246.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>With such generic methods, we control the entire behavior of
the parsing process:</p>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:2.3pt;margin-left:21.4pt;text-align:center;line-height:103%'><span
style='font-size:9.0pt;line-height:103%;color:#222222;background:#FAFAFA'>()</span>
method of the current <span style='font-size:9.0pt;line-height:103%;background:
#FAFAFA'>state</span>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=280 style='width:209.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
  <td width=179 valign=top style='width:134.05pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span>: Will invoke the particular </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>doAction</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=65 style='width:48.6pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=65 valign=top style='width:48.6pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>parseLine</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>parseLines</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>as.df</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:0in;
margin-bottom:2.3pt;margin-left:21.4pt;text-align:center;line-height:103%'><img
width=5 height=1 src="R%20Notes%20for%20Professionals_files/image132.gif"
align=left hspace=12><span style='font-size:9.0pt;line-height:103%;background:
#FAFAFA'>addPerson</span>: Once we reach the end state, we need to add a <b><span
style='font-size:9.0pt;line-height:103%;color:blue;background:#FAFAFA'>person</span></b>
to the list of <span style='font-size:9.0pt;line-height:103%;background:#FAFAFA'>persons</span>
we have parsed.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>: Parse a single line</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>: Parse multiple lines (an array of lines)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:30.5pt'><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span>: Extract the information from <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>persons</span> list
into a data frame object.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Let's go on now with the corresponding implementations:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=255
src="R%20Notes%20for%20Professionals_files/image1247.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>strsplit</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>handle</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>First, we split the original line in an array using the
delimiter to identify each element via the R-function <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>, then
iterate for each element as an input value for a given state. The <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
method returns again the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>context </span>with the updated information (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>state</span>, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>person</span></b>,
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>persons</span>
attribute).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image1248.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Becuase R makes a copy of the input argument, we need to
return the context (<span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>obj</span>):</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image1249.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=594 style='width:445.5pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>lapply</span></b></p>
  </td>
  <td width=265 valign=top style='width:198.65pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function. Then in the next
  invocation to </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>lappy</span></p>
  </td>
  <td width=178 valign=top style='width:133.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>()</span> function, now applies the </p>
  </td>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data.frame</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The attribute <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>persons</span> is a list of instance of S4 <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Person</span>
class. This something cannot be coerced to any standard type because R does not
know of to treat an instance of a user defined class. The solution is to
convert a <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Person</span>
into a list, using the <b><span style='font-size:9.0pt;line-height:108%;
color:blue'>as.list</span></b> method previously defined. Then we can apply
this function to each element of the list <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>persons</span>, via the </p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=310 style='width:232.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>persons.list</span></p>
  </td>
  <td width=187 valign=top style='width:140.6pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>into a data frame. Finally, the </p>
  </td>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>rbind</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>function for converting each element of the <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>
function is called</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>for adding each element converted as a new row of the data
frame generated (for more detail about this see this <a
href="http://stackoverflow.com/questions/4227223/r-list-to-data-frame"><span
style='color:#2066B9'>post</span></a>)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=174
src="R%20Notes%20for%20Professionals_files/image1250.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>PUTTING ALL TOGETHER</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, lets to test the entire solution. Define the lines
to parse where for the second line the address information is missing.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=126
src="R%20Notes%20for%20Professionals_files/image1251.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1252.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Finally obtain the corresponding dataset and print it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.9pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=143
src="R%20Notes%20for%20Professionals_files/image1253.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1254.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>And for some sub-state:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'>show</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>new</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;PhoneState&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:17.35pt;
margin-left:3.5pt;line-height:110%'><span style='position:relative;z-index:
-1895589888'><span style='left:0px;position:absolute;left:0px;top:-318123px;
width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>PhoneState@</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><span
style='font-size:9.0pt;line-height:110%'>name</span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>'phone'</span><span style='font-size:9.0pt;
line-height:110%'>, pattern</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>=</span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>'^</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\s</span></b><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>*(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\+</span></b><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1(-|</span><b><span style='font-size:9.0pt;line-height:110%;
color:#000099'>\s</span></b><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>+))*[0-9]{3}(-|</span><b><span style='font-size:9.0pt;
line-height:110%;color:#000099'>\s</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>+)[0-9]{3}(-|</span><b><span style='font-size:
9.0pt;line-height:110%;color:#000099'>\s</span></b><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>+)[0-9]{4}$'</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>as.list</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Finally, test the <span style='font-size:9.0pt;line-height:
108%;color:#222222;background:#FAFAFA'>()</span> method:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=191
src="R%20Notes%20for%20Professionals_files/image1255.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>CONCLUSION</span></h3>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=122 style='width:91.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>object.setID</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;A1&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=130 style='width:1.35in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>setID</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>object, </span><span style='font-size:9.0pt;line-height:107%;
  color:#CC0A0A'>&quot;A1&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>This example shows how to implement the State pattern, using
one of the available mechanisms from R for using the OO paradigm. Nevertheless,
the R OO solution is not user-friendly and differs so much from other OOP
languages. You need to switch your mindset because the syntax is completely
different, it reminds more the functional programming paradigm. For example
instead of: <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span> as in Java/C#, for R you have to invoke the method
in this way: <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>)</span>. Therefore you always have to include the object
as an input argument to provide the context of the function. On the same way,
there is no special <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>this</span> class attribute and either a <span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;.&quot;</span>
notation for accessing methods or attributes of the given class. It is more
error prompt because to refer a class or methods is done via attribute value (<span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;Person&quot;</span>,
<span style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;isState&quot;</span>,
etc.).</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>if</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>else</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=50 style='width:37.8pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>if</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>else</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Said the above, S4 class solution, requires much more lines
of codes than a traditional Java/C# languages for doing simple tasks. Anyway,
the State Pattern is a good and generic solution for such kind of problems. It
simplifies the process delegating the logic into a particular state. Instead of
having a big block for controlling all situations, we have smaller blocks
inside on each <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>State</span>
sub-class implementation for implementing the action to carry out in each
state.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'><b>Attachment</b>: <a
href="https://www.sugarsync.com/pf/D309535_3_7753221989"><span
style='color:#2066B9'>Here</span></a> you can download the entire script.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Any suggestion is welcome.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619163">Chapter 114: Reshape using
tidyr</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>tidyr has two tools for reshaping data: <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>gather</span> (wide
to long) and <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>spread</span>
(long to wide).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:-.25pt;line-height:145%'>See Reshaping data for other options.</p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt;
line-height:145%'><a name="_Toc619164">Section 114.1: Reshape from long to wide
format with spread()</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="R%20Notes%20for%20Professionals_files/image1256.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can &quot;spread&quot; the 'numbers' column, into
separate columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1257.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Or spread the 'name' column into separate columns:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image1258.gif"></span></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:1.65pt;margin-left:
-.25pt'><a name="_Toc619165">Section 114.2: Reshape from wide to long format
with gather()</a></h2>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=112
src="R%20Notes%20for%20Professionals_files/image1259.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=136
src="R%20Notes%20for%20Professionals_files/image1260.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>We can gather the columns together using 'numbers' as the
key column:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=207
src="R%20Notes%20for%20Professionals_files/image1261.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619166">Chapter 115: Modifying
strings by substitution</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.4pt;
margin-left:.75pt'><b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>sub</span></b> and <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>gsub</span></b> are used to
edit strings using patterns. See Pattern Matching and Replacement for more on
related functions and Regular Expressions for how to build a pattern.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619167">Section 115.1: Rearrange
character strings using capture groups</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>If you want to change the order of a character strings you
can use parentheses in the <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>pattern</span> to group parts of the string together. These
groups can in the <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>replacement</span> argument be addresed using consecutive numbers.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The following example shows how you can reorder a vector of
names of the form &quot;surname, forename&quot; into a vector of the form
&quot;forename surname&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=191
src="R%20Notes%20for%20Professionals_files/image1262.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>If you only need the surname you could just address the
first pairs of parentheses.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:151.45pt;margin-bottom:
22.8pt;margin-left:3.5pt;line-height:112%'><span style='position:relative;
z-index:-1895588864'><span style='left:0px;position:absolute;left:0px;
top:-320617px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image160.gif"></span></span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>sub</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>&quot;^(.+),</span><b><span
style='font-size:9.0pt;line-height:112%;color:#000099'>\\</span></b><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>s(.+)&quot;</span><span
style='font-size:9.0pt;line-height:112%'>, </span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>&quot;</span><b><span style='font-size:9.0pt;
line-height:112%;color:#000099'>\\</span></b><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>1&quot;</span><span style='font-size:9.0pt;
line-height:112%'>, strings</span><span style='font-size:9.0pt;line-height:
112%;color:#222222'>) </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># [1] &quot;Sigg&quot; &quot;Holt&quot;
&quot;Ortega&quot; &quot;De La Torre&quot; &quot;Perkins&quot; </span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619168">Section 115.2: Eliminate
duplicated consecutive elements</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Let's say we want to eliminate duplicated subsequence
element from a string (it can be more than one). For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1263.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>and convert it into:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1264.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Using <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>gsub</span></b>, we can achieve it:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1265.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It works also for more than one different repetition, for
example:</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1266.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.55pt;
margin-left:.75pt'>Let's explain the regular expression:</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>\\d</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>+</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>:
A group 1 delimited by () and finds any digit (at least one). Remember we need
to use the double backslash (<span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>\\</span>) here because for a character variable a
backslash represents special escape character for literal string delimiters (<span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>\</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>&quot;</span>
or <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>\'</span>).
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>\d\</span> is
equivalent to: <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>0</span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>-</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:30.0pt;text-indent:-13.9pt'><span style='line-height:108%'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>,</span>: A
punctuation sign: <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>,</span> (we can include spaces or any other delimiter)</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=14 style='width:.15in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>\\</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:30.0pt;text-indent:-13.9pt'>3.<span style='font-size:9.0pt;
line-height:108%;color:#CC0A0A;background:#FAFAFA'>1</span>: An identical
string to the group 1, i.e.: the repeated number. If that doesn't happen, then
the pattern doesn't match.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's try a similar situation: eliminate consecutive
repeated words:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1267.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>zA</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>-</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Z0</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Then, just replace <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>\d</span> by <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>\w</span>, where <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>\w</span> matches any word character,
including: any letter, digit or underscore. It is equivalent to <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>[</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>a</span><span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>--</span><span
style='font-size:9.0pt;line-height:108%;color:#CC0A0A;background:#FAFAFA'>9</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>_</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>]</span>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1268.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Then, the above pattern includes as a particular case
duplicated digits case.<br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619169">Chapter 116: Non-standard
evaluation and standard evaluation</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Dplyr and many modern libraries in R use non-standard
evaluation (NSE) for interactive programming and standard evaluation (SE) for
programming<a
href="https://cran.r-project.org/web/packages/dplyr/vignettes/nse.html"><span
style='color:#2066B9'>1</span></a>.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=511 style='width:383.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>summarise</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
  <td width=345 valign=top style='width:259.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>function use non-standard evaluation but
  relies on the </p>
  </td>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>summarise_</span><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>For instance, the which uses standard evaluation.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:58.05pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>The lazyeval library makes it easy to
turn standard evaluation function into NSE functions.</p>

<h2 style='margin-top:0in;margin-right:58.05pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619170">Section 116.1: Examples with
standard dplyr verbs</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>NSE functions should be used in interactive programming.
However, when developping new functions in a new package, it's better to use SE
version.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Load dplyr and lazyeval :</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1269.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Filtering</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>NSE version</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1270.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>SE version (to be use when
programming functions in a new package)</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1271.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Summarise</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>NSE version</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1272.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
14.65pt;margin-left:-.25pt;line-height:107%'><i>SE version</i></p>

<p class=MsoNormal style='margin-top:0in;margin-right:48.85pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895587840'><span style='left:0px;position:absolute;left:0px;
top:-322171px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image232.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>summarise_</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>, .dots </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> lazyeval</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>::</span><span style='font-size:9.0pt;line-height:110%'>interp</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>~ </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>mean</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>x</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>, x </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>quote</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>disp</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))) </span><span style='font-size:9.0pt;line-height:110%'>summarise_</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>mtcars</span></b><span
style='font-size:9.0pt;line-height:110%'>, .dots </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>setNames</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>list</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>lazyeval</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>::</span><span
style='font-size:9.0pt;line-height:110%'>interp</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>~ </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>mean</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>x</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:110%'>, x </span><span style='font-size:
9.0pt;line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>quote</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>disp</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)))</span><span
style='font-size:9.0pt;line-height:110%'>, </span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;mean_disp&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>))</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:17.5pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>summarise_</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>mtcars</span></b><span style='font-size:9.0pt;line-height:110%'>,
.dots </span><span style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>list</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>&quot;mean_disp&quot;</span><span
style='font-size:9.0pt;line-height:110%'> </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> lazyeval</span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>::</span><span style='font-size:9.0pt;line-height:110%'>interp</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>~ </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>mean</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>x</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:110%'>, x </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>quote</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>disp</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))))</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Mutate</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>NSE version</i></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1273.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:2.15pt;margin-bottom:
.15pt;margin-left:-.25pt;line-height:107%'><i>SE version</i></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image1274.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619171">Chapter 117: Randomization</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:26.25pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>The R language is commonly used for statistical analysis. As
such, it contains a robust set of options for randomization. For specific
information on sampling from probability distributions, see the documentation
for distribution functions.</p>

<h2 style='margin-top:0in;margin-right:26.25pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619172">Section 117.1: Random draws and permutations</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>sample</span></b> command can be used to
simulate classic probability problems like drawing from an urn with and without
replacement, or creating random permutations.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Note that throughout this example, is used to ensure that
the example code is reproducible. However, <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sample</span></b> will work
without explicitly calling .</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Random permutation</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>In the simplest form, <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sample</span></b> creates a
random permutation of a vector of integers. This can be accomplished with:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1275.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>When given no other arguments, <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>sample</span></b> returns
a random permutation of the vector from 1 to <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>x</span>. This can be useful when trying
to randomize the order of the rows in a data frame. This is a common task when
creating randomization tables for trials, or when selecting a random subset of
rows for analysis.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:297.2pt;margin-bottom:
12.45pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895586816'><span style='left:0px;position:absolute;left:0px;
top:-322985px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image874.gif"></span></span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>library</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>datasets</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>) </span><b><span style='font-size:9.0pt;
line-height:110%;color:blue'>set.seed</span></b><span style='font-size:9.0pt;
line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%;color:#CC0A0A'>1171</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>iris_rand </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
</span><b><span style='font-size:9.0pt;line-height:110%;color:#333399'>iris</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[</span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>sample</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>x </span><span style='font-size:9.0pt;
line-height:110%;color:#666666'>=</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#CC0A0A'>1</span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>:</span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>nrow</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:110%;
color:#333399'>iris</span></b><span style='font-size:9.0pt;line-height:110%;
color:#222222'>))</span><span style='font-size:9.0pt;line-height:110%'>,</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>]</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.1pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><b><span
style='font-size:9.0pt;line-height:110%;color:#333399'>iris</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.2</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:62.4pt;text-indent:-59.4pt;line-height:110%'><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.4</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&gt;</span><span style='font-size:9.0pt;line-height:110%'> </span><b><span
style='font-size:9.0pt;line-height:110%;color:blue'>head</span></b><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>iris_rand</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'> Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>145</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.7</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2.5</span><span
style='font-size:9.0pt;line-height:110%'> virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>5</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>0.2</span><span
style='font-size:9.0pt;line-height:110%'> setosa</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>85</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.5</span><span
style='font-size:9.0pt;line-height:110%'> versicolor</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>137</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.3</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.4</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.6</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2.4</span><span
style='font-size:9.0pt;line-height:110%'> virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>128</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.1</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>4.9</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>1.8</span><span
style='font-size:9.0pt;line-height:110%'> virginica</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:6.3pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>105</span><span style='font-size:9.0pt;line-height:110%'>
</span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>6.5</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>3.0</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>5.8</span><span
style='font-size:9.0pt;line-height:110%'> </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>2.2</span><span
style='font-size:9.0pt;line-height:110%'> virginica</span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Draws without Replacement</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Using <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>sample</span></b>, we can also simulate drawing
from a set with and without replacement. To sample without replacement (the
default), you must provide sample with a set to be drawn from and the number of
draws. The set to be drawn from is given as a vector.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=44
src="R%20Notes%20for%20Professionals_files/image1276.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=21
src="R%20Notes%20for%20Professionals_files/image1277.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that if the argument to <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>size</span> is the same as the length of
the argument to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span>,
you are creating a random permutation. Also note that you cannot specify a size
greater than the length of <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>x</span> when doing sampling without replacement.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=720 height=158
src="R%20Notes%20for%20Professionals_files/image1278.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>This brings us to drawing with replacement.</p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Draws with Replacement</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To make random draws from a set with replacement, you use
the <b><span style='font-size:9.0pt;line-height:108%;color:blue;background:
#FAFAFA'>replace</span></b> argument to <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sample</span></b>. By default, <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>replace </span></b>is
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>.
Setting it to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>TRUE</span>
means that each element of the set being drawn from may appear more than once
in the final result.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1279.gif"></span></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Changing Draw
Probabilities</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>By default, when you use <b><span style='font-size:9.0pt;
line-height:108%;color:blue;background:#FAFAFA'>sample</span></b>, it assumes
that the probability of picking each element is the same. Consider it as a
basic &quot;urn&quot; problem. The code below is equivalent to drawing a
colored marble out of an urn 20 times, writing down the color, and then putting
the marble back in the urn. The urn contains one red, one blue, and one green
marble, meaning that the probability of drawing each color is 1/3.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1280.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>Suppose that, instead, we wanted to perform the same task,
but our urn contains 2 red marbles, 1 blue marble, and 1 green marble. One
option would be to change the argument we send to <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>x</span> to add an additional <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Red</span>.
However, a better choice is to use the <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>prob</span> argument to <b><span style='font-size:
9.0pt;line-height:108%;color:blue;background:#FAFAFA'>sample</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>prob</span> argument accepts a vector with the probability
of drawing each element. In our example above, the probability of drawing a red
marble would be 1/2, while the probability of drawing a blue or a green marble
would be 1/4.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1281.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Counter-intuitively, the argument given to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>prob</span> does
not need to sum to 1. R will always transform the given arguments into
probabilities that total to 1. For instance, consider our above example of 2
Red, 1 Blue, and 1 Green.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can achieve the same results as our previous code using
those numbers:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image1282.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>The major restriction is that you cannot set all the
probabilities to be zero, and none of them can be less than zero.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can also utilize <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>prob</span> when <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>replace</span></b>
is set to <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>FALSE</span>.
In that situation, after each element is drawn, the proportions of the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>prob</span> values
for the remaining elements give the probability for the next draw. In this
situation, you must have enough non-zero probabilities to reach the <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>size</span> of the
sample you are drawing. For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1283.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>In this example, Red is drawn in the first draw (as the
first element). There was an 80% chance of Red being drawn, a 19% chance of
Blue being drawn, and a 1% chance of Green being drawn.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>For the next draw, Red is no longer in the urn. The total of the
probabilities among the remaining items is 20% (19% for Blue and 1% for Green).
For that draw, there is a 95% chance the item will be Blue (19/20) and a 5%
chance it will be Green (1/20).</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619173">Section 117.2: Setting the seed</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=58 style='width:.6in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>set.seed</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The function is used to set the random seed for all
randomization functions. If you are using R to create a randomization that you
want to be able to reproduce, you should use first.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=142
src="R%20Notes%20for%20Professionals_files/image1284.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that parallel processing requires special treatment of
the random seed, described more elsewhere.</p>

<h1 style='margin-top:0in;margin-right:6.75pt;margin-bottom:.15pt;margin-left:
-.25pt'><a name="_Toc619174">Chapter 118: Object-Oriented Programming in R</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>This documentation page describes the four object systems in
R and their high-level similarities and differences. Greater detail on each
individual system can be found on its own topic page.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:215.9pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>The four systems are: S3, S4, Reference
Classes, and S6.</p>

<h2 style='margin-top:0in;margin-right:215.9pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619175">Section 118.1: S3</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>The S3 object system is a very simple OO system in R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Every object has an S3 class. It can be get (got?) with the
function <b><span style='font-size:9.0pt;line-height:108%;color:blue;
background:#FAFAFA'>class</span></b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=43
src="R%20Notes%20for%20Professionals_files/image1285.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It can also be set with the function <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>class</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1286.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It can also be set with the function <b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>attr</span></b>:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1287.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>An object can have many classes:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1288.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>When using a generic function, R uses the first element of
the class that has an available generic.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For example:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1289.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>summary.bicycle</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>But if we now define a :</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1290.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619176">Chapter 119: Coercion</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:32.95pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Coercion happens in R when the type of objects are changed
during computation either implicitly or by using functions for explicit
coercion (such as as.numeric, as.data.frame, etc.).</p>

<h2 style='margin-top:0in;margin-right:32.95pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619177">Section 119.1: Implicit Coercion</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:8.9pt;
margin-left:.75pt'>Coercion happens with data types in R, often implicitly, so
that the data can accommodate all the values. For example,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Notice that at first, <span style='font-size:11.0pt;
line-height:108%'><img border=0 width=720 height=225
src="R%20Notes%20for%20Professionals_files/image1291.gif"></span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>x</span> is of type
<b><span style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>integer</span></b>.
But when we assigned <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>x</span><span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>[</span><span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>2</span><span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>]</span><span
style='font-size:9.0pt;line-height:108%'> </span><span style='font-size:9.0pt;
line-height:108%;color:#666666;background:#FAFAFA'>= </span><b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>character</span></b>
as vectors in R can only hold data of single type.<br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619178">Chapter 120: Standardize
analyses by writing standalone R scripts</a></h1>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=43 style='width:.45in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>source</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:18.4pt;
margin-left:.75pt'>If you want to routinely apply an R analysis to a lot of
separate data files, or provide a repeatable analysis method to other people,
an executable R script is a user-friendly way to do so. Instead of you or your
user having to call <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>R </span>and execute your script inside R via <span style='font-size:
9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>(</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span><span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>
or a function call, your user may simply call the script itself as if it was a
program.</p>

<h2 style='margin-left:-.25pt'><a name="_Toc619179">Section 120.1: The basic
structure of standalone R program and how to call it</a></h2>

<h4 style='margin-left:.75pt'>The first standalone R script</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>R.exe</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rscript.exe</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:9.0pt;margin-bottom:12.9pt;
margin-left:.75pt'>Standalone R scripts are not executed by the program <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span> ( under
Windows), but by a program called <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>Rscript </span>(), which is included in your <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>R</span>
installation by default.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>To hint at this fact, standalone R scripts start with a
special line called <b>Shebang line</b>, which holds the following content: <span
style='font-size:9.0pt;line-height:108%;color:forestgreen;background:#FAFAFA'>#!/usr/bin/env
Rscript</span>. Under Windows, an additional measure is needed, which is
detailled later.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The following simple standalone R script saves a histogram
under the file name &quot;hist.png&quot; from numbers it receives as input:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=289
src="R%20Notes%20for%20Professionals_files/image1292.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can see several key elements of a standalone R script.
In the first line, you see the Shebang line. Followed by</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=451 style='width:337.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>cat</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;....</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\n</span></b></p>
  </td>
  <td width=285 valign=top style='width:213.75pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A;background:#FAFAFA'>&quot;</span><span style='font-size:
  9.0pt;line-height:107%;color:#222222;background:#FAFAFA'>)</span> is used to
  print a message to the user. Use </p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>file</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;stdin&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>that, <span style='font-size:9.0pt;line-height:108%;
color:#222222;background:#FAFAFA'>)</span> whenever you want to specify
&quot;User</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>input on console&quot; as a data origin. This can be used
instead of a file name in several data reading functions (<b><span
style='font-size:9.0pt;line-height:108%;color:blue;background:#FAFAFA'>scan</span></b>,</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=136 style='width:102.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.table</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.05pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>, </p>
  </td>
  <td width=58 valign=top style='width:.6in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>read.csv</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=right style='margin-top:0in;margin-right:15.5pt;
margin-bottom:1.85pt;margin-left:30.5pt;text-align:right;line-height:110%'>,...).
After the user input is converted from strings to numbers, the plotting begins.
There, it</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=124 style='width:93.25pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>png</span></b></p>
  </td>
  <td width=52 valign=top style='width:39.25pt;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>)</span> and </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.25pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dev.off</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>can be seen, that plotting commands which are meant to be
written to a file must be enclosed in two commands. These are in this case <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>.
The first function depends on the desired output file format (other</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=319 style='width:238.9pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>jpeg</span></b></p>
  </td>
  <td width=52 valign=top style='width:39.25pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>)</span> and </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>pdf</span></b></p>
  </td>
  <td width=165 valign=top style='width:124.05pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span><span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span><span style='font-size:9.0pt;
  line-height:107%;color:#222222;background:#FAFAFA'>)</span>). The second
  function, </p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dev.off</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>common choices being <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> is always
required. It writes the plot to the file and ends the plotting process.</p>

<h4 style='margin-left:.75pt'>Preparing a standalone R script Linux/Mac</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>The standalone script's file must first be made executable.
This can happen by right-clicking the file, opening</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>&quot;Properties&quot; in the opening menu and checking the
&quot;Executable&quot; checkbox in the &quot;Permissions&quot; tab.
Alternatively, the command</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1293.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>can be called in a Terminal.</p>

<h4 style='margin-left:.75pt'>Windows</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For each standalone script, a batch file must be written
with the following contents:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1294.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=181 style='width:135.65pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>bat</span></p>
  </td>
  <td width=138 valign=top style='width:103.25pt;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>extension except a <span style='font-size:
  9.0pt;line-height:107%;color:#666666;background:#FAFAFA'>*</span><span
  style='font-size:9.0pt;line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.0pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>txt</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A batch file is a normal text file, but which has a <span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>*</span><span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>.</span> extension.
Create it using a text</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>editor like <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>notepad</span> (not <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Word</span>) or similar and put the file
name into quotation marks <span style='font-size:9.0pt;line-height:108%;
color:#CC0A0A;background:#FAFAFA'>&quot;FILENAME.bat&quot;</span>) in the save
dialog. To edit an existing batch file, right-click on it and select
&quot;Edit&quot;.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.05pt;
margin-left:.75pt'>You have to adapt the code shown above everywhere <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>XXX...</span> is
written:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:21.4pt'><img width=5 height=1
src="R%20Notes%20for%20Professionals_files/image132.gif" align=left hspace=12>Insert
the correct folder where your R installation resides</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:21.4pt'>Insert the correct name of your script and place it into
the same directory as this batch file.</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=144 style='width:1.5in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=144 valign=top style='width:1.5in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;C:</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\.</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>..</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\R</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>script.exe&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=341 style='width:255.95pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=79 valign=top style='width:59.4pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rscript.exe</span></p>
  </td>
  <td width=168 valign=top style='width:126.35pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>program. The second part </p>
  </td>
  <td width=94 valign=top style='width:70.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#CC0A0A'>&quot;%~dp0</span><b><span style='font-size:9.0pt;
  line-height:107%;color:#000099'>\X</span></b><span style='font-size:9.0pt;
  line-height:107%;color:#CC0A0A'>XX.R&quot;</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>~dp0</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:9.35pt;margin-bottom:
12.65pt;margin-left:.75pt'>Explanation of the elements in the code: The first
part tells Windows where to find the tells <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Rscript</span> to execute the R script
you've written which resides in the same folder as the batch file (<span
style='font-size:9.0pt;line-height:108%;color:#666666;background:#FAFAFA'>%</span>
stands for the batch file folder). Finally, <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>%*</span> forwards any command line
arguments you give to the batch file to the R script.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>If you double-click on the batch file, the R script is executed. If you
drag files on the batch file, the corresponding file names are given to the R
script as command line arguments.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619180">Section 120.2: Using littler to execute R scripts</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'><a href="http://dirk.eddelbuettel.com/code/littler.html"><span
style='color:#2066B9'>littler</span></a> (pronounced <i>little r</i>) (<a
href="https://cran.r-project.org/web/packages/littler/index.html"><span
style='color:#2066B9'>cran</span></a>) provides, besides other features, two
possibilities to run R scripts from the command line with littler's <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>r</span> command
(when one works with Linux or MacOS).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:435.05pt;margin-bottom:
1.8pt;margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;
line-height:109%'><b>Installing littler From R:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1295.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.7pt;
margin-left:.75pt'>The path of <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>r</span> is printed in the terminal, like</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.2pt;margin-bottom:.2pt;
margin-left:3.5pt;line-height:110%'><span style='font-size:9.0pt;line-height:
110%'>You could link to the </span><span style='font-size:9.0pt;line-height:
110%;color:#CC0A0A'>'r'</span><span style='font-size:9.0pt;line-height:110%'>
binary installed </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>in</span></b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:178.4pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895584768'><span style='left:0px;position:absolute;left:0px;
top:-328329px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image159.gif"></span></span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'/home/*USER*/R/x86_64-pc-linux-gnu-library/3.4/littler/bin/r'
</span><span style='font-size:9.0pt;line-height:110%'>from </span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'/usr/local/bin'</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>in</span></b><span style='font-size:9.0pt;
line-height:110%'> </span><b><span style='font-size:9.0pt;line-height:110%;
color:blue'>order</span></b><span style='font-size:9.0pt;line-height:110%'> to
use </span><span style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>'r'</span><span
style='font-size:9.0pt;line-height:110%'> </span><b><span style='font-size:
9.0pt;line-height:110%;color:blue'>for</span></b><span style='font-size:9.0pt;
line-height:110%'> scripting.</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:10.55pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
167%'><span style='position:relative;z-index:-1895583744'><span
style='left:0px;position:absolute;left:0px;top:-328386px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image170.gif"></span></span>To be
able to call <span style='font-size:9.0pt;line-height:167%;background:#FAFAFA'>r</span>
from the system's command line, a symlink is needed: <span style='font-size:
9.0pt;line-height:167%'>ln </span><span style='font-size:9.0pt;line-height:
167%;color:#666666'>-</span><span style='font-size:9.0pt;line-height:167%'>s </span><span
style='font-size:9.0pt;line-height:167%;color:#666666'>/</span><span
style='font-size:9.0pt;line-height:167%'>home</span><span style='font-size:
9.0pt;line-height:167%;color:#666666'>/*</span><span style='font-size:9.0pt;
line-height:167%'>USER</span><span style='font-size:9.0pt;line-height:167%;
color:#666666'>*/</span><span style='font-size:9.0pt;line-height:167%'>R</span><span
style='font-size:9.0pt;line-height:167%;color:#666666'>/</span><span
style='font-size:9.0pt;line-height:167%'>x86_64</span><span style='font-size:
9.0pt;line-height:167%;color:#666666'>-</span><span style='font-size:9.0pt;
line-height:167%'>pc</span><span style='font-size:9.0pt;line-height:167%;
color:#666666'>-</span><span style='font-size:9.0pt;line-height:167%'>linux</span><span
style='font-size:9.0pt;line-height:167%;color:#666666'>-</span><span
style='font-size:9.0pt;line-height:167%'>gnu</span><span style='font-size:9.0pt;
line-height:167%;color:#666666'>-</span><b><span style='font-size:9.0pt;
line-height:167%;color:blue'>library</span></b><span style='font-size:9.0pt;
line-height:167%;color:#666666'>/</span><span style='font-size:9.0pt;
line-height:167%;color:#CC0A0A'>3.4</span><span style='font-size:9.0pt;
line-height:167%;color:#666666'>/</span><span style='font-size:9.0pt;
line-height:167%'>littler</span><span style='font-size:9.0pt;line-height:167%;
color:#666666'>/</span><span style='font-size:9.0pt;line-height:167%'>bin</span><span
style='font-size:9.0pt;line-height:167%;color:#666666'>/</span><span
style='font-size:9.0pt;line-height:167%'>r </span><span style='font-size:9.0pt;
line-height:167%;color:#666666'>/</span><span style='font-size:9.0pt;
line-height:167%'>usr</span><span style='font-size:9.0pt;line-height:167%;
color:#666666'>/</span><b><span style='font-size:9.0pt;line-height:167%;
color:blue'>local</span></b><span style='font-size:9.0pt;line-height:167%;
color:#666666'>/</span><span style='font-size:9.0pt;line-height:167%'>bin</span><span
style='font-size:9.0pt;line-height:167%;color:#666666'>/</span><span
style='font-size:9.0pt;line-height:167%'>r </span><b>Using apt-get (Debian,
Ubuntu): </b><span style='font-size:11.0pt;line-height:167%'><img border=0
width=718 height=26 id="Group 594295"
src="R%20Notes%20for%20Professionals_files/image1296.gif"></span><b><span
style='font-size:9.0pt;line-height:167%;color:#C20CB9'>sudo</span></b><span
style='font-size:9.0pt;line-height:167%'> </span><b><span style='font-size:
9.0pt;line-height:167%;color:#C20CB9'>apt-get install</span></b><span
style='font-size:9.0pt;line-height:167%'> littler</span></p>

<h4 style='margin-left:.75pt'>Using littler with standard .r scripts</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>With <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>r</span> from <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>littler</span> it is possible to execute standalone R
scripts without any changes to the script. Example script:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image1297.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=36 style='width:27.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=36 valign=top style='width:27.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>hist.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Note that no shebang is at the top of the scripts. When
saved as for example <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>r</span>, it is directly callable from the system command:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:19.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1298.gif"></span></p>

<h4 style='margin-left:.75pt'>Using littler on <i>shebanged</i> scripts</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>It is also possible to create executable R scripts with
littler, with the use of the shebang</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1299.gif"></span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=180 style='width:135.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>chmod </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>+</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>X </span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>path</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>to</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#666666;background:#FAFAFA'>/</span></p>
  </td>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>script.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>at the top of the script. The corresponding R script has to
be made executable with <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>r </span>and is directly callable from the system terminal.</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619181">Chapter 121: Analyze tweets
with R</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:14.9pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>(Optional) Every topic has a focus. Tell the readers what
they will find here and let future contributors know what belongs.</p>

<h2 style='margin-top:0in;margin-right:14.9pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619182">Section 121.1: Download Tweets</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>The first think you need to do is to download tweets. You
need to Setup your tweeter account. Much Information can be found in Internet
on how to do it. The following two links were useful for my Setup (last checked
in May 2017)</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>In particular I found the following two links useful (last
checked in May 2017):</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.9pt;
margin-left:-.25pt;line-height:110%'><a
href="https://www.credera.com/blog/business-intelligence/twitter-analytics-using-r-part-1-extract-tweets/"><span
style='color:#2066B9'>Link 1</span></a></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.9pt;
margin-left:-.25pt;line-height:110%'><a
href="http://thinktostart.com/twitter-authentification-with-r/"><span
style='color:#2066B9'>Link 2</span></a></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>R Libraries</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You will need the following R packages</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1300.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Supposing you have your keys You have to run the following
code</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.15pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1301.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Change <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>XXXXXXXXXXXXXXXXXXXXXX</span> to your keys (if you have
Setup your tweeter account you know which keys I mean).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's now suppose we want to download tweets on coffee. The
following code will do it</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=76
src="R%20Notes%20for%20Professionals_files/image1302.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:266.8pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>You will get 1000 tweets on
&quot;coffee&quot;.</p>

<h2 style='margin-top:0in;margin-right:266.8pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619183">Section 121.2: Get text of tweets</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Now we need to access the text of the tweets. So we do it in
this way (we also need to clean up the tweets from special characters that for
now we don't need, like emoticons with the sapply function.)</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=63
src="R%20Notes%20for%20Professionals_files/image1303.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:30.95pt;margin-bottom:
0in;margin-left:.25pt;text-indent:3.75pt;line-height:241%'><span
style='position:relative;z-index:-1895582720'><span style='left:0px;position:
absolute;left:0px;top:-329999px;width:718px;height:1px'><img width=718
height=1 src="R%20Notes%20for%20Professionals_files/image314.gif"></span></span><span
style='font-size:9.0pt;line-height:241%'>coffee_tweets </span><span
style='font-size:9.0pt;line-height:241%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:241%'> </span><b><span style='font-size:
9.0pt;line-height:241%;color:blue'>sapply</span></b><span style='font-size:
9.0pt;line-height:241%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:241%'>coffee_tweets,</span><b><span style='font-size:9.0pt;
line-height:241%;color:blue'>function</span></b><span style='font-size:9.0pt;
line-height:241%;color:#222222'>(</span><b><span style='font-size:9.0pt;
line-height:241%;color:blue'>row</span></b><span style='font-size:9.0pt;
line-height:241%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:241%'> </span><b><span style='font-size:9.0pt;line-height:241%;
color:blue'>iconv</span></b><span style='font-size:9.0pt;line-height:241%;
color:#222222'>(</span><b><span style='font-size:9.0pt;line-height:241%;
color:blue'>row</span></b><span style='font-size:9.0pt;line-height:241%'>, </span><span
style='font-size:9.0pt;line-height:241%;color:#CC0A0A'>&quot;latin1&quot;</span><span
style='font-size:9.0pt;line-height:241%'>, </span><span style='font-size:9.0pt;
line-height:241%;color:#CC0A0A'>&quot;ASCII&quot;</span><span style='font-size:
9.0pt;line-height:241%'>, </span><b><span style='font-size:9.0pt;line-height:
241%;color:blue'>sub</span></b><span style='font-size:9.0pt;line-height:241%;
color:#666666'>=</span><span style='font-size:9.0pt;line-height:241%;
color:#CC0A0A'>&quot;&quot;</span><span style='font-size:9.0pt;line-height:
241%;color:#222222'>)) </span>and you can check your tweets with the <b><span
style='font-size:9.0pt;line-height:241%;color:blue;background:#FAFAFA'>head</span></b>
function.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1304.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619184">Chapter 122: Natural
language processing</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:6.55pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Natural language processing (NLP) is the field of computer
sciences focused on retrieving information from textual input generated by
human beings.</p>

<h2 style='margin-top:0in;margin-right:6.55pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619185">Section 122.1: Create a term frequency matrix</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.15pt;
margin-left:.75pt'>The simplest approach to the problem (and the most commonly
used so far) is to split sentences into <i>tokens</i>. Simplifying, <i>words</i>
have abstract and subjective meanings to the people using and receiving them, <i>tokens</i>
have an objective interpretation: an ordered sequence of characters (or bytes).
Once sentences are split, the order of the token is disregarded. This approach
to the problem in known as <b>bag of words</b> model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>A <b>term frequency</b> is a dictionary, in which to each
token is assigned a <i>weight</i>. In the first example, we construct a term
frequency matrix from a corpus <b>corpus</b> (a collection of <b>documents</b>)
with the R package <span style='font-size:9.0pt;line-height:108%;background:
#FAFAFA'>tm</span>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.1pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1305.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In this example, we created a corpus of class <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Corpus</span>
defined by the package <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>tm</span> with two functions <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>Corpus</span> and <span style='font-size:
9.0pt;line-height:108%;background:#FAFAFA'>VectorSource</span>, which returns a
<span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>VectorSource</span>
object from a character vector. The object <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>tm_corpus</span> is a list our documents
with additional (and optional) metadata to describe each document.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.05pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image1306.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.3pt;
margin-left:.75pt'>Once we have a <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>Corpus</span>, we can proceed to preprocess the tokens
contained in the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>Corpus</span>
to improve the quality of the final output (the term frequency matrix). To do
this we use the <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tm</span>
function <span style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>tm_map</span>,
which similarly to the <b><span style='font-size:9.0pt;line-height:108%;
color:blue;background:#FAFAFA'>apply </span></b>family of functions, transform
the documents in the corpus by applying a function to each document.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:183.8pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895581696'><span style='left:0px;position:absolute;left:0px;
top:-330957px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image304.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'>tm_corpus </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus, </span><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>tolower</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>) </span><span style='font-size:9.0pt;line-height:110%'>tm_corpus
</span><span style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus, removeWords, stopwords</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;english&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)) </span><span
style='font-size:9.0pt;line-height:110%'>tm_corpus </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus, removeNumbers</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
tm_map</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>tm_corpus, PlainTextDocument</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>tm_corpus </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus, stemDocument, language</span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>=</span><span
style='font-size:9.0pt;line-height:110%;color:#CC0A0A'>&quot;english&quot;</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:110%'>tm_corpus </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> tm_map</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus, stripWhitespace</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>) </span><span style='font-size:9.0pt;
line-height:110%'>tm_corpus </span><span style='font-size:9.0pt;line-height:
110%;color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
tm_map</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>tm_corpus, PlainTextDocument</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Following these transformations, we finally create the term
frequency matrix with</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1307.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>which gives a</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=92
src="R%20Notes%20for%20Professionals_files/image1308.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:14.65pt;
margin-left:.75pt'>that we can view by transforming it to a matrix</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:12.55pt;
margin-left:3.5pt;line-height:110%'><b><span style='font-size:9.0pt;line-height:
110%;color:blue'>as.matrix</span></b><span style='font-size:9.0pt;line-height:
110%;color:#222222'>(</span><span style='font-size:9.0pt;line-height:110%'>tdm</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:194.65pt;margin-bottom:
17.15pt;margin-left:4.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:112%'><span style='position:relative;z-index:-1895580672'><span
style='left:0px;position:absolute;left:0px;top:-331340px;width:718px;
height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image992.gif"></span></span><span
style='font-size:9.0pt;line-height:112%'> Docs Terms </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>character</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>)</span><span
style='font-size:9.0pt;line-height:112%'> </span><b><span style='font-size:
9.0pt;line-height:112%;color:blue'>character</span></b><span style='font-size:
9.0pt;line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%;color:#CC0A0A'>0</span><span style='font-size:9.0pt;
line-height:112%;color:#222222'>)</span><span style='font-size:9.0pt;
line-height:112%'> </span><b><span style='font-size:9.0pt;line-height:112%;
color:blue'>character</span></b><span style='font-size:9.0pt;line-height:112%;
color:#222222'>(</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>0</span><span style='font-size:9.0pt;line-height:112%;
color:#222222'>)</span><span style='font-size:9.0pt;line-height:112%'> </span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>character</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%;color:#222222'>) </span><span
style='font-size:9.0pt;line-height:112%'>doctor </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0 </span><span
style='font-size:9.0pt;line-height:112%'>drug </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0 </span><span
style='font-size:9.0pt;line-height:112%'>environ </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1 </span><span
style='font-size:9.0pt;line-height:112%'>healthcar </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0 </span><span
style='font-size:9.0pt;line-height:112%'>hospit </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0 </span><span
style='font-size:9.0pt;line-height:112%'>pollut </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1 </span><span
style='font-size:9.0pt;line-height:112%'>smog </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0 </span><span
style='font-size:9.0pt;line-height:112%'>water </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>0</span><span
style='font-size:9.0pt;line-height:112%'> </span><span
style='font-size:9.0pt;line-height:112%;color:#CC0A0A'>1</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.75pt;
margin-left:.75pt'>Each row represents the frequency of each token - that as
you noticed have been stemmed (e.g. <b><span style='font-size:9.0pt;line-height:
108%;color:blue;background:#FAFAFA'>environment</span></b> to <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>environ</span>) -
in each document (4 documents, 4 columns).</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>In the previous lines, we have weighted each pair
token/document with the absolute frequency (i.e. the number of instances of the
token that appear in the document).</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619186">Chapter 123: R Markdown
Notebooks (from RStudio)</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:9.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>An R Notebook is an R Markdown document with chunks that can be executed
independently and interactively, with output visible immediately beneath the
input. They are similar to R Markdown documents with the exception of results
being displayed in the R Notebook creation/edit mode rather than in the
rendered output. <b>Note:</b> R Notebooks are new feature of RStudio and are
only available in version 1.0 or higher of RStudio.</p>

<h2 style='margin-top:0in;margin-right:9.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619187">Section 123.1: Creating a Notebook</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can create a new notebook in RStudio with the menu
command File -&gt; New File -&gt; R Notebook</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>If you don't see the option for R Notebook, then you need to
update your version of RStudio. For installation of RStudio follow this guide</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=381 id="Picture 76936"
src="R%20Notes%20for%20Professionals_files/image1309.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619188">Section 123.2: Inserting
Chunks</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Chunks are pieces of code that can be executed
interactively. In-order to insert a new chunk by clicking on the <b>insert</b>
button present on the notebook toolbar and select your desired code platform (R
in this case, since we want to write R code). Alternatively we can use keyboard
shortcuts to insert a new chunk <b>Ctrl + Alt + I (OS X: Cmd +</b></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Option
+ I)</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=383 id="Picture 76955"
src="R%20Notes%20for%20Professionals_files/image1310.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619189">Section 123.3: Executing
Chunk Code</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>You can run the current chunk by clicking <b>Run current
Chunk (green play button)</b> present on the right side of the chunk.
Alternatively we can use keyboard shortcut <b>Ctrl + Shift + Enter (OS X: Cmd +
Shift + Enter)</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>The output from all the lines in the chunk will appear
beneath the chunk.</p>

<h4 style='margin-left:.75pt'>Splitting Code into Chunks</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Since a chunk produces its output beneath the chunk, when
having multiple lines of code in a single chunk that produces multiples outputs
it is often helpful to split into multiple chunks such that each chunk produces
one output.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>To do this, select the code to you want to split into a new
chunk and press <b>Ctrl + Alt + I (OS X: Cmd + Option + I)</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=383 id="Picture 76980"
src="R%20Notes%20for%20Professionals_files/image1311.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619190">Section 123.4: Execution
Progress</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>When you execute code in a notebook, an indicator will
appear in the gutter to show you execution progress. Lines of code which have
been sent to R are marked with dark green; lines which have not yet been sent
to R are marked with light green.</p>

<h4 style='margin-left:.75pt'>Executing Multiple Chunks</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.1pt;
margin-left:.75pt'>Running or Re-Running individual chunks by pressing Run for
all the chunks present in a document can be painful. We can use <b>Run All</b>
from the Insert menu in the toolbar to Run all the chunks present in the
notebook. Keyboard shortcut is <b>Ctrl + Alt + R (OS X: Cmd + Option + R)</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.85pt;
margin-left:.75pt'>There<span style='font-family:"Arial",sans-serif'></span>s
also a option <b>Restart R and Run All Chunks</b> command (available in the Run
menu on the editor toolbar), which gives you a fresh R session prior to running
all the chunks.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>We also have options like <b>Run All Chunks Above</b> and <b>Run
All Chunks Below</b> to run chunks Above or Below from a selected chunk.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=381 id="Picture 77015"
src="R%20Notes%20for%20Professionals_files/image1312.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619191">Section 123.5: Preview
Output</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.65pt;
margin-left:.75pt'>Before rendering the final version of a notebook we can
preview the output. Click on the <b>Preview</b> button on the toolbar and
select the desired output format.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can change the type of output by using the output
options as &quot;pdf_document&quot; or &quot;html_notebook&quot;</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=383 id="Picture 77023"
src="R%20Notes%20for%20Professionals_files/image1313.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619192">Section 123.6: Saving and
Sharing</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=158 style='width:118.35pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>Rmd</span></p>
  </td>
  <td width=86 valign=top style='width:64.35pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>is saved, an <span style='font-size:9.0pt;
  line-height:107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=14 valign=top style='width:.15in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>nb</span></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;background:#FAFAFA'>.</span></p>
  </td>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:.95pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>html</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>When a notebook <span style='font-size:9.0pt;line-height:
108%;background:#FAFAFA'>.</span> file is created alongside it. This file is a
self-contained HTML file which contains both a rendered copy of the notebook
with all current chunk outputs (suitable for display on a website) and a copy
of the notebook .Rmd itself.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>More info can be found at <a
href="http://rmarkdown.rstudio.com/r_notebooks.html"><span style='color:#2066B9'>RStudio
docs</span></a><br clear=all style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619193">Chapter 124: Aggregating
data frames</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:21.15pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Aggregation is one of the most common uses for R. There are
several ways to do so in R, which we will illustrate here.</p>

<h2 style='margin-top:0in;margin-right:21.15pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619194">Section 124.1: Aggregating with data.table</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=86 style='width:.9in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=86 valign=top style='width:.9in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>dt</span></b><span style='font-size:9.0pt;line-height:107%;
  color:#222222'>[</span><span style='font-size:9.0pt;line-height:107%'>i, j, </span><b><span
  style='font-size:9.0pt;line-height:107%;color:blue'>by</span></b><span
  style='font-size:9.0pt;line-height:107%;color:#222222'>]</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=81 style='width:61.1pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=43 valign=top style='width:.45in;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>list</span></b><span style='font-size:9.0pt;line-height:
  107%;color:#222222'>()</span></p>
  </td>
  <td width=17 valign=top style='width:12.5pt;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>is </p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:.9pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>.</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=22 style='width:16.2pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>.</span><span style='font-size:9.0pt;line-height:107%;color:#222222'>()</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Grouping with the data.table package is done using the
syntax Which can be read out loud as: &quot;<i>Take dt, subset rows using i,
then calculate j, grouped by by.</i>&quot; Within the dt statement, multiple
calculations or groups should be put in a list. Since an alias for , both can
be used interchangeably. In the examples below we use .</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>CODE:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="R%20Notes%20for%20Professionals_files/image1314.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>OUTPUT:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=373
src="R%20Notes%20for%20Professionals_files/image1315.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=268
src="R%20Notes%20for%20Professionals_files/image1316.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619195">Section 124.2: Aggregating
with base R</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>For this, we will use the function aggregate, which can be
used as follows:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1317.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>The following code shows various ways of using the aggregate
function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>CODE:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=256
src="R%20Notes%20for%20Professionals_files/image1318.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>OUTPUT:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=249
src="R%20Notes%20for%20Professionals_files/image1319.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=350
src="R%20Notes%20for%20Professionals_files/image1320.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619196">Section 124.3: Aggregating
with dplyr</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:12.9pt;
margin-left:.75pt'>Aggregating with dplyr is easy! You can use the group_by()
and the summarize() functions for this. Some examples are given below.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>CODE:</b></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:15.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=322
src="R%20Notes%20for%20Professionals_files/image1321.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.75pt;text-align:justify;text-justify:inter-ideograph;line-height:
109%'><b>OUTPUT:</b></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1322.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=465 id="Picture 603697"
src="R%20Notes%20for%20Professionals_files/image1323.gif"><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619197">Chapter 125: Data
acquisition</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:15.9pt;margin-bottom:
.25pt;margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;
line-height:134%'>Get data directly into an R session. One of the nice features
of R is the ease of data acquisition. There are several ways data dissemination
using R packages.</p>

<h2 style='margin-top:0in;margin-right:15.9pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619198">Section 125.1: Built-in datasets</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:20.85pt;
margin-left:.75pt;line-height:169%'><span style='font-size:9.0pt;line-height:
169%;background:#FAFAFA'>R</span>has a vast collection of built-in datasets.
Usually, they are used for teaching purposes to create quick and easily
reproducible examples. There is a nice web-page listing the built-in datasets: <a
href="https://vincentarelbundock.github.io/Rdatasets/datasets.html"><span
style='color:#2066B9'>https://vincentarelbundock.github.io/Rdatasets/datasets.html</span></a></p>

<h3 style='margin-top:0in;margin-right:0in;margin-bottom:13.4pt;margin-left:
.75pt;text-align:justify;text-justify:inter-ideograph;line-height:109%'><span
style='font-size:10.0pt;line-height:109%;color:black'>Example</span></h3>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Swiss Fertility and Socioeconomic Indicators (1888) Data.
Let's check the difference in fertility based of rurality and domination of
Catholic population.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=125
src="R%20Notes%20for%20Professionals_files/image1324.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=448 id="Picture 78398"
src="R%20Notes%20for%20Professionals_files/image1325.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619199">Section 125.2: Packages to
access open databases</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:28.3pt;
margin-left:.75pt'>Numerous packages are created specifically to access some
databases. Using them can save a bunch of time on reading/formatting the data.</p>

<h4 style='margin-left:.75pt'>Eurostat</h4>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=108 style='width:81.0pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=108 valign=top style='width:81.0pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>search_eurostat</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Even though <span style='font-size:9.0pt;line-height:108%;
background:#FAFAFA'>eurostat</span> package has a function <span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>()</span>,
it does not find all the relevant datasets available. This, it's more
convenient to browse the code of a dataset manually at the Eurostat website: <a
href="http://ec.europa.eu/eurostat/data/database"><span style='color:#2066B9'>Countries
</span></a><a href="http://ec.europa.eu/eurostat/data/database"><span
style='color:#2066B9'>Database</span></a>, or <a
href="http://ec.europa.eu/eurostat/web/regions/data/database"><span
style='color:#2066B9'>Regional Database</span></a>. If the automated download
does not work, the data can be grabbed manually at via <a
href="http://ec.europa.eu/eurostat/estat-navtree-portlet-prod/BulkDownloadListing"><span
style='color:#2066B9'>Bulk Download Facility</span></a>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=618 id="Picture 603702"
src="R%20Notes%20for%20Professionals_files/image1326.gif"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=718 id="Picture 78768"
src="R%20Notes%20for%20Professionals_files/image1327.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619200">Section 125.3: Packages to
access restricted data</a></h2>

<h4 style='margin-left:.75pt'>Human Mortality Database</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'><a href="http://www.mortality.org/"><span style='color:#2066B9'>Human
Mortality Database</span></a> is a project of the <a
href="https://www.demogr.mpg.de/en/"><span style='color:#2066B9'>Max Planck
Institute for Demographic Research</span></a> that gathers and preprocess human
mortality data for those countries, where more or less reliable statistics is
available.</p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=718 height=162
src="R%20Notes%20for%20Professionals_files/image1328.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:102.8pt;margin-bottom:
.2pt;margin-left:3.5pt;line-height:110%'><span style='position:relative;
z-index:-1895579648'><span style='left:0px;position:absolute;left:0px;
top:-340855px;width:718px;height:1px'><img width=718 height=1
src="R%20Notes%20for%20Professionals_files/image1329.gif"></span></span><span
style='font-size:9.0pt;line-height:110%'> cnt </span><span
style='font-size:9.0pt;line-height:110%;color:#666666'>&lt;-</span><span
style='font-size:9.0pt;line-height:110%'> country</span><span style='font-size:
9.0pt;line-height:110%;color:#222222'>[</span><span style='font-size:9.0pt;
line-height:110%'>i</span><span style='font-size:9.0pt;line-height:110%;
color:#222222'>] </span><span style='font-size:9.0pt;line-height:110%'>exposures</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>[[</span><span
style='font-size:9.0pt;line-height:110%'>cnt</span><span style='font-size:9.0pt;
line-height:110%;color:#222222'>]]</span><span style='font-size:9.0pt;
line-height:110%'> </span><span style='font-size:9.0pt;line-height:110%;
color:#666666'>&lt;-</span><span style='font-size:9.0pt;line-height:110%'>
readHMDweb</span><span style='font-size:9.0pt;line-height:110%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:110%'>cnt, </span><span style='font-size:
9.0pt;line-height:110%;color:#CC0A0A'>&quot;Exposures_1x1&quot;</span><span
style='font-size:9.0pt;line-height:110%'>, user_hmd, pass_hmd</span><span
style='font-size:9.0pt;line-height:110%;color:#222222'>)</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:308.0pt;margin-bottom:
17.2pt;margin-left:3.5pt;line-height:112%'><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># let's print the progress </span><span style='font-size:
9.0pt;line-height:112%'></span><b><span style='font-size:9.0pt;
line-height:112%;color:blue'>paste</span></b><span style='font-size:9.0pt;
line-height:112%;color:#222222'>(</span><span style='font-size:9.0pt;
line-height:112%'>i,</span><span style='font-size:9.0pt;line-height:112%;
color:#CC0A0A'>'out of'</span><span style='font-size:9.0pt;line-height:112%'>,</span><b><span
style='font-size:9.0pt;line-height:112%;color:blue'>length</span></b><span
style='font-size:9.0pt;line-height:112%;color:#222222'>(</span><span
style='font-size:9.0pt;line-height:112%'>country</span><span style='font-size:
9.0pt;line-height:112%;color:#222222'>)) }</span><span style='font-size:9.0pt;
line-height:112%'> </span><span style='font-size:9.0pt;line-height:112%;
color:forestgreen'># this will take quite a lot of time</span></p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=72 style='width:.75in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=72 valign=top style='width:.75in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>readHMDweb</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Please note, the arguments <span style='font-size:9.0pt;
line-height:108%;background:#FAFAFA'>user_hmd</span> and <span
style='font-size:9.0pt;line-height:108%;background:#FAFAFA'>pass_hmd</span> are
the login credentials at the website of Human Mortality Database. In order to
access the data, one needs to create an account at <a
href="http://www.mortality.org/"><span style='color:#2066B9'>http://www.mortality.org/</span></a>
and provide their own credentials to the <span style='font-size:9.0pt;
line-height:108%;color:#222222;background:#FAFAFA'>()</span> function.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.05pt;margin-bottom:
0in;margin-left:-.45pt;text-indent:0in;line-height:107%'><img border=0
width=719 height=602 id="Picture 603704"
src="R%20Notes%20for%20Professionals_files/image1330.gif"></p>

</div>

<span style='font-size:10.0pt;line-height:108%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection3>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
href="https://goalkicker.com/"><span style='color:#2066B9;text-decoration:none'>GoalKicker.com
 R Notes for Professionals</span></a><span style='color:#2066B9'> 450</span></p>

<p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><img
border=0 width=683 height=1025 id="Picture 79270"
src="R%20Notes%20for%20Professionals_files/image1331.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619201">Section 125.4: Datasets
within packages</a></h2>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=79 style='width:59.4pt;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=50 valign=top style='width:37.8pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>library</span></b></p>
  </td>
  <td width=7 valign=top style='width:5.4pt;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%;color:#222222;background:#FAFAFA'>(</span></p>
  </td>
  <td width=22 valign=top style='width:16.2pt;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><span style='font-size:9.0pt;line-height:
  107%'>pkg</span></p>
  </td>
 </tr>
</table>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 align=left
 width=29 style='width:.3in;border-collapse:collapse;margin-left:-2.25pt;
 margin-right:-2.25pt'>
 <tr style='height:.15in'>
  <td width=29 valign=top style='width:.3in;background:#FAFAFA;padding:1.8pt 0in 0in 0in;
  height:.15in'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'><b><span style='font-size:9.0pt;line-height:
  107%;color:blue'>data</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:28.05pt;
margin-left:.75pt'>There are packages that include data or are created
specifically to disseminate datasets. When such a package is loaded (<span
style='font-size:9.0pt;line-height:108%;color:#222222;background:#FAFAFA'>)</span>),
the attached datasets become available either as R objects; or they need to be
called with the <span style='font-size:9.0pt;line-height:108%;color:#222222;
background:#FAFAFA'>()</span> function.</p>

<h4 style='margin-left:.75pt'>Gapminder</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>A nice dataset on the development of countries.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1332.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:30.25pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=449 id="Picture 79367"
src="R%20Notes%20for%20Professionals_files/image1333.jpg"></p>

<h4 style='margin-left:.75pt'>World Population Prospects 2015 - United Nations
Population Department</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Let's see how the world has converged in male life
expectancy at birth over 1950-2015.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=96
src="R%20Notes%20for%20Professionals_files/image1334.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=719 height=432
src="R%20Notes%20for%20Professionals_files/image1335.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=538 id="Picture 79579"
src="R%20Notes%20for%20Professionals_files/image1336.jpg"></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619202">Chapter 126: R memento by
examples</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>This topic is meant to be a memento about the R language
without any text, with self-explanatory examples.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:235.75pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Each example is meant to be as succint
as possible.</p>

<h2 style='margin-top:0in;margin-right:235.75pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619203">Section 126.1: Plotting (using
plot)</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=158
src="R%20Notes%20for%20Professionals_files/image1337.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>Result:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=718
height=371 id="Picture 79670"
src="R%20Notes%20for%20Professionals_files/image1338.jpg"></p>

<h2 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:-.25pt'><a
name="_Toc619204">Section 126.2: Commonly used functions</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=240
src="R%20Notes%20for%20Professionals_files/image1339.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=432
src="R%20Notes%20for%20Professionals_files/image1340.gif"></span></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619205">Section 126.3: Data types</a></h2>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Vectors</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1341.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Matrices</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1342.gif"></span></p>

<h4 style='margin-top:0in;margin-right:0in;margin-bottom:0in;margin-left:.75pt'>Dataframes</h4>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:4.0pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=109
src="R%20Notes%20for%20Professionals_files/image1343.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=127
src="R%20Notes%20for%20Professionals_files/image1344.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=67
src="R%20Notes%20for%20Professionals_files/image1345.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=104
src="R%20Notes%20for%20Professionals_files/image1346.gif"></span><br clear=all
style='page-break-before:always'>
</p>

<h1 style='margin-left:-.25pt'><a name="_Toc619206">Chapter 127: Updating R
version</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:3.8pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>Installing or Updating your Software will give access to new features and
bug fixes. Updating your R installation can be done in a couple of ways. One
Simple way is go to <a href="https://cran.r-project.org/"><span
style='color:#2066B9'>R website</span></a> and download the latest version for
your system.</p>

<h2 style='margin-top:0in;margin-right:3.8pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619207">Section 127.1: Installing from R Website</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;
margin-left:-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:
134%'>To get the latest release go to <a href="https://cran.r-project.org/"><span
style='color:#2066B9'>https://cran.r-project.org/</span></a> and download the
file for your operating system. Open the downloaded file and follow the
on-screen installation steps. All the settings can be left on default unless
you want to change a certain behaviour.</p>

<h2 style='margin-top:0in;margin-right:.7pt;margin-bottom:.25pt;margin-left:
-.25pt;text-align:justify;text-justify:inter-ideograph;line-height:134%'><a
name="_Toc619208">Section 127.2: Updating from within R using installr Package</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.25pt;
margin-left:.75pt'>You can also update R from within R by using a handy package
called <b>installr</b>.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Open R Console (NOT RStudio, this doesn't work from RStudio)
and run the following code to install the package and initiate update.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:11.2pt;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=60
src="R%20Notes%20for%20Professionals_files/image1347.gif"></span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=382 id="Picture 80152"
src="R%20Notes%20for%20Professionals_files/image1348.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619209">Section 127.3: Deciding on
the old packages</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:13.0pt;
margin-left:.75pt'>Once the installation is finished click the Finish button.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>Now it asks if you want to copy your packages fro the older
version of R to Newer version of R. Once you choose yes all the package are
copied to the newer version of R.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=383 id="Picture 80174"
src="R%20Notes%20for%20Professionals_files/image1349.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>After that you can choose if you still want to keep the old
packages or delete.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=380 id="Picture 80177"
src="R%20Notes%20for%20Professionals_files/image1350.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:1.7pt;
margin-left:.75pt'>You can even move your Rprofile.site from older version to
keep all your customised settings.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:10.35pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=379 id="Picture 80193"
src="R%20Notes%20for%20Professionals_files/image1351.jpg"></p>

<h2 style='margin-left:-.25pt'><a name="_Toc619210">Section 127.4: Updating
Packages</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can update your installed packages once the updating of
R is done.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:14.95pt;
margin-left:0in;text-indent:0in;line-height:107%'><img border=0 width=719
height=381 id="Picture 80197"
src="R%20Notes%20for%20Professionals_files/image1352.jpg"></p>

<p class=MsoNormal style='margin-top:0in;margin-right:268.0pt;margin-bottom:
0in;margin-left:.75pt;line-height:145%'>Once its done Restart R and enjoy
exploring.</p>

<h2 style='margin-top:0in;margin-right:268.0pt;margin-bottom:0in;margin-left:
.75pt;line-height:145%'><a name="_Toc619211">Section 127.5: Check R Version</a></h2>

<p class=MsoNormal style='margin-top:0in;margin-right:.7pt;margin-bottom:0in;
margin-left:.75pt'>You can check R Version using the console</p>

<p class=MsoNormal style='margin-top:0in;margin-right:-.4pt;margin-bottom:0in;
margin-left:0in;text-indent:0in;line-height:107%'><span style='font-size:11.0pt;
line-height:107%'><img border=0 width=718 height=26
src="R%20Notes%20for%20Professionals_files/image1353.gif"></span></p>

<h1 style='margin-left:-.25pt'><a name="_Toc619212">Credits</a></h1>

<p class=MsoNormal align=center style='margin-top:0in;margin-right:5.35pt;
margin-bottom:2.3pt;margin-left:6.25pt;text-align:center;line-height:103%'>Thank
you greatly to all the people from Stack Overflow Documentation who helped
provide this content, more changes can be sent to <u><span style='color:#2066B9'>web@petercv.com</span></u>
for new content to be published or updated</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=502
 style='width:376.65pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1855677/"><span style='color:#2066B9'>42</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>Chapters 1, 2, 5, 6, 8, 17, 21, 26, 29, 39,
  76, 92 and 100</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4089949/"><span style='color:#2066B9'>Aaghaz
  Hussain</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3135417/"><span style='color:#2066B9'>Abdou</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  30</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1582413/"><span style='color:#2066B9'>abhiieor</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4052161/"><span style='color:#2066B9'>Agriculturist</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  39</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3082472/"><span style='color:#2066B9'>akraf</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 28 and 120</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3732271/"><span style='color:#2066B9'>akrun</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  23, 52 and 54</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4272725/"><span style='color:#2066B9'>AkselA</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  14, 33 and 105</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5101926/"><span style='color:#2066B9'>Ale</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5143048/"><span style='color:#2066B9'>Alex</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 28, 92, 94 and 115</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2759654/"><span style='color:#2066B9'>Alexandru
  Papiu</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2477097/"><span style='color:#2066B9'>Alexey
  Shiklomanov</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  26 and 99</p>
  </td>
 </tr>
 <tr style='height:14.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2414948/"><span style='color:#2066B9'>alexis_laz</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  39</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4831458/"><span style='color:#2066B9'>Alihan
  Z</span></a><a href="https://stackoverflow.com/users/4831458/"><span
  style='font-family:"Arial",sans-serif;color:#2066B9'>&#305;</span></a><a
  href="https://stackoverflow.com/users/4831458/"><span style='color:#2066B9'>hna</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  77</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4497050/"><span style='color:#2066B9'>alistaire</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  12, 13, 14, 20, 21, 33, 55 and 58</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2195555/"><span style='color:#2066B9'>alko989</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4408787/"><span style='color:#2066B9'>Allen
  Wang</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4186427/"><span style='color:#2066B9'>Andrea
  Cirillo</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 28 and 92</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5097722/"><span style='color:#2066B9'>Andrea
  Ianni </span></a><a href="https://stackoverflow.com/users/5097722/"><span
  style='font-family:"Arial",sans-serif;color:#2066B9'>&#3051;</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  9 and 18</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1472253/"><span style='color:#2066B9'>Andrew
  B</span></a><a href="https://stackoverflow.com/users/1472253/"><span
  style='color:#2066B9'>r</span></a><a
  href="https://stackoverflow.com/users/1472253/"><span style='font-family:
  "Arial",sans-serif;color:#2066B9'>&#275;</span></a><a
  href="https://stackoverflow.com/users/1472253/"><span style='color:#2066B9'>za</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3911324/"><span style='color:#2066B9'>Andrew
  Bryk</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  45 and 56</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/184842/"><span style='color:#2066B9'>AndreyAkinshin</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  21 and 85</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/120440/"><span style='color:#2066B9'>Angelo</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  55</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1863950/"><span style='color:#2066B9'>Artem
  Klevtsov</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  36 and 38</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5101752/"><span style='color:#2066B9'>Arun
  Balakrishnan</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4149615/"><span style='color:#2066B9'>Ashish</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  88</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1681641/"><span style='color:#2066B9'>Atish</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4341440/"><span style='color:#2066B9'>Axeman</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  2, 5, 21, 65 and 66</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/471093/"><span style='color:#2066B9'>baptiste</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  28</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6263364/"><span style='color:#2066B9'>BarkleyBG</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  9</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2125442/"><span style='color:#2066B9'>bartektartanus</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  7, 11 and 37</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5018792/"><span style='color:#2066B9'>Batanichek</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  3 and 18</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/190277/"><span style='color:#2066B9'>Ben
  Bolker</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  22, 50, 59, 67 and 70</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1017276/"><span style='color:#2066B9'>Benjamin</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  21, 29, 51, 68 and 100</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1274516/"><span style='color:#2066B9'>blmoore</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  28</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6049524/"><span style='color:#2066B9'>Boysenb3rry</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  86</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4564432/"><span style='color:#2066B9'>Carl</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/884372/"><span style='color:#2066B9'>Carl
  Witthoft</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3216713/"><span style='color:#2066B9'>Carlos
  Cinelli</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 20, 21, 22, 27 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1583084/"><span style='color:#2066B9'>Carson</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  33</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2874779/"><span style='color:#2066B9'>catastrophic</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  20 and 79</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5545837/"><span style='color:#2066B9'>CClaire</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  47</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3204250/"><span style='color:#2066B9'>cdeterman</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  84</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5002186/"><span style='color:#2066B9'>Christophe
  D.</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 27 and 47</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2706569/"><span style='color:#2066B9'>CL.</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3124909/"><span style='color:#2066B9'>CMichael</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1345455/"><span style='color:#2066B9'>coatless</span></a></p>
  </td>
  <td width=332 valign=top style='width:249.15pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  12, 13, 14 and 36</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:66.35pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=628
 style='width:470.85pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1707938/"><span style='color:#2066B9'>CptNemo</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  122</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/8802/"><span style='color:#2066B9'>Craig
  Vermeer</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  2</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3223138/"><span style='color:#2066B9'>Crops</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7128934/"><span style='color:#2066B9'>d.b</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 119</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3603486/"><span style='color:#2066B9'>dash2</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2962786/"><span style='color:#2066B9'>DataTx</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18 and 70</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5792244/"><span style='color:#2066B9'>Dave2e</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  58</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2902740/"><span style='color:#2066B9'>DaveRGP</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3048453/"><span style='color:#2066B9'>David</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3001626/"><span style='color:#2066B9'>David
  Arenburg</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 23, 30, 51 and 65</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6237093/"><span style='color:#2066B9'>David
  Leal</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  12, 100, 113 and 115</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/712603/"><span style='color:#2066B9'>David
  Robinson</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 22 and 35</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4993513/"><span style='color:#2066B9'>Dawny33</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1623354/"><span style='color:#2066B9'>dayne</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  4, 8, 9, 18 and 39</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1818713/"><span style='color:#2066B9'>Dean
  MacGregor</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  12 and 23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5230146/"><span style='color:#2066B9'>Derwin
  McGeary</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5779570/"><span style='color:#2066B9'>DeveauP</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  34 and 88</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/143305/"><span style='color:#2066B9'>Dirk
  Eddelbuettel</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  36 and 76</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/8160248/"><span style='color:#2066B9'>dmail</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  123 and 127</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/343302/"><span style='color:#2066B9'>dotancohen</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4257137/"><span style='color:#2066B9'>DrPositron</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/511399/"><span style='color:#2066B9'>EDi</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5768077/"><span style='color:#2066B9'>egnha</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5558861/"><span style='color:#2066B9'>Eric
  Lecoutre</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  19, 20 and 66</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3272279/"><span style='color:#2066B9'>FisherDisinformation</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  3, 7, 26, 34, 37 and 68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/8037249/"><span style='color:#2066B9'>Florian</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  124</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1390752/"><span style='color:#2066B9'>FoldedChromatin</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:26.5pt'>
  <td width=170 style='width:127.5pt;padding:0in 0in 0in 0in;height:26.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1191259/"><span style='color:#2066B9'>Frank</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:26.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 2, 4, 6, 8, 12, 13, 14, 15, 16, 17, 20, 21, 23, 30, 31, 34, 41, 42, 46,
  60, 66, 74, 90, 91, 92, 93, 94, 95, 96, 101, 107, 111, 112, 114 and 115</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4752675/"><span style='color:#2066B9'>G5W</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  107 and 108</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/429846/"><span style='color:#2066B9'>Gavin
  Simpson</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  29, 39 and 68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5113617/"><span style='color:#2066B9'>George
  Bonebright</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7175779/"><span style='color:#2066B9'>Giorgos
  K</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  26</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4303504/"><span style='color:#2066B9'>Glen
  Moutrie</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  50</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/903061/"><span style='color:#2066B9'>Gregor</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  6, 17, 18, 21 and 39</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3604745/"><span style='color:#2066B9'>Hack</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  9, 18, 33, 41, 49, 54, 56, 64, 69, 72 and 75</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6621237/"><span style='color:#2066B9'>Hairizuan
  Noorazman</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  9</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4101927/"><span style='color:#2066B9'>herbaman</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  20 and 120</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/429850/"><span style='color:#2066B9'>highBandWidth</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4638884/"><span style='color:#2066B9'>ikashnitsky</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  21, 28, 35, 48, 74, 76, 94, 96, 105, 106, 111 and 125</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2204410/"><span style='color:#2066B9'>Jaap</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  8, 11, 23, 28, 41, 66 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1488801/"><span style='color:#2066B9'>James
  Elderfield</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  40</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2584876/"><span style='color:#2066B9'>jameselmore</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  38</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5913922/"><span style='color:#2066B9'>Jav</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  50</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4024810/"><span style='color:#2066B9'>jcb</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7071093/"><span style='color:#2066B9'>Jeff</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  79</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/180892/"><span style='color:#2066B9'>Jeromy
  Anglim</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  92 and 114</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/993882/"><span style='color:#2066B9'>JHowIX</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  81 and 93</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3093387/"><span style='color:#2066B9'>josliber</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  19, 31 and 32</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3361900/"><span style='color:#2066B9'>Joy</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  103</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1873888/"><span style='color:#2066B9'>JulioSergio</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4401741/"><span style='color:#2066B9'>JvH</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  47</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6045390/"><span style='color:#2066B9'>J_F</span></a></p>
  </td>
  <td width=458 valign=top style='width:343.35pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  102 and 104</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:225.85pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=415
 style='width:311.35pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5869104/"><span style='color:#2066B9'>K.Daisey</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  20, 26, 38 and 62</p>
  </td>
 </tr>
 <tr style='height:14.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4931020/"><span style='color:#2066B9'>kaksat</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 41, 92 and 105</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1953718/"><span style='color:#2066B9'>Karolis
  Koncevi</span></a><a href="https://stackoverflow.com/users/1953718/"><span
  style='font-family:"Arial",sans-serif;color:#2066B9'>&#269;</span></a><a
  href="https://stackoverflow.com/users/1953718/"><span style='color:#2066B9'>ius</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  27, 37, 76, 83, 87 and 101</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/216064/"><span style='color:#2066B9'>Karsten
  W.</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2082782/"><span style='color:#2066B9'>kartoffelsalat</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1042406/"><span style='color:#2066B9'>Kay
  Brodersen</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/943010/"><span style='color:#2066B9'>kdopen</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1 and 6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6256482/"><span style='color:#2066B9'>Ken
  S.</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3494669/"><span style='color:#2066B9'>kitman0804</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  66 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3578190/"><span style='color:#2066B9'>kneijenhuijs</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  8, 12, 29, 41 and 70</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6911592/"><span style='color:#2066B9'>L.V.Rao</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 2, 13, 17, 25, 27, 39 and 46</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3738764/"><span style='color:#2066B9'>leogama</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6864606/"><span style='color:#2066B9'>lmckeogh</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  2 and 41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4895725/"><span style='color:#2066B9'>lmo</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  11, 38, 57, 60, 66 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3250126/"><span style='color:#2066B9'>loki</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  28, 38, 48, 71, 95 and 110</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3250340/"><span style='color:#2066B9'>Lovy</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 43 and 126</p>
  </td>
 </tr>
 <tr style='height:14.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5056851/"><span style='color:#2066B9'>Mallick
  Hossain</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.6pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3857701/"><span style='color:#2066B9'>Marcin
  Kosi</span></a><a href="https://stackoverflow.com/users/3857701/"><span
  style='font-family:"Arial",sans-serif;color:#2066B9'>&#324;</span></a><a
  href="https://stackoverflow.com/users/3857701/"><span style='color:#2066B9'>ski</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.6pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  72</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3412012/"><span style='color:#2066B9'>Mario</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  96</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3491151/"><span style='color:#2066B9'>maRtin</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  26 and 48</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1777111/"><span style='color:#2066B9'>Martin
  Schmelzer</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  61 and 83</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3889242/"><span style='color:#2066B9'>Maximilian
  Kohl</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  89</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3576984/"><span style='color:#2066B9'>MichaelChirico</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  12, 13, 14 and 100</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4606130/"><span style='color:#2066B9'>micstr</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4623381/"><span style='color:#2066B9'>Miha</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  37, 49 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2588184/"><span style='color:#2066B9'>mrip</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  39</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/7462968/"><span style='color:#2066B9'>munirbe</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  106</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/787279/"><span style='color:#2066B9'>Nanami</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  85</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3679857/"><span style='color:#2066B9'>narendra</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  28, 41 and 55</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4912229/"><span style='color:#2066B9'>Nathan
  Werth</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  23 and 29</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1869097/"><span style='color:#2066B9'>nrussell</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  10, 51 and 68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4561056/"><span style='color:#2066B9'>NWaters</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  30</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1040498/"><span style='color:#2066B9'>omar</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  29 and 68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4718512/"><span style='color:#2066B9'>oshun</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1967500/"><span style='color:#2066B9'>PAC</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  20, 100 and 116</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5487987/"><span style='color:#2066B9'>Pankaj
  Sharma</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  80 and 82</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1422451/"><span style='color:#2066B9'>Parfait</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3990677/"><span style='color:#2066B9'>Peter
  Humburg</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  9 and 41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4564247/"><span style='color:#2066B9'>Pierre
  Lafortune</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4165272/"><span style='color:#2066B9'>polka</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 21 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3564318/"><span style='color:#2066B9'>Pragyaditya
  Das</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4983450/"><span style='color:#2066B9'>Psidom</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  31</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/6256241/"><span style='color:#2066B9'>Qaswed</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/827921/"><span style='color:#2066B9'>Rahul
  Saini</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/8167209/"><span style='color:#2066B9'>Raj
  Padmanabhan</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/989691/"><span style='color:#2066B9'>Rappster</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  73</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1150080/"><span style='color:#2066B9'>rcorty</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  118</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4117603/"><span style='color:#2066B9'>RetractedAndRetired</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2824732/"><span style='color:#2066B9'>Robert</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>Chapters 3, 11, 22, 26, 29, 33, 51 and 77</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4296028/"><span style='color:#2066B9'>RobertMc</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  44</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5426909/"><span style='color:#2066B9'>Robin
  Gertenbach</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5573955/"><span style='color:#2066B9'>Roel
  Hogervorst</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  92 and 114</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/169095/"><span style='color:#2066B9'>russellpierce</span></a></p>
  </td>
  <td width=245 valign=top style='width:183.85pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 3, 10, 38, 40, 47 and 96</p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:0in;margin-right:149.1pt;margin-bottom:
0in;margin-left:-28.35pt;text-indent:0in;line-height:107%'>&nbsp;</p>

<table class=TableGrid border=0 cellspacing=0 cellpadding=0 width=517
 style='width:388.1pt;margin-left:1.0pt;border-collapse:collapse'>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4470365/"><span style='color:#2066B9'>Sam
  Firke</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  20 and 21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1691723/"><span style='color:#2066B9'>Sathish</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  5</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4132844/"><span style='color:#2066B9'>scoa</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18 and 55</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5228718/"><span style='color:#2066B9'>seasmith</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  21, 66 and 68</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5113071/"><span style='color:#2066B9'>Shawn
  Mehan</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/202229/"><span style='color:#2066B9'>smci</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  11</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2258393/"><span style='color:#2066B9'>SommerEngineering</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  30 and 93</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5371744/"><span style='color:#2066B9'>Sowmya
  S. Manian</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  42</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/211116/"><span style='color:#2066B9'>Spacedman</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3006597/"><span style='color:#2066B9'>stanekam</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  23</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/163809/"><span style='color:#2066B9'>Stedy</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  76</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2269255/"><span style='color:#2066B9'>Steve_Corrin</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-align:justify;text-justify:inter-ideograph;
  text-indent:0in;line-height:107%'>Chapters 1, 8, 13, 15, 16, 17, 23, 29, 30,
  45, 66, 78 and 90</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5338586/"><span style='color:#2066B9'>Sumedh</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 23 and 77</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2998993/"><span style='color:#2066B9'>Sun
  Bee</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  24</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5977215/"><span style='color:#2066B9'>SymbolixAU</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  12, 14, 33, 41, 47, 50, 53, 60 and 114</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4706952/"><span style='color:#2066B9'>symbolrush</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  26 and 33</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3768552/"><span style='color:#2066B9'>takje</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  11 and 60</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/256662/"><span style='color:#2066B9'>Tal
  Galili</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  107</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1332389/"><span style='color:#2066B9'>TARehman</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  117</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2896857/"><span style='color:#2066B9'>tenCupMaximum</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  46 and 63</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3627607/"><span style='color:#2066B9'>Tensibai</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  3, 19 and 30</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4662189/"><span style='color:#2066B9'>theArun</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  1, 12, 28, 66 and 77</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/496803/"><span style='color:#2066B9'>thelatemail</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  14 and 19</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2338862/"><span style='color:#2066B9'>Thomas</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  6, 18, 76 and 92</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/88066/"><span style='color:#2066B9'>Tim
  Coker</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  54</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4433546/"><span style='color:#2066B9'>TriskalJM</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  21</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/5524090/"><span style='color:#2066B9'>tuomastik</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  47</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/556014/"><span style='color:#2066B9'>Umberto</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  121</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/2100721/"><span style='color:#2066B9'>user2100721</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  18, 21 and 114</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/890739/"><span style='color:#2066B9'>user890739</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  41</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3851145/"><span style='color:#2066B9'>USER_1</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  22 and 97</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3817004/"><span style='color:#2066B9'>Uwe</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  6</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4104728/"><span style='color:#2066B9'>Vedda</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1948347/"><span style='color:#2066B9'>WAF</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  22</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/919800/"><span style='color:#2066B9'>while</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  1</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4911229/"><span style='color:#2066B9'>YCR</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  59, 61, 98 and 109</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/3741048/"><span style='color:#2066B9'>Yun
  Ching</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  28</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/4604054/"><span style='color:#2066B9'>zacdav</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  68 and 96</p>
  </td>
 </tr>
 <tr style='height:14.5pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/1952996/"><span style='color:#2066B9'>zelite</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:14.5pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapter
  20</p>
  </td>
 </tr>
 <tr style='height:12.55pt'>
  <td width=170 valign=top style='width:127.5pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'><a
  href="https://stackoverflow.com/users/680068/"><span style='color:#2066B9'>zx8754</span></a></p>
  </td>
  <td width=347 valign=top style='width:260.6pt;padding:0in 0in 0in 0in;
  height:12.55pt'>
  <p class=MsoNormal style='margin:0in;text-indent:0in;line-height:107%'>Chapters
  41 and 96</p>
  </td>
 </tr>
</table>

</div>

<span style='font-size:10.0pt;line-height:108%;font-family:"Calibri",sans-serif;
color:black'><br clear=all style='page-break-before:always'>
</span>

<div class=WordSection4>

<h1 style='margin-left:-43.15pt'><a name="_Toc619213">You may also like</a></h1>

<p class=MsoNormal style='margin-top:0in;margin-right:-45.95pt;margin-bottom:
0in;margin-left:-47.25pt;text-indent:0in;line-height:107%'><span
style='font-size:11.0pt;line-height:107%'><img border=0 width=726 height=992
id="Group 584300" src="R%20Notes%20for%20Professionals_files/image1354.gif"></span></p>

</div>

</body>

</html>
